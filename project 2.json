{"name":"HiveClip","components":[{"name":"/#Directus/Directus - Signup BACKUP","id":"0f31b8e1-5adc-b92f-e04e-a7a8b8d8d976","graph":{"connections":[{"fromId":"f17de1e0-1c0f-e392-f212-1c45e69b763a","fromProperty":"email","toId":"7af9e771-90a2-b703-b39f-7a7b2f213537","toProperty":"value"},{"fromId":"f17de1e0-1c0f-e392-f212-1c45e69b763a","fromProperty":"password","toId":"ccf18104-eb24-a0ad-238c-1fb1563f27d2","toProperty":"value"},{"fromId":"7af9e771-90a2-b703-b39f-7a7b2f213537","fromProperty":"savedValue","toId":"8e669da7-2f10-3af0-4767-d66cfbdedbad","toProperty":"in-email"},{"fromId":"ccf18104-eb24-a0ad-238c-1fb1563f27d2","fromProperty":"savedValue","toId":"8e669da7-2f10-3af0-4767-d66cfbdedbad","toProperty":"in-password"},{"fromId":"8e669da7-2f10-3af0-4767-d66cfbdedbad","fromProperty":"out-Failure","toId":"57d25afe-dcdd-63ce-642a-7d170d3017f8","toProperty":"Failure"},{"fromId":"8e669da7-2f10-3af0-4767-d66cfbdedbad","fromProperty":"out-error","toId":"57d25afe-dcdd-63ce-642a-7d170d3017f8","toProperty":"error"},{"fromId":"f17de1e0-1c0f-e392-f212-1c45e69b763a","fromProperty":"first_name","toId":"1b1a5c71-9460-165e-2a16-9d668ea87541","toProperty":"value"},{"fromId":"f17de1e0-1c0f-e392-f212-1c45e69b763a","fromProperty":"last_name","toId":"7479a526-9ad3-5c1b-2a41-050ab495f7a8","toProperty":"value"},{"fromId":"1b1a5c71-9460-165e-2a16-9d668ea87541","fromProperty":"savedValue","toId":"8e669da7-2f10-3af0-4767-d66cfbdedbad","toProperty":"in-first_name"},{"fromId":"7479a526-9ad3-5c1b-2a41-050ab495f7a8","fromProperty":"savedValue","toId":"8e669da7-2f10-3af0-4767-d66cfbdedbad","toProperty":"in-last_name"},{"fromId":"8e669da7-2f10-3af0-4767-d66cfbdedbad","fromProperty":"out-Success","toId":"57d25afe-dcdd-63ce-642a-7d170d3017f8","toProperty":"Success"},{"fromId":"f17de1e0-1c0f-e392-f212-1c45e69b763a","fromProperty":"Do","toId":"33431509-e166-7df1-3fd2-b23105529fdc","toProperty":"Do"},{"fromId":"33431509-e166-7df1-3fd2-b23105529fdc","fromProperty":"client","toId":"8e669da7-2f10-3af0-4767-d66cfbdedbad","toProperty":"in-client"},{"fromId":"f17de1e0-1c0f-e392-f212-1c45e69b763a","fromProperty":"role","toId":"cb6a7c4d-1d7f-4969-35da-9d341087cb7e","toProperty":"currentState"},{"fromId":"cb6a7c4d-1d7f-4969-35da-9d341087cb7e","fromProperty":"roleId","toId":"8e669da7-2f10-3af0-4767-d66cfbdedbad","toProperty":"in-role"},{"fromId":"f17de1e0-1c0f-e392-f212-1c45e69b763a","fromProperty":"account","toId":"bae9c472-be6e-dac9-74ae-dd194c32de7a","toProperty":"account"},{"fromId":"bae9c472-be6e-dac9-74ae-dd194c32de7a","fromProperty":"isTrueEv","toId":"4e5271b0-b1b6-b0d5-68c7-f0bf1e083893","toProperty":"Do"},{"fromId":"bae9c472-be6e-dac9-74ae-dd194c32de7a","fromProperty":"isFalseEv","toId":"8e669da7-2f10-3af0-4767-d66cfbdedbad","toProperty":"run"},{"fromId":"33431509-e166-7df1-3fd2-b23105529fdc","fromProperty":"Done","toId":"bae9c472-be6e-dac9-74ae-dd194c32de7a","toProperty":"run"},{"fromId":"4e5271b0-b1b6-b0d5-68c7-f0bf1e083893","fromProperty":"Success","toId":"8e669da7-2f10-3af0-4767-d66cfbdedbad","toProperty":"run"},{"fromId":"4e5271b0-b1b6-b0d5-68c7-f0bf1e083893","fromProperty":"record ID","toId":"8e669da7-2f10-3af0-4767-d66cfbdedbad","toProperty":"in-account"},{"fromId":"f17de1e0-1c0f-e392-f212-1c45e69b763a","fromProperty":"account","toId":"8e669da7-2f10-3af0-4767-d66cfbdedbad","toProperty":"in-account"},{"fromId":"df073e82-a426-0330-f5ef-0058372cc07a","fromProperty":"out-accountData","toId":"4e5271b0-b1b6-b0d5-68c7-f0bf1e083893","toProperty":"Data"},{"fromId":"8e669da7-2f10-3af0-4767-d66cfbdedbad","fromProperty":"out-data","toId":"57d25afe-dcdd-63ce-642a-7d170d3017f8","toProperty":"data"}],"roots":[{"id":"f17de1e0-1c0f-e392-f212-1c45e69b763a","type":"Component Inputs","x":829,"y":370,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"email","plug":"output","type":{"name":"*"},"group":"Data","index":1},{"name":"password","plug":"output","type":{"name":"*"},"group":"Data","index":2},{"name":"first_name","plug":"output","type":{"name":"*"},"group":"Data","index":3},{"name":"last_name","plug":"output","type":{"name":"*"},"group":"Data","index":4},{"name":"role","plug":"output","type":{"name":"*"},"group":"Data","index":5},{"name":"account","plug":"output","type":{"name":"*"},"group":"Data","index":6}],"dynamicports":[],"children":[]},{"id":"57d25afe-dcdd-63ce-642a-7d170d3017f8","type":"Component Outputs","x":1885,"y":383,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":2},{"name":"data","plug":"input","type":{"name":"*"},"index":3}],"dynamicports":[],"children":[]},{"id":"8e669da7-2f10-3af0-4767-d66cfbdedbad","type":"JavaScriptFunction","x":1632,"y":343,"parameters":{"functionScript":"const email = Inputs.email ?? null;\r\nconst password = Inputs.password ?? null;\r\nconst first_name = Inputs.first_name ?? null;\r\nconst last_name = Inputs.last_name ?? null;\r\nconst role = Inputs.role ?? '803edd8b-567d-47f5-9190-241167126ff2';\r\nconst account = Inputs.account ?? null;\r\n\r\nif (!email || !password) return;\r\n\r\nconst client = Inputs.client ?? null;\r\n\r\nconst main = async function () {\r\n    try {\r\n        const user_object = {\r\n            email,\r\n            password,\r\n            first_name,\r\n            last_name,\r\n            role,\r\n            account\r\n        }\r\n        const result = await client.request(Directus.createUser(user_object));\r\n\r\n        Outputs.data = result;\r\n        //console.log({ result });\r\n        Outputs.Success();\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n        Outputs.error = err?.errors.map(i => i.message).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nif (client) {\r\n    main();\r\n}\r\n\r\n"},"ports":[],"dynamicports":[{"name":"in-email","displayName":"email","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-password","displayName":"password","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-first_name","displayName":"first_name","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-last_name","displayName":"last_name","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-role","displayName":"role","plug":"input","type":"*","group":"Inputs","index":8},{"name":"in-account","displayName":"account","plug":"input","type":"*","group":"Inputs","index":9},{"name":"in-client","displayName":"client","plug":"input","type":"*","group":"Inputs","index":10},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":11},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":12},{"name":"out-data","displayName":"data","plug":"output","type":"*","group":"Outputs","index":13},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":14}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"7af9e771-90a2-b703-b39f-7a7b2f213537","type":"String","label":"email","x":1076,"y":516,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"ccf18104-eb24-a0ad-238c-1fb1563f27d2","type":"String","label":"password","x":1074,"y":611,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"1b1a5c71-9460-165e-2a16-9d668ea87541","type":"String","label":"first_name","x":1072.2,"y":706.4000015258789,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"7479a526-9ad3-5c1b-2a41-050ab495f7a8","type":"String","label":"last_name","x":1072.2,"y":798.4000015258789,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"33431509-e166-7df1-3fd2-b23105529fdc","type":"/#Directus/Directus Prefab/Components/Utils/Get a SDK client","x":1071.6571428571426,"y":291.9428591047015,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"cb6a7c4d-1d7f-4969-35da-9d341087cb7e","type":"States","label":"User roles","x":1070.5071428571428,"y":410.34285776955744,"parameters":{"states":"Standard user,Admin","values":"roleId","value-Standard user-roleId":"b8e8b9f6-16b6-4d01-bf29-24f67f38802c","type-roleId":"string"},"ports":[],"dynamicports":[{"type":{"name":"string","allowConnectionsOnly":true},"plug":"output","group":"Values","name":"roleId","index":6},{"type":{"name":"enum","enums":[{"label":"Number","value":"number"},{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Color","value":"color"},{"label":"Text Style","value":"textStyle"}],"allowEditOnly":true},"default":"number","plug":"input","group":"Types","displayName":"roleId","name":"type-roleId","index":7},{"plug":"input","type":"string","group":"Standard user Values","name":"value-Standard user-roleId","displayName":"roleId","editorName":"Standard user|roleId","index":8},{"plug":"input","type":"curve","displayName":"Default","default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"Standard user Transitions","name":"transitiondef-Standard user","index":9},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Standard user","name":"to-Standard user","group":"Go to state","index":10},{"plug":"output","type":"boolean","displayName":"At Standard user","name":"at-Standard user","group":"Current state","index":11},{"plug":"output","type":"signal","displayName":"Has Reached Standard user","name":"reached-Standard user","group":"Current state","index":12},{"plug":"input","type":"string","group":"Admin Values","name":"value-Admin-roleId","displayName":"roleId","editorName":"Admin|roleId","index":13},{"plug":"input","type":"curve","displayName":"Default","default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"Admin Transitions","name":"transitiondef-Admin","index":14},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Admin","name":"to-Admin","group":"Go to state","index":15},{"plug":"output","type":"boolean","displayName":"At Admin","name":"at-Admin","group":"Current state","index":16},{"plug":"output","type":"signal","displayName":"Has Reached Admin","name":"reached-Admin","group":"Current state","index":17},{"plug":"input","type":{"name":"enum","enums":["Standard user","Admin"]},"group":"States","displayName":"State","name":"currentState","default":"Standard user","index":18}],"children":[]},{"id":"4e5271b0-b1b6-b0d5-68c7-f0bf1e083893","type":"/#Directus/Directus Prefab/Components/Data/Directus - Create Data","x":1362.5071428571428,"y":494.34285776955744,"parameters":{"SDK Client to use":"Site SDK Client","collection":"Account","fields":""},"ports":[],"dynamicports":[],"children":[]},{"id":"bae9c472-be6e-dac9-74ae-dd194c32de7a","type":"Expression","x":1365.5071428571428,"y":275.34285776955744,"parameters":{"expression":"account == \"\""},"ports":[],"dynamicports":[{"group":"Parameters","name":"account","type":{"name":"*","editAsType":"string"},"plug":"input","index":7}],"children":[],"metadata":{"merge":{"soureCodePorts":["expression"]}}},{"id":"df073e82-a426-0330-f5ef-0058372cc07a","type":"JavaScriptFunction","x":1347.6435064935065,"y":644.1610395877393,"parameters":{"functionScript":"Outputs.accountData = { \"name\":\"Default account\" }"},"ports":[],"dynamicports":[{"name":"out-accountData","displayName":"accountData","plug":"output","type":"*","group":"Outputs","index":4}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Admin/Directus - Get Collections","id":"a405f3e7-5e42-c999-97ce-cf61750cdb90","graph":{"connections":[{"fromId":"9d27cd97-e0ad-4a05-1dbf-b65358fed3c7","fromProperty":"Collection","toId":"a8a408c4-7916-a3ec-0c25-ed2165c7b805","toProperty":"value"},{"fromId":"a8a408c4-7916-a3ec-0c25-ed2165c7b805","fromProperty":"savedValue","toId":"e2708d41-e281-f041-eefc-f9d6e04ec60d","toProperty":"in-collection"},{"fromId":"9d27cd97-e0ad-4a05-1dbf-b65358fed3c7","fromProperty":"SDK Client to use","toId":"89c0636f-f348-1150-e518-517118ac0aa6","toProperty":"currentState"},{"fromId":"89c0636f-f348-1150-e518-517118ac0aa6","fromProperty":"currentState","toId":"4a990abf-6561-8595-3d6a-ccb5b1ca92ea","toProperty":"in-SDKClient"},{"fromId":"4a990abf-6561-8595-3d6a-ccb5b1ca92ea","fromProperty":"out-Done","toId":"e2708d41-e281-f041-eefc-f9d6e04ec60d","toProperty":"run"},{"fromId":"e2708d41-e281-f041-eefc-f9d6e04ec60d","fromProperty":"out-Done","toId":"8b5456c7-7884-7626-b4ba-9844d6481b79","toProperty":"start"},{"fromId":"9d27cd97-e0ad-4a05-1dbf-b65358fed3c7","fromProperty":"Do","toId":"e9b0eb05-f35c-f75c-4f29-83f452c9cf15","toProperty":"start"},{"fromId":"e9b0eb05-f35c-f75c-4f29-83f452c9cf15","fromProperty":"timerFinished","toId":"4a990abf-6561-8595-3d6a-ccb5b1ca92ea","toProperty":"run"},{"fromId":"8b5456c7-7884-7626-b4ba-9844d6481b79","fromProperty":"timerFinished","toId":"b167fd5c-8c28-451a-cb62-abee975438ba","toProperty":"GetData"},{"fromId":"b167fd5c-8c28-451a-cb62-abee975438ba","fromProperty":"Success","toId":"625246c5-b741-0c2a-f766-80b51b910930","toProperty":"Success"},{"fromId":"b167fd5c-8c28-451a-cb62-abee975438ba","fromProperty":"Failure","toId":"625246c5-b741-0c2a-f766-80b51b910930","toProperty":"Failure"},{"fromId":"b167fd5c-8c28-451a-cb62-abee975438ba","fromProperty":"result","toId":"625246c5-b741-0c2a-f766-80b51b910930","toProperty":"result"},{"fromId":"b167fd5c-8c28-451a-cb62-abee975438ba","fromProperty":"error","toId":"625246c5-b741-0c2a-f766-80b51b910930","toProperty":"error"},{"fromId":"e2708d41-e281-f041-eefc-f9d6e04ec60d","fromProperty":"out-collection","toId":"b167fd5c-8c28-451a-cb62-abee975438ba","toProperty":"collection"},{"fromId":"89c0636f-f348-1150-e518-517118ac0aa6","fromProperty":"currentState","toId":"b167fd5c-8c28-451a-cb62-abee975438ba","toProperty":"client"},{"fromId":"9d27cd97-e0ad-4a05-1dbf-b65358fed3c7","fromProperty":"Collections to get","toId":"7ac016ee-b073-2686-dabe-9b651ea1d913","toProperty":"currentState"},{"fromId":"7ac016ee-b073-2686-dabe-9b651ea1d913","fromProperty":"currentState","toId":"e2708d41-e281-f041-eefc-f9d6e04ec60d","toProperty":"in-what_to_get"},{"fromId":"e2708d41-e281-f041-eefc-f9d6e04ec60d","fromProperty":"out-operation","toId":"b167fd5c-8c28-451a-cb62-abee975438ba","toProperty":"operation"}],"roots":[{"id":"9d27cd97-e0ad-4a05-1dbf-b65358fed3c7","type":"Component Inputs","x":-1079.0081231748763,"y":100.90636972116886,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"Collection","plug":"output","type":{"name":"*"},"group":"Config","index":3},{"name":"SDK Client to use","plug":"output","type":{"name":"*"},"group":"Config","index":1},{"name":"Collections to get","plug":"output","type":{"name":"*"},"group":"Config","index":2}],"dynamicports":[],"children":[]},{"id":"625246c5-b741-0c2a-f766-80b51b910930","type":"Component Outputs","x":515.0278684333703,"y":281.160111934135,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":3},{"name":"result","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"a8a408c4-7916-a3ec-0c25-ed2165c7b805","type":"String","label":"Collection","x":-722.0332761000394,"y":361.13167799207196,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"e2708d41-e281-f041-eefc-f9d6e04ec60d","type":"JavaScriptFunction","x":-254.86883361498792,"y":41.91530084178885,"parameters":{"functionScript":"const what_to_get = Inputs.what_to_get || null;\r\nconst collection = Inputs.collection || null;\r\n\r\nlet operation = \"all\";\r\n\r\nif (what_to_get) {\r\n    switch (what_to_get) {\r\n        case 'All':\r\n            break;\r\n        case 'Single':\r\n            operation = \"single\";\r\n            if (!collection) throw new Error(\"Collection is required!\")\r\n            break;\r\n    }\r\n\r\n    Outputs.operation = operation;\r\n    Outputs.collection = collection;\r\n    Outputs.Done();\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"in-what_to_get","displayName":"what_to_get","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-collection","displayName":"collection","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-operation","displayName":"operation","plug":"output","type":"*","group":"Outputs","index":7},{"name":"out-collection","displayName":"collection","plug":"output","type":"*","group":"Outputs","index":8}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"89c0636f-f348-1150-e518-517118ac0aa6","type":"States","label":"Client type","x":-718.8506931928334,"y":37.23896749460039,"parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To User SDK Client","name":"to-User SDK Client","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At User SDK Client","name":"at-User SDK Client","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached User SDK Client","name":"reached-User SDK Client","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Site SDK Client","name":"to-Site SDK Client","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Site SDK Client","name":"at-Site SDK Client","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Site SDK Client","name":"reached-Site SDK Client","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"group":"States","displayName":"State","name":"currentState","default":"User SDK Client","index":12}],"children":[]},{"id":"4a990abf-6561-8595-3d6a-ccb5b1ca92ea","type":"JavaScriptFunction","x":-480.61664838642173,"y":-21.01383290325157,"parameters":{"functionScript":"const state = Inputs.SDKClient ?? null;\r\n\r\nlet res = true;\r\n\r\nif(state == \"Site SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.SiteClient || null;\r\n    if(!client){\r\n        res = false;\r\n        throw new Error(\"Directus Site Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(state == \"User SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.Client || null;\r\n    if(!client){ \r\n        res = false;\r\n        throw new Error(\"Directus User Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(res){\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-SDKClient","displayName":"SDKClient","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"8b5456c7-7884-7626-b4ba-9844d6481b79","type":"Timer","x":-19.475742653395628,"y":81.6607931070576,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"e9b0eb05-f35c-f75c-4f29-83f452c9cf15","type":"Timer","x":-718,"y":-48,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"b167fd5c-8c28-451a-cb62-abee975438ba","type":"Javascript2","x":281.42005339425987,"y":280.5398400765414,"parameters":{"code":"Script.Inputs = {\r\n    client: \"string\",\r\n    collection: \"string\",\r\n    operation: \"string\"\r\n}\r\n\r\n\r\nScript.Signals.GetData = async function () {\r\n\r\n    const client_selection = Script.Inputs.client || null;\r\n    const sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\n    const collection = Script.Inputs.collection || null;\r\n    const operation = Script.Inputs.operation || null;\r\n\r\n    try {\r\n        if (sdk_client && operation) {\r\n            let result;\r\n            switch (operation) {\r\n                case \"single\":\r\n                    if(!collection) throw new Error(\"Provide valid Collection!\");\r\n                    result = await sdk_client.request(Directus.readCollection(collection));\r\n                    break;\r\n                case \"all\":\r\n                    result = await sdk_client.request(Directus.readCollections());\r\n                    break;\r\n            }\r\n            \r\n            Script.Outputs.result = result;\r\n            if (result) {\r\n                Script.Outputs.Success();\r\n            } else {\r\n                Script.Outputs.Failure();\r\n            }\r\n        } else {\r\n            console.error(err);\r\n\r\n            Script.Outputs.error = \"Invalid configuration!\";\r\n            Script.Outputs.Failure();\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Script.Outputs.error = err?.errors.map(i => i.message).join(\"\\n\") ?? JSON.stringify(err);\r\n        Script.Outputs.Failure();\r\n    }\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"client","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"collection","plug":"input","type":{"name":"string"},"group":"Inputs","index":6},{"name":"operation","plug":"input","type":{"name":"string"},"group":"Inputs","index":7},{"name":"GetData","plug":"input","type":{"name":"signal"},"group":"Inputs","index":8},{"name":"Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":9},{"name":"Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":10},{"name":"result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":11},{"name":"error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":12}],"children":[],"metadata":{"merge":{"soureCodePorts":["code"]}}},{"id":"7ac016ee-b073-2686-dabe-9b651ea1d913","type":"States","x":-720.1412957667296,"y":249.48123674814588,"parameters":{"states":"All,Single","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To All","name":"to-All","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At All","name":"at-All","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached All","name":"reached-All","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Single","name":"to-Single","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Single","name":"at-Single","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Single","name":"reached-Single","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["All","Single"]},"group":"States","displayName":"State","name":"currentState","default":"All","index":12}],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Admin/Directus - Get Fields","id":"383ce740-6191-a554-9028-7d3044eef9f4","graph":{"connections":[{"fromId":"4e559d64-d654-f66c-c2a5-0fd268117d8c","fromProperty":"Collection","toId":"5fd548c6-10eb-abd1-0acf-d14c99911230","toProperty":"value"},{"fromId":"5fd548c6-10eb-abd1-0acf-d14c99911230","fromProperty":"savedValue","toId":"df68bcd4-db77-6d12-8d63-2c6c5280e55b","toProperty":"in-collection"},{"fromId":"4e559d64-d654-f66c-c2a5-0fd268117d8c","fromProperty":"SDK Client to use","toId":"02c8381c-d2f3-0ee7-9f02-439b1c3eb753","toProperty":"currentState"},{"fromId":"02c8381c-d2f3-0ee7-9f02-439b1c3eb753","fromProperty":"currentState","toId":"e4c8fa74-afd7-b160-5424-a9ca2ad65a99","toProperty":"in-SDKClient"},{"fromId":"e4c8fa74-afd7-b160-5424-a9ca2ad65a99","fromProperty":"out-Done","toId":"df68bcd4-db77-6d12-8d63-2c6c5280e55b","toProperty":"run"},{"fromId":"df68bcd4-db77-6d12-8d63-2c6c5280e55b","fromProperty":"out-Done","toId":"e9629800-fb87-b060-ebb7-ccac1a713616","toProperty":"start"},{"fromId":"4e559d64-d654-f66c-c2a5-0fd268117d8c","fromProperty":"Do","toId":"f8b295c8-2af4-d330-5b69-3a1eabe32a5b","toProperty":"start"},{"fromId":"f8b295c8-2af4-d330-5b69-3a1eabe32a5b","fromProperty":"timerFinished","toId":"e4c8fa74-afd7-b160-5424-a9ca2ad65a99","toProperty":"run"},{"fromId":"e9629800-fb87-b060-ebb7-ccac1a713616","fromProperty":"timerFinished","toId":"7eefc4e8-db6d-b2f3-ac40-99a5a59b3727","toProperty":"GetData"},{"fromId":"7eefc4e8-db6d-b2f3-ac40-99a5a59b3727","fromProperty":"Success","toId":"c8fda3aa-fead-25a2-0d7d-271096b1c276","toProperty":"Success"},{"fromId":"7eefc4e8-db6d-b2f3-ac40-99a5a59b3727","fromProperty":"Failure","toId":"c8fda3aa-fead-25a2-0d7d-271096b1c276","toProperty":"Failure"},{"fromId":"7eefc4e8-db6d-b2f3-ac40-99a5a59b3727","fromProperty":"result","toId":"c8fda3aa-fead-25a2-0d7d-271096b1c276","toProperty":"result"},{"fromId":"7eefc4e8-db6d-b2f3-ac40-99a5a59b3727","fromProperty":"error","toId":"c8fda3aa-fead-25a2-0d7d-271096b1c276","toProperty":"error"},{"fromId":"df68bcd4-db77-6d12-8d63-2c6c5280e55b","fromProperty":"out-collection","toId":"7eefc4e8-db6d-b2f3-ac40-99a5a59b3727","toProperty":"collection"},{"fromId":"02c8381c-d2f3-0ee7-9f02-439b1c3eb753","fromProperty":"currentState","toId":"7eefc4e8-db6d-b2f3-ac40-99a5a59b3727","toProperty":"client"},{"fromId":"4e559d64-d654-f66c-c2a5-0fd268117d8c","fromProperty":"Fields to get","toId":"3bd7fb10-fe45-3aae-8470-15771488069f","toProperty":"currentState"},{"fromId":"3bd7fb10-fe45-3aae-8470-15771488069f","fromProperty":"currentState","toId":"df68bcd4-db77-6d12-8d63-2c6c5280e55b","toProperty":"in-what_to_get"},{"fromId":"df68bcd4-db77-6d12-8d63-2c6c5280e55b","fromProperty":"out-operation","toId":"7eefc4e8-db6d-b2f3-ac40-99a5a59b3727","toProperty":"operation"},{"fromId":"4e559d64-d654-f66c-c2a5-0fd268117d8c","fromProperty":"Field","toId":"026ca358-a5e9-7a30-e690-59b4e524eee1","toProperty":"value"},{"fromId":"026ca358-a5e9-7a30-e690-59b4e524eee1","fromProperty":"savedValue","toId":"df68bcd4-db77-6d12-8d63-2c6c5280e55b","toProperty":"in-field"},{"fromId":"df68bcd4-db77-6d12-8d63-2c6c5280e55b","fromProperty":"out-field","toId":"7eefc4e8-db6d-b2f3-ac40-99a5a59b3727","toProperty":"field"}],"roots":[{"id":"4e559d64-d654-f66c-c2a5-0fd268117d8c","type":"Component Inputs","x":-1079.0081231748763,"y":100.90636972116886,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"Collection","plug":"output","type":{"name":"*"},"group":"Config","index":3},{"name":"SDK Client to use","plug":"output","type":{"name":"*"},"group":"Config","index":1},{"name":"Fields to get","plug":"output","type":{"name":"*"},"group":"Config","index":2},{"name":"Field","plug":"output","type":{"name":"*"},"group":"Config","index":4}],"dynamicports":[],"children":[]},{"id":"c8fda3aa-fead-25a2-0d7d-271096b1c276","type":"Component Outputs","x":510.0257307557713,"y":279.1592568630955,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":3},{"name":"result","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"5fd548c6-10eb-abd1-0acf-d14c99911230","type":"String","label":"Collection","x":-722.0332761000394,"y":361.13167799207196,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"df68bcd4-db77-6d12-8d63-2c6c5280e55b","type":"JavaScriptFunction","x":-245.86498579530996,"y":230.99610505502676,"parameters":{"functionScript":"const what_to_get = Inputs.what_to_get || null;\r\nconst collection = Inputs.collection || null;\r\nconst field = Inputs.field || null;\r\n\r\nlet operation = \"all\";\r\nlet collection_out = null;\r\nlet field_out = null;\r\n\r\nif (what_to_get) {\r\n    switch (what_to_get) {\r\n        case 'All':\r\n            operation = \"all\";\r\n            collection_out = null;\r\n            field_out = null;\r\n            break;\r\n        case 'Fields in a Collection':\r\n            operation = \"fields_in_collection\";\r\n            collection_out = collection;\r\n            field_out = null;\r\n            break;\r\n        case 'Single':\r\n            operation = \"single\";\r\n            collection_out = collection;\r\n            field_out = field;\r\n            if (!collection) throw new Error(\"Collection is required!\")\r\n            break;\r\n    }\r\n\r\n    Outputs.operation = operation;\r\n    Outputs.collection = collection_out;\r\n    Outputs.field = field_out;\r\n    Outputs.Done();\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"in-what_to_get","displayName":"what_to_get","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-collection","displayName":"collection","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-field","displayName":"field","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-operation","displayName":"operation","plug":"output","type":"*","group":"Outputs","index":8},{"name":"out-collection","displayName":"collection","plug":"output","type":"*","group":"Outputs","index":9},{"name":"out-field","displayName":"field","plug":"output","type":"*","group":"Outputs","index":10}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"02c8381c-d2f3-0ee7-9f02-439b1c3eb753","type":"States","label":"Client type","x":-718.8506931928334,"y":37.23896749460039,"parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To User SDK Client","name":"to-User SDK Client","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At User SDK Client","name":"at-User SDK Client","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached User SDK Client","name":"reached-User SDK Client","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Site SDK Client","name":"to-Site SDK Client","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Site SDK Client","name":"at-Site SDK Client","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Site SDK Client","name":"reached-Site SDK Client","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"group":"States","displayName":"State","name":"currentState","default":"User SDK Client","index":12}],"children":[]},{"id":"e4c8fa74-afd7-b160-5424-a9ca2ad65a99","type":"JavaScriptFunction","x":-480.61664838642173,"y":-21.01383290325157,"parameters":{"functionScript":"const state = Inputs.SDKClient ?? null;\r\n\r\nlet res = true;\r\n\r\nif(state == \"Site SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.SiteClient || null;\r\n    if(!client){\r\n        res = false;\r\n        throw new Error(\"Directus Site Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(state == \"User SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.Client || null;\r\n    if(!client){ \r\n        res = false;\r\n        throw new Error(\"Directus User Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(res){\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-SDKClient","displayName":"SDKClient","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"e9629800-fb87-b060-ebb7-ccac1a713616","type":"Timer","x":-15.474032511316409,"y":255.73518428749884,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"f8b295c8-2af4-d330-5b69-3a1eabe32a5b","type":"Timer","x":-718,"y":-48,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"7eefc4e8-db6d-b2f3-ac40-99a5a59b3727","type":"Javascript2","x":281.42005339425987,"y":280.5398400765414,"parameters":{"code":"Script.Inputs = {\r\n    client: \"string\",\r\n    collection: \"string\",\r\n    operation: \"string\",\r\n    field: \"string\"\r\n}\r\n\r\n\r\nScript.Signals.GetData = async function () {\r\n\r\n    const client_selection = Script.Inputs.client || null;\r\n    const sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\n    const operation = Script.Inputs.operation || null;\r\n    const collection = Script.Inputs.collection || null;\r\n    const field = Script.Inputs.field || null;\r\n\r\n    try {\r\n        if (sdk_client && operation) {\r\n            let result;\r\n            switch (operation) {\r\n                case \"single\":\r\n                    if(!collection || !field) throw new Error(\"Provide valid Data!\");\r\n                    result = await sdk_client.request(Directus.readField(collection, field));\r\n                    break;\r\n                case \"fields_in_collection\":\r\n                    if(!collection ) throw new Error(\"Provide valid Data!\");\r\n                    result = await sdk_client.request(Directus.readFieldsByCollection(collection));\r\n                    break;\r\n                case \"all\":\r\n                    result = await sdk_client.request(Directus.readFields());\r\n                    break;\r\n            }\r\n            \r\n            Script.Outputs.result = result;\r\n            if (result) {\r\n                Script.Outputs.Success();\r\n            } else {\r\n                Script.Outputs.Failure();\r\n            }\r\n        } else {\r\n            console.error(err);\r\n\r\n            Script.Outputs.error = \"Invalid configuration!\";\r\n            Script.Outputs.Failure();\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Script.Outputs.error = err?.errors.map(i => i.message).join(\"\\n\") ?? JSON.stringify(err);\r\n        Script.Outputs.Failure();\r\n    }\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"client","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"collection","plug":"input","type":{"name":"string"},"group":"Inputs","index":6},{"name":"operation","plug":"input","type":{"name":"string"},"group":"Inputs","index":7},{"name":"field","plug":"input","type":{"name":"string"},"group":"Inputs","index":8},{"name":"GetData","plug":"input","type":{"name":"signal"},"group":"Inputs","index":9},{"name":"Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":10},{"name":"Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":11},{"name":"result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":12},{"name":"error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":13}],"children":[],"metadata":{"merge":{"soureCodePorts":["code"]}}},{"id":"3bd7fb10-fe45-3aae-8470-15771488069f","type":"States","x":-720.1412957667296,"y":249.48123674814588,"parameters":{"states":"All,Fields in a Collection,Single","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To All","name":"to-All","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At All","name":"at-All","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached All","name":"reached-All","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Fields in a Collection","name":"to-Fields in a Collection","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Fields in a Collection","name":"at-Fields in a Collection","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Fields in a Collection","name":"reached-Fields in a Collection","group":"Current state","index":11},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Single","name":"to-Single","group":"Go to state","index":12},{"plug":"output","type":"boolean","displayName":"At Single","name":"at-Single","group":"Current state","index":13},{"plug":"output","type":"signal","displayName":"Has Reached Single","name":"reached-Single","group":"Current state","index":14},{"plug":"input","type":{"name":"enum","enums":["All","Fields in a Collection","Single"]},"group":"States","displayName":"State","name":"currentState","default":"All","index":15}],"children":[]},{"id":"026ca358-a5e9-7a30-e690-59b4e524eee1","type":"String","label":"Field","x":-729,"y":480,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Auth/Directus - Login","id":"e1b9b59a-5eae-96a5-c740-381a58a3e6da","graph":{"connections":[{"fromId":"951c723b-eb07-0ca0-9511-395d737dee48","fromProperty":"email","toId":"f37807c7-7c18-0fdb-fb90-00656a64ccfa","toProperty":"value"},{"fromId":"951c723b-eb07-0ca0-9511-395d737dee48","fromProperty":"password","toId":"7d88a6b3-d5b9-c8a8-7edc-0f0cc967fdc0","toProperty":"value"},{"fromId":"f37807c7-7c18-0fdb-fb90-00656a64ccfa","fromProperty":"savedValue","toId":"5cce1aa1-9e40-ef93-52c7-99a24a695055","toProperty":"in-email"},{"fromId":"7d88a6b3-d5b9-c8a8-7edc-0f0cc967fdc0","fromProperty":"savedValue","toId":"5cce1aa1-9e40-ef93-52c7-99a24a695055","toProperty":"in-password"},{"fromId":"5cce1aa1-9e40-ef93-52c7-99a24a695055","fromProperty":"out-Failure","toId":"7e6622c2-50f2-2809-4c94-9c4f767b5061","toProperty":"Failure"},{"fromId":"5cce1aa1-9e40-ef93-52c7-99a24a695055","fromProperty":"out-error","toId":"7e6622c2-50f2-2809-4c94-9c4f767b5061","toProperty":"error"},{"fromId":"5cce1aa1-9e40-ef93-52c7-99a24a695055","fromProperty":"out-Success","toId":"70accb28-bad3-ff06-4fd6-77a4b8caf2ea","toProperty":"Do"},{"fromId":"70accb28-bad3-ff06-4fd6-77a4b8caf2ea","fromProperty":"Success","toId":"7e6622c2-50f2-2809-4c94-9c4f767b5061","toProperty":"Success"},{"fromId":"70accb28-bad3-ff06-4fd6-77a4b8caf2ea","fromProperty":"Failure","toId":"7e6622c2-50f2-2809-4c94-9c4f767b5061","toProperty":"Failure"},{"fromId":"70accb28-bad3-ff06-4fd6-77a4b8caf2ea","fromProperty":"error","toId":"7e6622c2-50f2-2809-4c94-9c4f767b5061","toProperty":"error"},{"fromId":"5cce1aa1-9e40-ef93-52c7-99a24a695055","fromProperty":"out-data","toId":"7e6622c2-50f2-2809-4c94-9c4f767b5061","toProperty":"data"},{"fromId":"70accb28-bad3-ff06-4fd6-77a4b8caf2ea","fromProperty":"Success","toId":"bdca1eeb-3b74-0026-f6f1-431d53240c01","toProperty":"sendEvent"},{"fromId":"951c723b-eb07-0ca0-9511-395d737dee48","fromProperty":"Do","toId":"5cce1aa1-9e40-ef93-52c7-99a24a695055","toProperty":"run"}],"roots":[{"id":"951c723b-eb07-0ca0-9511-395d737dee48","type":"Component Inputs","x":-415,"y":-1,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"email","plug":"output","type":{"name":"*"},"group":"Data","index":1},{"name":"password","plug":"output","type":{"name":"*"},"group":"Data","index":2}],"dynamicports":[],"children":[]},{"id":"7e6622c2-50f2-2809-4c94-9c4f767b5061","type":"Component Outputs","x":545,"y":0,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":2},{"name":"data","plug":"input","type":{"name":"*"},"index":3}],"dynamicports":[],"children":[]},{"id":"5cce1aa1-9e40-ef93-52c7-99a24a695055","type":"JavaScriptFunction","x":62.60000000000002,"y":0.40000152587890625,"parameters":{"functionScript":"const email = Inputs.email;\r\nconst password = Inputs.password;\r\n\r\nif (!email || !password) return;\r\n\r\nconst client = Noodl.Objects.DirectusSDK?.Client ?? null;\r\n\r\nif(!client) throw new Error(\"Config Error: No SDK Client found!\");\r\n\r\nconst main = async function () {\r\n    try {\r\n        const result = await client.login(email, password);\r\n\r\n        Noodl.Objects.DirectusSDK.token = result;\r\n        Outputs.data = result;\r\n        //console.log({ result });\r\n        Outputs.Success();\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n        Outputs.error = err?.errors.map(i => i.message).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nif (client) {\r\n    main();\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"in-email","displayName":"email","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-password","displayName":"password","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-data","displayName":"data","plug":"output","type":"*","group":"Outputs","index":8},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":9}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"f37807c7-7c18-0fdb-fb90-00656a64ccfa","type":"String","label":"email","x":-168.19999999999993,"y":144.5333353678385,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"7d88a6b3-d5b9-c8a8-7edc-0f0cc967fdc0","type":"String","label":"password","x":-170,"y":240,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"70accb28-bad3-ff06-4fd6-77a4b8caf2ea","type":"/#Directus/Directus Prefab/Components/User/Directus - Get Current User","x":295.08000000000004,"y":-74.01333109537757,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"bdca1eeb-3b74-0026-f6f1-431d53240c01","type":"Event Sender","x":547.5133333333333,"y":-111.77999750773108,"parameters":{"channelName":"User-Logged-In"},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Auth/Directus - Logout","id":"47286deb-8b2a-9e54-7d4c-3f09eafe329e","graph":{"connections":[{"fromId":"98da1953-26e6-33a8-4342-b656d8e1f3b9","fromProperty":"out-Failure","toId":"2e2c564b-7f22-0882-d7bb-e20dc7985d9f","toProperty":"Failure"},{"fromId":"98da1953-26e6-33a8-4342-b656d8e1f3b9","fromProperty":"out-error","toId":"2e2c564b-7f22-0882-d7bb-e20dc7985d9f","toProperty":"error"},{"fromId":"98da1953-26e6-33a8-4342-b656d8e1f3b9","fromProperty":"out-Success","toId":"22a5ffc3-4a01-1ff3-1734-cb52f6fce93b","toProperty":"Do"},{"fromId":"22a5ffc3-4a01-1ff3-1734-cb52f6fce93b","fromProperty":"Success","toId":"2e2c564b-7f22-0882-d7bb-e20dc7985d9f","toProperty":"Success"},{"fromId":"22a5ffc3-4a01-1ff3-1734-cb52f6fce93b","fromProperty":"Failure","toId":"2e2c564b-7f22-0882-d7bb-e20dc7985d9f","toProperty":"Failure"},{"fromId":"22a5ffc3-4a01-1ff3-1734-cb52f6fce93b","fromProperty":"error","toId":"2e2c564b-7f22-0882-d7bb-e20dc7985d9f","toProperty":"error"},{"fromId":"98da1953-26e6-33a8-4342-b656d8e1f3b9","fromProperty":"out-Success","toId":"4a45e4ac-0f71-3cca-9382-c31aa3fd54d1","toProperty":"sendEvent"},{"fromId":"ebcda4c9-db67-d8ec-18fc-1f25ce26cbd0","fromProperty":"Do","toId":"98da1953-26e6-33a8-4342-b656d8e1f3b9","toProperty":"run"}],"roots":[{"id":"ebcda4c9-db67-d8ec-18fc-1f25ce26cbd0","type":"Component Inputs","x":837,"y":398,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0}],"dynamicports":[],"children":[]},{"id":"2e2c564b-7f22-0882-d7bb-e20dc7985d9f","type":"Component Outputs","x":1568,"y":399,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"98da1953-26e6-33a8-4342-b656d8e1f3b9","type":"JavaScriptFunction","x":1086,"y":399,"parameters":{"functionScript":"const client = Noodl.Objects.DirectusSDK?.Client ?? null;\r\n\r\nconst main = async function () {\r\n    try {\r\n        const result = await client.logout();\r\n\r\n        Outputs.data = result;\r\n        //console.log({ result });\r\n        Outputs.Success();\r\n        \r\n    } catch (err) {\r\n        console.error(err);\r\n        Outputs.error = err?.errors.map(i => i.message ).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nif (client) {\r\n    main();\r\n}"},"ports":[],"dynamicports":[{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":4},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-data","displayName":"data","plug":"output","type":"*","group":"Outputs","index":6},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":7}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"22a5ffc3-4a01-1ff3-1734-cb52f6fce93b","type":"/#Directus/Directus Prefab/Components/User/Directus - Get Current User","x":1318,"y":325,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"4a45e4ac-0f71-3cca-9382-c31aa3fd54d1","type":"Event Sender","x":1311,"y":192,"parameters":{"channelName":"User-Logged-Out"},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Auth/Directus - Refresh Token","id":"acc3a599-6653-f52a-984d-ce5bd8c40427","graph":{"connections":[{"fromId":"5322f698-7781-d428-118a-c00ed84bb400","fromProperty":"out-Success","toId":"601fad23-0a87-e83a-5afa-bf2ac51dcf72","toProperty":"Do"},{"fromId":"601fad23-0a87-e83a-5afa-bf2ac51dcf72","fromProperty":"Success","toId":"2e988a06-b956-62af-0172-99367907ba82","toProperty":"do"},{"fromId":"601fad23-0a87-e83a-5afa-bf2ac51dcf72","fromProperty":"Failure","toId":"2e988a06-b956-62af-0172-99367907ba82","toProperty":"do"},{"fromId":"bd35d7fe-fe71-9a10-2f2a-91a97e907d09","fromProperty":"stored","toId":"2e988a06-b956-62af-0172-99367907ba82","toProperty":"do"},{"fromId":"5322f698-7781-d428-118a-c00ed84bb400","fromProperty":"out-Failure","toId":"9388f3fb-5a9c-e9c2-1c2f-d689022d65ae","toProperty":"run"},{"fromId":"9388f3fb-5a9c-e9c2-1c2f-d689022d65ae","fromProperty":"out-Done","toId":"bd35d7fe-fe71-9a10-2f2a-91a97e907d09","toProperty":"store"},{"fromId":"601fad23-0a87-e83a-5afa-bf2ac51dcf72","fromProperty":"Success","toId":"98041b2a-ef27-cde0-f555-5da3be97015f","toProperty":"Success"},{"fromId":"601fad23-0a87-e83a-5afa-bf2ac51dcf72","fromProperty":"Failure","toId":"98041b2a-ef27-cde0-f555-5da3be97015f","toProperty":"Failure"},{"fromId":"601fad23-0a87-e83a-5afa-bf2ac51dcf72","fromProperty":"error","toId":"98041b2a-ef27-cde0-f555-5da3be97015f","toProperty":"error"},{"fromId":"5322f698-7781-d428-118a-c00ed84bb400","fromProperty":"out-error","toId":"98041b2a-ef27-cde0-f555-5da3be97015f","toProperty":"error"},{"fromId":"bd35d7fe-fe71-9a10-2f2a-91a97e907d09","fromProperty":"stored","toId":"98041b2a-ef27-cde0-f555-5da3be97015f","toProperty":"Failure"},{"fromId":"e9f42984-b117-d8a5-642a-20267db9517d","fromProperty":"event-channel","toId":"9e52bef7-f023-82bf-1260-3eae687f6974","toProperty":"in-uuid"},{"fromId":"601fad23-0a87-e83a-5afa-bf2ac51dcf72","fromProperty":"Success","toId":"9e52bef7-f023-82bf-1260-3eae687f6974","toProperty":"run"},{"fromId":"bd35d7fe-fe71-9a10-2f2a-91a97e907d09","fromProperty":"stored","toId":"7e47cd4e-dc3b-838c-48e3-ff07fa579a39","toProperty":"run"},{"fromId":"e9f42984-b117-d8a5-642a-20267db9517d","fromProperty":"event-channel","toId":"7e47cd4e-dc3b-838c-48e3-ff07fa579a39","toProperty":"in-uuid"},{"fromId":"9599f6c6-bcb8-c45a-5f71-2a0d15b01abb","fromProperty":"done","toId":"5322f698-7781-d428-118a-c00ed84bb400","toProperty":"run"},{"fromId":"fb54f0b4-1a1d-13d1-c695-84c87843a9c4","fromProperty":"eventReceived","toId":"05b680a8-6944-cfce-1081-f030002e34b6","toProperty":"Fetch"},{"fromId":"e9f42984-b117-d8a5-642a-20267db9517d","fromProperty":"Do","toId":"05b680a8-6944-cfce-1081-f030002e34b6","toProperty":"Fetch"},{"fromId":"05b680a8-6944-cfce-1081-f030002e34b6","fromProperty":"Done","toId":"9599f6c6-bcb8-c45a-5f71-2a0d15b01abb","toProperty":"do"}],"roots":[{"id":"e9f42984-b117-d8a5-642a-20267db9517d","type":"Component Inputs","x":1314,"y":862,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"event-channel","plug":"output","type":{"name":"*"},"index":1}],"dynamicports":[],"children":[]},{"id":"5322f698-7781-d428-118a-c00ed84bb400","type":"JavaScriptFunction","x":1828,"y":932,"parameters":{"functionScript":"//const client = Noodl.Objects.DirectusSDK.Client || null;\r\n\r\nconst system_retry_cycle_limit = 10; // Number of retry cycles that check if the SDK Client and the refresh method are available for use\r\nconst system_retry_cycle_duration = 1000; // Delay between each retry cycle, in milliseconds\r\n\r\nconst retry_loop_limit = 3; // Number of Request Execution loops, per retry cycle\r\nconst retry_loop_duration = 250; // Delay between each loop execution, in milliseconds\r\n\r\n////////////////////////////////////////////\r\n\r\nconst sleep = async function (ms) {\r\n    return new Promise(resolve => {\r\n        setTimeout(resolve, ms);\r\n    });\r\n}\r\n\r\nconst main = async function (client, count) {\r\n    try {\r\n        const result = await client.refresh();\r\n\r\n        Outputs.data = result;\r\n        Outputs.Success();\r\n        return true;\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        if (count < retry_loop_limit) {\r\n            count++;\r\n            await sleep(count * retry_loop_duration);\r\n            await main();\r\n        } else {\r\n            Outputs.error = err?.errors?.map(i => i.message).join(\"\\n\");\r\n            Outputs.Failure();\r\n        }\r\n    }\r\n    return false;\r\n}\r\n\r\nlet count = 0;\r\n\r\ndo {\r\n    count++;\r\n    let condition = Boolean(Noodl.Objects[\"SDK Client set\"]) && Boolean(Noodl.Objects.DirectusSDK.Client && Boolean(Noodl.Objects.DirectusSDK.Client.refresh));\r\n\r\n    if (condition) {\r\n        const client = Noodl.Objects.DirectusSDK.Client;\r\n        const res = await main(client, count);\r\n\r\n        if (res) count = 0;\r\n\r\n    } else {\r\n        await sleep(system_retry_cycle_duration);\r\n    }\r\n\r\n} while (count > 0 && count < system_retry_cycle_limit);\r\n\r\nif(count != 0){\r\n    Outputs.error = \"System Error\";\r\n    Outputs.Failure();\r\n}"},"ports":[],"dynamicports":[{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":4},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-data","displayName":"data","plug":"output","type":"*","group":"Outputs","index":6},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":7}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"601fad23-0a87-e83a-5afa-bf2ac51dcf72","type":"/#Directus/Directus Prefab/Components/User/Directus - Get Current User","x":2061,"y":858,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"bd35d7fe-fe71-9a10-2f2a-91a97e907d09","type":"SetModelProperties","x":2270,"y":1047,"parameters":{"modelId":"Current User","properties":"authenticated","type-authenticated":"boolean"},"ports":[],"dynamicports":[{"type":{"name":"boolean"},"plug":"input","group":"Property Values","displayName":"authenticated","name":"prop-authenticated","index":6},{"type":{"name":"enum","enums":[{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Number","value":"number"},{"label":"Date","value":"date"},{"label":"Array","value":"array"},{"label":"Object","value":"object"},{"label":"Any","value":"*"}],"allowEditOnly":true},"plug":"input","group":"Property Types","displayName":"authenticated","default":"*","name":"type-authenticated","index":7}],"children":[]},{"id":"9599f6c6-bcb8-c45a-5f71-2a0d15b01abb","type":"Set Variable","label":"Token Refresh Process = on","x":1792,"y":768,"parameters":{"name":"Token Refresh Process","setWith":"boolean","value":true},"ports":[],"dynamicports":[{"type":"boolean","plug":"input","group":"General","name":"value","displayName":"Value","index":4}],"children":[]},{"id":"2e988a06-b956-62af-0172-99367907ba82","type":"Set Variable","label":"Token Refresh Process = off","x":2597,"y":710,"parameters":{"name":"Token Refresh Process","setWith":"boolean","value":false},"ports":[],"dynamicports":[{"type":"boolean","plug":"input","group":"General","name":"value","displayName":"Value","index":4}],"children":[]},{"id":"9388f3fb-5a9c-e9c2-1c2f-d689022d65ae","type":"JavaScriptFunction","label":"Reset User Object","x":2061,"y":1062,"parameters":{"functionScript":"const user = Noodl.Objects[\"Current User\"] || null;\r\n\r\nif(user){\r\n    const obj = user.data;\r\n    for(const property in obj){\r\n        delete obj[property];\r\n    }\r\n    user.authenticated = false\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":4}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"fb54f0b4-1a1d-13d1-c695-84c87843a9c4","type":"Event Receiver","x":1315,"y":733,"parameters":{"consume":"always","channelName":"Check User Session"},"ports":[],"dynamicports":[],"children":[]},{"id":"98041b2a-ef27-cde0-f555-5da3be97015f","type":"Component Outputs","x":2632,"y":873,"parameters":{},"ports":[{"name":"Success","plug":"input","type":{"name":"*"},"index":1},{"name":"Failure","plug":"input","type":{"name":"*"},"index":2},{"name":"error","plug":"input","type":{"name":"*"},"index":3}],"dynamicports":[],"children":[]},{"id":"9e52bef7-f023-82bf-1260-3eae687f6974","type":"JavaScriptFunction","label":"Send Event - Refresh Token Success","x":2255,"y":718,"parameters":{"functionScript":"const uuid = Inputs.uuid ?? null;\r\n\r\nif(uuid){\r\n    Noodl.Events.emit(uuid)\r\n}"},"ports":[],"dynamicports":[{"name":"in-uuid","displayName":"uuid","plug":"input","type":"*","group":"Inputs","index":4}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"7e47cd4e-dc3b-838c-48e3-ff07fa579a39","type":"JavaScriptFunction","label":"Send Event - Refresh Token Failure","x":2529,"y":1226,"parameters":{"functionScript":"const uuid = Inputs.uuid ?? null;\r\n\r\nif(uuid){\r\n    Noodl.Events.emit(uuid)\r\n}"},"ports":[],"dynamicports":[{"name":"in-uuid","displayName":"uuid","plug":"input","type":"*","group":"Inputs","index":4}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"05b680a8-6944-cfce-1081-f030002e34b6","type":"/#Directus/Directus Prefab/Components/Utils/Check Refresh Process status","x":1575.6363636363635,"y":780.9090909090909,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[],"comments":[{"text":"Refreshes the Auth Token for the Logged-in User.","width":465,"height":68,"fill":"transparent","x":1664,"y":606,"id":"3b73a5fb-539f-0054-2c55-116726672b34","largeFont":true,"color":"danger"}]}},{"name":"/#Directus/Directus Prefab/Components/Auth/Directus - Request Password Reset","id":"2a5e6c01-e7bf-82f6-70ad-54d865643785","graph":{"connections":[{"fromId":"8fce7bce-7a94-b681-17ba-fae681341924","fromProperty":"email","toId":"f30ba959-db32-12d0-3972-1bb48edf2ed1","toProperty":"value"},{"fromId":"f30ba959-db32-12d0-3972-1bb48edf2ed1","fromProperty":"savedValue","toId":"691cbe6f-c874-db1b-d45d-0dd43551cbc6","toProperty":"in-email"},{"fromId":"691cbe6f-c874-db1b-d45d-0dd43551cbc6","fromProperty":"out-Failure","toId":"c0a113f1-b0f0-f5bd-06f5-d9abf9d2c453","toProperty":"Failure"},{"fromId":"691cbe6f-c874-db1b-d45d-0dd43551cbc6","fromProperty":"out-error","toId":"c0a113f1-b0f0-f5bd-06f5-d9abf9d2c453","toProperty":"error"},{"fromId":"691cbe6f-c874-db1b-d45d-0dd43551cbc6","fromProperty":"out-Success","toId":"c0a113f1-b0f0-f5bd-06f5-d9abf9d2c453","toProperty":"Success"},{"fromId":"8fce7bce-7a94-b681-17ba-fae681341924","fromProperty":"reset_url","toId":"421825a5-1838-5a22-68c5-0464cc53a93b","toProperty":"value"},{"fromId":"421825a5-1838-5a22-68c5-0464cc53a93b","fromProperty":"savedValue","toId":"691cbe6f-c874-db1b-d45d-0dd43551cbc6","toProperty":"in-reset_url"},{"fromId":"8fce7bce-7a94-b681-17ba-fae681341924","fromProperty":"website_url","toId":"c3625480-f2a6-8388-6e0a-e8b165510170","toProperty":"value"},{"fromId":"c3625480-f2a6-8388-6e0a-e8b165510170","fromProperty":"savedValue","toId":"691cbe6f-c874-db1b-d45d-0dd43551cbc6","toProperty":"in-website_url"},{"fromId":"8fce7bce-7a94-b681-17ba-fae681341924","fromProperty":"Do","toId":"691cbe6f-c874-db1b-d45d-0dd43551cbc6","toProperty":"run"}],"roots":[{"id":"8fce7bce-7a94-b681-17ba-fae681341924","type":"Component Inputs","x":829,"y":370,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"email","plug":"output","type":{"name":"*"},"group":"Data","index":3},{"name":"reset_url","plug":"output","type":{"name":"*"},"group":"Config (Provide only one)","index":1},{"name":"website_url","plug":"output","type":{"name":"*"},"group":"Config (Provide only one)","index":2}],"dynamicports":[],"children":[]},{"id":"c0a113f1-b0f0-f5bd-06f5-d9abf9d2c453","type":"Component Outputs","x":1576,"y":455,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"691cbe6f-c874-db1b-d45d-0dd43551cbc6","type":"JavaScriptFunction","x":1307,"y":372,"parameters":{"functionScript":"const user_email = Inputs.email ?? null;\r\nconst website_url = Inputs.website_url ?? null;\r\nconst reset_url = Inputs.reset_url ?? (website_url ? website_url + \"/reset-password\" : null);  // Default: If the 'website_url' has been provided, then: \"your-website-url/request-password-reset\", else: 'your directus project's default password reset page'\r\n\r\nif (!user_email) return;\r\n\r\nconst client = Noodl.Objects.DirectusSDK?.Client ?? null;\r\n\r\nif(!client) throw new Error(\"Config Error: No SDK Client found!\");\r\n\r\nconst main = async function () {\r\n    try {\r\n        const config = {\r\n            user_email\r\n        };\r\n        if(reset_url) config.reset_url = reset_url;\r\n\r\n        const result = await client.request( Directus.passwordRequest(Object.values(config).join()) );\r\n\r\n        Outputs.data = result;\r\n        //console.log({ result });\r\n        Outputs.Success();\r\n        \r\n    } catch (err) {\r\n        console.error(err);\r\n        Outputs.error = err?.errors.map(i => i.message ).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nif (client) {\r\n    main();\r\n}"},"ports":[],"dynamicports":[{"name":"in-email","displayName":"email","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-website_url","displayName":"website_url","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-reset_url","displayName":"reset_url","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":8},{"name":"out-data","displayName":"data","plug":"output","type":"*","group":"Outputs","index":9},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":10}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"f30ba959-db32-12d0-3972-1bb48edf2ed1","type":"String","label":"email","x":1078,"y":587,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"421825a5-1838-5a22-68c5-0464cc53a93b","type":"String","label":"reset_url","x":1079.1,"y":489.4000015258789,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"c3625480-f2a6-8388-6e0a-e8b165510170","type":"String","label":"website_url","x":1078.8200000000002,"y":684.4800018310547,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Auth/Directus - Reset Password","id":"e1a9d56f-b66b-6f1a-5ce2-044b01928202","graph":{"connections":[{"fromId":"a1fd8c72-a2b0-95a1-84f0-95b6a6456be1","fromProperty":"password","toId":"c65699be-f907-1920-6967-65719e13bd31","toProperty":"value"},{"fromId":"c65699be-f907-1920-6967-65719e13bd31","fromProperty":"savedValue","toId":"3926a603-3abf-2b95-e15d-eba4535faefb","toProperty":"in-password"},{"fromId":"3926a603-3abf-2b95-e15d-eba4535faefb","fromProperty":"out-Failure","toId":"9b0089ad-e217-7c19-9505-a56affa36f28","toProperty":"Failure"},{"fromId":"3926a603-3abf-2b95-e15d-eba4535faefb","fromProperty":"out-error","toId":"9b0089ad-e217-7c19-9505-a56affa36f28","toProperty":"error"},{"fromId":"3926a603-3abf-2b95-e15d-eba4535faefb","fromProperty":"out-Success","toId":"9b0089ad-e217-7c19-9505-a56affa36f28","toProperty":"Success"},{"fromId":"a1fd8c72-a2b0-95a1-84f0-95b6a6456be1","fromProperty":"reset_token","toId":"7780d47d-9ed3-4231-4f99-e98e96bbf299","toProperty":"value"},{"fromId":"7780d47d-9ed3-4231-4f99-e98e96bbf299","fromProperty":"savedValue","toId":"3926a603-3abf-2b95-e15d-eba4535faefb","toProperty":"in-reset_token"},{"fromId":"a1fd8c72-a2b0-95a1-84f0-95b6a6456be1","fromProperty":"Do","toId":"3926a603-3abf-2b95-e15d-eba4535faefb","toProperty":"run"}],"roots":[{"id":"a1fd8c72-a2b0-95a1-84f0-95b6a6456be1","type":"Component Inputs","x":829,"y":370,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"password","plug":"output","type":{"name":"*"},"group":"Data","index":2},{"name":"reset_token","plug":"output","type":{"name":"*"},"group":"Data","index":3}],"dynamicports":[],"children":[]},{"id":"9b0089ad-e217-7c19-9505-a56affa36f28","type":"Component Outputs","x":1579,"y":431,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"3926a603-3abf-2b95-e15d-eba4535faefb","type":"JavaScriptFunction","x":1307,"y":372,"parameters":{"functionScript":"const password = Inputs.password ?? null;\r\nconst reset_token = Inputs.reset_token ?? null;\r\n\r\nif (!password || !reset_token) return;\r\n\r\nconst client = Noodl.Objects.DirectusSDK?.Client ?? null;\r\n\r\nif(!client) throw new Error(\"Config Error: No SDK Client found!\");\r\n\r\nconst main = async function () {\r\n    try {\r\n        const result = await client.request(Directus.passwordReset(reset_token, password));\r\n\r\n        Outputs.data = result;\r\n        //console.log({ result });\r\n        Outputs.Success();\r\n        \r\n    } catch (err) {\r\n        console.error(err);\r\n        Outputs.error = err?.errors.map(i => i.message ).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nif (client) {\r\n    main();\r\n}"},"ports":[],"dynamicports":[{"name":"in-password","displayName":"password","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-reset_token","displayName":"reset_token","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-data","displayName":"data","plug":"output","type":"*","group":"Outputs","index":8},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":9}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"c65699be-f907-1920-6967-65719e13bd31","type":"String","label":"password","x":1078,"y":505,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"7780d47d-9ed3-4231-4f99-e98e96bbf299","type":"String","label":"reset_token","x":1075.6,"y":601.6500015258789,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Auth/Directus - Signup","id":"16e4e692-8378-d6a0-a0e8-44dfbd5661d9","graph":{"connections":[{"fromId":"2c33e3be-45e9-a6ba-9b2c-28aae0c94e89","fromProperty":"email","toId":"4f64d6c0-2b0d-7f30-f194-78bd03d57adc","toProperty":"value"},{"fromId":"2c33e3be-45e9-a6ba-9b2c-28aae0c94e89","fromProperty":"password","toId":"168a008e-1d5b-ef00-7f14-7ec09ca4b302","toProperty":"value"},{"fromId":"4f64d6c0-2b0d-7f30-f194-78bd03d57adc","fromProperty":"savedValue","toId":"53f60b96-2436-f2ca-4b75-0a7f3ceaa7e2","toProperty":"in-email"},{"fromId":"168a008e-1d5b-ef00-7f14-7ec09ca4b302","fromProperty":"savedValue","toId":"53f60b96-2436-f2ca-4b75-0a7f3ceaa7e2","toProperty":"in-password"},{"fromId":"53f60b96-2436-f2ca-4b75-0a7f3ceaa7e2","fromProperty":"out-Failure","toId":"dcc2b6d4-5909-5444-388c-5c3797b53755","toProperty":"Failure"},{"fromId":"53f60b96-2436-f2ca-4b75-0a7f3ceaa7e2","fromProperty":"out-error","toId":"dcc2b6d4-5909-5444-388c-5c3797b53755","toProperty":"error"},{"fromId":"2c33e3be-45e9-a6ba-9b2c-28aae0c94e89","fromProperty":"first_name","toId":"23ec9c00-2c5d-ed4d-97b4-5d85b03e8c76","toProperty":"value"},{"fromId":"2c33e3be-45e9-a6ba-9b2c-28aae0c94e89","fromProperty":"last_name","toId":"1cc94418-5daa-84d8-b92e-3c19f188c1ac","toProperty":"value"},{"fromId":"23ec9c00-2c5d-ed4d-97b4-5d85b03e8c76","fromProperty":"savedValue","toId":"53f60b96-2436-f2ca-4b75-0a7f3ceaa7e2","toProperty":"in-first_name"},{"fromId":"1cc94418-5daa-84d8-b92e-3c19f188c1ac","fromProperty":"savedValue","toId":"53f60b96-2436-f2ca-4b75-0a7f3ceaa7e2","toProperty":"in-last_name"},{"fromId":"53f60b96-2436-f2ca-4b75-0a7f3ceaa7e2","fromProperty":"out-Success","toId":"dcc2b6d4-5909-5444-388c-5c3797b53755","toProperty":"Success"},{"fromId":"2c33e3be-45e9-a6ba-9b2c-28aae0c94e89","fromProperty":"Do","toId":"6229c63e-e566-8bb0-e58a-4482c358df08","toProperty":"Do"},{"fromId":"6229c63e-e566-8bb0-e58a-4482c358df08","fromProperty":"client","toId":"53f60b96-2436-f2ca-4b75-0a7f3ceaa7e2","toProperty":"in-client"},{"fromId":"6a74b40b-c916-0746-1368-57fa18ce5a1f","fromProperty":"isTrueEv","toId":"65eab004-2350-1531-8518-5e7683777a81","toProperty":"Do"},{"fromId":"c53e1ff5-2398-eb5b-3f9e-2688825411be","fromProperty":"out-accountData","toId":"65eab004-2350-1531-8518-5e7683777a81","toProperty":"Data"},{"fromId":"6229c63e-e566-8bb0-e58a-4482c358df08","fromProperty":"Done","toId":"6a74b40b-c916-0746-1368-57fa18ce5a1f","toProperty":"run"},{"fromId":"65eab004-2350-1531-8518-5e7683777a81","fromProperty":"Success","toId":"53f60b96-2436-f2ca-4b75-0a7f3ceaa7e2","toProperty":"run"},{"fromId":"65eab004-2350-1531-8518-5e7683777a81","fromProperty":"record ID","toId":"53f60b96-2436-f2ca-4b75-0a7f3ceaa7e2","toProperty":"in-account"},{"fromId":"2c33e3be-45e9-a6ba-9b2c-28aae0c94e89","fromProperty":"account","toId":"6a74b40b-c916-0746-1368-57fa18ce5a1f","toProperty":"account"},{"fromId":"6a74b40b-c916-0746-1368-57fa18ce5a1f","fromProperty":"isFalseEv","toId":"53f60b96-2436-f2ca-4b75-0a7f3ceaa7e2","toProperty":"run"}],"roots":[{"id":"2c33e3be-45e9-a6ba-9b2c-28aae0c94e89","type":"Component Inputs","x":829,"y":370,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"email","plug":"output","type":{"name":"*"},"group":"Data","index":1},{"name":"password","plug":"output","type":{"name":"*"},"group":"Data","index":2},{"name":"first_name","plug":"output","type":{"name":"*"},"group":"Data","index":3},{"name":"last_name","plug":"output","type":{"name":"*"},"group":"Data","index":4},{"name":"account","plug":"output","type":{"name":"*"},"group":"Data","index":5}],"dynamicports":[],"children":[]},{"id":"dcc2b6d4-5909-5444-388c-5c3797b53755","type":"Component Outputs","x":1800,"y":377,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"53f60b96-2436-f2ca-4b75-0a7f3ceaa7e2","type":"JavaScriptFunction","x":1529,"y":376,"parameters":{"functionScript":"const email = Inputs.email ?? null;\r\nconst password = Inputs.password ?? null;\r\nconst first_name = Inputs.first_name ?? null;\r\nconst last_name = Inputs.last_name ?? null;\r\nconst account = Inputs.account ?? null;\r\n\r\nif (!email || !password) return;\r\n\r\nconst client = Inputs.client ?? null;\r\n\r\nconst main = async function () {\r\n    try {\r\n        const user_object = {\r\n            email,\r\n            password,\r\n            first_name,\r\n            last_name\r\n        }\r\n        const result = await client.request(Directus.createUser(user_object));\r\n\r\n        Outputs.data = result;\r\n        //console.log({ result });\r\n        Outputs.Success();\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n        Outputs.error = err?.errors.map(i => i.message).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nif (client) {\r\n    main();\r\n}\r\n\r\n"},"ports":[],"dynamicports":[{"name":"in-email","displayName":"email","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-password","displayName":"password","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-first_name","displayName":"first_name","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-last_name","displayName":"last_name","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-account","displayName":"account","plug":"input","type":"*","group":"Inputs","index":8},{"name":"in-client","displayName":"client","plug":"input","type":"*","group":"Inputs","index":9},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":10},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":11},{"name":"out-data","displayName":"data","plug":"output","type":"*","group":"Outputs","index":12},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":13}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"4f64d6c0-2b0d-7f30-f194-78bd03d57adc","type":"String","label":"email","x":1076,"y":516,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"168a008e-1d5b-ef00-7f14-7ec09ca4b302","type":"String","label":"password","x":1074,"y":611,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"23ec9c00-2c5d-ed4d-97b4-5d85b03e8c76","type":"String","label":"first_name","x":1072.2,"y":706.4000015258789,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"1cc94418-5daa-84d8-b92e-3c19f188c1ac","type":"String","label":"last_name","x":1072.2,"y":798.4000015258789,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"6229c63e-e566-8bb0-e58a-4482c358df08","type":"/#Directus/Directus Prefab/Components/Utils/Get a SDK client","x":1071.6571428571426,"y":291.9428591047015,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"65eab004-2350-1531-8518-5e7683777a81","type":"/#Directus/Directus Prefab/Components/Data/Directus - Create Data","x":1320.4176144080327,"y":436.4601948626205,"parameters":{"SDK Client to use":"Site SDK Client","collection":"Account","fields":""},"ports":[],"dynamicports":[],"children":[]},{"id":"6a74b40b-c916-0746-1368-57fa18ce5a1f","type":"Expression","x":1323.4176144080327,"y":217.46019486262054,"parameters":{"expression":"account == \"\""},"ports":[],"dynamicports":[{"group":"Parameters","name":"account","type":{"name":"*","editAsType":"string"},"plug":"input","index":7}],"children":[],"metadata":{"merge":{"soureCodePorts":["expression"]}}},{"id":"c53e1ff5-2398-eb5b-3f9e-2688825411be","type":"JavaScriptFunction","x":1306.4176144080327,"y":586.4601948626203,"parameters":{"functionScript":"Outputs.accountData = { \"name\":\"Default account\" }"},"ports":[],"dynamicports":[{"name":"out-accountData","displayName":"accountData","plug":"output","type":"*","group":"Outputs","index":4}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Config/Directus - Initialize Site Client","id":"6bfcdfaf-8b86-e192-66f6-88ac14e08836","graph":{"connections":[{"fromId":"4214a023-73cc-016f-66d0-b956524051d2","fromProperty":"Do","toId":"73512ad8-fc54-c038-b6f4-7abb8efa2100","toProperty":"run"},{"fromId":"73512ad8-fc54-c038-b6f4-7abb8efa2100","fromProperty":"out-Success","toId":"76ae1a62-e601-d19b-0f58-4c2bc3823e26","toProperty":"Success"},{"fromId":"73512ad8-fc54-c038-b6f4-7abb8efa2100","fromProperty":"out-Failure","toId":"76ae1a62-e601-d19b-0f58-4c2bc3823e26","toProperty":"Failure"},{"fromId":"4214a023-73cc-016f-66d0-b956524051d2","fromProperty":"directusURL","toId":"a66c09cb-5080-5587-07f9-83e25efb69e7","toProperty":"value"},{"fromId":"a66c09cb-5080-5587-07f9-83e25efb69e7","fromProperty":"savedValue","toId":"73512ad8-fc54-c038-b6f4-7abb8efa2100","toProperty":"in-directusURL"},{"fromId":"4214a023-73cc-016f-66d0-b956524051d2","fromProperty":"static_token","toId":"ec0b6347-7ce8-0aeb-7bf5-866a070d27d5","toProperty":"value"},{"fromId":"ec0b6347-7ce8-0aeb-7bf5-866a070d27d5","fromProperty":"savedValue","toId":"73512ad8-fc54-c038-b6f4-7abb8efa2100","toProperty":"in-staticToken"},{"fromId":"4214a023-73cc-016f-66d0-b956524051d2","fromProperty":"Enable Cross-Domain cookies","toId":"dfeae6d9-38cd-ad82-9d02-d96c6fefc09f","toProperty":"value"},{"fromId":"dfeae6d9-38cd-ad82-9d02-d96c6fefc09f","fromProperty":"savedValue","toId":"73512ad8-fc54-c038-b6f4-7abb8efa2100","toProperty":"in-crossDomainCookies"}],"roots":[{"id":"4214a023-73cc-016f-66d0-b956524051d2","type":"Component Inputs","x":-476,"y":-89,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"directusURL","plug":"output","type":{"name":"*"},"index":1},{"name":"static_token","plug":"output","type":{"name":"*"},"index":2},{"name":"Enable Cross-Domain cookies","plug":"output","type":{"name":"*"},"index":3}],"dynamicports":[],"children":[]},{"id":"76ae1a62-e601-d19b-0f58-4c2bc3823e26","type":"Component Outputs","x":258,"y":-8,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1}],"dynamicports":[],"children":[]},{"id":"73512ad8-fc54-c038-b6f4-7abb8efa2100","type":"JavaScriptFunction","x":25.200000000000045,"y":-87.5999984741211,"parameters":{"functionScript":"const project_url = Inputs.directusURL;\r\nconst staticToken = Inputs.staticToken || null;\r\nconst crossDomainCookies = Inputs.crossDomainCookies ?? null;\r\n\r\nif (!project_url || !(new URL(project_url))) return; // throw new Error(\"Invalid Directus Project URL!\");\r\n\r\ntry {\r\n    var client = {};\r\n\r\n    if (crossDomainCookies) {\r\n        if (staticToken && staticToken != \"\") {\r\n            // Static Token has been provided //\r\n            client = Directus.createDirectus(project_url).with(Directus.staticToken(staticToken), { credentials: 'include' }).with(Directus.rest({ credentials: 'include' }));\r\n        } else {\r\n            // No Static Token. Connecting via the default Public Access Role //\r\n            client = Directus.createDirectus(project_url).with(Directus.rest({ credentials: 'include' }));\r\n        }\r\n    } else {\r\n        if (staticToken && staticToken != \"\") {\r\n            // Static Token has been provided //\r\n            client = Directus.createDirectus(project_url).with(Directus.staticToken(staticToken)).with(Directus.rest());\r\n        } else {\r\n            // No Static Token. Connecting via the default Public Access Role //\r\n            client = Directus.createDirectus(project_url).with(Directus.rest());\r\n        }\r\n    }\r\n\r\n\r\n    Noodl.Objects.DirectusSDK = {\r\n        ...Noodl.Objects.DirectusSDK.data,\r\n        SiteClient: client\r\n    }\r\n    Outputs.Success();\r\n} catch (err) {\r\n    console.error(err);\r\n    Outputs.Failure();\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"in-directusURL","displayName":"directusURL","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-staticToken","displayName":"staticToken","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-crossDomainCookies","displayName":"crossDomainCookies","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":8}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"a66c09cb-5080-5587-07f9-83e25efb69e7","type":"String","x":-225.73333333333323,"y":53.533335367838504,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"ec0b6347-7ce8-0aeb-7bf5-866a070d27d5","type":"String","x":-228.6333333333332,"y":142.38333574930823,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"dfeae6d9-38cd-ad82-9d02-d96c6fefc09f","type":"Boolean","x":-230.0333333333333,"y":229.66333605448403,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[],"comments":[{"text":"1. Before using this component, do make sure that you have imported the Directus SDK. To do so, you could add the following code in the 'Head Code' setting:\n--------------------------------\n<script type=\"module\">\n  import * as Directus from \"https://esm.sh/@directus/sdk\";\n  window.Directus = Directus;\n</script>\n--------------------------------","width":664,"height":264,"fill":"fill","x":-439,"y":-684,"id":"bde58ba2-1d68-d96a-3597-770da5fb65f8","color":"danger","largeFont":true},{"text":"2. This component creates a separate Directus SDK Client, dedicated for use by the App (without any user login). It will operate parallely with the Directus SDK Client that is linked to the 'logged-in user'.\n\nYou have the option to initialize this (Site Client) with either a Static Token (https://docs.directus.io/guides/sdk/authentication.html#create-a-directus-client-with-a-token) or the default 'Public' Access Role, by keeping the static_token property empty.","width":657,"height":252,"fill":"fill","x":-435,"y":-393,"id":"10a5c260-661c-5924-6a41-eada8dad7df7","largeFont":true,"color":"danger"}]}},{"name":"/#Directus/Directus Prefab/Components/Config/Directus - Initialize User Client","id":"c7c29b21-764f-b473-ae1e-fbebf974ca9f","graph":{"connections":[{"fromId":"fb04224e-6414-601a-ce2e-74b22897189a","fromProperty":"out-Failure","toId":"727efaaa-9fbe-470e-2e12-a5f7f09db601","toProperty":"Failure"},{"fromId":"bfc78b4c-1dad-59c7-648f-cb73d5527b49","fromProperty":"Enable Cross-Domain cookies","toId":"c434d1f0-fc6e-9ee6-6bf7-c0be5f464d4e","toProperty":"value"},{"fromId":"c434d1f0-fc6e-9ee6-6bf7-c0be5f464d4e","fromProperty":"savedValue","toId":"fb04224e-6414-601a-ce2e-74b22897189a","toProperty":"in-crossDomainCookies"},{"fromId":"bfc78b4c-1dad-59c7-648f-cb73d5527b49","fromProperty":"Do","toId":"893d7b13-8802-9569-5601-9ac58a47e630","toProperty":"run"},{"fromId":"bfc78b4c-1dad-59c7-648f-cb73d5527b49","fromProperty":"mode","toId":"dc70fb07-b1bb-3902-b36d-76d0230bfa82","toProperty":"currentState"},{"fromId":"dc70fb07-b1bb-3902-b36d-76d0230bfa82","fromProperty":"currentState","toId":"fb04224e-6414-601a-ce2e-74b22897189a","toProperty":"in-auth_token_mode"},{"fromId":"fb04224e-6414-601a-ce2e-74b22897189a","fromProperty":"out-Success","toId":"727efaaa-9fbe-470e-2e12-a5f7f09db601","toProperty":"Success"},{"fromId":"bfc78b4c-1dad-59c7-648f-cb73d5527b49","fromProperty":"directusURL","toId":"10ae5950-125e-41d3-d8cb-af36ecc83c68","toProperty":"value"},{"fromId":"10ae5950-125e-41d3-d8cb-af36ecc83c68","fromProperty":"savedValue","toId":"fb04224e-6414-601a-ce2e-74b22897189a","toProperty":"in-directusURL"},{"fromId":"893d7b13-8802-9569-5601-9ac58a47e630","fromProperty":"out-Do","toId":"fb04224e-6414-601a-ce2e-74b22897189a","toProperty":"run"}],"roots":[{"id":"bfc78b4c-1dad-59c7-648f-cb73d5527b49","type":"Component Inputs","x":-714,"y":39,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"directusURL","plug":"output","type":{"name":"*"},"index":1},{"name":"Enable Cross-Domain cookies","plug":"output","type":{"name":"*"},"index":3,"group":"Auth Token Management"},{"name":"mode","plug":"output","type":{"name":"*"},"group":"Auth Token Management","index":2}],"dynamicports":[],"children":[]},{"id":"727efaaa-9fbe-470e-2e12-a5f7f09db601","type":"Component Outputs","x":411,"y":154,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1}],"dynamicports":[],"children":[]},{"id":"fb04224e-6414-601a-ce2e-74b22897189a","type":"JavaScriptFunction","x":175.20000000000005,"y":83.4000015258789,"parameters":{"functionScript":"const project_url = Inputs.directusURL ?? null;\r\nconst crossDomainCookies = !!Inputs.crossDomainCookies ?? null;\r\nconst auth_token_mode = Inputs.auth_token_mode ?? \"cookie\";\r\n\r\nif (!project_url || !(new URL(project_url))) return; // throw new Error(\"Invalid Directus Project URL!\");\r\n\r\ntry {\r\n    var client = {};\r\n    if (crossDomainCookies) {\r\n        client = Directus.createDirectus(project_url).with(Directus.authentication(auth_token_mode, { credentials: 'include' })).with(Directus.rest({ credentials: 'include' }));\r\n    } else {\r\n        client = Directus.createDirectus(project_url).with(Directus.authentication(auth_token_mode)).with(Directus.rest());\r\n    }\r\n    \r\n    Noodl.Objects.DirectusSDK = {\r\n        ...Noodl.Objects.DirectusSDK.data,\r\n        Client: client\r\n    }\r\n    Outputs.Success();\r\n} catch (err) {\r\n    console.error(err);\r\n    Outputs.Failure();\r\n}"},"ports":[],"dynamicports":[{"name":"in-directusURL","displayName":"directusURL","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-crossDomainCookies","displayName":"crossDomainCookies","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-auth_token_mode","displayName":"auth_token_mode","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":8}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"10ae5950-125e-41d3-d8cb-af36ecc83c68","type":"String","x":-230.73333333333323,"y":53.533335367838504,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"c434d1f0-fc6e-9ee6-6bf7-c0be5f464d4e","type":"Boolean","x":-229.6333333333332,"y":155.38333574930823,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"893d7b13-8802-9569-5601-9ac58a47e630","type":"JavaScriptFunction","x":-228,"y":-67,"parameters":{"functionScript":"const url = Noodl.Objects.DirectusSDK?.Client?.url?.origin || null;\r\n\r\nif(!url) Outputs.Do()"},"ports":[],"dynamicports":[{"name":"out-Do","displayName":"Do","plug":"output","type":"signal","group":"Outputs","index":4}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"dc70fb07-b1bb-3902-b36d-76d0230bfa82","type":"States","label":"mode","x":-227.26111111111118,"y":256.45278029971655,"parameters":{"states":"cookie,session,json","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To cookie","name":"to-cookie","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At cookie","name":"at-cookie","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached cookie","name":"reached-cookie","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To session","name":"to-session","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At session","name":"at-session","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached session","name":"reached-session","group":"Current state","index":11},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To json","name":"to-json","group":"Go to state","index":12},{"plug":"output","type":"boolean","displayName":"At json","name":"at-json","group":"Current state","index":13},{"plug":"output","type":"signal","displayName":"Has Reached json","name":"reached-json","group":"Current state","index":14},{"plug":"input","type":{"name":"enum","enums":["cookie","session","json"]},"group":"States","displayName":"State","name":"currentState","default":"cookie","index":15}],"children":[]}],"visualRoots":[],"comments":[{"text":"1. Before using this component, do make sure that you have imported the Directus SDK. To do so, you could add the following code in the 'Head Code' setting:\n--------------------------------\n<script type=\"module\">\n  import * as Directus from \"https://esm.sh/@directus/sdk\";\n  window.Directus = Directus;\n</script>\n--------------------------------","width":664,"height":264,"fill":"fill","x":-435,"y":-406,"id":"bde58ba2-1d68-d96a-3597-770da5fb65f8","color":"danger","largeFont":true}]}},{"name":"/#Directus/Directus Prefab/Components/Data/Directus - Create Data","id":"43a3eb07-850d-dde8-deb9-01c269ccf961","graph":{"connections":[{"fromId":"f91937f2-b359-a7b9-7766-ab87e752364c","fromProperty":"collection","toId":"dc888b1a-40f0-bf46-c85e-38f8b61f1e96","toProperty":"value"},{"fromId":"dc888b1a-40f0-bf46-c85e-38f8b61f1e96","fromProperty":"savedValue","toId":"9764ef0e-790f-9edf-c642-346433b743c1","toProperty":"in-collection"},{"fromId":"f91937f2-b359-a7b9-7766-ab87e752364c","fromProperty":"SDK Client to use","toId":"2aa4e78e-aab6-794c-6a9c-7043d111f3f2","toProperty":"currentState"},{"fromId":"9764ef0e-790f-9edf-c642-346433b743c1","fromProperty":"out-Done","toId":"db5d5a63-2d9a-bade-022a-f12e7b38afef","toProperty":"start"},{"fromId":"9d408e90-2d3e-10a7-5d85-03c79856bbb6","fromProperty":"Success","toId":"5f17e03d-6195-fe2b-126f-289deca807b7","toProperty":"Success"},{"fromId":"9d408e90-2d3e-10a7-5d85-03c79856bbb6","fromProperty":"Failure","toId":"5f17e03d-6195-fe2b-126f-289deca807b7","toProperty":"Failure"},{"fromId":"9d408e90-2d3e-10a7-5d85-03c79856bbb6","fromProperty":"result","toId":"5f17e03d-6195-fe2b-126f-289deca807b7","toProperty":"result"},{"fromId":"9d408e90-2d3e-10a7-5d85-03c79856bbb6","fromProperty":"error","toId":"5f17e03d-6195-fe2b-126f-289deca807b7","toProperty":"error"},{"fromId":"9764ef0e-790f-9edf-c642-346433b743c1","fromProperty":"out-collection","toId":"9d408e90-2d3e-10a7-5d85-03c79856bbb6","toProperty":"collection"},{"fromId":"2aa4e78e-aab6-794c-6a9c-7043d111f3f2","fromProperty":"currentState","toId":"9d408e90-2d3e-10a7-5d85-03c79856bbb6","toProperty":"client"},{"fromId":"f91937f2-b359-a7b9-7766-ab87e752364c","fromProperty":"Create Single or Multiple","toId":"969d8b7b-745d-9f40-11bf-d0a606969501","toProperty":"currentState"},{"fromId":"969d8b7b-745d-9f40-11bf-d0a606969501","fromProperty":"currentState","toId":"d5cb3233-d651-6a94-45d2-53ebb6dc7f65","toProperty":"in-data_qty"},{"fromId":"f91937f2-b359-a7b9-7766-ab87e752364c","fromProperty":"Data","toId":"d5cb3233-d651-6a94-45d2-53ebb6dc7f65","toProperty":"in-data"},{"fromId":"db5d5a63-2d9a-bade-022a-f12e7b38afef","fromProperty":"timerFinished","toId":"9d408e90-2d3e-10a7-5d85-03c79856bbb6","toProperty":"CreateData"},{"fromId":"d5cb3233-d651-6a94-45d2-53ebb6dc7f65","fromProperty":"out-data_qty","toId":"9d408e90-2d3e-10a7-5d85-03c79856bbb6","toProperty":"data_qty"},{"fromId":"d5cb3233-d651-6a94-45d2-53ebb6dc7f65","fromProperty":"out-data","toId":"9d408e90-2d3e-10a7-5d85-03c79856bbb6","toProperty":"data"},{"fromId":"f91937f2-b359-a7b9-7766-ab87e752364c","fromProperty":"Do","toId":"d5cb3233-d651-6a94-45d2-53ebb6dc7f65","toProperty":"run"},{"fromId":"90f27960-b0b0-46fc-4f33-9f86da02a4e2","fromProperty":"query","toId":"9d408e90-2d3e-10a7-5d85-03c79856bbb6","toProperty":"query"},{"fromId":"f91937f2-b359-a7b9-7766-ab87e752364c","fromProperty":"limit","toId":"90f27960-b0b0-46fc-4f33-9f86da02a4e2","toProperty":"Limit"},{"fromId":"f91937f2-b359-a7b9-7766-ab87e752364c","fromProperty":"Get all fields","toId":"90f27960-b0b0-46fc-4f33-9f86da02a4e2","toProperty":"Get all fields"},{"fromId":"f91937f2-b359-a7b9-7766-ab87e752364c","fromProperty":"fields","toId":"90f27960-b0b0-46fc-4f33-9f86da02a4e2","toProperty":"Fields"},{"fromId":"f91937f2-b359-a7b9-7766-ab87e752364c","fromProperty":"sort","toId":"90f27960-b0b0-46fc-4f33-9f86da02a4e2","toProperty":"Sort"},{"fromId":"f91937f2-b359-a7b9-7766-ab87e752364c","fromProperty":"offset","toId":"90f27960-b0b0-46fc-4f33-9f86da02a4e2","toProperty":"Offset"},{"fromId":"f91937f2-b359-a7b9-7766-ab87e752364c","fromProperty":"page","toId":"90f27960-b0b0-46fc-4f33-9f86da02a4e2","toProperty":"Page"},{"fromId":"f91937f2-b359-a7b9-7766-ab87e752364c","fromProperty":"search","toId":"90f27960-b0b0-46fc-4f33-9f86da02a4e2","toProperty":"Search"},{"fromId":"f91937f2-b359-a7b9-7766-ab87e752364c","fromProperty":"aggregate","toId":"90f27960-b0b0-46fc-4f33-9f86da02a4e2","toProperty":"aggregate"},{"fromId":"f91937f2-b359-a7b9-7766-ab87e752364c","fromProperty":"groupBy","toId":"90f27960-b0b0-46fc-4f33-9f86da02a4e2","toProperty":"groupBy"},{"fromId":"f91937f2-b359-a7b9-7766-ab87e752364c","fromProperty":"filter","toId":"90f27960-b0b0-46fc-4f33-9f86da02a4e2","toProperty":"filter"},{"fromId":"f91937f2-b359-a7b9-7766-ab87e752364c","fromProperty":"deep","toId":"90f27960-b0b0-46fc-4f33-9f86da02a4e2","toProperty":"deep"},{"fromId":"f91937f2-b359-a7b9-7766-ab87e752364c","fromProperty":"alias","toId":"90f27960-b0b0-46fc-4f33-9f86da02a4e2","toProperty":"alias"},{"fromId":"2aa4e78e-aab6-794c-6a9c-7043d111f3f2","fromProperty":"currentState","toId":"efbbddf3-0d6d-89d6-d9ed-64b9dffebb3a","toProperty":"State"},{"fromId":"efbbddf3-0d6d-89d6-d9ed-64b9dffebb3a","fromProperty":"Success","toId":"9764ef0e-790f-9edf-c642-346433b743c1","toProperty":"run"},{"fromId":"f91937f2-b359-a7b9-7766-ab87e752364c","fromProperty":"Do","toId":"efbbddf3-0d6d-89d6-d9ed-64b9dffebb3a","toProperty":"Do"},{"fromId":"f91937f2-b359-a7b9-7766-ab87e752364c","fromProperty":"Map incoming ID field","toId":"02ee118b-8bb8-f5f5-1eb1-583379fe4811","toProperty":"currentState"},{"fromId":"f91937f2-b359-a7b9-7766-ab87e752364c","fromProperty":"ID new name","toId":"02ee118b-8bb8-f5f5-1eb1-583379fe4811","toProperty":"value-Yes-new_id"},{"fromId":"02ee118b-8bb8-f5f5-1eb1-583379fe4811","fromProperty":"new_id","toId":"9d408e90-2d3e-10a7-5d85-03c79856bbb6","toProperty":"id_new"},{"fromId":"9d408e90-2d3e-10a7-5d85-03c79856bbb6","fromProperty":"resultId","toId":"5f17e03d-6195-fe2b-126f-289deca807b7","toProperty":"record ID"}],"roots":[{"id":"f91937f2-b359-a7b9-7766-ab87e752364c","type":"Component Inputs","x":-1039,"y":450,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"collection","plug":"output","type":{"name":"*"},"group":"Config","index":2},{"name":"Multiple Items","plug":"output","type":{"name":"*"},"group":"Response - Get Multiple Items","index":5},{"name":"fields","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":9},{"name":"Get all fields","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":8},{"name":"SDK Client to use","plug":"output","type":{"name":"*"},"group":"Config","index":1},{"name":"sort","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":10},{"name":"offset","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":11},{"name":"page","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":12},{"name":"deep","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":17},{"name":"groupBy","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":15},{"name":"aggregate","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":14},{"name":"alias","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":18},{"name":"filter","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":16},{"name":"search","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":13},{"name":"Create Single or Multiple","plug":"output","type":{"name":"*"},"group":"Create Data","index":3},{"name":"Data","plug":"output","type":{"name":"*"},"group":"Create Data","index":4},{"name":"limit","plug":"output","type":{"name":"*"},"group":"Response - Get Multiple Items","index":6},{"name":"Get All Items","plug":"output","type":{"name":"*"},"group":"Response - Get All Items","index":7},{"name":"Map incoming ID field","plug":"output","type":{"name":"*"},"group":"Map ID field in Returned Data","index":19},{"name":"ID new name","plug":"output","type":{"name":"*"},"group":"Map ID field in Returned Data","index":20}],"dynamicports":[],"children":[]},{"id":"5f17e03d-6195-fe2b-126f-289deca807b7","type":"Component Outputs","x":618,"y":423,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":3},{"name":"result","plug":"input","type":{"name":"*"},"index":2},{"name":"record ID","plug":"input","type":{"name":"*"},"index":4}],"dynamicports":[],"children":[]},{"id":"dc888b1a-40f0-bf46-c85e-38f8b61f1e96","type":"String","label":"Collection","x":-690,"y":265,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"9764ef0e-790f-9edf-c642-346433b743c1","type":"JavaScriptFunction","x":-223,"y":133,"parameters":{"functionScript":"const collection = Inputs.collection || null;\r\n\r\nif (!collection || typeof (collection) != \"string\" || collection.length <= 0) {\r\n    throw new Error(\"Invalid Collection value provided!\")\r\n} else {\r\n    Outputs.collection = collection;\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-collection","displayName":"collection","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-collection","displayName":"collection","plug":"output","type":"*","group":"Outputs","index":6}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"2aa4e78e-aab6-794c-6a9c-7043d111f3f2","type":"States","label":"Client type","x":-690,"y":163,"parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To User SDK Client","name":"to-User SDK Client","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At User SDK Client","name":"at-User SDK Client","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached User SDK Client","name":"reached-User SDK Client","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Site SDK Client","name":"to-Site SDK Client","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Site SDK Client","name":"at-Site SDK Client","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Site SDK Client","name":"reached-Site SDK Client","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"group":"States","displayName":"State","name":"currentState","default":"User SDK Client","index":12}],"children":[]},{"id":"db5d5a63-2d9a-bade-022a-f12e7b38afef","type":"Timer","x":-11,"y":131,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"9d408e90-2d3e-10a7-5d85-03c79856bbb6","type":"Javascript2","x":313,"y":416,"parameters":{"code":"Script.Inputs = {\r\n    client: \"string\",\r\n    collection: \"string\",\r\n    operation: \"string\",\r\n    query: \"object\",\r\n    data_qty: \"single\",\r\n    id_new: \"string\"\r\n}\r\n\r\nfunction map_id_field(data, id_new) {\r\n    if (id_new && id_new != \"\" && data) {\r\n        if (Array.isArray(data) && data.length > 0) {\r\n\r\n            let temp_res = data.map(i => {\r\n                let temp = {\r\n                    ...i\r\n                };\r\n                if (i.id) temp[id_new] = i.id;\r\n                return temp;\r\n            });\r\n            return temp_res;\r\n\r\n        } else if (typeof (data) == \"object\") {\r\n\r\n            let temp = {\r\n                ...data\r\n            };\r\n            if (data.id) temp[id_new] = data.id;\r\n            return temp;\r\n\r\n        }\r\n    }\r\n    return data;\r\n}\r\n\r\n\r\nScript.Signals.CreateData = async function () {\r\n\r\n    const client_selection = Script.Inputs.client || null;\r\n    const sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\n    const collection = Script.Inputs.collection ?? null;\r\n\r\n    const data_qty = Script.Inputs.data_qty ?? null;\r\n    const data = Script.Inputs.data ?? null;\r\n    const id_new = Script.Inputs.id_new || null;\r\n\r\n    const query = Script.Inputs.query || {};\r\n\r\n    try {\r\n        if (sdk_client && collection && data_qty && data) {\r\n            let result;\r\n            switch (data_qty) {\r\n                case \"single\":\r\n                    result = await sdk_client.request(Directus.createItem(collection, data, query));\r\n                    break;\r\n                case \"multiple\":\r\n                    result = await sdk_client.request(Directus.createItems(collection, data, query));\r\n                    break;\r\n            }\r\n                        \r\n            result = map_id_field(result, id_new); // Map the id field in the incoming data to a new field, if set\r\n\r\n            Script.Outputs.result = result;\r\n            Script.Outputs.resultId = result.id;\r\n            if (result) {\r\n                Script.Outputs.Success();\r\n            } else {\r\n                Script.Outputs.Failure();\r\n            }\r\n        } else {\r\n            Script.Outputs.error = \"Invalid configuration!\";\r\n            Script.Outputs.Failure();\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Script.Outputs.error = err?.errors.map(i => i.message).join(\"\\n\") ?? JSON.stringify(err);\r\n        Script.Outputs.Failure();\r\n    }\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"client","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"collection","plug":"input","type":{"name":"string"},"group":"Inputs","index":6},{"name":"operation","plug":"input","type":{"name":"string"},"group":"Inputs","index":7},{"name":"query","plug":"input","type":{"name":"object"},"group":"Inputs","index":8},{"name":"data_qty","plug":"input","type":{"name":"single"},"group":"Inputs","index":9},{"name":"id_new","plug":"input","type":{"name":"string"},"group":"Inputs","index":10},{"name":"CreateData","plug":"input","type":{"name":"signal"},"group":"Inputs","index":11},{"name":"data","displayName":"data","plug":"input","type":"*","group":"Inputs","index":12},{"name":"Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":13},{"name":"Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":14},{"name":"result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":15},{"name":"resultId","displayName":"resultId","plug":"output","type":"*","group":"Outputs","index":16},{"name":"error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":17}],"children":[],"metadata":{"merge":{"soureCodePorts":["code"]}}},{"id":"969d8b7b-745d-9f40-11bf-d0a606969501","type":"States","label":"Create type","x":-689.7,"y":361.1000015258789,"parameters":{"states":"single,multiple","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To single","name":"to-single","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At single","name":"at-single","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached single","name":"reached-single","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To multiple","name":"to-multiple","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At multiple","name":"at-multiple","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached multiple","name":"reached-multiple","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["single","multiple"]},"group":"States","displayName":"State","name":"currentState","default":"single","index":12}],"children":[]},{"id":"d5cb3233-d651-6a94-45d2-53ebb6dc7f65","type":"JavaScriptFunction","x":-364.70000000000005,"y":386.1000015258789,"parameters":{"functionScript":"const data_qty = Inputs.data_qty ?? null;\r\nconst data = Inputs.data ?? {};\r\n\r\nlet status = false;\r\n\r\nif (data && data_qty) {\r\n    const data_type = Array.isArray(data) ? \"array\" : (typeof (data) == \"object\" ? \"object\" : typeof (data));\r\n\r\n    if (data_qty == \"multiple\" && data_type == \"array\") {\r\n        status = true;\r\n    } else if (data_qty == \"single\" && data_type == \"object\") {\r\n        status = true;\r\n    } else {\r\n        throw new Error(\"Invalid data config!\");\r\n    }\r\n    if (status) {\r\n        Outputs.data_qty = data_qty;\r\n        Outputs.data = data;\r\n    }\r\n} else {\r\n    throw new Error(\"Invalid request!\")\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"in-data_qty","displayName":"data_qty","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-data","displayName":"data","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-data_qty","displayName":"data_qty","plug":"output","type":"*","group":"Outputs","index":6},{"name":"out-data","displayName":"data","plug":"output","type":"*","group":"Outputs","index":7}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"90f27960-b0b0-46fc-4f33-9f86da02a4e2","type":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for Create)","x":-365.45000000000005,"y":519.500001780192,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"efbbddf3-0d6d-89d6-d9ed-64b9dffebb3a","type":"/#Directus/Directus Prefab/Components/Utils/SDK Client Check","x":-460.73749999999995,"y":57.47500040266249,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"02ee118b-8bb8-f5f5-1eb1-583379fe4811","type":"States","x":-663,"y":861,"parameters":{"states":"No,Yes","useTransitions":false,"values":"new_id","type-new_id":"string","value-Yes-new_id":"directus_id"},"ports":[],"dynamicports":[{"type":{"name":"string","allowConnectionsOnly":true},"plug":"output","group":"Values","name":"new_id","index":6},{"type":{"name":"enum","enums":[{"label":"Number","value":"number"},{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Color","value":"color"},{"label":"Text Style","value":"textStyle"}],"allowEditOnly":true},"default":"number","plug":"input","group":"Types","displayName":"new_id","name":"type-new_id","index":7},{"plug":"input","type":"string","group":"No Values","name":"value-No-new_id","displayName":"new_id","editorName":"No|new_id","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To No","name":"to-No","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At No","name":"at-No","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached No","name":"reached-No","group":"Current state","index":11},{"plug":"input","type":"string","group":"Yes Values","name":"value-Yes-new_id","displayName":"new_id","editorName":"Yes|new_id","index":12},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Yes","name":"to-Yes","group":"Go to state","index":13},{"plug":"output","type":"boolean","displayName":"At Yes","name":"at-Yes","group":"Current state","index":14},{"plug":"output","type":"signal","displayName":"Has Reached Yes","name":"reached-Yes","group":"Current state","index":15},{"plug":"input","type":{"name":"enum","enums":["No","Yes"]},"group":"States","displayName":"State","name":"currentState","default":"No","index":16}],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Data/Directus - Delete Data","id":"1c0327a0-0ca5-6d55-32fd-31327e69ae49","graph":{"connections":[{"fromId":"044e9bdf-f5b7-2738-9670-9d3dd3f629e2","fromProperty":"collection","toId":"41a5c9bb-3586-f5c3-5197-63772acb7a21","toProperty":"value"},{"fromId":"41a5c9bb-3586-f5c3-5197-63772acb7a21","fromProperty":"savedValue","toId":"25723b80-aa11-0d70-7b50-b6a43ef5178d","toProperty":"in-collection"},{"fromId":"044e9bdf-f5b7-2738-9670-9d3dd3f629e2","fromProperty":"SDK Client to use","toId":"b5c06875-607e-c9b5-5847-f170fdd88a94","toProperty":"currentState"},{"fromId":"25723b80-aa11-0d70-7b50-b6a43ef5178d","fromProperty":"out-Done","toId":"61404f1e-d708-af9a-6ba8-43cfe4055330","toProperty":"start"},{"fromId":"e5c7f759-1af0-35e3-c3f3-d1471e0e1824","fromProperty":"Success","toId":"7f5063aa-f902-aa75-9f4f-ef325b82e41b","toProperty":"Success"},{"fromId":"e5c7f759-1af0-35e3-c3f3-d1471e0e1824","fromProperty":"Failure","toId":"7f5063aa-f902-aa75-9f4f-ef325b82e41b","toProperty":"Failure"},{"fromId":"e5c7f759-1af0-35e3-c3f3-d1471e0e1824","fromProperty":"result","toId":"7f5063aa-f902-aa75-9f4f-ef325b82e41b","toProperty":"result"},{"fromId":"e5c7f759-1af0-35e3-c3f3-d1471e0e1824","fromProperty":"error","toId":"7f5063aa-f902-aa75-9f4f-ef325b82e41b","toProperty":"error"},{"fromId":"25723b80-aa11-0d70-7b50-b6a43ef5178d","fromProperty":"out-collection","toId":"e5c7f759-1af0-35e3-c3f3-d1471e0e1824","toProperty":"collection"},{"fromId":"b5c06875-607e-c9b5-5847-f170fdd88a94","fromProperty":"currentState","toId":"e5c7f759-1af0-35e3-c3f3-d1471e0e1824","toProperty":"client"},{"fromId":"044e9bdf-f5b7-2738-9670-9d3dd3f629e2","fromProperty":"sort","toId":"ad19b31b-48b5-8ec5-47f6-70479a279788","toProperty":"Sort"},{"fromId":"044e9bdf-f5b7-2738-9670-9d3dd3f629e2","fromProperty":"offset","toId":"ad19b31b-48b5-8ec5-47f6-70479a279788","toProperty":"Offset"},{"fromId":"044e9bdf-f5b7-2738-9670-9d3dd3f629e2","fromProperty":"page","toId":"ad19b31b-48b5-8ec5-47f6-70479a279788","toProperty":"Page"},{"fromId":"044e9bdf-f5b7-2738-9670-9d3dd3f629e2","fromProperty":"search","toId":"ad19b31b-48b5-8ec5-47f6-70479a279788","toProperty":"Search"},{"fromId":"044e9bdf-f5b7-2738-9670-9d3dd3f629e2","fromProperty":"filter","toId":"ad19b31b-48b5-8ec5-47f6-70479a279788","toProperty":"filter"},{"fromId":"044e9bdf-f5b7-2738-9670-9d3dd3f629e2","fromProperty":"deep","toId":"ad19b31b-48b5-8ec5-47f6-70479a279788","toProperty":"deep"},{"fromId":"044e9bdf-f5b7-2738-9670-9d3dd3f629e2","fromProperty":"limit","toId":"ad19b31b-48b5-8ec5-47f6-70479a279788","toProperty":"Limit"},{"fromId":"ad19b31b-48b5-8ec5-47f6-70479a279788","fromProperty":"query","toId":"e5c7f759-1af0-35e3-c3f3-d1471e0e1824","toProperty":"query"},{"fromId":"61404f1e-d708-af9a-6ba8-43cfe4055330","fromProperty":"timerFinished","toId":"e5c7f759-1af0-35e3-c3f3-d1471e0e1824","toProperty":"DeleteData"},{"fromId":"044e9bdf-f5b7-2738-9670-9d3dd3f629e2","fromProperty":"Delete Type","toId":"8b0971ad-38e9-b245-33d7-2159f795d22b","toProperty":"currentState"},{"fromId":"8b0971ad-38e9-b245-33d7-2159f795d22b","fromProperty":"currentState","toId":"ad19b31b-48b5-8ec5-47f6-70479a279788","toProperty":"Delete Type"},{"fromId":"ad19b31b-48b5-8ec5-47f6-70479a279788","fromProperty":"itemID","toId":"e5c7f759-1af0-35e3-c3f3-d1471e0e1824","toProperty":"item_id"},{"fromId":"044e9bdf-f5b7-2738-9670-9d3dd3f629e2","fromProperty":"data","toId":"e5c7f759-1af0-35e3-c3f3-d1471e0e1824","toProperty":"data"},{"fromId":"ad19b31b-48b5-8ec5-47f6-70479a279788","fromProperty":"operation","toId":"e5c7f759-1af0-35e3-c3f3-d1471e0e1824","toProperty":"operation"},{"fromId":"044e9bdf-f5b7-2738-9670-9d3dd3f629e2","fromProperty":"Do","toId":"ad19b31b-48b5-8ec5-47f6-70479a279788","toProperty":"Do"},{"fromId":"044e9bdf-f5b7-2738-9670-9d3dd3f629e2","fromProperty":"Item ID","toId":"ad19b31b-48b5-8ec5-47f6-70479a279788","toProperty":"Item ID"},{"fromId":"044e9bdf-f5b7-2738-9670-9d3dd3f629e2","fromProperty":"Do","toId":"4806c8df-3c13-a821-45a2-b3cf9df41d68","toProperty":"Do"},{"fromId":"b5c06875-607e-c9b5-5847-f170fdd88a94","fromProperty":"currentState","toId":"4806c8df-3c13-a821-45a2-b3cf9df41d68","toProperty":"State"},{"fromId":"4806c8df-3c13-a821-45a2-b3cf9df41d68","fromProperty":"Success","toId":"25723b80-aa11-0d70-7b50-b6a43ef5178d","toProperty":"run"}],"roots":[{"id":"044e9bdf-f5b7-2738-9670-9d3dd3f629e2","type":"Component Inputs","x":1576,"y":2196,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"collection","plug":"output","type":{"name":"*"},"group":"Config","index":2},{"name":"SDK Client to use","plug":"output","type":{"name":"*"},"group":"Config","index":1},{"name":"sort","plug":"output","type":{"name":"*"},"group":"Delete by Query Parameters","index":8},{"name":"offset","plug":"output","type":{"name":"*"},"group":"Delete by Query Parameters","index":9},{"name":"page","plug":"output","type":{"name":"*"},"group":"Delete by Query Parameters","index":10},{"name":"deep","plug":"output","type":{"name":"*"},"group":"Delete by Query Parameters","index":13},{"name":"Item ID","plug":"output","type":{"name":"*"},"group":"Delete Data","index":5},{"name":"filter","plug":"output","type":{"name":"*"},"group":"Delete by Query Parameters","index":12},{"name":"search","plug":"output","type":{"name":"*"},"group":"Delete by Query Parameters","index":11},{"name":"data","plug":"output","type":{"name":"*"},"group":"Delete Data","index":6},{"name":"limit","plug":"output","type":{"name":"*"},"group":"Delete by Query Parameters","index":7},{"name":"Delete Type","plug":"output","type":{"name":"*"},"group":"Delete Data","index":3}],"dynamicports":[],"children":[]},{"id":"7f5063aa-f902-aa75-9f4f-ef325b82e41b","type":"Component Outputs","x":3147,"y":2132,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":3},{"name":"result","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"41a5c9bb-3586-f5c3-5197-63772acb7a21","type":"String","label":"Collection","x":1920,"y":1985,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"25723b80-aa11-0d70-7b50-b6a43ef5178d","type":"JavaScriptFunction","x":2386,"y":1897,"parameters":{"functionScript":"const collection = Inputs.collection || null;\r\n\r\nif (typeof (collection) != \"string\" || collection.length <= 0) {\r\n    throw new Error(\"Invalid Collection value provided!\")\r\n} else {\r\n    Outputs.collection = collection;\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-collection","displayName":"collection","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-collection","displayName":"collection","plug":"output","type":"*","group":"Outputs","index":6}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"b5c06875-607e-c9b5-5847-f170fdd88a94","type":"States","label":"Client type","x":1922,"y":1893,"parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To User SDK Client","name":"to-User SDK Client","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At User SDK Client","name":"at-User SDK Client","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached User SDK Client","name":"reached-User SDK Client","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Site SDK Client","name":"to-Site SDK Client","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Site SDK Client","name":"at-Site SDK Client","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Site SDK Client","name":"reached-Site SDK Client","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"group":"States","displayName":"State","name":"currentState","default":"User SDK Client","index":12}],"children":[]},{"id":"61404f1e-d708-af9a-6ba8-43cfe4055330","type":"Timer","x":2604,"y":1898,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"e5c7f759-1af0-35e3-c3f3-d1471e0e1824","type":"Javascript2","x":2922,"y":2136,"parameters":{"code":"Script.Inputs = {\r\n    client: \"string\",\r\n    collection: \"string\",\r\n    query: \"object\",\r\n    operation: \"string\"\r\n}\r\n\r\n\r\nScript.Signals.DeleteData = async function () {\r\n\r\n    const client_selection = Script.Inputs.client || null;\r\n    const sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\n    const collection = Script.Inputs.collection;\r\n\r\n    const operation = Script.Inputs.operation ?? null;\r\n    const item_id = Script.Inputs.item_id ?? null;\r\n    \r\n    let data = Script.Inputs.data ?? null;\r\n    const query = Script.Inputs.query || {};\r\n\r\n    if(Object.keys(query).length > 0) data = { ...query };\r\n\r\n    try {\r\n        if (sdk_client && collection && operation) {\r\n            let result;\r\n            switch (operation) {\r\n                case \"single\":\r\n                    if(!item_id) throw new Error(\"Provide valid Item ID!\");\r\n                    result = item_id ? await sdk_client.request(Directus.deleteItem(collection, item_id)) : null;\r\n                    break;\r\n                case \"multiple\":\r\n                    result = data ? await sdk_client.request(Directus.deleteItems(collection, data)) : null;\r\n                    break;\r\n                case \"all\":\r\n                    data = {\r\n                        limit : -1\r\n                    }\r\n                    result = await sdk_client.request(Directus.deleteItems(collection, data));\r\n                    break;\r\n            }\r\n            \r\n            Script.Outputs.result = result;\r\n            if (result) {\r\n                Script.Outputs.Success();\r\n            } else {\r\n                Script.Outputs.Failure();\r\n            }\r\n        } else {\r\n            Script.Outputs.error = \"Invalid configuration!\";\r\n            Script.Outputs.Failure();\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Script.Outputs.error = err?.errors.map(i => i.message).join(\"\\n\") ?? JSON.stringify(err);\r\n        Script.Outputs.Failure();\r\n    }\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"client","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"collection","plug":"input","type":{"name":"string"},"group":"Inputs","index":6},{"name":"query","plug":"input","type":{"name":"object"},"group":"Inputs","index":7},{"name":"operation","plug":"input","type":{"name":"string"},"group":"Inputs","index":8},{"name":"DeleteData","plug":"input","type":{"name":"signal"},"group":"Inputs","index":9},{"name":"item_id","displayName":"item_id","plug":"input","type":"*","group":"Inputs","index":10},{"name":"data","displayName":"data","plug":"input","type":"*","group":"Inputs","index":11},{"name":"Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":12},{"name":"Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":13},{"name":"result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":14},{"name":"error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":15}],"children":[],"metadata":{"merge":{"soureCodePorts":["code"]}}},{"id":"ad19b31b-48b5-8ec5-47f6-70479a279788","type":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for Delete)","x":2206.128205128205,"y":2287.0782067714595,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"8b0971ad-38e9-b245-33d7-2159f795d22b","type":"States","x":1908.594017094017,"y":2200.406518756834,"parameters":{"states":"Delete Single by ID,Delete Multiple by Filter,Delete All"},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Delete Single by ID","name":"to-Delete Single by ID","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At Delete Single by ID","name":"at-Delete Single by ID","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached Delete Single by ID","name":"reached-Delete Single by ID","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Delete Multiple by Filter","name":"to-Delete Multiple by Filter","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Delete Multiple by Filter","name":"at-Delete Multiple by Filter","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Delete Multiple by Filter","name":"reached-Delete Multiple by Filter","group":"Current state","index":11},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Delete All","name":"to-Delete All","group":"Go to state","index":12},{"plug":"output","type":"boolean","displayName":"At Delete All","name":"at-Delete All","group":"Current state","index":13},{"plug":"output","type":"signal","displayName":"Has Reached Delete All","name":"reached-Delete All","group":"Current state","index":14},{"plug":"input","type":{"name":"enum","enums":["Delete Single by ID","Delete Multiple by Filter","Delete All"]},"group":"States","displayName":"State","name":"currentState","default":"Delete Single by ID","index":15}],"children":[]},{"id":"4806c8df-3c13-a821-45a2-b3cf9df41d68","type":"/#Directus/Directus Prefab/Components/Utils/SDK Client Check","x":2144,"y":1785,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[],"comments":[{"text":"Either set the Query Parameters or one of : \n- Item ID (for Single)\n- Data (for Multiple)\n\nNote: If Query parameters are set, then the data property will be ignored","width":260,"height":272,"fill":"transparent","x":1541,"y":1783,"id":"f99f645d-4136-66d0-3783-15645c8a4610","largeFont":true,"color":"notice"}]}},{"name":"/#Directus/Directus Prefab/Components/Data/Directus - Get Data","id":"50eaadd1-f6ee-4861-d942-9daf31899327","graph":{"connections":[{"fromId":"ac95602d-bd5a-660f-228c-6223a7fe7998","fromProperty":"collection","toId":"9f60fcf7-9ca6-62fc-c4a1-8e2421353f2c","toProperty":"value"},{"fromId":"9f60fcf7-9ca6-62fc-c4a1-8e2421353f2c","fromProperty":"savedValue","toId":"a3f8d581-57e7-6a1b-7009-5cb5cbf9af41","toProperty":"in-collection"},{"fromId":"ac95602d-bd5a-660f-228c-6223a7fe7998","fromProperty":"SDK Client to use","toId":"beb4426c-32fb-70a6-e024-0a89c3d18a2d","toProperty":"currentState"},{"fromId":"a3f8d581-57e7-6a1b-7009-5cb5cbf9af41","fromProperty":"out-Done","toId":"51994449-259a-ba24-aed4-9bb00cd32682","toProperty":"start"},{"fromId":"ac95602d-bd5a-660f-228c-6223a7fe7998","fromProperty":"Do","toId":"c7da6ef6-cbf2-6c1c-e4c5-55675a81a573","toProperty":"Set"},{"fromId":"ac95602d-bd5a-660f-228c-6223a7fe7998","fromProperty":"aggregate","toId":"c7da6ef6-cbf2-6c1c-e4c5-55675a81a573","toProperty":"aggregate"},{"fromId":"ac95602d-bd5a-660f-228c-6223a7fe7998","fromProperty":"groupBy","toId":"c7da6ef6-cbf2-6c1c-e4c5-55675a81a573","toProperty":"groupBy"},{"fromId":"ac95602d-bd5a-660f-228c-6223a7fe7998","fromProperty":"filter","toId":"c7da6ef6-cbf2-6c1c-e4c5-55675a81a573","toProperty":"filter"},{"fromId":"ac95602d-bd5a-660f-228c-6223a7fe7998","fromProperty":"deep","toId":"c7da6ef6-cbf2-6c1c-e4c5-55675a81a573","toProperty":"deep"},{"fromId":"ac95602d-bd5a-660f-228c-6223a7fe7998","fromProperty":"alias","toId":"c7da6ef6-cbf2-6c1c-e4c5-55675a81a573","toProperty":"alias"},{"fromId":"ac95602d-bd5a-660f-228c-6223a7fe7998","fromProperty":"item ID","toId":"c7da6ef6-cbf2-6c1c-e4c5-55675a81a573","toProperty":"Item ID"},{"fromId":"ac95602d-bd5a-660f-228c-6223a7fe7998","fromProperty":"limit","toId":"c7da6ef6-cbf2-6c1c-e4c5-55675a81a573","toProperty":"Limit"},{"fromId":"ac95602d-bd5a-660f-228c-6223a7fe7998","fromProperty":"Get all fields","toId":"c7da6ef6-cbf2-6c1c-e4c5-55675a81a573","toProperty":"Get all fields"},{"fromId":"ac95602d-bd5a-660f-228c-6223a7fe7998","fromProperty":"fields","toId":"c7da6ef6-cbf2-6c1c-e4c5-55675a81a573","toProperty":"Fields"},{"fromId":"ac95602d-bd5a-660f-228c-6223a7fe7998","fromProperty":"sort","toId":"c7da6ef6-cbf2-6c1c-e4c5-55675a81a573","toProperty":"Sort"},{"fromId":"ac95602d-bd5a-660f-228c-6223a7fe7998","fromProperty":"offset","toId":"c7da6ef6-cbf2-6c1c-e4c5-55675a81a573","toProperty":"Offset"},{"fromId":"ac95602d-bd5a-660f-228c-6223a7fe7998","fromProperty":"page","toId":"c7da6ef6-cbf2-6c1c-e4c5-55675a81a573","toProperty":"Page"},{"fromId":"ac95602d-bd5a-660f-228c-6223a7fe7998","fromProperty":"search","toId":"c7da6ef6-cbf2-6c1c-e4c5-55675a81a573","toProperty":"Search"},{"fromId":"c7da6ef6-cbf2-6c1c-e4c5-55675a81a573","fromProperty":"query","toId":"5b8a2d8f-8ff7-ae25-6ca0-e92e716e77ad","toProperty":"query"},{"fromId":"c7da6ef6-cbf2-6c1c-e4c5-55675a81a573","fromProperty":"operation","toId":"5b8a2d8f-8ff7-ae25-6ca0-e92e716e77ad","toProperty":"operation"},{"fromId":"c7da6ef6-cbf2-6c1c-e4c5-55675a81a573","fromProperty":"itemID","toId":"5b8a2d8f-8ff7-ae25-6ca0-e92e716e77ad","toProperty":"itemID"},{"fromId":"51994449-259a-ba24-aed4-9bb00cd32682","fromProperty":"timerFinished","toId":"5b8a2d8f-8ff7-ae25-6ca0-e92e716e77ad","toProperty":"GetData"},{"fromId":"5b8a2d8f-8ff7-ae25-6ca0-e92e716e77ad","fromProperty":"Success","toId":"43294e0d-65e1-cca2-6a30-29c5fe1039c8","toProperty":"Success"},{"fromId":"5b8a2d8f-8ff7-ae25-6ca0-e92e716e77ad","fromProperty":"Failure","toId":"43294e0d-65e1-cca2-6a30-29c5fe1039c8","toProperty":"Failure"},{"fromId":"5b8a2d8f-8ff7-ae25-6ca0-e92e716e77ad","fromProperty":"result","toId":"43294e0d-65e1-cca2-6a30-29c5fe1039c8","toProperty":"result"},{"fromId":"5b8a2d8f-8ff7-ae25-6ca0-e92e716e77ad","fromProperty":"error","toId":"43294e0d-65e1-cca2-6a30-29c5fe1039c8","toProperty":"error"},{"fromId":"a3f8d581-57e7-6a1b-7009-5cb5cbf9af41","fromProperty":"out-collection","toId":"5b8a2d8f-8ff7-ae25-6ca0-e92e716e77ad","toProperty":"collection"},{"fromId":"beb4426c-32fb-70a6-e024-0a89c3d18a2d","fromProperty":"currentState","toId":"5b8a2d8f-8ff7-ae25-6ca0-e92e716e77ad","toProperty":"client"},{"fromId":"ac95602d-bd5a-660f-228c-6223a7fe7998","fromProperty":"Item Get type","toId":"700c74ca-6f9b-2c32-a175-1425f08fc937","toProperty":"currentState"},{"fromId":"700c74ca-6f9b-2c32-a175-1425f08fc937","fromProperty":"currentState","toId":"c7da6ef6-cbf2-6c1c-e4c5-55675a81a573","toProperty":"Get Type"},{"fromId":"beb4426c-32fb-70a6-e024-0a89c3d18a2d","fromProperty":"currentState","toId":"f5c3cfec-fd59-d829-ef9b-bf932e4a1cb5","toProperty":"State"},{"fromId":"ac95602d-bd5a-660f-228c-6223a7fe7998","fromProperty":"Do","toId":"f5c3cfec-fd59-d829-ef9b-bf932e4a1cb5","toProperty":"Do"},{"fromId":"f5c3cfec-fd59-d829-ef9b-bf932e4a1cb5","fromProperty":"Success","toId":"a3f8d581-57e7-6a1b-7009-5cb5cbf9af41","toProperty":"run"},{"fromId":"ac95602d-bd5a-660f-228c-6223a7fe7998","fromProperty":"Map incoming ID field","toId":"d232c998-8e26-bcdb-fb9c-f78d11f8f441","toProperty":"currentState"},{"fromId":"ac95602d-bd5a-660f-228c-6223a7fe7998","fromProperty":"ID new name","toId":"d232c998-8e26-bcdb-fb9c-f78d11f8f441","toProperty":"value-Yes-new_id"},{"fromId":"d232c998-8e26-bcdb-fb9c-f78d11f8f441","fromProperty":"new_id","toId":"5b8a2d8f-8ff7-ae25-6ca0-e92e716e77ad","toProperty":"id_new"}],"roots":[{"id":"ac95602d-bd5a-660f-228c-6223a7fe7998","type":"Component Inputs","x":-1060,"y":320,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"limit","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":5},{"name":"collection","plug":"output","type":{"name":"*"},"group":"Config","index":2},{"name":"fields","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":7},{"name":"Get all fields","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":6},{"name":"SDK Client to use","plug":"output","type":{"name":"*"},"group":"Config","index":1},{"name":"sort","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":8},{"name":"offset","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":9},{"name":"page","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":10},{"name":"deep","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":15},{"name":"groupBy","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":13},{"name":"aggregate","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":12},{"name":"alias","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":16},{"name":"item ID","plug":"output","type":{"name":"*"},"group":"What to Get","index":4},{"name":"filter","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":14},{"name":"search","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":11},{"name":"Item Get type","plug":"output","type":{"name":"*"},"group":"What to Get","index":3},{"name":"Map incoming ID field","plug":"output","type":{"name":"*"},"group":"Map ID field","index":17},{"name":"ID new name","plug":"output","type":{"name":"*"},"group":"Map ID field","index":18}],"dynamicports":[],"children":[]},{"id":"43294e0d-65e1-cca2-6a30-29c5fe1039c8","type":"Component Outputs","x":515.0278684333703,"y":281.160111934135,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":3},{"name":"result","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"9f60fcf7-9ca6-62fc-c4a1-8e2421353f2c","type":"String","label":"Collection","x":-717.0311384224406,"y":145.03933031980006,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"a3f8d581-57e7-6a1b-7009-5cb5cbf9af41","type":"JavaScriptFunction","x":-254.86883361498792,"y":41.91530084178885,"parameters":{"functionScript":"const collection = Inputs.collection || null;\r\n\r\nif (typeof (collection) != \"string\" || collection.length <= 0) {\r\n    throw new Error(\"Invalid Collection value provided!\")\r\n} else {\r\n    Outputs.collection = collection;\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-collection","displayName":"collection","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-collection","displayName":"collection","plug":"output","type":"*","group":"Outputs","index":6}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"beb4426c-32fb-70a6-e024-0a89c3d18a2d","type":"States","label":"Client type","x":-718.8506931928334,"y":37.23896749460039,"parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To User SDK Client","name":"to-User SDK Client","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At User SDK Client","name":"at-User SDK Client","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached User SDK Client","name":"reached-User SDK Client","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Site SDK Client","name":"to-Site SDK Client","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Site SDK Client","name":"at-Site SDK Client","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Site SDK Client","name":"reached-Site SDK Client","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"group":"States","displayName":"State","name":"currentState","default":"User SDK Client","index":12}],"children":[]},{"id":"51994449-259a-ba24-aed4-9bb00cd32682","type":"Timer","x":-36.483010757231796,"y":42.6441192217863,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"c7da6ef6-cbf2-6c1c-e4c5-55675a81a573","type":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for Read)","x":-421.86744630779845,"y":330.1155290943941,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"5b8a2d8f-8ff7-ae25-6ca0-e92e716e77ad","type":"Javascript2","x":281.42005339425987,"y":280.5398400765414,"parameters":{"code":"Script.Inputs = {\r\n    client: \"string\",\r\n    collection: \"string\",\r\n    operation: \"string\",\r\n    itemID: \"string\",\r\n    query: \"object\",\r\n    id_new: \"string\"\r\n}\r\n\r\nfunction map_id_field(data, id_new) {\r\n    if (id_new && id_new != \"\" && data) {\r\n        if (Array.isArray(data) && data.length > 0) {\r\n\r\n            let temp_res = data.map(i => {\r\n                let temp = {\r\n                    ...i\r\n                };\r\n                if (i.id) temp[id_new] = i.id;\r\n                return temp;\r\n            });\r\n            return temp_res;\r\n\r\n        } else if (typeof (data) == \"object\") {\r\n\r\n            let temp = {\r\n                ...data\r\n            };\r\n            if (data.id) temp[id_new] = data.id;\r\n            return temp;\r\n\r\n        }\r\n    }\r\n    return data;\r\n}\r\n\r\n\r\nScript.Signals.GetData = async function () {\r\n\r\n    const client_selection = Script.Inputs.client || null;\r\n    const sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\n    const collection = Script.Inputs.collection;\r\n    const operation = Script.Inputs.operation;\r\n    const id_new = Script.Inputs.id_new || null;\r\n\r\n    const itemID = Script.Inputs.itemID;\r\n\r\n    const query = Script.Inputs.query || {};\r\n\r\n    try {\r\n        if (sdk_client && collection && operation) {\r\n            let result;\r\n            switch (operation) {\r\n                case \"single\":\r\n                    if (!itemID) throw new Error(\"Provide valid ID!\");\r\n                    result = await sdk_client.request(Directus.readItem(collection, itemID, query));\r\n                    break;\r\n                case \"multiple\":\r\n                    result = await sdk_client.request(Directus.readItems(collection, query));\r\n                    break;\r\n                case \"all\":\r\n                    query.limit = -1;\r\n                    result = await sdk_client.request(Directus.readItems(collection, query));\r\n                    break;\r\n                case \"singleton\":\r\n                    result = await sdk_client.request(Directus.readSingleton(collection, query));\r\n                    break;\r\n            }\r\n\r\n            result = map_id_field(result, id_new); // Map the id field in the incoming data to a new field, if set\r\n\r\n            Script.Outputs.result = result;\r\n            if (result) {\r\n                Script.Outputs.Success();\r\n            } else {\r\n                Script.Outputs.Failure();\r\n            }\r\n        } else {\r\n            Script.Outputs.error = \"Invalid configuration!\";\r\n            Script.Outputs.Failure();\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Script.Outputs.error = err?.errors.map(i => i.message).join(\"\\n\") ?? JSON.stringify(err);\r\n        Script.Outputs.Failure();\r\n    }\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"client","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"collection","plug":"input","type":{"name":"string"},"group":"Inputs","index":6},{"name":"operation","plug":"input","type":{"name":"string"},"group":"Inputs","index":7},{"name":"itemID","plug":"input","type":{"name":"string"},"group":"Inputs","index":8},{"name":"query","plug":"input","type":{"name":"object"},"group":"Inputs","index":9},{"name":"id_new","plug":"input","type":{"name":"string"},"group":"Inputs","index":10},{"name":"GetData","plug":"input","type":{"name":"signal"},"group":"Inputs","index":11},{"name":"Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":12},{"name":"Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":13},{"name":"result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":14},{"name":"error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":15}],"children":[],"metadata":{"merge":{"soureCodePorts":["code"]}}},{"id":"700c74ca-6f9b-2c32-a175-1425f08fc937","type":"States","label":"Get Type","x":-719.5269848854084,"y":259.36393813385837,"parameters":{"states":"Get Single by ID,Get Multiple by Filter,Get All,Get Singleton"},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Get Single by ID","name":"to-Get Single by ID","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At Get Single by ID","name":"at-Get Single by ID","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached Get Single by ID","name":"reached-Get Single by ID","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Get Multiple by Filter","name":"to-Get Multiple by Filter","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Get Multiple by Filter","name":"at-Get Multiple by Filter","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Get Multiple by Filter","name":"reached-Get Multiple by Filter","group":"Current state","index":11},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Get All","name":"to-Get All","group":"Go to state","index":12},{"plug":"output","type":"boolean","displayName":"At Get All","name":"at-Get All","group":"Current state","index":13},{"plug":"output","type":"signal","displayName":"Has Reached Get All","name":"reached-Get All","group":"Current state","index":14},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Get Singleton","name":"to-Get Singleton","group":"Go to state","index":15},{"plug":"output","type":"boolean","displayName":"At Get Singleton","name":"at-Get Singleton","group":"Current state","index":16},{"plug":"output","type":"signal","displayName":"Has Reached Get Singleton","name":"reached-Get Singleton","group":"Current state","index":17},{"plug":"input","type":{"name":"enum","enums":["Get Single by ID","Get Multiple by Filter","Get All","Get Singleton"]},"group":"States","displayName":"State","name":"currentState","default":"Get Single by ID","index":18}],"children":[]},{"id":"f5c3cfec-fd59-d829-ef9b-bf932e4a1cb5","type":"/#Directus/Directus Prefab/Components/Utils/SDK Client Check","x":-483,"y":-28,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"d232c998-8e26-bcdb-fb9c-f78d11f8f441","type":"States","x":-739,"y":730,"parameters":{"states":"No,Yes","useTransitions":false,"values":"new_id","type-new_id":"string","value-Yes-new_id":"directus_id"},"ports":[],"dynamicports":[{"type":{"name":"string","allowConnectionsOnly":true},"plug":"output","group":"Values","name":"new_id","index":6},{"type":{"name":"enum","enums":[{"label":"Number","value":"number"},{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Color","value":"color"},{"label":"Text Style","value":"textStyle"}],"allowEditOnly":true},"default":"number","plug":"input","group":"Types","displayName":"new_id","name":"type-new_id","index":7},{"plug":"input","type":"string","group":"No Values","name":"value-No-new_id","displayName":"new_id","editorName":"No|new_id","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To No","name":"to-No","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At No","name":"at-No","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached No","name":"reached-No","group":"Current state","index":11},{"plug":"input","type":"string","group":"Yes Values","name":"value-Yes-new_id","displayName":"new_id","editorName":"Yes|new_id","index":12},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Yes","name":"to-Yes","group":"Go to state","index":13},{"plug":"output","type":"boolean","displayName":"At Yes","name":"at-Yes","group":"Current state","index":14},{"plug":"output","type":"signal","displayName":"Has Reached Yes","name":"reached-Yes","group":"Current state","index":15},{"plug":"input","type":{"name":"enum","enums":["No","Yes"]},"group":"States","displayName":"State","name":"currentState","default":"No","index":16}],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Data/Directus - Update Data","id":"e86d3abc-af26-bcda-415b-28b690dd3625","graph":{"connections":[{"fromId":"b0ac26c6-65ed-9fbb-6f11-75ab70d2676c","fromProperty":"collection","toId":"cb32e908-350f-2521-15ab-095345734a45","toProperty":"value"},{"fromId":"cb32e908-350f-2521-15ab-095345734a45","fromProperty":"savedValue","toId":"c9215481-c74a-2b05-5c98-ec847cd23e0e","toProperty":"in-collection"},{"fromId":"b0ac26c6-65ed-9fbb-6f11-75ab70d2676c","fromProperty":"SDK Client to use","toId":"c1659ec6-3209-42a7-0f3b-dd30b8a5c425","toProperty":"currentState"},{"fromId":"c9215481-c74a-2b05-5c98-ec847cd23e0e","fromProperty":"out-Done","toId":"cfa1e4ae-ef83-29f7-dff3-0621b13f6767","toProperty":"start"},{"fromId":"1bd5ece8-e9f0-8584-57ed-6f5c58753dcc","fromProperty":"Success","toId":"94ceb7da-3ffe-06c6-43f8-3d29f2122300","toProperty":"Success"},{"fromId":"1bd5ece8-e9f0-8584-57ed-6f5c58753dcc","fromProperty":"Failure","toId":"94ceb7da-3ffe-06c6-43f8-3d29f2122300","toProperty":"Failure"},{"fromId":"1bd5ece8-e9f0-8584-57ed-6f5c58753dcc","fromProperty":"result","toId":"94ceb7da-3ffe-06c6-43f8-3d29f2122300","toProperty":"result"},{"fromId":"1bd5ece8-e9f0-8584-57ed-6f5c58753dcc","fromProperty":"error","toId":"94ceb7da-3ffe-06c6-43f8-3d29f2122300","toProperty":"error"},{"fromId":"c9215481-c74a-2b05-5c98-ec847cd23e0e","fromProperty":"out-collection","toId":"1bd5ece8-e9f0-8584-57ed-6f5c58753dcc","toProperty":"collection"},{"fromId":"c1659ec6-3209-42a7-0f3b-dd30b8a5c425","fromProperty":"currentState","toId":"1bd5ece8-e9f0-8584-57ed-6f5c58753dcc","toProperty":"client"},{"fromId":"b0ac26c6-65ed-9fbb-6f11-75ab70d2676c","fromProperty":"limit","toId":"4bbc8ed1-bc87-7733-4a83-809200750f34","toProperty":"Limit"},{"fromId":"b0ac26c6-65ed-9fbb-6f11-75ab70d2676c","fromProperty":"offset","toId":"4bbc8ed1-bc87-7733-4a83-809200750f34","toProperty":"Offset"},{"fromId":"b0ac26c6-65ed-9fbb-6f11-75ab70d2676c","fromProperty":"page","toId":"4bbc8ed1-bc87-7733-4a83-809200750f34","toProperty":"Page"},{"fromId":"b0ac26c6-65ed-9fbb-6f11-75ab70d2676c","fromProperty":"search","toId":"4bbc8ed1-bc87-7733-4a83-809200750f34","toProperty":"Search"},{"fromId":"b0ac26c6-65ed-9fbb-6f11-75ab70d2676c","fromProperty":"filter","toId":"4bbc8ed1-bc87-7733-4a83-809200750f34","toProperty":"filter"},{"fromId":"b0ac26c6-65ed-9fbb-6f11-75ab70d2676c","fromProperty":"deep","toId":"4bbc8ed1-bc87-7733-4a83-809200750f34","toProperty":"deep"},{"fromId":"b0ac26c6-65ed-9fbb-6f11-75ab70d2676c","fromProperty":"Do","toId":"4bbc8ed1-bc87-7733-4a83-809200750f34","toProperty":"Set"},{"fromId":"b0ac26c6-65ed-9fbb-6f11-75ab70d2676c","fromProperty":"Update Type","toId":"a72b0a36-a0cf-6406-3bdd-eaee4b982da4","toProperty":"currentState"},{"fromId":"a72b0a36-a0cf-6406-3bdd-eaee4b982da4","fromProperty":"currentState","toId":"4bbc8ed1-bc87-7733-4a83-809200750f34","toProperty":"Update Type"},{"fromId":"4bbc8ed1-bc87-7733-4a83-809200750f34","fromProperty":"query","toId":"1bd5ece8-e9f0-8584-57ed-6f5c58753dcc","toProperty":"query"},{"fromId":"4bbc8ed1-bc87-7733-4a83-809200750f34","fromProperty":"operation","toId":"1bd5ece8-e9f0-8584-57ed-6f5c58753dcc","toProperty":"operation"},{"fromId":"b0ac26c6-65ed-9fbb-6f11-75ab70d2676c","fromProperty":"Item ID","toId":"4bbc8ed1-bc87-7733-4a83-809200750f34","toProperty":"Item ID"},{"fromId":"4bbc8ed1-bc87-7733-4a83-809200750f34","fromProperty":"itemID","toId":"1bd5ece8-e9f0-8584-57ed-6f5c58753dcc","toProperty":"itemID"},{"fromId":"cfa1e4ae-ef83-29f7-dff3-0621b13f6767","fromProperty":"timerFinished","toId":"1bd5ece8-e9f0-8584-57ed-6f5c58753dcc","toProperty":"UpdateData"},{"fromId":"b0ac26c6-65ed-9fbb-6f11-75ab70d2676c","fromProperty":"Item ID Array","toId":"4bbc8ed1-bc87-7733-4a83-809200750f34","toProperty":"Item IDs Array"},{"fromId":"4bbc8ed1-bc87-7733-4a83-809200750f34","fromProperty":"itemIDArray","toId":"1bd5ece8-e9f0-8584-57ed-6f5c58753dcc","toProperty":"itemIDArray"},{"fromId":"b0ac26c6-65ed-9fbb-6f11-75ab70d2676c","fromProperty":"data","toId":"1bd5ece8-e9f0-8584-57ed-6f5c58753dcc","toProperty":"data"},{"fromId":"b0ac26c6-65ed-9fbb-6f11-75ab70d2676c","fromProperty":"sort","toId":"4bbc8ed1-bc87-7733-4a83-809200750f34","toProperty":"Sort"},{"fromId":"c1659ec6-3209-42a7-0f3b-dd30b8a5c425","fromProperty":"currentState","toId":"a846da38-257f-058b-d7b9-6ee5e34f58e0","toProperty":"State"},{"fromId":"b0ac26c6-65ed-9fbb-6f11-75ab70d2676c","fromProperty":"Do","toId":"a846da38-257f-058b-d7b9-6ee5e34f58e0","toProperty":"Do"},{"fromId":"a846da38-257f-058b-d7b9-6ee5e34f58e0","fromProperty":"Success","toId":"c9215481-c74a-2b05-5c98-ec847cd23e0e","toProperty":"run"},{"fromId":"b0ac26c6-65ed-9fbb-6f11-75ab70d2676c","fromProperty":"Map incoming ID field","toId":"5ec87862-542b-1d75-bd9d-6aff873c19c9","toProperty":"currentState"},{"fromId":"b0ac26c6-65ed-9fbb-6f11-75ab70d2676c","fromProperty":"ID new name","toId":"5ec87862-542b-1d75-bd9d-6aff873c19c9","toProperty":"value-Yes-new_id"},{"fromId":"5ec87862-542b-1d75-bd9d-6aff873c19c9","fromProperty":"new_id","toId":"1bd5ece8-e9f0-8584-57ed-6f5c58753dcc","toProperty":"id_new"}],"roots":[{"id":"b0ac26c6-65ed-9fbb-6f11-75ab70d2676c","type":"Component Inputs","x":1676,"y":1858.0000000000002,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"limit","plug":"output","type":{"name":"*"},"group":"Update Multiple Items","index":8},{"name":"collection","plug":"output","type":{"name":"*"},"group":"Config","index":2},{"name":"SDK Client to use","plug":"output","type":{"name":"*"},"group":"Config","index":1},{"name":"sort","plug":"output","type":{"name":"*"},"group":"Update Multiple Items","index":9},{"name":"offset","plug":"output","type":{"name":"*"},"group":"Update Multiple Items","index":10},{"name":"page","plug":"output","type":{"name":"*"},"group":"Update Multiple Items","index":11},{"name":"deep","plug":"output","type":{"name":"*"},"group":"Update Multiple Items","index":14},{"name":"Item ID","plug":"output","type":{"name":"*"},"group":"Update Item by ID","index":5},{"name":"filter","plug":"output","type":{"name":"*"},"group":"Update Multiple Items","index":13},{"name":"search","plug":"output","type":{"name":"*"},"group":"Update Multiple Items","index":12},{"name":"Update Type","plug":"output","type":{"name":"*"},"group":"What to Update","index":3},{"name":"Item ID Array","plug":"output","type":{"name":"*"},"group":"Update Item by ID","index":6},{"name":"data","plug":"output","type":{"name":"*"},"group":"Data","index":16},{"name":"Map incoming ID field","plug":"output","type":{"name":"*"},"group":"Map ID field","index":17},{"name":"ID new name","plug":"output","type":{"name":"*"},"group":"Map ID field","index":18}],"dynamicports":[],"children":[]},{"id":"94ceb7da-3ffe-06c6-43f8-3d29f2122300","type":"Component Outputs","x":3223,"y":1846,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":3},{"name":"result","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"cb32e908-350f-2521-15ab-095345734a45","type":"String","label":"Collection","x":2018,"y":1596,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"c9215481-c74a-2b05-5c98-ec847cd23e0e","type":"JavaScriptFunction","x":2484,"y":1508,"parameters":{"functionScript":"const collection = Inputs.collection || null;\r\n\r\nif (typeof (collection) != \"string\" || collection.length <= 0) {\r\n    throw new Error(\"Invalid Collection value provided!\")\r\n} else {\r\n    Outputs.collection = collection;\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-collection","displayName":"collection","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-collection","displayName":"collection","plug":"output","type":"*","group":"Outputs","index":6}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"c1659ec6-3209-42a7-0f3b-dd30b8a5c425","type":"States","label":"Client type","x":2020,"y":1503,"parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To User SDK Client","name":"to-User SDK Client","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At User SDK Client","name":"at-User SDK Client","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached User SDK Client","name":"reached-User SDK Client","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Site SDK Client","name":"to-Site SDK Client","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Site SDK Client","name":"at-Site SDK Client","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Site SDK Client","name":"reached-Site SDK Client","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"group":"States","displayName":"State","name":"currentState","default":"User SDK Client","index":12}],"children":[]},{"id":"cfa1e4ae-ef83-29f7-dff3-0621b13f6767","type":"Timer","x":2702,"y":1509,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"1bd5ece8-e9f0-8584-57ed-6f5c58753dcc","type":"Javascript2","x":3020,"y":1747,"parameters":{"code":"Script.Inputs = {\r\n    client: \"string\",\r\n    collection: \"string\",\r\n    operation: \"string\",\r\n    itemID: \"string\",\r\n    itemIDArray: \"array\",\r\n    query: \"object\",\r\n    data: \"object\",\r\n    id_new: \"string\"\r\n}\r\n\r\nfunction map_id_field(data, id_new) {\r\n    if (id_new && id_new != \"\" && data) {\r\n        if (Array.isArray(data) && data.length > 0) {\r\n\r\n            let temp_res = data.map(i => {\r\n                let temp = {\r\n                    ...i\r\n                };\r\n                if (i.id) temp[id_new] = i.id;\r\n                return temp;\r\n            });\r\n            return temp_res;\r\n\r\n        } else if (typeof (data) == \"object\") {\r\n\r\n            let temp = {\r\n                ...data\r\n            };\r\n            if (data.id) temp[id_new] = data.id;\r\n            return temp;\r\n\r\n        }\r\n    }\r\n    return data;\r\n}\r\n\r\n\r\n\r\nScript.Signals.UpdateData = async function () {\r\n\r\n    const client_selection = Script.Inputs.client || null;\r\n    const sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\n    const collection = Script.Inputs.collection;\r\n    const operation = Script.Inputs.operation;\r\n    const id_new = Script.Inputs.id_new || null;\r\n\r\n    const itemID = Script.Inputs.itemID;\r\n    const itemIDArray = Script.Inputs.itemIDArray;\r\n\r\n    const data = Script.Inputs.data || {};\r\n\r\n    const query = Script.Inputs.query || {};\r\n\r\n    try {\r\n        if (sdk_client && collection && operation) {\r\n            let result;\r\n            switch (operation) {\r\n                case \"single\":\r\n                    result = await sdk_client.request(Directus.updateItem(collection, itemID, data));\r\n                    break;\r\n                case \"multiple\":\r\n                    let query_obj = {};\r\n\r\n                    if (query) query_obj = structuredClone(query);\r\n\r\n                    if (Object.keys(query_obj).length == 0 || query_obj == {}) {\r\n                        throw new Error(\"Provide a valid Query object\")\r\n                    }\r\n\r\n                    result = await sdk_client.request(Directus.updateItems(collection, query_obj, data));\r\n                    break;\r\n                case \"multipleByIDs\":\r\n                    result = await sdk_client.request(Directus.updateItems(collection, itemIDArray, data));\r\n                    break;\r\n                case \"singleton\":\r\n                    result = await sdk_client.request(Directus.updateSingleton(collection, data));\r\n                    break;\r\n                case \"all\":\r\n                    result = await sdk_client.request(Directus.updateItems(collection, [], data));\r\n                    break;\r\n            }\r\n\r\n            result = map_id_field(result, id_new); // Map the id field in the incoming data to a new field, if set\r\n            Script.Outputs.result = result;\r\n            if (result) {\r\n                Script.Outputs.Success();\r\n            } else {\r\n                Script.Outputs.Failure();\r\n            }\r\n        } else {\r\n            Script.Outputs.error = \"Invalid configuration!\";\r\n            Script.Outputs.Failure();\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Script.Outputs.error = err?.errors.map(i => i.message).join(\"\\n\") ?? JSON.stringify(err);\r\n        Script.Outputs.Failure();\r\n    }\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"client","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"collection","plug":"input","type":{"name":"string"},"group":"Inputs","index":6},{"name":"operation","plug":"input","type":{"name":"string"},"group":"Inputs","index":7},{"name":"itemID","plug":"input","type":{"name":"string"},"group":"Inputs","index":8},{"name":"itemIDArray","plug":"input","type":{"name":"array"},"group":"Inputs","index":9},{"name":"query","plug":"input","type":{"name":"object"},"group":"Inputs","index":10},{"name":"data","plug":"input","type":{"name":"object"},"group":"Inputs","index":11},{"name":"id_new","plug":"input","type":{"name":"string"},"group":"Inputs","index":12},{"name":"UpdateData","plug":"input","type":{"name":"signal"},"group":"Inputs","index":13},{"name":"Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":14},{"name":"Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":15},{"name":"result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":16},{"name":"error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":17}],"children":[],"metadata":{"merge":{"soureCodePorts":["code"]}}},{"id":"a72b0a36-a0cf-6406-3bdd-eaee4b982da4","type":"States","label":"Update Type","x":2016,"y":1745,"parameters":{"states":"Update Single by ID,Update Multiple by Filter,Update Singleton,Update Multiple by IDs","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Update Single by ID","name":"to-Update Single by ID","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At Update Single by ID","name":"at-Update Single by ID","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached Update Single by ID","name":"reached-Update Single by ID","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Update Multiple by Filter","name":"to-Update Multiple by Filter","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Update Multiple by Filter","name":"at-Update Multiple by Filter","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Update Multiple by Filter","name":"reached-Update Multiple by Filter","group":"Current state","index":11},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Update Singleton","name":"to-Update Singleton","group":"Go to state","index":12},{"plug":"output","type":"boolean","displayName":"At Update Singleton","name":"at-Update Singleton","group":"Current state","index":13},{"plug":"output","type":"signal","displayName":"Has Reached Update Singleton","name":"reached-Update Singleton","group":"Current state","index":14},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Update Multiple by IDs","name":"to-Update Multiple by IDs","group":"Go to state","index":15},{"plug":"output","type":"boolean","displayName":"At Update Multiple by IDs","name":"at-Update Multiple by IDs","group":"Current state","index":16},{"plug":"output","type":"signal","displayName":"Has Reached Update Multiple by IDs","name":"reached-Update Multiple by IDs","group":"Current state","index":17},{"plug":"input","type":{"name":"enum","enums":["Update Single by ID","Update Multiple by Filter","Update Singleton","Update Multiple by IDs"]},"group":"States","displayName":"State","name":"currentState","default":"Update Single by ID","index":18}],"children":[]},{"id":"4bbc8ed1-bc87-7733-4a83-809200750f34","type":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for Update)","x":2390.000855253826,"y":1834.4763713017426,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"a846da38-257f-058b-d7b9-6ee5e34f58e0","type":"/#Directus/Directus Prefab/Components/Utils/SDK Client Check","x":2236,"y":1406,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"5ec87862-542b-1d75-bd9d-6aff873c19c9","type":"States","x":2007,"y":2233,"parameters":{"states":"No,Yes","useTransitions":false,"values":"new_id","type-new_id":"string","value-Yes-new_id":"directus_id"},"ports":[],"dynamicports":[{"type":{"name":"string","allowConnectionsOnly":true},"plug":"output","group":"Values","name":"new_id","index":6},{"type":{"name":"enum","enums":[{"label":"Number","value":"number"},{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Color","value":"color"},{"label":"Text Style","value":"textStyle"}],"allowEditOnly":true},"default":"number","plug":"input","group":"Types","displayName":"new_id","name":"type-new_id","index":7},{"plug":"input","type":"string","group":"No Values","name":"value-No-new_id","displayName":"new_id","editorName":"No|new_id","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To No","name":"to-No","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At No","name":"at-No","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached No","name":"reached-No","group":"Current state","index":11},{"plug":"input","type":"string","group":"Yes Values","name":"value-Yes-new_id","displayName":"new_id","editorName":"Yes|new_id","index":12},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Yes","name":"to-Yes","group":"Go to state","index":13},{"plug":"output","type":"boolean","displayName":"At Yes","name":"at-Yes","group":"Current state","index":14},{"plug":"output","type":"signal","displayName":"Has Reached Yes","name":"reached-Yes","group":"Current state","index":15},{"plug":"input","type":{"name":"enum","enums":["No","Yes"]},"group":"States","displayName":"State","name":"currentState","default":"No","index":16}],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Files/Directus - Create File Download URL","id":"a6d02772-72c0-c8ba-9f62-0d2ce8dd3fb1","graph":{"connections":[{"fromId":"bc9d612b-e969-1d85-2626-4d206bb4b2cd","fromProperty":"file id","toId":"87f925bf-02a3-fc4d-02d6-c8b16f8660a7","toProperty":"value"},{"fromId":"720ea1a5-69f8-167b-b3f4-3ae5b1cfc5e3","fromProperty":"out-Success","toId":"8f49c344-d3f3-d07f-c3aa-e5d41b14f518","toProperty":"Success"},{"fromId":"720ea1a5-69f8-167b-b3f4-3ae5b1cfc5e3","fromProperty":"out-Failure","toId":"8f49c344-d3f3-d07f-c3aa-e5d41b14f518","toProperty":"Failure"},{"fromId":"720ea1a5-69f8-167b-b3f4-3ae5b1cfc5e3","fromProperty":"out-error","toId":"8f49c344-d3f3-d07f-c3aa-e5d41b14f518","toProperty":"error"},{"fromId":"720ea1a5-69f8-167b-b3f4-3ae5b1cfc5e3","fromProperty":"out-downloadURL","toId":"8f49c344-d3f3-d07f-c3aa-e5d41b14f518","toProperty":"downloadURL"},{"fromId":"6fb670b5-63c0-6a5a-80b2-6fc532f2634f","fromProperty":"currentState","toId":"09133f61-c721-f8aa-6ffa-b5c760ee40ac","toProperty":"in-SDKClient"},{"fromId":"4dd3cd25-ec24-5c9d-374d-61c827684cd1","fromProperty":"timerFinished","toId":"09133f61-c721-f8aa-6ffa-b5c760ee40ac","toProperty":"run"},{"fromId":"09133f61-c721-f8aa-6ffa-b5c760ee40ac","fromProperty":"out-Done","toId":"595e2762-ac93-930a-35f9-dd11f29ea430","toProperty":"start"},{"fromId":"bc9d612b-e969-1d85-2626-4d206bb4b2cd","fromProperty":"Do","toId":"4dd3cd25-ec24-5c9d-374d-61c827684cd1","toProperty":"start"},{"fromId":"bc9d612b-e969-1d85-2626-4d206bb4b2cd","fromProperty":"SDK Client to use","toId":"6fb670b5-63c0-6a5a-80b2-6fc532f2634f","toProperty":"currentState"},{"fromId":"6fb670b5-63c0-6a5a-80b2-6fc532f2634f","fromProperty":"currentState","toId":"720ea1a5-69f8-167b-b3f4-3ae5b1cfc5e3","toProperty":"in-client"},{"fromId":"aff22d83-6969-6378-2fca-561aef4785d4","fromProperty":"Transformation Type","toId":"29c0b735-9bf8-0564-6775-723133fc9605","toProperty":"currentState"},{"fromId":"aff22d83-6969-6378-2fca-561aef4785d4","fromProperty":"fit","toId":"44155159-6828-e752-4f51-2ee0b677ead6","toProperty":"fit"},{"fromId":"aff22d83-6969-6378-2fca-561aef4785d4","fromProperty":"width","toId":"44155159-6828-e752-4f51-2ee0b677ead6","toProperty":"width"},{"fromId":"aff22d83-6969-6378-2fca-561aef4785d4","fromProperty":"height","toId":"44155159-6828-e752-4f51-2ee0b677ead6","toProperty":"height"},{"fromId":"aff22d83-6969-6378-2fca-561aef4785d4","fromProperty":"quality","toId":"44155159-6828-e752-4f51-2ee0b677ead6","toProperty":"quality"},{"fromId":"aff22d83-6969-6378-2fca-561aef4785d4","fromProperty":"withoutEnlargement","toId":"44155159-6828-e752-4f51-2ee0b677ead6","toProperty":"withoutEnlargement"},{"fromId":"aff22d83-6969-6378-2fca-561aef4785d4","fromProperty":"format","toId":"44155159-6828-e752-4f51-2ee0b677ead6","toProperty":"format"},{"fromId":"29c0b735-9bf8-0564-6775-723133fc9605","fromProperty":"currentState","toId":"fda7ea14-25f0-f84c-74f1-09c8987065d0","toProperty":"in-transformation_raw"},{"fromId":"595e2762-ac93-930a-35f9-dd11f29ea430","fromProperty":"timerFinished","toId":"44155159-6828-e752-4f51-2ee0b677ead6","toProperty":"Set"},{"fromId":"fda7ea14-25f0-f84c-74f1-09c8987065d0","fromProperty":"out-Done","toId":"720ea1a5-69f8-167b-b3f4-3ae5b1cfc5e3","toProperty":"run"},{"fromId":"44155159-6828-e752-4f51-2ee0b677ead6","fromProperty":"Done","toId":"fda7ea14-25f0-f84c-74f1-09c8987065d0","toProperty":"run"},{"fromId":"87f925bf-02a3-fc4d-02d6-c8b16f8660a7","fromProperty":"savedValue","toId":"fda7ea14-25f0-f84c-74f1-09c8987065d0","toProperty":"in-file_id"},{"fromId":"fda7ea14-25f0-f84c-74f1-09c8987065d0","fromProperty":"out-transformation","toId":"720ea1a5-69f8-167b-b3f4-3ae5b1cfc5e3","toProperty":"in-transformation"},{"fromId":"87f925bf-02a3-fc4d-02d6-c8b16f8660a7","fromProperty":"savedValue","toId":"720ea1a5-69f8-167b-b3f4-3ae5b1cfc5e3","toProperty":"in-file_id"},{"fromId":"44155159-6828-e752-4f51-2ee0b677ead6","fromProperty":"query","toId":"720ea1a5-69f8-167b-b3f4-3ae5b1cfc5e3","toProperty":"in-query"},{"fromId":"aff22d83-6969-6378-2fca-561aef4785d4","fromProperty":"key","toId":"155718e9-ad73-a965-c5d0-0c1110a3efe7","toProperty":"value"},{"fromId":"155718e9-ad73-a965-c5d0-0c1110a3efe7","fromProperty":"savedValue","toId":"fda7ea14-25f0-f84c-74f1-09c8987065d0","toProperty":"in-key"},{"fromId":"155718e9-ad73-a965-c5d0-0c1110a3efe7","fromProperty":"savedValue","toId":"720ea1a5-69f8-167b-b3f4-3ae5b1cfc5e3","toProperty":"in-key"}],"roots":[{"id":"bc9d612b-e969-1d85-2626-4d206bb4b2cd","type":"Component Inputs","x":638,"y":1326,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"file id","plug":"output","type":{"name":"*"},"group":"Data","index":2},{"name":"SDK Client to use","plug":"output","type":{"name":"*"},"index":1}],"dynamicports":[],"children":[]},{"id":"8f49c344-d3f3-d07f-c3aa-e5d41b14f518","type":"Component Outputs","x":1953,"y":1407,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":3},{"name":"downloadURL","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"720ea1a5-69f8-167b-b3f4-3ae5b1cfc5e3","type":"JavaScriptFunction","x":1675,"y":1327,"parameters":{"functionScript":"const client_selection = Inputs.client ?? null;\r\nconst sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\nconst file_id = Inputs.file_id || null;\r\n\r\nconst transformation = Inputs.transformation ?? null;\r\nconst query = Inputs.query || {};\r\nconst key = Inputs.key || null;\r\n\r\nconst download_as_user = (client_selection) ? true : false;\r\n\r\nconst main = async function () {\r\n    try {\r\n        const baseURL = sdk_client.url.href || null;\r\n\r\n        if (baseURL && file_id) {\r\n            const fileURL = new URL(baseURL + \"assets/\" + file_id);\r\n            fileURL.searchParams.append(\"download\", \"\");\r\n\r\n            const access_token = await sdk_client.getToken() || null;\r\n            \r\n            if (access_token) {\r\n                fileURL.searchParams.append(\"access_token\", access_token);\r\n            }\r\n\r\n            if (transformation) {\r\n                switch (transformation) {\r\n                    case \"none\":\r\n                        break;\r\n                    case \"preset\":\r\n                        if(!key) throw new Error(\"Provide valid 'key' value for Image Transformation\");\r\n                        fileURL.searchParams.append(\"key\", key);\r\n                        break;\r\n                    case \"custom\":\r\n                        for (const prop in query) {\r\n                            fileURL.searchParams.append(prop, query[prop]);\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n                  \r\n            Outputs.downloadURL = fileURL.href;\r\n            Outputs.Success();\r\n        } else {\r\n            Outputs.downloadURL = null;\r\n            Outputs.Failure();\r\n        }\r\n    } catch (err) {\r\n        console.error(err);\r\n        Outputs.error = err?.errors.map(i => i.message).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nmain();\r\n"},"ports":[],"dynamicports":[{"name":"in-client","displayName":"client","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-file_id","displayName":"file_id","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-transformation","displayName":"transformation","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-query","displayName":"query","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-key","displayName":"key","plug":"input","type":"*","group":"Inputs","index":8},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":9},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":10},{"name":"out-downloadURL","displayName":"downloadURL","plug":"output","type":"*","group":"Outputs","index":11},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":12}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"87f925bf-02a3-fc4d-02d6-c8b16f8660a7","type":"String","x":1031,"y":1370,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"6fb670b5-63c0-6a5a-80b2-6fc532f2634f","type":"States","label":"Client type","x":1032,"y":1224,"parameters":{"states":"User SDK Client,Public,Site SDK Client","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To User SDK Client","name":"to-User SDK Client","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At User SDK Client","name":"at-User SDK Client","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached User SDK Client","name":"reached-User SDK Client","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Public","name":"to-Public","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Public","name":"at-Public","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Public","name":"reached-Public","group":"Current state","index":11},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Site SDK Client","name":"to-Site SDK Client","group":"Go to state","index":12},{"plug":"output","type":"boolean","displayName":"At Site SDK Client","name":"at-Site SDK Client","group":"Current state","index":13},{"plug":"output","type":"signal","displayName":"Has Reached Site SDK Client","name":"reached-Site SDK Client","group":"Current state","index":14},{"plug":"input","type":{"name":"enum","enums":["User SDK Client","Public","Site SDK Client"]},"group":"States","displayName":"State","name":"currentState","default":"User SDK Client","index":15}],"children":[]},{"id":"09133f61-c721-f8aa-6ffa-b5c760ee40ac","type":"JavaScriptFunction","x":1261,"y":1174,"parameters":{"functionScript":"const state = Inputs.SDKClient ?? null;\r\n\r\nlet res = true;\r\n\r\nif(state == \"Site SDK Client\" || state == \"Public\"){\r\n    const client = Noodl.Objects.DirectusSDK.SiteClient || null;\r\n    if(!client){\r\n        res = false;\r\n        throw new Error(\"Directus Site Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(state == \"User SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.Client || null;\r\n    if(!client){ \r\n        res = false;\r\n        throw new Error(\"Directus User Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(res){\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-SDKClient","displayName":"SDKClient","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"595e2762-ac93-930a-35f9-dd11f29ea430","type":"Timer","x":1490,"y":1195,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"4dd3cd25-ec24-5c9d-374d-61c827684cd1","type":"Timer","x":1033,"y":1139,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"aff22d83-6969-6378-2fca-561aef4785d4","type":"Component Inputs","x":625,"y":1494,"parameters":{},"ports":[{"name":"key","plug":"output","type":{"name":"*"},"group":"Preset Transformations","index":4},{"name":"fit","plug":"output","type":{"name":"*"},"group":"Custom Transformations","index":5},{"name":"width","plug":"output","type":{"name":"*"},"group":"Custom Transformations","index":6},{"name":"height","plug":"output","type":{"name":"*"},"group":"Custom Transformations","index":7},{"name":"quality","plug":"output","type":{"name":"*"},"group":"Custom Transformations","index":8},{"name":"withoutEnlargement","plug":"output","type":{"name":"*"},"group":"Custom Transformations","index":9},{"name":"format","plug":"output","type":{"name":"*"},"group":"Custom Transformations","index":10},{"name":"Transformation Type","plug":"output","type":{"name":"*"},"group":"Config","index":2}],"dynamicports":[],"children":[]},{"id":"44155159-6828-e752-4f51-2ee0b677ead6","type":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for File Download)","x":1066,"y":1507,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"29c0b735-9bf8-0564-6775-723133fc9605","type":"States","x":1077,"y":1771,"parameters":{"useTransitions":false,"states":"None,Preset,Custom"},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To None","name":"to-None","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At None","name":"at-None","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached None","name":"reached-None","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Preset","name":"to-Preset","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Preset","name":"at-Preset","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Preset","name":"reached-Preset","group":"Current state","index":11},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Custom","name":"to-Custom","group":"Go to state","index":12},{"plug":"output","type":"boolean","displayName":"At Custom","name":"at-Custom","group":"Current state","index":13},{"plug":"output","type":"signal","displayName":"Has Reached Custom","name":"reached-Custom","group":"Current state","index":14},{"plug":"input","type":{"name":"enum","enums":["None","Preset","Custom"]},"group":"States","displayName":"State","name":"currentState","default":"None","index":15}],"children":[]},{"id":"fda7ea14-25f0-f84c-74f1-09c8987065d0","type":"JavaScriptFunction","x":1380,"y":1520,"parameters":{"functionScript":"const file_id = Inputs.file_id ?? null;\r\n\r\nconst transformation_raw = Inputs.transformation_raw ?? \"none\";\r\nconst key = Inputs.key ?? null;\r\n\r\nlet transformation = \"none\";\r\n\r\nif (file_id) {\r\n\r\n    switch (transformation_raw) {\r\n        case \"None\":\r\n            transformation = \"none\";\r\n            break;\r\n        case \"Preset\":\r\n            if (!key) throw new Error(\"Provide a valid key value\");\r\n            transformation = \"preset\";\r\n            break;\r\n        case \"Custom\":\r\n            transformation = \"custom\";\r\n            break;\r\n\r\n    }\r\n\r\n    Outputs.transformation = transformation;\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-file_id","displayName":"file_id","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-transformation_raw","displayName":"transformation_raw","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-key","displayName":"key","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-transformation","displayName":"transformation","plug":"output","type":"*","group":"Outputs","index":8}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"155718e9-ad73-a965-c5d0-0c1110a3efe7","type":"String","x":1078,"y":1867,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[],"comments":[{"text":"https://docs.directus.io/reference/files.html#downloading-a-file","width":632,"height":53,"fill":"transparent","x":844,"y":997,"id":"bd915b20-e38f-cc1d-6672-e41cc5d568ab","color":"notice","largeFont":true}]}},{"name":"/#Directus/Directus Prefab/Components/Files/Directus - Download File","id":"18df2d54-943d-66cc-9bab-451a1a01b2d8","graph":{"connections":[{"fromId":"84a150c3-bda0-de2d-c9e3-c66ffaca1c7e","fromProperty":"SDK Client to use","toId":"1083e48f-4e71-cc19-37ee-71f6216bed52","toProperty":"currentState"},{"fromId":"1083e48f-4e71-cc19-37ee-71f6216bed52","fromProperty":"currentState","toId":"aafa601e-47e2-e1da-e682-b2319e76d675","toProperty":"in-SDKClient"},{"fromId":"84a150c3-bda0-de2d-c9e3-c66ffaca1c7e","fromProperty":"Do","toId":"ddf2318e-13f6-e522-c0ac-77cc24b1d963","toProperty":"start"},{"fromId":"ddf2318e-13f6-e522-c0ac-77cc24b1d963","fromProperty":"timerFinished","toId":"aafa601e-47e2-e1da-e682-b2319e76d675","toProperty":"run"},{"fromId":"b376d61c-69a6-cb06-d035-e715de596096","fromProperty":"Success","toId":"dddeb29b-c00a-dee2-1f2a-cf94cb8ebba4","toProperty":"Success"},{"fromId":"b376d61c-69a6-cb06-d035-e715de596096","fromProperty":"Failure","toId":"dddeb29b-c00a-dee2-1f2a-cf94cb8ebba4","toProperty":"Failure"},{"fromId":"b376d61c-69a6-cb06-d035-e715de596096","fromProperty":"result","toId":"dddeb29b-c00a-dee2-1f2a-cf94cb8ebba4","toProperty":"result"},{"fromId":"b376d61c-69a6-cb06-d035-e715de596096","fromProperty":"error","toId":"dddeb29b-c00a-dee2-1f2a-cf94cb8ebba4","toProperty":"error"},{"fromId":"1083e48f-4e71-cc19-37ee-71f6216bed52","fromProperty":"currentState","toId":"b376d61c-69a6-cb06-d035-e715de596096","toProperty":"client"},{"fromId":"aafa601e-47e2-e1da-e682-b2319e76d675","fromProperty":"out-Done","toId":"29fa8410-4168-6ad1-6cb9-be3f0f0994d2","toProperty":"start"},{"fromId":"7b262452-bc7e-6acb-0224-d93a7549fd12","fromProperty":"query","toId":"b376d61c-69a6-cb06-d035-e715de596096","toProperty":"query"},{"fromId":"84a150c3-bda0-de2d-c9e3-c66ffaca1c7e","fromProperty":"Do","toId":"7b262452-bc7e-6acb-0224-d93a7549fd12","toProperty":"Set"},{"fromId":"84a150c3-bda0-de2d-c9e3-c66ffaca1c7e","fromProperty":"Transformation Type","toId":"77b90c87-c66f-6434-b948-f8edde2dfec1","toProperty":"currentState"},{"fromId":"84a150c3-bda0-de2d-c9e3-c66ffaca1c7e","fromProperty":"key","toId":"14560ca5-6671-23a3-9774-1ef07c5443c0","toProperty":"in-key"},{"fromId":"84a150c3-bda0-de2d-c9e3-c66ffaca1c7e","fromProperty":"File ID","toId":"14560ca5-6671-23a3-9774-1ef07c5443c0","toProperty":"in-file_id"},{"fromId":"84a150c3-bda0-de2d-c9e3-c66ffaca1c7e","fromProperty":"key","toId":"b376d61c-69a6-cb06-d035-e715de596096","toProperty":"key"},{"fromId":"14560ca5-6671-23a3-9774-1ef07c5443c0","fromProperty":"out-transformation","toId":"b376d61c-69a6-cb06-d035-e715de596096","toProperty":"transformation"},{"fromId":"14560ca5-6671-23a3-9774-1ef07c5443c0","fromProperty":"out-Done","toId":"b376d61c-69a6-cb06-d035-e715de596096","toProperty":"GetData"},{"fromId":"84a150c3-bda0-de2d-c9e3-c66ffaca1c7e","fromProperty":"fit","toId":"7b262452-bc7e-6acb-0224-d93a7549fd12","toProperty":"fit"},{"fromId":"84a150c3-bda0-de2d-c9e3-c66ffaca1c7e","fromProperty":"width","toId":"7b262452-bc7e-6acb-0224-d93a7549fd12","toProperty":"width"},{"fromId":"84a150c3-bda0-de2d-c9e3-c66ffaca1c7e","fromProperty":"height","toId":"7b262452-bc7e-6acb-0224-d93a7549fd12","toProperty":"height"},{"fromId":"84a150c3-bda0-de2d-c9e3-c66ffaca1c7e","fromProperty":"quality","toId":"7b262452-bc7e-6acb-0224-d93a7549fd12","toProperty":"quality"},{"fromId":"84a150c3-bda0-de2d-c9e3-c66ffaca1c7e","fromProperty":"withoutEnlargement","toId":"7b262452-bc7e-6acb-0224-d93a7549fd12","toProperty":"withoutEnlargement"},{"fromId":"84a150c3-bda0-de2d-c9e3-c66ffaca1c7e","fromProperty":"format","toId":"7b262452-bc7e-6acb-0224-d93a7549fd12","toProperty":"format"},{"fromId":"84a150c3-bda0-de2d-c9e3-c66ffaca1c7e","fromProperty":"File ID","toId":"b376d61c-69a6-cb06-d035-e715de596096","toProperty":"fileID"},{"fromId":"77b90c87-c66f-6434-b948-f8edde2dfec1","fromProperty":"currentState","toId":"14560ca5-6671-23a3-9774-1ef07c5443c0","toProperty":"in-transformation_raw"},{"fromId":"84a150c3-bda0-de2d-c9e3-c66ffaca1c7e","fromProperty":"File ID","toId":"e4c42196-0cfc-0c9c-1044-51ffa627c563","toProperty":"File ID"},{"fromId":"29fa8410-4168-6ad1-6cb9-be3f0f0994d2","fromProperty":"timerFinished","toId":"e4c42196-0cfc-0c9c-1044-51ffa627c563","toProperty":"Do"},{"fromId":"e4c42196-0cfc-0c9c-1044-51ffa627c563","fromProperty":"Success","toId":"14560ca5-6671-23a3-9774-1ef07c5443c0","toProperty":"run"},{"fromId":"e4c42196-0cfc-0c9c-1044-51ffa627c563","fromProperty":"Failure","toId":"dddeb29b-c00a-dee2-1f2a-cf94cb8ebba4","toProperty":"Failure"},{"fromId":"e4c42196-0cfc-0c9c-1044-51ffa627c563","fromProperty":"error","toId":"dddeb29b-c00a-dee2-1f2a-cf94cb8ebba4","toProperty":"error"},{"fromId":"e4c42196-0cfc-0c9c-1044-51ffa627c563","fromProperty":"result","toId":"b376d61c-69a6-cb06-d035-e715de596096","toProperty":"fileObj"},{"fromId":"1083e48f-4e71-cc19-37ee-71f6216bed52","fromProperty":"currentState","toId":"e4c42196-0cfc-0c9c-1044-51ffa627c563","toProperty":"SDK Client to use"}],"roots":[{"id":"84a150c3-bda0-de2d-c9e3-c66ffaca1c7e","type":"Component Inputs","x":-1060,"y":320,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"SDK Client to use","plug":"output","type":{"name":"*"},"group":"Config","index":1},{"name":"File ID","plug":"output","type":{"name":"*"},"group":"Config","index":3},{"name":"key","plug":"output","type":{"name":"*"},"group":"Preset Transformations","index":4},{"name":"fit","plug":"output","type":{"name":"*"},"group":"Custom Transformations","index":5},{"name":"width","plug":"output","type":{"name":"*"},"group":"Custom Transformations","index":6},{"name":"height","plug":"output","type":{"name":"*"},"group":"Custom Transformations","index":7},{"name":"quality","plug":"output","type":{"name":"*"},"group":"Custom Transformations","index":8},{"name":"withoutEnlargement","plug":"output","type":{"name":"*"},"group":"Custom Transformations","index":9},{"name":"format","plug":"output","type":{"name":"*"},"group":"Custom Transformations","index":10},{"name":"Transformation Type","plug":"output","type":{"name":"*"},"group":"Config","index":2}],"dynamicports":[],"children":[]},{"id":"dddeb29b-c00a-dee2-1f2a-cf94cb8ebba4","type":"Component Outputs","x":574.0278684333703,"y":371.160111934135,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":3},{"name":"result","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"1083e48f-4e71-cc19-37ee-71f6216bed52","type":"States","label":"Client type","x":-718.8506931928334,"y":37.23896749460039,"parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To User SDK Client","name":"to-User SDK Client","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At User SDK Client","name":"at-User SDK Client","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached User SDK Client","name":"reached-User SDK Client","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Site SDK Client","name":"to-Site SDK Client","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Site SDK Client","name":"at-Site SDK Client","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Site SDK Client","name":"reached-Site SDK Client","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"group":"States","displayName":"State","name":"currentState","default":"User SDK Client","index":12}],"children":[]},{"id":"aafa601e-47e2-e1da-e682-b2319e76d675","type":"JavaScriptFunction","x":-480.61664838642173,"y":-21.01383290325157,"parameters":{"functionScript":"const state = Inputs.SDKClient ?? null;\r\n\r\nlet res = true;\r\n\r\nif(state == \"Site SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.SiteClient || null;\r\n    if(!client){\r\n        res = false;\r\n        throw new Error(\"Directus Site Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(state == \"User SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.Client || null;\r\n    if(!client){ \r\n        res = false;\r\n        throw new Error(\"Directus User Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(res){\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-SDKClient","displayName":"SDKClient","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"29fa8410-4168-6ad1-6cb9-be3f0f0994d2","type":"Timer","x":-243.4830107572318,"y":-22.355880778213702,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"ddf2318e-13f6-e522-c0ac-77cc24b1d963","type":"Timer","x":-718,"y":-48,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"b376d61c-69a6-cb06-d035-e715de596096","type":"Javascript2","x":278.42005339425987,"y":312.5398400765414,"parameters":{"code":"Script.Inputs = {\r\n    client: \"string\",\r\n    fileID: \"string\",\r\n    fileObj: \"object\",\r\n    query: \"object\",\r\n    transformation: \"string\",\r\n    key: \"string\"\r\n}\r\n\r\n\r\nScript.Signals.GetData = async function () {\r\n\r\n    const client_selection = Script.Inputs.client || null;\r\n    const sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\n    const fileID = Script.Inputs.fileID ?? null;\r\n    const fileObj = Script.Inputs.fileObj ?? null;\r\n\r\n    const fileName = ( fileObj?.title ? fileObj.title + fileObj.filename_download.split('.').at(-1) : filename_download ) ?? null;\r\n\r\n    const transformation = Script.Inputs.transformation ?? null;\r\n\r\n    const query = Script.Inputs.query || {};\r\n\r\n    try {\r\n        if (sdk_client && fileID && fileName && transformation) {\r\n            let result;\r\n\r\n            switch (transformation) {\r\n                case \"none\":\r\n                    result = await sdk_client.request(Directus.readAssetRaw(fileID));\r\n                    break;\r\n                case \"key\":\r\n                    result = await sdk_client.request(Directus.readAssetRaw(fileID, { key }));\r\n                    break;\r\n                case \"custom\":\r\n                    result = await sdk_client.request(Directus.readAssetRaw(fileID, query));\r\n                    break;\r\n            }\r\n\r\n            const file_output = new File([result], fileName, {type: result.type});\r\n\r\n            if (result) {\r\n                Script.Outputs.result = file_output;\r\n                Script.Outputs.Success();\r\n            } else {\r\n                Script.Outputs.result = null;\r\n                Script.Outputs.Failure();\r\n            }\r\n        } else {\r\n            console.error(err);\r\n\r\n            Script.Outputs.error = \"Invalid configuration!\";\r\n            Script.Outputs.Failure();\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Script.Outputs.error = err?.errors.map(i => i.message).join(\"\\n\") ?? JSON.stringify(err);\r\n        Script.Outputs.Failure();\r\n    }\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"client","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"fileID","plug":"input","type":{"name":"string"},"group":"Inputs","index":6},{"name":"fileObj","plug":"input","type":{"name":"object"},"group":"Inputs","index":7},{"name":"query","plug":"input","type":{"name":"object"},"group":"Inputs","index":8},{"name":"transformation","plug":"input","type":{"name":"string"},"group":"Inputs","index":9},{"name":"key","plug":"input","type":{"name":"string"},"group":"Inputs","index":10},{"name":"GetData","plug":"input","type":{"name":"signal"},"group":"Inputs","index":11},{"name":"Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":12},{"name":"Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":13},{"name":"result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":14},{"name":"error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":15}],"children":[],"metadata":{"merge":{"soureCodePorts":["code"]}}},{"id":"7b262452-bc7e-6acb-0224-d93a7549fd12","type":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for File Download)","x":-495.41076241134033,"y":187.0720763094415,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"77b90c87-c66f-6434-b948-f8edde2dfec1","type":"States","x":-504.6307624113406,"y":546.0120764620294,"parameters":{"useTransitions":false,"states":"None,Preset,Custom"},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To None","name":"to-None","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At None","name":"at-None","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached None","name":"reached-None","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Preset","name":"to-Preset","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Preset","name":"at-Preset","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Preset","name":"reached-Preset","group":"Current state","index":11},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Custom","name":"to-Custom","group":"Go to state","index":12},{"plug":"output","type":"boolean","displayName":"At Custom","name":"at-Custom","group":"Current state","index":13},{"plug":"output","type":"signal","displayName":"Has Reached Custom","name":"reached-Custom","group":"Current state","index":14},{"plug":"input","type":{"name":"enum","enums":["None","Preset","Custom"]},"group":"States","displayName":"State","name":"currentState","default":"None","index":15}],"children":[]},{"id":"14560ca5-6671-23a3-9774-1ef07c5443c0","type":"JavaScriptFunction","x":-131.03821725905982,"y":472.0281524809103,"parameters":{"functionScript":"const file_id = Inputs.file_id ?? null;\r\n\r\nconst transformation_raw = Inputs.transformation_raw ?? \"none\";\r\nconst key = Inputs.key ?? null;\r\n\r\nlet transformation = null;\r\n\r\nif(!file_id) throw new Error(\"Provide a valid File ID\");\r\n\r\nswitch (transformation_raw){\r\n    case \"None\":\r\n        transformation = \"none\";\r\n        break;\r\n    case \"Preset\":\r\n        if(!key) throw new Error(\"Provide a valid key value\");\r\n        transformation = \"preset\";\r\n        break;\r\n    case \"Custom\":\r\n        transformation = \"custom\";\r\n        break;\r\n}\r\n\r\nOutputs.transformation = transformation;\r\nOutputs.Done();"},"ports":[],"dynamicports":[{"name":"in-file_id","displayName":"file_id","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-transformation_raw","displayName":"transformation_raw","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-key","displayName":"key","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-transformation","displayName":"transformation","plug":"output","type":"*","group":"Outputs","index":8}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"e4c42196-0cfc-0c9c-1044-51ffa627c563","type":"/#Directus/Directus Prefab/Components/Files/Directus - Get Files","label":"Get the File Object","x":-3.058217259059802,"y":14.368152633498084,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[],"comments":[{"text":"https://docs.directus.io/reference/files.html#requesting-a-thumbnail","width":632,"height":47,"fill":"transparent","x":-710,"y":-196,"id":"6980ad10-4971-eceb-5f9e-1584324c7116","color":"notice","largeFont":true}]}},{"name":"/#Directus/Directus Prefab/Components/Files/Directus - Get Files","id":"f80cd2ce-007f-f0c6-7e20-72c5eda6700d","graph":{"connections":[{"fromId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","fromProperty":"SDK Client to use","toId":"d910da8e-0a7e-ab2a-abc9-310ff2002376","toProperty":"currentState"},{"fromId":"d910da8e-0a7e-ab2a-abc9-310ff2002376","fromProperty":"currentState","toId":"435ce239-3e9b-160e-7ae4-f04aae2fe021","toProperty":"in-SDKClient"},{"fromId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","fromProperty":"Do","toId":"e369d045-35cc-dc10-a583-d906077ef8d7","toProperty":"start"},{"fromId":"e369d045-35cc-dc10-a583-d906077ef8d7","fromProperty":"timerFinished","toId":"435ce239-3e9b-160e-7ae4-f04aae2fe021","toProperty":"run"},{"fromId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","fromProperty":"Do","toId":"14d9023a-068f-e08a-addf-397476888e21","toProperty":"Set"},{"fromId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","fromProperty":"aggregate","toId":"14d9023a-068f-e08a-addf-397476888e21","toProperty":"aggregate"},{"fromId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","fromProperty":"groupBy","toId":"14d9023a-068f-e08a-addf-397476888e21","toProperty":"groupBy"},{"fromId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","fromProperty":"filter","toId":"14d9023a-068f-e08a-addf-397476888e21","toProperty":"filter"},{"fromId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","fromProperty":"deep","toId":"14d9023a-068f-e08a-addf-397476888e21","toProperty":"deep"},{"fromId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","fromProperty":"alias","toId":"14d9023a-068f-e08a-addf-397476888e21","toProperty":"alias"},{"fromId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","fromProperty":"File ID","toId":"14d9023a-068f-e08a-addf-397476888e21","toProperty":"Item ID"},{"fromId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","fromProperty":"limit","toId":"14d9023a-068f-e08a-addf-397476888e21","toProperty":"Limit"},{"fromId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","fromProperty":"Get all fields","toId":"14d9023a-068f-e08a-addf-397476888e21","toProperty":"Get all fields"},{"fromId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","fromProperty":"fields","toId":"14d9023a-068f-e08a-addf-397476888e21","toProperty":"Fields"},{"fromId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","fromProperty":"sort","toId":"14d9023a-068f-e08a-addf-397476888e21","toProperty":"Sort"},{"fromId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","fromProperty":"offset","toId":"14d9023a-068f-e08a-addf-397476888e21","toProperty":"Offset"},{"fromId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","fromProperty":"page","toId":"14d9023a-068f-e08a-addf-397476888e21","toProperty":"Page"},{"fromId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","fromProperty":"search","toId":"14d9023a-068f-e08a-addf-397476888e21","toProperty":"Search"},{"fromId":"14d9023a-068f-e08a-addf-397476888e21","fromProperty":"query","toId":"b8a5eb17-23e1-21de-ec37-61ddbd4e2a76","toProperty":"query"},{"fromId":"14d9023a-068f-e08a-addf-397476888e21","fromProperty":"operation","toId":"b8a5eb17-23e1-21de-ec37-61ddbd4e2a76","toProperty":"operation"},{"fromId":"14d9023a-068f-e08a-addf-397476888e21","fromProperty":"itemID","toId":"b8a5eb17-23e1-21de-ec37-61ddbd4e2a76","toProperty":"itemID"},{"fromId":"62f17a4f-a926-408e-9f88-41c6d2779613","fromProperty":"timerFinished","toId":"b8a5eb17-23e1-21de-ec37-61ddbd4e2a76","toProperty":"GetData"},{"fromId":"b8a5eb17-23e1-21de-ec37-61ddbd4e2a76","fromProperty":"Success","toId":"845ac7cd-67f9-9121-eadf-ca1b44e7a049","toProperty":"Success"},{"fromId":"b8a5eb17-23e1-21de-ec37-61ddbd4e2a76","fromProperty":"Failure","toId":"845ac7cd-67f9-9121-eadf-ca1b44e7a049","toProperty":"Failure"},{"fromId":"b8a5eb17-23e1-21de-ec37-61ddbd4e2a76","fromProperty":"result","toId":"845ac7cd-67f9-9121-eadf-ca1b44e7a049","toProperty":"result"},{"fromId":"b8a5eb17-23e1-21de-ec37-61ddbd4e2a76","fromProperty":"error","toId":"845ac7cd-67f9-9121-eadf-ca1b44e7a049","toProperty":"error"},{"fromId":"d910da8e-0a7e-ab2a-abc9-310ff2002376","fromProperty":"currentState","toId":"b8a5eb17-23e1-21de-ec37-61ddbd4e2a76","toProperty":"client"},{"fromId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","fromProperty":"File Get type","toId":"f794b3b2-8a50-f848-9b3c-99bbf4ba6934","toProperty":"currentState"},{"fromId":"f794b3b2-8a50-f848-9b3c-99bbf4ba6934","fromProperty":"currentState","toId":"14d9023a-068f-e08a-addf-397476888e21","toProperty":"Get Type"},{"fromId":"435ce239-3e9b-160e-7ae4-f04aae2fe021","fromProperty":"out-Done","toId":"62f17a4f-a926-408e-9f88-41c6d2779613","toProperty":"start"}],"roots":[{"id":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","type":"Component Inputs","x":-1060,"y":320,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"limit","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":5},{"name":"fields","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":7},{"name":"Get all fields","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":6},{"name":"SDK Client to use","plug":"output","type":{"name":"*"},"group":"Config","index":1},{"name":"sort","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":8},{"name":"offset","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":9},{"name":"page","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":10},{"name":"deep","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":15},{"name":"groupBy","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":13},{"name":"aggregate","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":12},{"name":"alias","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":16},{"name":"File ID","plug":"output","type":{"name":"*"},"group":"What to Get","index":4},{"name":"filter","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":14},{"name":"search","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":11},{"name":"File Get type","plug":"output","type":{"name":"*"},"group":"What to Get","index":3}],"dynamicports":[],"children":[]},{"id":"845ac7cd-67f9-9121-eadf-ca1b44e7a049","type":"Component Outputs","x":515.0278684333703,"y":281.160111934135,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":3},{"name":"result","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"d910da8e-0a7e-ab2a-abc9-310ff2002376","type":"States","label":"Client type","x":-718.8506931928334,"y":37.23896749460039,"parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To User SDK Client","name":"to-User SDK Client","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At User SDK Client","name":"at-User SDK Client","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached User SDK Client","name":"reached-User SDK Client","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Site SDK Client","name":"to-Site SDK Client","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Site SDK Client","name":"at-Site SDK Client","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Site SDK Client","name":"reached-Site SDK Client","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"group":"States","displayName":"State","name":"currentState","default":"User SDK Client","index":12}],"children":[]},{"id":"435ce239-3e9b-160e-7ae4-f04aae2fe021","type":"JavaScriptFunction","x":-480.61664838642173,"y":-21.01383290325157,"parameters":{"functionScript":"const state = Inputs.SDKClient ?? null;\r\n\r\nlet res = true;\r\n\r\nif(state == \"Site SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.SiteClient || null;\r\n    if(!client){\r\n        res = false;\r\n        throw new Error(\"Directus Site Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(state == \"User SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.Client || null;\r\n    if(!client){ \r\n        res = false;\r\n        throw new Error(\"Directus User Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(res){\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-SDKClient","displayName":"SDKClient","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"62f17a4f-a926-408e-9f88-41c6d2779613","type":"Timer","x":-243.4830107572318,"y":-22.355880778213702,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"e369d045-35cc-dc10-a583-d906077ef8d7","type":"Timer","x":-718,"y":-48,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"14d9023a-068f-e08a-addf-397476888e21","type":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for Read)","x":-421.86744630779845,"y":330.1155290943941,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"b8a5eb17-23e1-21de-ec37-61ddbd4e2a76","type":"Javascript2","x":281.42005339425987,"y":280.5398400765414,"parameters":{"code":"Script.Inputs = {\r\n    client: \"string\",\r\n    operation: \"string\",\r\n    itemID: \"string\",\r\n    query: \"object\"\r\n}\r\n\r\n\r\nScript.Signals.GetData = async function () {\r\n\r\n    const client_selection = Script.Inputs.client || null;\r\n    const sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\n    const operation = Script.Inputs.operation;\r\n    const itemID = Script.Inputs.itemID;\r\n\r\n    const query = Script.Inputs.query || {};\r\n\r\n    try {\r\n        if (sdk_client && operation) {\r\n            let result;\r\n            switch (operation) {\r\n                case \"single\":\r\n                    if(!itemID) throw new Error(\"Provide valid ID!\");\r\n                    result = await sdk_client.request(Directus.readFile(itemID, query));\r\n                    break;\r\n                case \"multiple\":\r\n                    result = await sdk_client.request(Directus.readFiles(query));\r\n                    break;\r\n                case \"all\":\r\n                    query.limit = -1;\r\n                    result = await sdk_client.request(Directus.readFiles(query));\r\n                    break;\r\n            }\r\n            \r\n            Script.Outputs.result = result;\r\n            if (result) {\r\n                Script.Outputs.Success();\r\n            } else {\r\n                Script.Outputs.Failure();\r\n            }\r\n        } else {\r\n            console.error(err);\r\n\r\n            Script.Outputs.error = \"Invalid configuration!\";\r\n            Script.Outputs.Failure();\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Script.Outputs.error = err?.errors.map(i => i.message).join(\"\\n\") ?? JSON.stringify(err);\r\n        Script.Outputs.Failure();\r\n    }\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"client","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"operation","plug":"input","type":{"name":"string"},"group":"Inputs","index":6},{"name":"itemID","plug":"input","type":{"name":"string"},"group":"Inputs","index":7},{"name":"query","plug":"input","type":{"name":"object"},"group":"Inputs","index":8},{"name":"GetData","plug":"input","type":{"name":"signal"},"group":"Inputs","index":9},{"name":"Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":10},{"name":"Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":11},{"name":"result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":12},{"name":"error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":13}],"children":[],"metadata":{"merge":{"soureCodePorts":["code"]}}},{"id":"f794b3b2-8a50-f848-9b3c-99bbf4ba6934","type":"States","label":"Get Type","x":-719.5269848854084,"y":259.36393813385837,"parameters":{"states":"Get Single by ID,Get Multiple by Filter,Get All"},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Get Single by ID","name":"to-Get Single by ID","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At Get Single by ID","name":"at-Get Single by ID","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached Get Single by ID","name":"reached-Get Single by ID","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Get Multiple by Filter","name":"to-Get Multiple by Filter","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Get Multiple by Filter","name":"at-Get Multiple by Filter","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Get Multiple by Filter","name":"reached-Get Multiple by Filter","group":"Current state","index":11},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Get All","name":"to-Get All","group":"Go to state","index":12},{"plug":"output","type":"boolean","displayName":"At Get All","name":"at-Get All","group":"Current state","index":13},{"plug":"output","type":"signal","displayName":"Has Reached Get All","name":"reached-Get All","group":"Current state","index":14},{"plug":"input","type":{"name":"enum","enums":["Get Single by ID","Get Multiple by Filter","Get All"]},"group":"States","displayName":"State","name":"currentState","default":"Get Single by ID","index":15}],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Files/Directus - Get Folders","id":"65156cec-bf85-de67-518a-1f141120162f","graph":{"connections":[{"fromId":"609089a9-e875-2ba1-f061-ab6b39972934","fromProperty":"SDK Client to use","toId":"debfd0df-eaa2-f48e-ff89-6c86a242b4e3","toProperty":"currentState"},{"fromId":"debfd0df-eaa2-f48e-ff89-6c86a242b4e3","fromProperty":"currentState","toId":"170cdc6b-e532-c26e-5d30-dfd2098d1ffc","toProperty":"in-SDKClient"},{"fromId":"609089a9-e875-2ba1-f061-ab6b39972934","fromProperty":"Do","toId":"9f7cb40d-6fea-1a5f-9c15-5faf3d3ea606","toProperty":"start"},{"fromId":"9f7cb40d-6fea-1a5f-9c15-5faf3d3ea606","fromProperty":"timerFinished","toId":"170cdc6b-e532-c26e-5d30-dfd2098d1ffc","toProperty":"run"},{"fromId":"609089a9-e875-2ba1-f061-ab6b39972934","fromProperty":"Do","toId":"7f865936-72e3-ae2a-0e15-44270f7c043e","toProperty":"Set"},{"fromId":"609089a9-e875-2ba1-f061-ab6b39972934","fromProperty":"aggregate","toId":"7f865936-72e3-ae2a-0e15-44270f7c043e","toProperty":"aggregate"},{"fromId":"609089a9-e875-2ba1-f061-ab6b39972934","fromProperty":"groupBy","toId":"7f865936-72e3-ae2a-0e15-44270f7c043e","toProperty":"groupBy"},{"fromId":"609089a9-e875-2ba1-f061-ab6b39972934","fromProperty":"filter","toId":"7f865936-72e3-ae2a-0e15-44270f7c043e","toProperty":"filter"},{"fromId":"609089a9-e875-2ba1-f061-ab6b39972934","fromProperty":"deep","toId":"7f865936-72e3-ae2a-0e15-44270f7c043e","toProperty":"deep"},{"fromId":"609089a9-e875-2ba1-f061-ab6b39972934","fromProperty":"alias","toId":"7f865936-72e3-ae2a-0e15-44270f7c043e","toProperty":"alias"},{"fromId":"609089a9-e875-2ba1-f061-ab6b39972934","fromProperty":"Folder ID","toId":"7f865936-72e3-ae2a-0e15-44270f7c043e","toProperty":"Item ID"},{"fromId":"609089a9-e875-2ba1-f061-ab6b39972934","fromProperty":"limit","toId":"7f865936-72e3-ae2a-0e15-44270f7c043e","toProperty":"Limit"},{"fromId":"609089a9-e875-2ba1-f061-ab6b39972934","fromProperty":"Get all fields","toId":"7f865936-72e3-ae2a-0e15-44270f7c043e","toProperty":"Get all fields"},{"fromId":"609089a9-e875-2ba1-f061-ab6b39972934","fromProperty":"fields","toId":"7f865936-72e3-ae2a-0e15-44270f7c043e","toProperty":"Fields"},{"fromId":"609089a9-e875-2ba1-f061-ab6b39972934","fromProperty":"sort","toId":"7f865936-72e3-ae2a-0e15-44270f7c043e","toProperty":"Sort"},{"fromId":"609089a9-e875-2ba1-f061-ab6b39972934","fromProperty":"offset","toId":"7f865936-72e3-ae2a-0e15-44270f7c043e","toProperty":"Offset"},{"fromId":"609089a9-e875-2ba1-f061-ab6b39972934","fromProperty":"page","toId":"7f865936-72e3-ae2a-0e15-44270f7c043e","toProperty":"Page"},{"fromId":"609089a9-e875-2ba1-f061-ab6b39972934","fromProperty":"search","toId":"7f865936-72e3-ae2a-0e15-44270f7c043e","toProperty":"Search"},{"fromId":"7f865936-72e3-ae2a-0e15-44270f7c043e","fromProperty":"query","toId":"3c3f0088-7e01-2599-4fc9-f79172d57149","toProperty":"query"},{"fromId":"7f865936-72e3-ae2a-0e15-44270f7c043e","fromProperty":"operation","toId":"3c3f0088-7e01-2599-4fc9-f79172d57149","toProperty":"operation"},{"fromId":"7f865936-72e3-ae2a-0e15-44270f7c043e","fromProperty":"itemID","toId":"3c3f0088-7e01-2599-4fc9-f79172d57149","toProperty":"itemID"},{"fromId":"608e7f0d-444e-a51f-fad4-a0afe1cab980","fromProperty":"timerFinished","toId":"3c3f0088-7e01-2599-4fc9-f79172d57149","toProperty":"GetData"},{"fromId":"3c3f0088-7e01-2599-4fc9-f79172d57149","fromProperty":"Success","toId":"797699a6-0562-d23e-49a1-38f1fffe0566","toProperty":"Success"},{"fromId":"3c3f0088-7e01-2599-4fc9-f79172d57149","fromProperty":"Failure","toId":"797699a6-0562-d23e-49a1-38f1fffe0566","toProperty":"Failure"},{"fromId":"3c3f0088-7e01-2599-4fc9-f79172d57149","fromProperty":"result","toId":"797699a6-0562-d23e-49a1-38f1fffe0566","toProperty":"result"},{"fromId":"3c3f0088-7e01-2599-4fc9-f79172d57149","fromProperty":"error","toId":"797699a6-0562-d23e-49a1-38f1fffe0566","toProperty":"error"},{"fromId":"debfd0df-eaa2-f48e-ff89-6c86a242b4e3","fromProperty":"currentState","toId":"3c3f0088-7e01-2599-4fc9-f79172d57149","toProperty":"client"},{"fromId":"609089a9-e875-2ba1-f061-ab6b39972934","fromProperty":"Folder Get type","toId":"771771af-9f91-3c5f-c756-35b99e0da636","toProperty":"currentState"},{"fromId":"771771af-9f91-3c5f-c756-35b99e0da636","fromProperty":"currentState","toId":"7f865936-72e3-ae2a-0e15-44270f7c043e","toProperty":"Get Type"},{"fromId":"170cdc6b-e532-c26e-5d30-dfd2098d1ffc","fromProperty":"out-Done","toId":"608e7f0d-444e-a51f-fad4-a0afe1cab980","toProperty":"start"}],"roots":[{"id":"609089a9-e875-2ba1-f061-ab6b39972934","type":"Component Inputs","x":-1060,"y":320,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"limit","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":5},{"name":"fields","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":7},{"name":"Get all fields","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":6},{"name":"SDK Client to use","plug":"output","type":{"name":"*"},"group":"Config","index":1},{"name":"sort","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":8},{"name":"offset","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":9},{"name":"page","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":10},{"name":"deep","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":15},{"name":"groupBy","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":13},{"name":"aggregate","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":12},{"name":"alias","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":16},{"name":"Folder ID","plug":"output","type":{"name":"*"},"group":"What to Get","index":4},{"name":"filter","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":14},{"name":"search","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":11},{"name":"Folder Get type","plug":"output","type":{"name":"*"},"group":"What to Get","index":3}],"dynamicports":[],"children":[]},{"id":"797699a6-0562-d23e-49a1-38f1fffe0566","type":"Component Outputs","x":515.0278684333703,"y":281.160111934135,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":3},{"name":"result","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"debfd0df-eaa2-f48e-ff89-6c86a242b4e3","type":"States","label":"Client type","x":-718.8506931928334,"y":37.23896749460039,"parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To User SDK Client","name":"to-User SDK Client","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At User SDK Client","name":"at-User SDK Client","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached User SDK Client","name":"reached-User SDK Client","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Site SDK Client","name":"to-Site SDK Client","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Site SDK Client","name":"at-Site SDK Client","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Site SDK Client","name":"reached-Site SDK Client","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"group":"States","displayName":"State","name":"currentState","default":"User SDK Client","index":12}],"children":[]},{"id":"170cdc6b-e532-c26e-5d30-dfd2098d1ffc","type":"JavaScriptFunction","x":-480.61664838642173,"y":-21.01383290325157,"parameters":{"functionScript":"const state = Inputs.SDKClient ?? null;\r\n\r\nlet res = true;\r\n\r\nif(state == \"Site SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.SiteClient || null;\r\n    if(!client){\r\n        res = false;\r\n        throw new Error(\"Directus Site Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(state == \"User SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.Client || null;\r\n    if(!client){ \r\n        res = false;\r\n        throw new Error(\"Directus User Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(res){\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-SDKClient","displayName":"SDKClient","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"608e7f0d-444e-a51f-fad4-a0afe1cab980","type":"Timer","x":-243.4830107572318,"y":-22.355880778213702,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"9f7cb40d-6fea-1a5f-9c15-5faf3d3ea606","type":"Timer","x":-718,"y":-48,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"7f865936-72e3-ae2a-0e15-44270f7c043e","type":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for Read)","x":-421.86744630779845,"y":330.1155290943941,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"3c3f0088-7e01-2599-4fc9-f79172d57149","type":"Javascript2","x":281.42005339425987,"y":280.5398400765414,"parameters":{"code":"Script.Inputs = {\r\n    client: \"string\",\r\n    operation: \"string\",\r\n    itemID: \"string\",\r\n    query: \"object\"\r\n}\r\n\r\n\r\nScript.Signals.GetData = async function () {\r\n\r\n    const client_selection = Script.Inputs.client || null;\r\n    const sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\n    const operation = Script.Inputs.operation;\r\n    const itemID = Script.Inputs.itemID;\r\n\r\n    const query = Script.Inputs.query || {};\r\n\r\n    try {\r\n        if (sdk_client && operation) {\r\n            let result;\r\n            switch (operation) {\r\n                case \"single\":\r\n                    if(!itemID) throw new Error(\"Provide valid ID!\");\r\n                    result = await sdk_client.request(Directus.readFolder(itemID, query));\r\n                    break;\r\n                case \"multiple\":\r\n                    result = await sdk_client.request(Directus.readFolders(query));\r\n                    break;\r\n                case \"all\":\r\n                    query.limit = -1;\r\n                    result = await sdk_client.request(Directus.readFolders(query));\r\n                    break;\r\n            }\r\n            \r\n            Script.Outputs.result = result;\r\n            if (result) {\r\n                Script.Outputs.Success();\r\n            } else {\r\n                Script.Outputs.Failure();\r\n            }\r\n        } else {\r\n            console.error(err);\r\n\r\n            Script.Outputs.error = \"Invalid configuration!\";\r\n            Script.Outputs.Failure();\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Script.Outputs.error = err?.errors.map(i => i.message).join(\"\\n\") ?? JSON.stringify(err);\r\n        Script.Outputs.Failure();\r\n    }\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"client","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"operation","plug":"input","type":{"name":"string"},"group":"Inputs","index":6},{"name":"itemID","plug":"input","type":{"name":"string"},"group":"Inputs","index":7},{"name":"query","plug":"input","type":{"name":"object"},"group":"Inputs","index":8},{"name":"GetData","plug":"input","type":{"name":"signal"},"group":"Inputs","index":9},{"name":"Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":10},{"name":"Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":11},{"name":"result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":12},{"name":"error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":13}],"children":[],"metadata":{"merge":{"soureCodePorts":["code"]}}},{"id":"771771af-9f91-3c5f-c756-35b99e0da636","type":"States","label":"Get Type","x":-719.5269848854084,"y":259.36393813385837,"parameters":{"states":"Get Single by ID,Get Multiple by Filter,Get All"},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Get Single by ID","name":"to-Get Single by ID","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At Get Single by ID","name":"at-Get Single by ID","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached Get Single by ID","name":"reached-Get Single by ID","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Get Multiple by Filter","name":"to-Get Multiple by Filter","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Get Multiple by Filter","name":"at-Get Multiple by Filter","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Get Multiple by Filter","name":"reached-Get Multiple by Filter","group":"Current state","index":11},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Get All","name":"to-Get All","group":"Go to state","index":12},{"plug":"output","type":"boolean","displayName":"At Get All","name":"at-Get All","group":"Current state","index":13},{"plug":"output","type":"signal","displayName":"Has Reached Get All","name":"reached-Get All","group":"Current state","index":14},{"plug":"input","type":{"name":"enum","enums":["Get Single by ID","Get Multiple by Filter","Get All"]},"group":"States","displayName":"State","name":"currentState","default":"Get Single by ID","index":15}],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Files/Directus - Import File","id":"537d9149-a0f7-56a6-bd8c-5262114df92f","graph":{"connections":[{"fromId":"4c4a79a8-ef55-32da-c3ef-afd7b711f278","fromProperty":"out-Failure","toId":"9006fbf2-68d2-29d4-61bf-93b1484c4dfd","toProperty":"Failure"},{"fromId":"4c4a79a8-ef55-32da-c3ef-afd7b711f278","fromProperty":"out-error","toId":"9006fbf2-68d2-29d4-61bf-93b1484c4dfd","toProperty":"error"},{"fromId":"4c4a79a8-ef55-32da-c3ef-afd7b711f278","fromProperty":"out-Success","toId":"9006fbf2-68d2-29d4-61bf-93b1484c4dfd","toProperty":"Success"},{"fromId":"2bb09a52-fcee-5f5b-ec32-d0d72b15967d","fromProperty":"file object","toId":"4c4a79a8-ef55-32da-c3ef-afd7b711f278","toProperty":"in-file_object"},{"fromId":"8e058105-13f4-aaa8-909e-1656cc2bb15c","fromProperty":"currentState","toId":"067376fc-2f76-4658-78d8-82f6c96aec2b","toProperty":"in-SDKClient"},{"fromId":"c7cdbca2-72d4-c677-04bd-a742391b2f94","fromProperty":"timerFinished","toId":"067376fc-2f76-4658-78d8-82f6c96aec2b","toProperty":"run"},{"fromId":"067376fc-2f76-4658-78d8-82f6c96aec2b","fromProperty":"out-Done","toId":"d8b7a169-132a-248e-ae13-a59ec6333c33","toProperty":"start"},{"fromId":"2bb09a52-fcee-5f5b-ec32-d0d72b15967d","fromProperty":"Do","toId":"c7cdbca2-72d4-c677-04bd-a742391b2f94","toProperty":"start"},{"fromId":"2bb09a52-fcee-5f5b-ec32-d0d72b15967d","fromProperty":"SDK Client to use","toId":"8e058105-13f4-aaa8-909e-1656cc2bb15c","toProperty":"currentState"},{"fromId":"d8b7a169-132a-248e-ae13-a59ec6333c33","fromProperty":"timerFinished","toId":"4c4a79a8-ef55-32da-c3ef-afd7b711f278","toProperty":"run"},{"fromId":"8e058105-13f4-aaa8-909e-1656cc2bb15c","fromProperty":"currentState","toId":"4c4a79a8-ef55-32da-c3ef-afd7b711f278","toProperty":"in-client"},{"fromId":"4c4a79a8-ef55-32da-c3ef-afd7b711f278","fromProperty":"out-result","toId":"9006fbf2-68d2-29d4-61bf-93b1484c4dfd","toProperty":"result"},{"fromId":"2bb09a52-fcee-5f5b-ec32-d0d72b15967d","fromProperty":"file url","toId":"4c4a79a8-ef55-32da-c3ef-afd7b711f278","toProperty":"in-file_url"}],"roots":[{"id":"2bb09a52-fcee-5f5b-ec32-d0d72b15967d","type":"Component Inputs","x":222,"y":506,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"file url","plug":"output","type":{"name":"*"},"group":"Data","index":2},{"name":"file object","plug":"output","type":{"name":"*"},"group":"Data","index":3},{"name":"SDK Client to use","plug":"output","type":{"name":"*"},"index":1}],"dynamicports":[],"children":[]},{"id":"9006fbf2-68d2-29d4-61bf-93b1484c4dfd","type":"Component Outputs","x":1634,"y":587,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":2},{"name":"result","plug":"input","type":{"name":"*"},"index":3}],"dynamicports":[],"children":[]},{"id":"4c4a79a8-ef55-32da-c3ef-afd7b711f278","type":"JavaScriptFunction","x":1364,"y":525,"parameters":{"functionScript":"const file_url = Inputs.file_url;\r\nconst file_object = Inputs.file_object || {};\r\n\r\nif (!file_url) return;\r\n\r\nconst client_selection = Inputs.client || null;\r\nconst sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\nconst main = async function () {\r\n    try {\r\n        const result = await sdk_client.request(Directus.importFile(file_url, file_object));\r\n\r\n        Outputs.result = result;\r\n        Outputs.Success();\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n        Outputs.error = err?.errors.map(i => i.message).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nmain();\r\n"},"ports":[],"dynamicports":[{"name":"in-file_url","displayName":"file_url","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-file_object","displayName":"file_object","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-client","displayName":"client","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":8},{"name":"out-result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":9},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":10}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"8e058105-13f4-aaa8-909e-1656cc2bb15c","type":"States","label":"Client type","x":553,"y":308,"parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To User SDK Client","name":"to-User SDK Client","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At User SDK Client","name":"at-User SDK Client","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached User SDK Client","name":"reached-User SDK Client","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Site SDK Client","name":"to-Site SDK Client","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Site SDK Client","name":"at-Site SDK Client","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Site SDK Client","name":"reached-Site SDK Client","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"group":"States","displayName":"State","name":"currentState","default":"User SDK Client","index":12}],"children":[]},{"id":"067376fc-2f76-4658-78d8-82f6c96aec2b","type":"JavaScriptFunction","x":792,"y":249,"parameters":{"functionScript":"const state = Inputs.SDKClient ?? null;\r\n\r\nlet res = true;\r\n\r\nif(state == \"Site SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.SiteClient || null;\r\n    if(!client){\r\n        res = false;\r\n        throw new Error(\"Directus Site Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(state == \"User SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.Client || null;\r\n    if(!client){ \r\n        res = false;\r\n        throw new Error(\"Directus User Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(res){\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-SDKClient","displayName":"SDKClient","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"d8b7a169-132a-248e-ae13-a59ec6333c33","type":"Timer","x":1029,"y":248,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"c7cdbca2-72d4-c677-04bd-a742391b2f94","type":"Timer","x":554,"y":222,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Files/Directus - Upload File","id":"db814068-ba83-d8d8-054b-3f0a3794ae2e","graph":{"connections":[{"fromId":"f5c25aa6-a4b8-e707-414a-9457c8fec1b7","fromProperty":"out-Failure","toId":"34a1a8cc-0585-b445-e915-376f2715f857","toProperty":"Failure"},{"fromId":"f5c25aa6-a4b8-e707-414a-9457c8fec1b7","fromProperty":"out-error","toId":"34a1a8cc-0585-b445-e915-376f2715f857","toProperty":"error"},{"fromId":"f5c25aa6-a4b8-e707-414a-9457c8fec1b7","fromProperty":"out-Success","toId":"34a1a8cc-0585-b445-e915-376f2715f857","toProperty":"Success"},{"fromId":"d97214cb-b1a9-c731-ba35-e8dcd2c74e3a","fromProperty":"file","toId":"f5c25aa6-a4b8-e707-414a-9457c8fec1b7","toProperty":"in-raw_file"},{"fromId":"d97214cb-b1a9-c731-ba35-e8dcd2c74e3a","fromProperty":"file object","toId":"f5c25aa6-a4b8-e707-414a-9457c8fec1b7","toProperty":"in-file_object"},{"fromId":"efb864b1-e889-1c02-ed0f-1c30ffd6426b","fromProperty":"currentState","toId":"68225952-4b88-9d5e-fc53-67de664f8fca","toProperty":"in-SDKClient"},{"fromId":"5f5ef257-9c73-eda0-a41e-89a606d7c105","fromProperty":"timerFinished","toId":"68225952-4b88-9d5e-fc53-67de664f8fca","toProperty":"run"},{"fromId":"68225952-4b88-9d5e-fc53-67de664f8fca","fromProperty":"out-Done","toId":"9f6df6bd-7b87-da40-e8a8-c35a28b6aac8","toProperty":"start"},{"fromId":"d97214cb-b1a9-c731-ba35-e8dcd2c74e3a","fromProperty":"Do","toId":"5f5ef257-9c73-eda0-a41e-89a606d7c105","toProperty":"start"},{"fromId":"d97214cb-b1a9-c731-ba35-e8dcd2c74e3a","fromProperty":"SDK Client to use","toId":"efb864b1-e889-1c02-ed0f-1c30ffd6426b","toProperty":"currentState"},{"fromId":"9f6df6bd-7b87-da40-e8a8-c35a28b6aac8","fromProperty":"timerFinished","toId":"f5c25aa6-a4b8-e707-414a-9457c8fec1b7","toProperty":"run"},{"fromId":"efb864b1-e889-1c02-ed0f-1c30ffd6426b","fromProperty":"currentState","toId":"f5c25aa6-a4b8-e707-414a-9457c8fec1b7","toProperty":"in-client"},{"fromId":"f5c25aa6-a4b8-e707-414a-9457c8fec1b7","fromProperty":"out-result","toId":"34a1a8cc-0585-b445-e915-376f2715f857","toProperty":"result"}],"roots":[{"id":"d97214cb-b1a9-c731-ba35-e8dcd2c74e3a","type":"Component Inputs","x":222,"y":506,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"file","plug":"output","type":{"name":"*"},"group":"Data","index":2},{"name":"file object","plug":"output","type":{"name":"*"},"group":"Data","index":3},{"name":"SDK Client to use","plug":"output","type":{"name":"*"},"index":1}],"dynamicports":[],"children":[]},{"id":"34a1a8cc-0585-b445-e915-376f2715f857","type":"Component Outputs","x":1634,"y":587,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":2},{"name":"result","plug":"input","type":{"name":"*"},"index":3}],"dynamicports":[],"children":[]},{"id":"f5c25aa6-a4b8-e707-414a-9457c8fec1b7","type":"JavaScriptFunction","x":1364,"y":525,"parameters":{"functionScript":"const raw_file = Inputs.raw_file;\r\nconst file_object = Inputs.file_object || {};\r\n\r\nif (!raw_file) return;\r\n\r\nconst client_selection = Inputs.client || null;\r\nconst sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\nconst main = async function () {\r\n    try {\r\n        const formData = new FormData();\r\n\r\n        if (Object.keys(file_object).length > 0) {\r\n            for (const key in file_object) {\r\n                formData.append(key, file_object[key]);\r\n            }\r\n        }\r\n        formData.append('file', raw_file);\r\n\r\n        const result = await sdk_client.request(Directus.uploadFiles(formData));\r\n\r\n        Outputs.result = result;\r\n        Outputs.Success();\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n        Outputs.error = err?.errors.map(i => i.message).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nmain();\r\n"},"ports":[],"dynamicports":[{"name":"in-raw_file","displayName":"raw_file","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-file_object","displayName":"file_object","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-client","displayName":"client","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":8},{"name":"out-result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":9},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":10}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"efb864b1-e889-1c02-ed0f-1c30ffd6426b","type":"States","label":"Client type","x":553,"y":308,"parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To User SDK Client","name":"to-User SDK Client","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At User SDK Client","name":"at-User SDK Client","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached User SDK Client","name":"reached-User SDK Client","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Site SDK Client","name":"to-Site SDK Client","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Site SDK Client","name":"at-Site SDK Client","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Site SDK Client","name":"reached-Site SDK Client","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"group":"States","displayName":"State","name":"currentState","default":"User SDK Client","index":12}],"children":[]},{"id":"68225952-4b88-9d5e-fc53-67de664f8fca","type":"JavaScriptFunction","x":792,"y":249,"parameters":{"functionScript":"const state = Inputs.SDKClient ?? null;\r\n\r\nlet res = true;\r\n\r\nif(state == \"Site SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.SiteClient || null;\r\n    if(!client){\r\n        res = false;\r\n        throw new Error(\"Directus Site Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(state == \"User SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.Client || null;\r\n    if(!client){ \r\n        res = false;\r\n        throw new Error(\"Directus User Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(res){\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-SDKClient","displayName":"SDKClient","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"9f6df6bd-7b87-da40-e8a8-c35a28b6aac8","type":"Timer","x":1029,"y":248,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"5f5ef257-9c73-eda0-a41e-89a606d7c105","type":"Timer","x":554,"y":222,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Flows/Directus - List Flows","id":"5517da6e-56b2-f5c9-4a9c-049951fba8f7","graph":{"connections":[{"fromId":"cab154f5-f7aa-00aa-2e19-fcc498476141","fromProperty":"SDK Client to use","toId":"03143d1d-c2e8-2d2a-9184-f2f8bb4d7f25","toProperty":"currentState"},{"fromId":"03143d1d-c2e8-2d2a-9184-f2f8bb4d7f25","fromProperty":"currentState","toId":"b491d597-a65f-4d0a-675e-1963e63d4815","toProperty":"in-SDKClient"},{"fromId":"cab154f5-f7aa-00aa-2e19-fcc498476141","fromProperty":"Do","toId":"bf4e7c61-5c17-fdde-5d17-89f404c52a4e","toProperty":"start"},{"fromId":"bf4e7c61-5c17-fdde-5d17-89f404c52a4e","fromProperty":"timerFinished","toId":"b491d597-a65f-4d0a-675e-1963e63d4815","toProperty":"run"},{"fromId":"cab154f5-f7aa-00aa-2e19-fcc498476141","fromProperty":"search","toId":"2bdc9289-e387-122c-659e-2197b66775b5","toProperty":"Search"},{"fromId":"cab154f5-f7aa-00aa-2e19-fcc498476141","fromProperty":"filter","toId":"2bdc9289-e387-122c-659e-2197b66775b5","toProperty":"filter"},{"fromId":"cab154f5-f7aa-00aa-2e19-fcc498476141","fromProperty":"aggregate","toId":"2bdc9289-e387-122c-659e-2197b66775b5","toProperty":"aggregate"},{"fromId":"cab154f5-f7aa-00aa-2e19-fcc498476141","fromProperty":"alias","toId":"2bdc9289-e387-122c-659e-2197b66775b5","toProperty":"alias"},{"fromId":"cab154f5-f7aa-00aa-2e19-fcc498476141","fromProperty":"deep","toId":"2bdc9289-e387-122c-659e-2197b66775b5","toProperty":"deep"},{"fromId":"cab154f5-f7aa-00aa-2e19-fcc498476141","fromProperty":"groupBy","toId":"2bdc9289-e387-122c-659e-2197b66775b5","toProperty":"groupBy"},{"fromId":"cab154f5-f7aa-00aa-2e19-fcc498476141","fromProperty":"page","toId":"2bdc9289-e387-122c-659e-2197b66775b5","toProperty":"Page"},{"fromId":"cab154f5-f7aa-00aa-2e19-fcc498476141","fromProperty":"offset","toId":"2bdc9289-e387-122c-659e-2197b66775b5","toProperty":"Offset"},{"fromId":"cab154f5-f7aa-00aa-2e19-fcc498476141","fromProperty":"sort","toId":"2bdc9289-e387-122c-659e-2197b66775b5","toProperty":"Sort"},{"fromId":"cab154f5-f7aa-00aa-2e19-fcc498476141","fromProperty":"fields","toId":"2bdc9289-e387-122c-659e-2197b66775b5","toProperty":"Fields"},{"fromId":"cab154f5-f7aa-00aa-2e19-fcc498476141","fromProperty":"Get all fields","toId":"2bdc9289-e387-122c-659e-2197b66775b5","toProperty":"Get all fields"},{"fromId":"cab154f5-f7aa-00aa-2e19-fcc498476141","fromProperty":"limit","toId":"2bdc9289-e387-122c-659e-2197b66775b5","toProperty":"Limit"},{"fromId":"2bdc9289-e387-122c-659e-2197b66775b5","fromProperty":"query","toId":"62031ff9-d118-de90-3d75-e894326a1cfe","toProperty":"query"},{"fromId":"2bdc9289-e387-122c-659e-2197b66775b5","fromProperty":"operation","toId":"62031ff9-d118-de90-3d75-e894326a1cfe","toProperty":"operation"},{"fromId":"03143d1d-c2e8-2d2a-9184-f2f8bb4d7f25","fromProperty":"currentState","toId":"62031ff9-d118-de90-3d75-e894326a1cfe","toProperty":"client"},{"fromId":"62031ff9-d118-de90-3d75-e894326a1cfe","fromProperty":"result","toId":"8653ad13-f94e-8354-8159-a0dd40c08b06","toProperty":"result"},{"fromId":"62031ff9-d118-de90-3d75-e894326a1cfe","fromProperty":"error","toId":"8653ad13-f94e-8354-8159-a0dd40c08b06","toProperty":"error"},{"fromId":"62031ff9-d118-de90-3d75-e894326a1cfe","fromProperty":"Success","toId":"8653ad13-f94e-8354-8159-a0dd40c08b06","toProperty":"Success"},{"fromId":"62031ff9-d118-de90-3d75-e894326a1cfe","fromProperty":"Failure","toId":"8653ad13-f94e-8354-8159-a0dd40c08b06","toProperty":"Failure"},{"fromId":"b623091f-e6b5-428a-f7df-c1325f2f3a4b","fromProperty":"timerFinished","toId":"62031ff9-d118-de90-3d75-e894326a1cfe","toProperty":"GetData"},{"fromId":"cab154f5-f7aa-00aa-2e19-fcc498476141","fromProperty":"Do","toId":"2bdc9289-e387-122c-659e-2197b66775b5","toProperty":"Set"},{"fromId":"2bdc9289-e387-122c-659e-2197b66775b5","fromProperty":"itemID","toId":"62031ff9-d118-de90-3d75-e894326a1cfe","toProperty":"flowID"},{"fromId":"b491d597-a65f-4d0a-675e-1963e63d4815","fromProperty":"out-Done","toId":"b623091f-e6b5-428a-f7df-c1325f2f3a4b","toProperty":"start"},{"fromId":"cab154f5-f7aa-00aa-2e19-fcc498476141","fromProperty":"Flow Get Type","toId":"34fdb742-9f24-ef97-55fa-d922de267ef1","toProperty":"currentState"},{"fromId":"34fdb742-9f24-ef97-55fa-d922de267ef1","fromProperty":"currentState","toId":"2bdc9289-e387-122c-659e-2197b66775b5","toProperty":"Get Type"},{"fromId":"cab154f5-f7aa-00aa-2e19-fcc498476141","fromProperty":"flow ID","toId":"36f9614a-c3f2-028f-e1fa-f3e16f64ccdc","toProperty":"value"},{"fromId":"36f9614a-c3f2-028f-e1fa-f3e16f64ccdc","fromProperty":"savedValue","toId":"2bdc9289-e387-122c-659e-2197b66775b5","toProperty":"Item ID"}],"roots":[{"id":"cab154f5-f7aa-00aa-2e19-fcc498476141","type":"Component Inputs","x":-1129,"y":360,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"limit","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":4},{"name":"fields","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":6},{"name":"Get all fields","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":5},{"name":"SDK Client to use","plug":"output","type":{"name":"*"},"group":"Config","index":1},{"name":"sort","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":7},{"name":"offset","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":8},{"name":"page","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":9},{"name":"deep","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":14},{"name":"groupBy","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":12},{"name":"aggregate","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":11},{"name":"alias","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":15},{"name":"flow ID","plug":"output","type":{"name":"*"},"group":"What to Get","index":3},{"name":"filter","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":13},{"name":"search","plug":"output","type":{"name":"*"},"group":"Query Parameters","index":10},{"name":"Flow Get Type","plug":"output","type":{"name":"*"},"group":"What to Get","index":2}],"dynamicports":[],"children":[]},{"id":"8653ad13-f94e-8354-8159-a0dd40c08b06","type":"Component Outputs","x":444.39524712057164,"y":227.19478058025948,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":3},{"name":"result","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"03143d1d-c2e8-2d2a-9184-f2f8bb4d7f25","type":"States","label":"Client type","x":-820.4779330568291,"y":145.72752752390454,"parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To User SDK Client","name":"to-User SDK Client","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At User SDK Client","name":"at-User SDK Client","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached User SDK Client","name":"reached-User SDK Client","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Site SDK Client","name":"to-Site SDK Client","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Site SDK Client","name":"at-Site SDK Client","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Site SDK Client","name":"reached-Site SDK Client","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"group":"States","displayName":"State","name":"currentState","default":"User SDK Client","index":12}],"children":[]},{"id":"b491d597-a65f-4d0a-675e-1963e63d4815","type":"JavaScriptFunction","x":-553.366821945718,"y":9.30530538645337,"parameters":{"functionScript":"const state = Inputs.SDKClient ?? null;\r\n\r\nlet res = true;\r\n\r\nif(state == \"Site SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.SiteClient || null;\r\n    if(!client){\r\n        res = false;\r\n        throw new Error(\"Directus Site Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(state == \"User SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.Client || null;\r\n    if(!client){ \r\n        res = false;\r\n        throw new Error(\"Directus User Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(res){\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-SDKClient","displayName":"SDKClient","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"bf4e7c61-5c17-fdde-5d17-89f404c52a4e","type":"Timer","x":-819.1417116197696,"y":39.644554599795924,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"2bdc9289-e387-122c-659e-2197b66775b5","type":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for Read)","x":-491.6710890800407,"y":353.62181075958597,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"62031ff9-d118-de90-3d75-e894326a1cfe","type":"Javascript2","x":167,"y":226,"parameters":{"code":"Script.Inputs = {\r\n    client: \"string\",\r\n    operation: \"string\",\r\n    flowID: \"string\",\r\n}\r\n\r\n\r\nScript.Signals.GetData = async function () {\r\n\r\n    const client_selection = Script.Inputs.client || null;\r\n    const sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\n    const operation = Script.Inputs.operation;\r\n    const flowID = Script.Inputs.flowID;\r\n    \r\n    const query = Script.Inputs.query || {};\r\n\r\n    try {\r\n        if (sdk_client && operation) {\r\n            let result;\r\n            switch (operation) {\r\n                case \"single\":\r\n                    result = await sdk_client.request(Directus.readFlow( flowID, query));\r\n                    break;\r\n                case \"multiple\":\r\n                    result = await sdk_client.request(Directus.readFlows( query));\r\n                    break;\r\n                case \"all\":\r\n                    query.limit = -1;\r\n                    result = await sdk_client.request(Directus.readFlows( query));\r\n                    break;\r\n            }\r\n            \r\n            Script.Outputs.result = result;\r\n            if (result) {\r\n                Script.Outputs.Success();\r\n            } else {\r\n                Script.Outputs.Failure();\r\n            }\r\n        } else {\r\n            console.error(err);\r\n\r\n            Script.Outputs.error = \"Invalid configuration!\";\r\n            Script.Outputs.Failure();\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Script.Outputs.error = err?.errors.map(i => i.message).join(\"\\n\") ?? JSON.stringify(err);\r\n        Script.Outputs.Failure();\r\n    }\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"client","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"operation","plug":"input","type":{"name":"string"},"group":"Inputs","index":6},{"name":"flowID","plug":"input","type":{"name":"string"},"group":"Inputs","index":7},{"name":"GetData","plug":"input","type":{"name":"signal"},"group":"Inputs","index":8},{"name":"query","displayName":"query","plug":"input","type":"*","group":"Inputs","index":9},{"name":"Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":10},{"name":"Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":11},{"name":"result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":12},{"name":"error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":13}],"children":[],"metadata":{"merge":{"soureCodePorts":["code"]}}},{"id":"b623091f-e6b5-428a-f7df-c1325f2f3a4b","type":"Timer","x":-309.2644678530828,"y":31.630738656299854,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"34fdb742-9f24-ef97-55fa-d922de267ef1","type":"States","label":"Get Type","x":-823,"y":279,"parameters":{"states":"Get Single by ID,Get Multiple by Filter,Get All","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Get Single by ID","name":"to-Get Single by ID","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At Get Single by ID","name":"at-Get Single by ID","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached Get Single by ID","name":"reached-Get Single by ID","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Get Multiple by Filter","name":"to-Get Multiple by Filter","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Get Multiple by Filter","name":"at-Get Multiple by Filter","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Get Multiple by Filter","name":"reached-Get Multiple by Filter","group":"Current state","index":11},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Get All","name":"to-Get All","group":"Go to state","index":12},{"plug":"output","type":"boolean","displayName":"At Get All","name":"at-Get All","group":"Current state","index":13},{"plug":"output","type":"signal","displayName":"Has Reached Get All","name":"reached-Get All","group":"Current state","index":14},{"plug":"input","type":{"name":"enum","enums":["Get Single by ID","Get Multiple by Filter","Get All"]},"group":"States","displayName":"State","name":"currentState","default":"Get Single by ID","index":15}],"children":[]},{"id":"36f9614a-c3f2-028f-e1fa-f3e16f64ccdc","type":"String","label":"flow ID","x":-830.0807529372075,"y":389.8583034710232,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Flows/Directus - Run Flow","id":"354a9903-3975-959c-b823-60b2aae648cc","graph":{"connections":[{"fromId":"eb83831b-ced6-c902-e4df-9a7d439ea95f","fromProperty":"SDK Client to use","toId":"e9ee80c0-08f3-e914-dbcd-7455daa0a19d","toProperty":"currentState"},{"fromId":"e9ee80c0-08f3-e914-dbcd-7455daa0a19d","fromProperty":"currentState","toId":"6939a870-57ef-7326-0c78-96334afb675c","toProperty":"in-SDKClient"},{"fromId":"eb83831b-ced6-c902-e4df-9a7d439ea95f","fromProperty":"Do","toId":"59e2c0fc-3ca2-2bc9-0fc5-34e4e4fef6f4","toProperty":"start"},{"fromId":"59e2c0fc-3ca2-2bc9-0fc5-34e4e4fef6f4","fromProperty":"timerFinished","toId":"6939a870-57ef-7326-0c78-96334afb675c","toProperty":"run"},{"fromId":"e9ee80c0-08f3-e914-dbcd-7455daa0a19d","fromProperty":"currentState","toId":"cef63688-0b1d-3a68-f679-ca09396db2cf","toProperty":"client"},{"fromId":"cef63688-0b1d-3a68-f679-ca09396db2cf","fromProperty":"result","toId":"cc8b60fc-6ad2-c1c7-3fae-b6fa253b0ed1","toProperty":"result"},{"fromId":"cef63688-0b1d-3a68-f679-ca09396db2cf","fromProperty":"error","toId":"cc8b60fc-6ad2-c1c7-3fae-b6fa253b0ed1","toProperty":"error"},{"fromId":"cef63688-0b1d-3a68-f679-ca09396db2cf","fromProperty":"Success","toId":"cc8b60fc-6ad2-c1c7-3fae-b6fa253b0ed1","toProperty":"Success"},{"fromId":"cef63688-0b1d-3a68-f679-ca09396db2cf","fromProperty":"Failure","toId":"cc8b60fc-6ad2-c1c7-3fae-b6fa253b0ed1","toProperty":"Failure"},{"fromId":"6939a870-57ef-7326-0c78-96334afb675c","fromProperty":"out-Done","toId":"f648059a-85b6-edb9-9ae1-e3fe90ce412d","toProperty":"start"},{"fromId":"eb83831b-ced6-c902-e4df-9a7d439ea95f","fromProperty":"Trigger type","toId":"da585b01-629c-2fbf-8798-70dcffdd2324","toProperty":"currentState"},{"fromId":"eb83831b-ced6-c902-e4df-9a7d439ea95f","fromProperty":"flow ID","toId":"cef63688-0b1d-3a68-f679-ca09396db2cf","toProperty":"flowID"},{"fromId":"f648059a-85b6-edb9-9ae1-e3fe90ce412d","fromProperty":"timerFinished","toId":"cef63688-0b1d-3a68-f679-ca09396db2cf","toProperty":"RunFlow"},{"fromId":"da585b01-629c-2fbf-8798-70dcffdd2324","fromProperty":"currentState","toId":"cef63688-0b1d-3a68-f679-ca09396db2cf","toProperty":"trigger_type"},{"fromId":"eb83831b-ced6-c902-e4df-9a7d439ea95f","fromProperty":"payload_data","toId":"cef63688-0b1d-3a68-f679-ca09396db2cf","toProperty":"payload_data"},{"fromId":"eb83831b-ced6-c902-e4df-9a7d439ea95f","fromProperty":"query_params","toId":"cef63688-0b1d-3a68-f679-ca09396db2cf","toProperty":"query_params"}],"roots":[{"id":"eb83831b-ced6-c902-e4df-9a7d439ea95f","type":"Component Inputs","x":487,"y":943,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"SDK Client to use","plug":"output","type":{"name":"*"},"group":"Config","index":1},{"name":"flow ID","plug":"output","type":{"name":"*"},"group":"Config","index":3},{"name":"Trigger type","plug":"output","type":{"name":"*"},"group":"Config","index":2},{"name":"payload_data","plug":"output","type":{"name":"*"},"group":"POST trigger","index":4},{"name":"query_params","plug":"output","type":{"name":"*"},"group":"GET trigger","index":6}],"dynamicports":[],"children":[]},{"id":"cc8b60fc-6ad2-c1c7-3fae-b6fa253b0ed1","type":"Component Outputs","x":1893.9499783441859,"y":961.9948695737628,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":3},{"name":"result","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"e9ee80c0-08f3-e914-dbcd-7455daa0a19d","type":"States","label":"Client type","x":772,"y":773,"parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To User SDK Client","name":"to-User SDK Client","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At User SDK Client","name":"at-User SDK Client","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached User SDK Client","name":"reached-User SDK Client","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Site SDK Client","name":"to-Site SDK Client","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Site SDK Client","name":"at-Site SDK Client","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Site SDK Client","name":"reached-Site SDK Client","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"group":"States","displayName":"State","name":"currentState","default":"User SDK Client","index":12}],"children":[]},{"id":"6939a870-57ef-7326-0c78-96334afb675c","type":"JavaScriptFunction","x":1033,"y":724,"parameters":{"functionScript":"const state = Inputs.SDKClient ?? null;\r\n\r\nlet res = true;\r\n\r\nif(state == \"Site SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.SiteClient || null;\r\n    if(!client){\r\n        res = false;\r\n        throw new Error(\"Directus Site Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(state == \"User SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.Client || null;\r\n    if(!client){ \r\n        res = false;\r\n        throw new Error(\"Directus User Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(res){\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-SDKClient","displayName":"SDKClient","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"59e2c0fc-3ca2-2bc9-0fc5-34e4e4fef6f4","type":"Timer","x":773,"y":667,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"cef63688-0b1d-3a68-f679-ca09396db2cf","type":"Javascript2","x":1641.9499783441859,"y":840.9948695737628,"parameters":{"code":"Script.Inputs = {\r\n    client: \"string\",\r\n    flowID: \"string\",\r\n    trigger_type: \"string\"\r\n}\r\n\r\n\r\nScript.Signals.RunFlow = async function () {\r\n\r\n    const client_selection = Script.Inputs.client || null;\r\n    const sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\n    const trigger_type = Script.Inputs.trigger_type ?? null;\r\n    const flowID = Script.Inputs.flowID ?? null;\r\n\r\n    const query_params = Script.Inputs.query_params ?? {};\r\n    const payload_data = Script.Inputs.payload_data ?? {};\r\n\r\n    try {\r\n        if (sdk_client && trigger_type && flowID) {\r\n            let result;\r\n\r\n            if (trigger_type == \"GET\") {\r\n                result = await sdk_client.request(Directus.triggerFlow('GET', flowID, query_params ));\r\n            }\r\n            \r\n            if (trigger_type == \"POST\") {\r\n                result = await sdk_client.request(Directus.triggerFlow('POST', flowID, payload_data));\r\n            }\r\n\r\n            Script.Outputs.result = result;\r\n            if (result) {\r\n                Script.Outputs.Success();\r\n            } else {\r\n                Script.Outputs.Failure();\r\n            }\r\n        } else {\r\n            console.error(err);\r\n\r\n            Script.Outputs.error = \"Invalid configuration!\";\r\n            Script.Outputs.Failure();\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Script.Outputs.error = err?.errors.map(i => i.message).join(\"\\n\") ?? JSON.stringify(err);\r\n        Script.Outputs.Failure();\r\n    }\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"client","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"flowID","plug":"input","type":{"name":"string"},"group":"Inputs","index":6},{"name":"trigger_type","plug":"input","type":{"name":"string"},"group":"Inputs","index":7},{"name":"RunFlow","plug":"input","type":{"name":"signal"},"group":"Inputs","index":8},{"name":"query_params","displayName":"query_params","plug":"input","type":"*","group":"Inputs","index":9},{"name":"payload_data","displayName":"payload_data","plug":"input","type":"*","group":"Inputs","index":10},{"name":"Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":11},{"name":"Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":12},{"name":"result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":13},{"name":"error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":14}],"children":[],"metadata":{"merge":{"soureCodePorts":["code"]}}},{"id":"f648059a-85b6-edb9-9ae1-e3fe90ce412d","type":"Timer","x":1261,"y":726,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"da585b01-629c-2fbf-8798-70dcffdd2324","type":"States","x":775.2667031543157,"y":905.8165685219599,"parameters":{"states":"GET,POST","useTransitions":false,"currentState":"POST"},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To GET","name":"to-GET","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At GET","name":"at-GET","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached GET","name":"reached-GET","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To POST","name":"to-POST","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At POST","name":"at-POST","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached POST","name":"reached-POST","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["GET","POST"]},"group":"States","displayName":"State","name":"currentState","default":"GET","index":12}],"children":[]}],"visualRoots":[],"comments":[{"text":"                                   ❗ ⚠️ Warning ⚠️ ❗\n\nThe usage of Flows, especially as Cloud Functions, has to be properly secured.\n\nDo check out the Docs to ensure that the Security of your Directus backend has been ensured before you execute Flows using this component!","width":544,"height":241,"fill":"transparent","x":823,"y":329,"id":"04ae28b4-849b-c1b7-c8f0-170970f97d8f","color":"danger","largeFont":true},{"text":"1. It is recommended to use POST based Flows, whenever possible\n2. In the case of GET based Flows, make sure to provide valid 'query parameters' only","width":792,"height":80,"fill":"transparent","x":810,"y":1257,"id":"2ba8203c-fb4a-eecc-127d-b3cd638bd2f5","color":"notice","largeFont":true}]}},{"name":"/#Directus/Directus Prefab/Components/Other/Directus - Ping Server","id":"f7f4d3a3-a47e-64d8-6a4d-f8493ae79bcc","graph":{"connections":[{"fromId":"8987a1f4-9f2a-8ee0-1cb3-6cb9e8b5c928","fromProperty":"Do","toId":"363e930d-4bd6-53ac-9bbc-15e4aef32079","toProperty":"run"},{"fromId":"363e930d-4bd6-53ac-9bbc-15e4aef32079","fromProperty":"out-Success","toId":"a90fcb22-78ae-7ae3-18e9-844a8dd88cc9","toProperty":"Success"},{"fromId":"363e930d-4bd6-53ac-9bbc-15e4aef32079","fromProperty":"out-Failure","toId":"a90fcb22-78ae-7ae3-18e9-844a8dd88cc9","toProperty":"Failure"},{"fromId":"363e930d-4bd6-53ac-9bbc-15e4aef32079","fromProperty":"out-error","toId":"a90fcb22-78ae-7ae3-18e9-844a8dd88cc9","toProperty":"error"}],"roots":[{"id":"8987a1f4-9f2a-8ee0-1cb3-6cb9e8b5c928","type":"Component Inputs","x":-224,"y":-12,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0}],"dynamicports":[],"children":[]},{"id":"a90fcb22-78ae-7ae3-18e9-844a8dd88cc9","type":"Component Outputs","x":278,"y":-11,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"363e930d-4bd6-53ac-9bbc-15e4aef32079","type":"JavaScriptFunction","x":23.200000000000045,"y":-12.099998474121094,"parameters":{"functionScript":"const client = Noodl.Objects.DirectusSDK.Client ?? Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\nconst main = async function () {\r\n    try {\r\n        if (client) {\r\n            const result = await client.request(Directus.serverPing());\r\n\r\n            if (result == \"pong\") {\r\n                Outputs.Success();\r\n            } else {\r\n                Outputs.error = \"Unable to reach server!\"\r\n                Outputs.Failure();\r\n            }\r\n        } else {\r\n            throw new Error(\"Invalid Intitialization!\");\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Outputs.error = err?.errors.map(i => i.message).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nmain();\r\n"},"ports":[],"dynamicports":[{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":4},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":6}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Other/Directus - Server info","id":"e6fcc88b-fe08-a64f-2eb0-6e46abaf6d46","graph":{"connections":[{"fromId":"7c59f4e0-7322-f3d4-15f1-5630e6accc4a","fromProperty":"out-Success","toId":"142eda76-fa70-4ae8-b36c-1e4f5765b805","toProperty":"Success"},{"fromId":"7c59f4e0-7322-f3d4-15f1-5630e6accc4a","fromProperty":"out-Failure","toId":"142eda76-fa70-4ae8-b36c-1e4f5765b805","toProperty":"Failure"},{"fromId":"7c59f4e0-7322-f3d4-15f1-5630e6accc4a","fromProperty":"out-error","toId":"142eda76-fa70-4ae8-b36c-1e4f5765b805","toProperty":"error"},{"fromId":"0d5626d3-0db6-98ee-d28d-50a1634c11c6","fromProperty":"Do","toId":"35f61c71-2b41-97c4-2993-2895795308f6","toProperty":"Do"},{"fromId":"35f61c71-2b41-97c4-2993-2895795308f6","fromProperty":"Done","toId":"7c59f4e0-7322-f3d4-15f1-5630e6accc4a","toProperty":"run"},{"fromId":"35f61c71-2b41-97c4-2993-2895795308f6","fromProperty":"client","toId":"7c59f4e0-7322-f3d4-15f1-5630e6accc4a","toProperty":"in-client"}],"roots":[{"id":"0d5626d3-0db6-98ee-d28d-50a1634c11c6","type":"Component Inputs","x":-499,"y":-8,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0}],"dynamicports":[],"children":[]},{"id":"142eda76-fa70-4ae8-b36c-1e4f5765b805","type":"Component Outputs","x":278,"y":-11,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"7c59f4e0-7322-f3d4-15f1-5630e6accc4a","type":"JavaScriptFunction","x":23.200000000000045,"y":-12.099998474121094,"parameters":{"functionScript":"const client = Inputs.client || null;\r\n\r\nconst main = async function () {\r\n    try {\r\n        if (client) {\r\n            const result = await client.request(Directus.serverInfo());\r\n\r\n            if (result) {\r\n                Outputs.Success();\r\n            } else {\r\n                Outputs.error = \"Unable to reach server!\"\r\n                Outputs.Failure();\r\n            }\r\n        } else {\r\n            throw new Error(\"Invalid Intitialization!\");\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Outputs.error = err?.errors.map(i => i.message).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nmain();\r\n"},"ports":[],"dynamicports":[{"name":"in-client","displayName":"client","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":7}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"35f61c71-2b41-97c4-2993-2895795308f6","type":"/#Directus/Directus Prefab/Components/Utils/Get a SDK client","x":-247.0666666666666,"y":-8.966664632161496,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/User/Directus - Get Current User","id":"49d71160-2456-7a9a-87f7-8edc4ded05e0","graph":{"connections":[{"fromId":"020ea414-c347-208b-2ae8-e102caa3cf41","fromProperty":"Do","toId":"6fa3081c-b4a1-e7b3-2d3e-dd251ce0d8db","toProperty":"run"},{"fromId":"6fa3081c-b4a1-e7b3-2d3e-dd251ce0d8db","fromProperty":"out-Success","toId":"fed414db-a89f-9de8-fa37-0808eb54f968","toProperty":"Success"},{"fromId":"6fa3081c-b4a1-e7b3-2d3e-dd251ce0d8db","fromProperty":"out-Failure","toId":"fed414db-a89f-9de8-fa37-0808eb54f968","toProperty":"Failure"},{"fromId":"6fa3081c-b4a1-e7b3-2d3e-dd251ce0d8db","fromProperty":"out-error","toId":"fed414db-a89f-9de8-fa37-0808eb54f968","toProperty":"error"},{"fromId":"6fa3081c-b4a1-e7b3-2d3e-dd251ce0d8db","fromProperty":"out-Failure","toId":"69d7934d-e8fc-fc5c-a17d-69e694d80e29","toProperty":"sendEvent"}],"roots":[{"id":"020ea414-c347-208b-2ae8-e102caa3cf41","type":"Component Inputs","x":-258,"y":-12,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0}],"dynamicports":[],"children":[]},{"id":"fed414db-a89f-9de8-fa37-0808eb54f968","type":"Component Outputs","x":331,"y":-14,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"6fa3081c-b4a1-e7b3-2d3e-dd251ce0d8db","type":"JavaScriptFunction","x":23.200000000000045,"y":-12.099998474121094,"parameters":{"functionScript":"const client = Noodl.Objects.DirectusSDK.Client ?? null;\r\n\r\nconst main = async function () {\r\n    try {\r\n        const result = await client.request(Directus.readMe());\r\n\r\n        Noodl.Objects[\"Current User\"] = result;\r\n        Noodl.Objects[\"Current User\"].authenticated = true;\r\n\r\n        if(result?.avatar){\r\n            const token = await client.getToken();\r\n            Noodl.Objects[\"Current User\"].avatar = Noodl.Objects.DirectusSDK.Client.url.origin + \"/assets/\" + result.avatar + \"?access_token=\" + token ?? null;\r\n        }\r\n\r\n        Outputs.Success();\r\n        \r\n    } catch (err) {\r\n        console.error(err);\r\n        \r\n        Noodl.Objects[\"Current User\"].authenticated = false;\r\n\r\n        Outputs.error = err?.errors.map(i => i.message ).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nmain();\r\n"},"ports":[],"dynamicports":[{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":4},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":6}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"69d7934d-e8fc-fc5c-a17d-69e694d80e29","type":"Event Sender","x":328,"y":149,"parameters":{"channelName":"User-Logged-Out"},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/User/Directus - Update Current User","id":"13f01da9-a8f4-d535-af79-803269109bf3","graph":{"connections":[{"fromId":"2734f108-cb0e-f7b6-4c54-1b0206d0e3f1","fromProperty":"Do","toId":"181a8562-707d-2ba5-e503-f9b2bacba1eb","toProperty":"run"},{"fromId":"181a8562-707d-2ba5-e503-f9b2bacba1eb","fromProperty":"out-Success","toId":"4fe18522-a84c-f25b-59cb-ddfde177d1e9","toProperty":"Success"},{"fromId":"181a8562-707d-2ba5-e503-f9b2bacba1eb","fromProperty":"out-error","toId":"4fe18522-a84c-f25b-59cb-ddfde177d1e9","toProperty":"error"},{"fromId":"2734f108-cb0e-f7b6-4c54-1b0206d0e3f1","fromProperty":"data","toId":"181a8562-707d-2ba5-e503-f9b2bacba1eb","toProperty":"in-data"},{"fromId":"181a8562-707d-2ba5-e503-f9b2bacba1eb","fromProperty":"out-Success","toId":"084c4b02-6b63-4052-65f4-c7fa9b813fef","toProperty":"sendEvent"},{"fromId":"181a8562-707d-2ba5-e503-f9b2bacba1eb","fromProperty":"out-Failure","toId":"e5c4a34a-ed83-a564-37e4-971e0f5f330e","toProperty":"Do"},{"fromId":"e5c4a34a-ed83-a564-37e4-971e0f5f330e","fromProperty":"Success","toId":"4fe18522-a84c-f25b-59cb-ddfde177d1e9","toProperty":"Failure"},{"fromId":"e5c4a34a-ed83-a564-37e4-971e0f5f330e","fromProperty":"Failure","toId":"4fe18522-a84c-f25b-59cb-ddfde177d1e9","toProperty":"Failure"}],"roots":[{"id":"2734f108-cb0e-f7b6-4c54-1b0206d0e3f1","type":"Component Inputs","x":-224,"y":-12,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"data","plug":"output","type":{"name":"*"},"index":1}],"dynamicports":[],"children":[]},{"id":"4fe18522-a84c-f25b-59cb-ddfde177d1e9","type":"Component Outputs","x":533,"y":-14,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"error","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"181a8562-707d-2ba5-e503-f9b2bacba1eb","type":"JavaScriptFunction","x":23.200000000000045,"y":-12.099998474121094,"parameters":{"functionScript":"const client = Noodl.Objects.DirectusSDK.Client ?? null;\r\n\r\nconst data = Inputs.data || {};\r\n\r\nconst main = async function () {\r\n    try {\r\n        const result = await client.request(Directus.updateMe(data));\r\n\r\n        Noodl.Objects[\"Current User\"] = result;\r\n\r\n        if(result?.avatar){\r\n            const token = await client.getToken();\r\n            Noodl.Objects[\"Current User\"].avatar = Noodl.Objects.DirectusSDK.Client.url.origin + \"/assets/\" + result.avatar + \"?access_token=\" + token ?? null;\r\n        }\r\n\r\n        Outputs.Success();\r\n        \r\n    } catch (err) {\r\n        console.error(err);\r\n        \r\n        Noodl.Objects[\"Current User\"].authenticated = false;\r\n\r\n        Outputs.error = err?.errors.map(i => i.message ).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nmain();\r\n"},"ports":[],"dynamicports":[{"name":"in-data","displayName":"data","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":7}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"084c4b02-6b63-4052-65f4-c7fa9b813fef","type":"Event Sender","x":279.6531553094667,"y":-150.77754756471768,"parameters":{"channelName":"User-Updated"},"ports":[],"dynamicports":[],"children":[]},{"id":"e5c4a34a-ed83-a564-37e4-971e0f5f330e","type":"/#Directus/Directus Prefab/Components/User/Directus - Get Current User","x":293.8132888273666,"y":111.18061501616921,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for Create)","id":"41603119-534a-3944-e08d-52e4a82c3981","graph":{"connections":[{"fromId":"c0d1bb3b-0923-311a-d5e0-a55a4de28e3e","fromProperty":"Search","toId":"26403cd2-1449-99ea-a68f-caf00a9f269b","toProperty":"value"},{"fromId":"c0d1bb3b-0923-311a-d5e0-a55a4de28e3e","fromProperty":"filter","toId":"3c401c17-0bcf-c005-38e6-d67a0dcaa5df","toProperty":"in-filter"},{"fromId":"c0d1bb3b-0923-311a-d5e0-a55a4de28e3e","fromProperty":"aggregate","toId":"3c401c17-0bcf-c005-38e6-d67a0dcaa5df","toProperty":"in-aggregate"},{"fromId":"c0d1bb3b-0923-311a-d5e0-a55a4de28e3e","fromProperty":"alias","toId":"3c401c17-0bcf-c005-38e6-d67a0dcaa5df","toProperty":"in-alias"},{"fromId":"c0d1bb3b-0923-311a-d5e0-a55a4de28e3e","fromProperty":"deep","toId":"3c401c17-0bcf-c005-38e6-d67a0dcaa5df","toProperty":"in-deep"},{"fromId":"c0d1bb3b-0923-311a-d5e0-a55a4de28e3e","fromProperty":"groupBy","toId":"3c401c17-0bcf-c005-38e6-d67a0dcaa5df","toProperty":"in-groupBy"},{"fromId":"c0d1bb3b-0923-311a-d5e0-a55a4de28e3e","fromProperty":"Page","toId":"8176cba1-81ae-a9e1-1efe-f29b1b840fb1","toProperty":"value"},{"fromId":"c0d1bb3b-0923-311a-d5e0-a55a4de28e3e","fromProperty":"Offset","toId":"9e483405-483a-427c-3e04-922883905d1a","toProperty":"value"},{"fromId":"c0d1bb3b-0923-311a-d5e0-a55a4de28e3e","fromProperty":"Sort","toId":"ee2021cf-4770-b2f1-63e2-71419d2087c3","toProperty":"value"},{"fromId":"c0d1bb3b-0923-311a-d5e0-a55a4de28e3e","fromProperty":"Fields","toId":"27139642-814d-b0cf-1a0c-9f63b9bbf975","toProperty":"value"},{"fromId":"c0d1bb3b-0923-311a-d5e0-a55a4de28e3e","fromProperty":"Get all fields","toId":"fca89672-f1e2-4155-e324-b8905ea6efea","toProperty":"value"},{"fromId":"c0d1bb3b-0923-311a-d5e0-a55a4de28e3e","fromProperty":"Limit","toId":"f20345cf-9083-0801-7fbe-24f3b737973c","toProperty":"value"},{"fromId":"3c401c17-0bcf-c005-38e6-d67a0dcaa5df","fromProperty":"out-filter","toId":"40026fdf-d27b-e84f-cb36-114cf36fe44f","toProperty":"in-filter"},{"fromId":"3c401c17-0bcf-c005-38e6-d67a0dcaa5df","fromProperty":"out-aggregate","toId":"40026fdf-d27b-e84f-cb36-114cf36fe44f","toProperty":"in-aggregate"},{"fromId":"3c401c17-0bcf-c005-38e6-d67a0dcaa5df","fromProperty":"out-groupBy","toId":"40026fdf-d27b-e84f-cb36-114cf36fe44f","toProperty":"in-groupBy"},{"fromId":"3c401c17-0bcf-c005-38e6-d67a0dcaa5df","fromProperty":"out-deep","toId":"40026fdf-d27b-e84f-cb36-114cf36fe44f","toProperty":"in-deep"},{"fromId":"3c401c17-0bcf-c005-38e6-d67a0dcaa5df","fromProperty":"out-alias","toId":"40026fdf-d27b-e84f-cb36-114cf36fe44f","toProperty":"in-alias"},{"fromId":"ee2021cf-4770-b2f1-63e2-71419d2087c3","fromProperty":"savedValue","toId":"40026fdf-d27b-e84f-cb36-114cf36fe44f","toProperty":"in-sort"},{"fromId":"9e483405-483a-427c-3e04-922883905d1a","fromProperty":"savedValue","toId":"40026fdf-d27b-e84f-cb36-114cf36fe44f","toProperty":"in-offset"},{"fromId":"8176cba1-81ae-a9e1-1efe-f29b1b840fb1","fromProperty":"savedValue","toId":"40026fdf-d27b-e84f-cb36-114cf36fe44f","toProperty":"in-page"},{"fromId":"26403cd2-1449-99ea-a68f-caf00a9f269b","fromProperty":"savedValue","toId":"40026fdf-d27b-e84f-cb36-114cf36fe44f","toProperty":"in-search"},{"fromId":"40026fdf-d27b-e84f-cb36-114cf36fe44f","fromProperty":"out-query","toId":"0bd67794-bafd-709a-605a-b4687a8aa147","toProperty":"query"},{"fromId":"4b6bbf6e-02a8-3b2d-1d27-78bdfcb332a6","fromProperty":"out-limit","toId":"40026fdf-d27b-e84f-cb36-114cf36fe44f","toProperty":"in-limit"},{"fromId":"f20345cf-9083-0801-7fbe-24f3b737973c","fromProperty":"savedValue","toId":"4b6bbf6e-02a8-3b2d-1d27-78bdfcb332a6","toProperty":"in-limit_raw"},{"fromId":"fca89672-f1e2-4155-e324-b8905ea6efea","fromProperty":"savedValue","toId":"7d63dbb7-d515-885e-8c34-7f2e24c2a140","toProperty":"in-get_all_fields"},{"fromId":"27139642-814d-b0cf-1a0c-9f63b9bbf975","fromProperty":"savedValue","toId":"7d63dbb7-d515-885e-8c34-7f2e24c2a140","toProperty":"in-fields"},{"fromId":"7d63dbb7-d515-885e-8c34-7f2e24c2a140","fromProperty":"out-result","toId":"40026fdf-d27b-e84f-cb36-114cf36fe44f","toProperty":"in-fields"}],"roots":[{"id":"26403cd2-1449-99ea-a68f-caf00a9f269b","type":"String","label":"Search","x":2,"y":1054,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"3c401c17-0bcf-c005-38e6-d67a0dcaa5df","type":"JavaScriptFunction","x":0,"y":1155,"parameters":{"functionScript":"const aggregate = Inputs.aggregate || null;\r\nconst groupBy = Inputs.groupBy || null;\r\nconst filter = Inputs.filter || null;\r\nconst deep = Inputs.deep || null;\r\nconst alias = Inputs.alias || null;\r\n\r\nif (aggregate) {\r\n    if (typeof (aggregate == \"object\")) {\r\n        Outputs.aggregate = aggregate;\r\n    } else {\r\n        throw new Error(\"Data provided for 'aggregate' needs to be of 'Object' type!\")\r\n    }\r\n}\r\n\r\nif (groupBy) {\r\n    if (typeof (groupBy == \"object\") && Array.isArray(groupBy)) {\r\n        Outputs.groupBy = groupBy;\r\n    } else {\r\n        throw new Error(\"Data provided for 'groupBy' needs to be of 'Array' type!\")\r\n    }\r\n}\r\n\r\nif (filter) {\r\n    if (typeof (filter == \"object\")) {\r\n        Outputs.filter = filter;\r\n    } else {\r\n        throw new Error(\"Data provided for 'filter' needs to be of 'Object' type!\")\r\n    }\r\n}\r\n\r\nif (deep) {\r\n    if (typeof (deep == \"object\")) {\r\n        Outputs.deep = deep;\r\n    } else {\r\n        throw new Error(\"Data provided for 'deep' needs to be of 'Object' type!\")\r\n    }\r\n}\r\n\r\nif (alias) {\r\n    if (typeof (alias == \"object\")) {\r\n        Outputs.alias = alias;\r\n    } else {\r\n        throw new Error(\"Data provided for 'alias' needs to be of 'Object' type!\")\r\n    }\r\n}"},"ports":[],"dynamicports":[{"name":"in-aggregate","displayName":"aggregate","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-groupBy","displayName":"groupBy","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-filter","displayName":"filter","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-deep","displayName":"deep","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-alias","displayName":"alias","plug":"input","type":"*","group":"Inputs","index":8},{"name":"out-aggregate","displayName":"aggregate","plug":"output","type":"*","group":"Outputs","index":9},{"name":"out-groupBy","displayName":"groupBy","plug":"output","type":"*","group":"Outputs","index":10},{"name":"out-filter","displayName":"filter","plug":"output","type":"*","group":"Outputs","index":11},{"name":"out-deep","displayName":"deep","plug":"output","type":"*","group":"Outputs","index":12},{"name":"out-alias","displayName":"alias","plug":"output","type":"*","group":"Outputs","index":13}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"8176cba1-81ae-a9e1-1efe-f29b1b840fb1","type":"Number","label":"Page","x":3,"y":953,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"9e483405-483a-427c-3e04-922883905d1a","type":"Number","label":"Offset","x":4,"y":853,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"ee2021cf-4770-b2f1-63e2-71419d2087c3","type":"String","label":"Sort","x":4,"y":756,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"27139642-814d-b0cf-1a0c-9f63b9bbf975","type":"String","label":"Fields","x":5,"y":658,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"fca89672-f1e2-4155-e324-b8905ea6efea","type":"Boolean","label":"Get all fields","x":5,"y":563,"parameters":{"value":true},"ports":[],"dynamicports":[],"children":[]},{"id":"f20345cf-9083-0801-7fbe-24f3b737973c","type":"Number","label":"Limit","x":8,"y":464,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"c0d1bb3b-0923-311a-d5e0-a55a4de28e3e","type":"Component Inputs","x":-459.66425978928964,"y":675.3553739167942,"parameters":{},"ports":[{"name":"Search","plug":"output","type":{"name":"*"},"index":13},{"name":"filter","plug":"output","type":{"name":"*"},"index":16},{"name":"aggregate","plug":"output","type":{"name":"*"},"index":14},{"name":"alias","plug":"output","type":{"name":"*"},"index":18},{"name":"deep","plug":"output","type":{"name":"*"},"index":17},{"name":"groupBy","plug":"output","type":{"name":"*"},"index":15},{"name":"Page","plug":"output","type":{"name":"*"},"index":12},{"name":"Offset","plug":"output","type":{"name":"*"},"index":11},{"name":"Sort","plug":"output","type":{"name":"*"},"index":10},{"name":"Fields","plug":"output","type":{"name":"*"},"index":9},{"name":"Get all fields","plug":"output","type":{"name":"*"},"index":8},{"name":"Limit","plug":"output","type":{"name":"*"},"index":5},{"name":"Set","plug":"output","type":{"name":"*"},"index":0}],"dynamicports":[],"children":[]},{"id":"40026fdf-d27b-e84f-cb36-114cf36fe44f","type":"JavaScriptFunction","x":726.2412815279195,"y":684.314172687856,"parameters":{"functionScript":"const limit = Inputs.limit;\r\nconst fields = Inputs.fields;\r\nconst filter = Inputs.filter ?? null;\r\nconst search = Inputs.search ?? null;\r\nconst sort = Inputs.sort ?? null;\r\nconst offset = Inputs.offset ?? null;\r\nconst page = Inputs.page ?? null;\r\nconst aggregate = Inputs.aggregate ?? null;\r\nconst groupBy = Inputs.groupBy ?? null;\r\nconst deep = Inputs.deep ?? null;\r\nconst alias = Inputs.alias ?? null;\r\n\r\nconst query = {};\r\n\r\nif (limit) query.limit = limit;\r\nif (filter) query.filter = filter;\r\nif (search) query.search = search;\r\nif (fields) query.fields = fields;\r\nif (sort) query.sort = sort;\r\nif (offset) query.offset = offset;\r\nif (page) query.page = page;\r\nif (aggregate) query.aggregate = aggregate;\r\nif (groupBy) query.groupBy = groupBy;\r\nif (deep) query.deep = deep;\r\nif (alias) query.alias = alias;\r\n\r\nOutputs.query = query;\r\nOutputs.Done();"},"ports":[],"dynamicports":[{"name":"in-limit","displayName":"limit","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-fields","displayName":"fields","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-filter","displayName":"filter","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-search","displayName":"search","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-sort","displayName":"sort","plug":"input","type":"*","group":"Inputs","index":8},{"name":"in-offset","displayName":"offset","plug":"input","type":"*","group":"Inputs","index":9},{"name":"in-page","displayName":"page","plug":"input","type":"*","group":"Inputs","index":10},{"name":"in-aggregate","displayName":"aggregate","plug":"input","type":"*","group":"Inputs","index":11},{"name":"in-groupBy","displayName":"groupBy","plug":"input","type":"*","group":"Inputs","index":12},{"name":"in-deep","displayName":"deep","plug":"input","type":"*","group":"Inputs","index":13},{"name":"in-alias","displayName":"alias","plug":"input","type":"*","group":"Inputs","index":14},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":15},{"name":"out-query","displayName":"query","plug":"output","type":"*","group":"Outputs","index":16}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"0bd67794-bafd-709a-605a-b4687a8aa147","type":"Component Outputs","x":982.2849626492933,"y":685.439768508006,"parameters":{},"ports":[{"name":"query","plug":"input","type":{"name":"*"},"index":1}],"dynamicports":[],"children":[]},{"id":"4b6bbf6e-02a8-3b2d-1d27-78bdfcb332a6","type":"JavaScriptFunction","x":370.48310590666244,"y":475.42144282220636,"parameters":{"functionScript":"const limit_raw = Inputs.limit_raw ?? null;\r\n\r\nif(limit_raw){\r\n    Outputs.limit = limit_raw > 0 ? limit_raw : 1;\r\n} else {\r\n    Outputs.limit = null;\r\n}"},"ports":[],"dynamicports":[{"name":"in-limit_raw","displayName":"limit_raw","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-limit","displayName":"limit","plug":"output","type":"*","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"7d63dbb7-d515-885e-8c34-7f2e24c2a140","type":"JavaScriptFunction","x":381.7202678994827,"y":604.1461691931453,"parameters":{"functionScript":"Outputs.result = (Inputs.get_all_fields ?? true) ? '*' : (Inputs.fields || '*');"},"ports":[],"dynamicports":[{"name":"in-get_all_fields","displayName":"get_all_fields","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-fields","displayName":"fields","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":6}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for Delete)","id":"c69efb45-8f45-c552-4b5f-aa69257956b8","graph":{"connections":[{"fromId":"5aa967ad-ce34-fad6-5b79-d78346387e91","fromProperty":"Search","toId":"1ff0eb74-c95b-2922-6b58-b4246b885ed4","toProperty":"value"},{"fromId":"5aa967ad-ce34-fad6-5b79-d78346387e91","fromProperty":"filter","toId":"7924b8b3-a28d-9051-959f-88cf02f26fd3","toProperty":"in-filter"},{"fromId":"5aa967ad-ce34-fad6-5b79-d78346387e91","fromProperty":"deep","toId":"7924b8b3-a28d-9051-959f-88cf02f26fd3","toProperty":"in-deep"},{"fromId":"5aa967ad-ce34-fad6-5b79-d78346387e91","fromProperty":"Page","toId":"1bbe9a69-a2cf-662e-5ee0-57b9b53bb677","toProperty":"value"},{"fromId":"5aa967ad-ce34-fad6-5b79-d78346387e91","fromProperty":"Offset","toId":"bc953da2-7b37-087c-0997-8a335bb76632","toProperty":"value"},{"fromId":"5aa967ad-ce34-fad6-5b79-d78346387e91","fromProperty":"Sort","toId":"90b8202e-4476-68f4-3d62-ebef564fd973","toProperty":"value"},{"fromId":"5aa967ad-ce34-fad6-5b79-d78346387e91","fromProperty":"Limit","toId":"51d37d30-2d0b-b591-c6fc-2417613379d0","toProperty":"value"},{"fromId":"7924b8b3-a28d-9051-959f-88cf02f26fd3","fromProperty":"out-filter","toId":"b6b8931e-9754-caaa-9c80-66e10377a3dd","toProperty":"in-filter"},{"fromId":"7924b8b3-a28d-9051-959f-88cf02f26fd3","fromProperty":"out-deep","toId":"b6b8931e-9754-caaa-9c80-66e10377a3dd","toProperty":"in-deep"},{"fromId":"90b8202e-4476-68f4-3d62-ebef564fd973","fromProperty":"savedValue","toId":"b6b8931e-9754-caaa-9c80-66e10377a3dd","toProperty":"in-sort"},{"fromId":"1ff0eb74-c95b-2922-6b58-b4246b885ed4","fromProperty":"savedValue","toId":"b6b8931e-9754-caaa-9c80-66e10377a3dd","toProperty":"in-search"},{"fromId":"b6b8931e-9754-caaa-9c80-66e10377a3dd","fromProperty":"out-query","toId":"80deaf97-3a9d-0c13-c4f1-1d339285bfc8","toProperty":"query"},{"fromId":"bc953da2-7b37-087c-0997-8a335bb76632","fromProperty":"savedValue","toId":"d66e25e8-fa9a-afcb-f8fc-d6327b7dbc1f","toProperty":"in-value"},{"fromId":"d66e25e8-fa9a-afcb-f8fc-d6327b7dbc1f","fromProperty":"out-result","toId":"b6b8931e-9754-caaa-9c80-66e10377a3dd","toProperty":"in-offset"},{"fromId":"1bbe9a69-a2cf-662e-5ee0-57b9b53bb677","fromProperty":"savedValue","toId":"97f2d474-5ae3-925e-3003-ffb1a03efc76","toProperty":"in-value"},{"fromId":"97f2d474-5ae3-925e-3003-ffb1a03efc76","fromProperty":"out-result","toId":"b6b8931e-9754-caaa-9c80-66e10377a3dd","toProperty":"in-page"},{"fromId":"51d37d30-2d0b-b591-c6fc-2417613379d0","fromProperty":"savedValue","toId":"de4e326b-6ab3-665c-98a1-ac57416cbbe6","toProperty":"in-limit_raw"},{"fromId":"5aa967ad-ce34-fad6-5b79-d78346387e91","fromProperty":"Item ID","toId":"de4e326b-6ab3-665c-98a1-ac57416cbbe6","toProperty":"in-item_id"},{"fromId":"5aa967ad-ce34-fad6-5b79-d78346387e91","fromProperty":"Delete Type","toId":"de4e326b-6ab3-665c-98a1-ac57416cbbe6","toProperty":"in-delete_type"},{"fromId":"de4e326b-6ab3-665c-98a1-ac57416cbbe6","fromProperty":"out-operation","toId":"80deaf97-3a9d-0c13-c4f1-1d339285bfc8","toProperty":"operation"},{"fromId":"de4e326b-6ab3-665c-98a1-ac57416cbbe6","fromProperty":"out-limit","toId":"b6b8931e-9754-caaa-9c80-66e10377a3dd","toProperty":"in-limit"},{"fromId":"5aa967ad-ce34-fad6-5b79-d78346387e91","fromProperty":"Item IDs Array","toId":"de4e326b-6ab3-665c-98a1-ac57416cbbe6","toProperty":"in-item_id_array"},{"fromId":"de4e326b-6ab3-665c-98a1-ac57416cbbe6","fromProperty":"out-itemID","toId":"80deaf97-3a9d-0c13-c4f1-1d339285bfc8","toProperty":"itemID"},{"fromId":"5aa967ad-ce34-fad6-5b79-d78346387e91","fromProperty":"Do","toId":"de4e326b-6ab3-665c-98a1-ac57416cbbe6","toProperty":"run"}],"roots":[{"id":"1ff0eb74-c95b-2922-6b58-b4246b885ed4","type":"String","label":"Search","x":-184,"y":1052,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"7924b8b3-a28d-9051-959f-88cf02f26fd3","type":"JavaScriptFunction","x":-186,"y":1153,"parameters":{"functionScript":"const filter = Inputs.filter || null;\r\nconst deep = Inputs.deep || null;\r\n\r\nif (filter) {\r\n    if (typeof (filter == \"object\")) {\r\n        Outputs.filter = filter;\r\n    } else {\r\n        throw new Error(\"Data provided for 'filter' needs to be of 'Object' type!\")\r\n    }\r\n}\r\n\r\nif (deep) {\r\n    if (typeof (deep == \"object\")) {\r\n        Outputs.deep = deep;\r\n    } else {\r\n        throw new Error(\"Data provided for 'deep' needs to be of 'Object' type!\")\r\n    }\r\n}"},"ports":[],"dynamicports":[{"name":"in-filter","displayName":"filter","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-deep","displayName":"deep","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-filter","displayName":"filter","plug":"output","type":"*","group":"Outputs","index":6},{"name":"out-deep","displayName":"deep","plug":"output","type":"*","group":"Outputs","index":7}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"1bbe9a69-a2cf-662e-5ee0-57b9b53bb677","type":"Number","label":"Page","x":-184,"y":952,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"bc953da2-7b37-087c-0997-8a335bb76632","type":"Number","label":"Offset","x":-182,"y":851,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"90b8202e-4476-68f4-3d62-ebef564fd973","type":"String","label":"Sort","x":-182,"y":754,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"51d37d30-2d0b-b591-c6fc-2417613379d0","type":"Number","label":"Limit","x":-182.31578947368416,"y":652.3684210526316,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"5aa967ad-ce34-fad6-5b79-d78346387e91","type":"Component Inputs","x":-674.2958387366577,"y":514.9869528641626,"parameters":{},"ports":[{"name":"Search","plug":"output","type":{"name":"*"},"index":10},{"name":"filter","plug":"output","type":{"name":"*"},"index":13},{"name":"deep","plug":"output","type":{"name":"*"},"index":14},{"name":"Page","plug":"output","type":{"name":"*"},"index":9},{"name":"Offset","plug":"output","type":{"name":"*"},"index":8},{"name":"Sort","plug":"output","type":{"name":"*"},"index":7},{"name":"Fields","plug":"output","type":{"name":"*"},"index":6},{"name":"Get all fields","plug":"output","type":{"name":"*"},"index":5},{"name":"Limit","plug":"output","type":{"name":"*"},"index":4},{"name":"Delete Type","plug":"output","type":{"name":"*"},"index":1},{"name":"Item ID","plug":"output","type":{"name":"*"},"index":2},{"name":"Item IDs Array","plug":"output","type":{"name":"*"},"index":3},{"name":"Do","plug":"output","type":{"name":"*"},"index":0}],"dynamicports":[],"children":[]},{"id":"b6b8931e-9754-caaa-9c80-66e10377a3dd","type":"JavaScriptFunction","x":431.5570710016035,"y":845.0510147931192,"parameters":{"functionScript":"const limit = Inputs.limit;\r\nconst fields = Inputs.fields;\r\nconst filter = Inputs.filter ?? null;\r\nconst search = Inputs.search ?? null;\r\nconst sort = Inputs.sort ?? null;\r\nconst offset = Inputs.offset ?? null;\r\nconst page = Inputs.page ?? null;\r\nconst deep = Inputs.deep ?? null;\r\n\r\nconst query = {};\r\n\r\nif (limit) query.limit = limit;\r\nif (filter) query.filter = filter;\r\nif (search) query.search = search;\r\nif (fields) query.fields = fields;\r\nif (sort) query.sort = sort;\r\nif (offset) query.offset = offset;\r\nif (page) query.page = page;\r\nif (deep) query.deep = deep;\r\n\r\nOutputs.query = query;"},"ports":[],"dynamicports":[{"name":"in-limit","displayName":"limit","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-fields","displayName":"fields","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-filter","displayName":"filter","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-search","displayName":"search","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-sort","displayName":"sort","plug":"input","type":"*","group":"Inputs","index":8},{"name":"in-offset","displayName":"offset","plug":"input","type":"*","group":"Inputs","index":9},{"name":"in-page","displayName":"page","plug":"input","type":"*","group":"Inputs","index":10},{"name":"in-deep","displayName":"deep","plug":"input","type":"*","group":"Inputs","index":11},{"name":"out-query","displayName":"query","plug":"output","type":"*","group":"Outputs","index":12}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"80deaf97-3a9d-0c13-c4f1-1d339285bfc8","type":"Component Outputs","x":740.390225807188,"y":759.597663244848,"parameters":{},"ports":[{"name":"query","plug":"input","type":{"name":"*"},"index":1},{"name":"operation","plug":"input","type":{"name":"*"},"index":2},{"name":"itemID","plug":"input","type":{"name":"*"},"index":3}],"dynamicports":[],"children":[]},{"id":"97f2d474-5ae3-925e-3003-ffb1a03efc76","type":"JavaScriptFunction","x":94,"y":967,"parameters":{"functionScript":"const value = Inputs.value ?? null;\r\nif(value && value > 0) Outputs.result = value\r\nelse Outputs.result = null;"},"ports":[],"dynamicports":[{"name":"in-value","displayName":"value","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"d66e25e8-fa9a-afcb-f8fc-d6327b7dbc1f","type":"JavaScriptFunction","x":98,"y":862,"parameters":{"functionScript":"const value = Inputs.value ?? null;\r\nif(value && value > 0) Outputs.result = value\r\nelse Outputs.result = null;"},"ports":[],"dynamicports":[{"name":"in-value","displayName":"value","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"de4e326b-6ab3-665c-98a1-ac57416cbbe6","type":"JavaScriptFunction","x":94,"y":513,"parameters":{"functionScript":"const delete_type = Inputs.delete_type ?? null;\r\nconst item_id = Inputs.item_id ?? null;\r\nconst item_ids = Inputs.item_id_array ?? null;\r\nconst limit_raw = Inputs.limit_raw ?? null;\r\n\r\nlet operation = null;\r\nlet limit = null;\r\nlet itemID = null;\r\nlet itemIDArray = [];\r\n\r\n///////////////////////////////////\r\n\r\nif (delete_type) {\r\n    if (delete_type == \"Delete Single by ID\") {\r\n        if (item_id) {\r\n            operation = \"single\";\r\n            itemID = item_id;\r\n        } else {\r\n            throw new Error(\"Provide valid Item ID\");\r\n        }\r\n    } else if (delete_type == \"Delete Multiple by Filter\") {\r\n\r\n        if(limit_raw){\r\n            if(limit_raw <= 0){\r\n                limit = 1\r\n            } else {\r\n                limit = limit_raw;\r\n            }\r\n        }\r\n        operation = \"multiple\";\r\n\r\n    } else if (delete_type == \"Delete All\") {\r\n\r\n        limit = -1;\r\n        operation = \"all\";\r\n\r\n    } else {\r\n        operation = null;\r\n    }\r\n    \r\n    Outputs.operation = operation;\r\n    Outputs.itemID = itemID;\r\n    Outputs.limit = limit;\r\n    Outputs.Done();\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"in-delete_type","displayName":"delete_type","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-item_id","displayName":"item_id","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-item_id_array","displayName":"item_id_array","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-limit_raw","displayName":"limit_raw","plug":"input","type":"*","group":"Inputs","index":7},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":8},{"name":"out-operation","displayName":"operation","plug":"output","type":"*","group":"Outputs","index":9},{"name":"out-itemID","displayName":"itemID","plug":"output","type":"*","group":"Outputs","index":10},{"name":"out-limit","displayName":"limit","plug":"output","type":"*","group":"Outputs","index":11}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for File Download)","id":"632134fc-28d4-4d5a-8e7e-2e6df5718e7d","graph":{"connections":[{"fromId":"bbbbc9f4-3932-8faa-654d-0d70ce9b31e4","fromProperty":"out-query","toId":"38a78e08-181b-f88c-98dd-57c3a370638c","toProperty":"query"},{"fromId":"f0a45137-48ee-74b0-5a7d-40b465a5f285","fromProperty":"fit","toId":"a3ffa967-4aff-424c-a7ca-12e22c979525","toProperty":"value"},{"fromId":"f0a45137-48ee-74b0-5a7d-40b465a5f285","fromProperty":"width","toId":"6c241f6c-2231-11cc-ef5d-bd241404db67","toProperty":"value"},{"fromId":"f0a45137-48ee-74b0-5a7d-40b465a5f285","fromProperty":"height","toId":"05abfa78-3343-2dd8-c986-7a8f04bfc901","toProperty":"value"},{"fromId":"f0a45137-48ee-74b0-5a7d-40b465a5f285","fromProperty":"quality","toId":"20e03020-5b5a-ec2a-52eb-f525223f0c29","toProperty":"value"},{"fromId":"f0a45137-48ee-74b0-5a7d-40b465a5f285","fromProperty":"withoutEnlargement","toId":"c3b82e76-0166-5d0f-96a6-046c908ac766","toProperty":"value"},{"fromId":"f0a45137-48ee-74b0-5a7d-40b465a5f285","fromProperty":"format","toId":"4fccceef-53fd-3c43-5ef7-b0910d6c1b97","toProperty":"value"},{"fromId":"a3ffa967-4aff-424c-a7ca-12e22c979525","fromProperty":"savedValue","toId":"bbbbc9f4-3932-8faa-654d-0d70ce9b31e4","toProperty":"in-fit"},{"fromId":"6c241f6c-2231-11cc-ef5d-bd241404db67","fromProperty":"savedValue","toId":"bbbbc9f4-3932-8faa-654d-0d70ce9b31e4","toProperty":"in-width"},{"fromId":"05abfa78-3343-2dd8-c986-7a8f04bfc901","fromProperty":"savedValue","toId":"bbbbc9f4-3932-8faa-654d-0d70ce9b31e4","toProperty":"in-height"},{"fromId":"20e03020-5b5a-ec2a-52eb-f525223f0c29","fromProperty":"savedValue","toId":"bbbbc9f4-3932-8faa-654d-0d70ce9b31e4","toProperty":"in-quality"},{"fromId":"c3b82e76-0166-5d0f-96a6-046c908ac766","fromProperty":"savedValue","toId":"bbbbc9f4-3932-8faa-654d-0d70ce9b31e4","toProperty":"in-withoutEnlargement"},{"fromId":"4fccceef-53fd-3c43-5ef7-b0910d6c1b97","fromProperty":"savedValue","toId":"bbbbc9f4-3932-8faa-654d-0d70ce9b31e4","toProperty":"in-format"},{"fromId":"f0a45137-48ee-74b0-5a7d-40b465a5f285","fromProperty":"Set","toId":"bbbbc9f4-3932-8faa-654d-0d70ce9b31e4","toProperty":"run"},{"fromId":"bbbbc9f4-3932-8faa-654d-0d70ce9b31e4","fromProperty":"out-Done","toId":"38a78e08-181b-f88c-98dd-57c3a370638c","toProperty":"Done"}],"roots":[{"id":"f0a45137-48ee-74b0-5a7d-40b465a5f285","type":"Component Inputs","x":-60.664259789289645,"y":637.3553739167942,"parameters":{},"ports":[{"name":"Set","plug":"output","type":{"name":"*"},"index":0},{"name":"fit","plug":"output","type":{"name":"*"},"index":19},{"name":"width","plug":"output","type":{"name":"*"},"index":20},{"name":"height","plug":"output","type":{"name":"*"},"index":21},{"name":"quality","plug":"output","type":{"name":"*"},"index":22},{"name":"withoutEnlargement","plug":"output","type":{"name":"*"},"index":23},{"name":"format","plug":"output","type":{"name":"*"},"index":24}],"dynamicports":[],"children":[]},{"id":"bbbbc9f4-3932-8faa-654d-0d70ce9b31e4","type":"JavaScriptFunction","x":611.2412815279195,"y":660.314172687856,"parameters":{"functionScript":"const fit = Inputs.fit || null;\r\nconst width = Inputs.width || null;\r\nconst height = Inputs.height || null;\r\nconst quality = Inputs.quality || null;\r\nconst withoutEnlargement = Inputs.withoutEnlargement ?? null;\r\nconst format = Inputs.format || null;\r\n\r\nconst query = {};\r\n\r\nif (fit) query.fit = fit;\r\nif (width) query.width = width;\r\nif (height) query.height = height;\r\nif (quality) query.quality = quality;\r\nif (withoutEnlargement) query.withoutEnlargement = withoutEnlargement;\r\nif (format) query.format = format;\r\n\r\nOutputs.query = query;\r\nOutputs.Done();"},"ports":[],"dynamicports":[{"name":"in-fit","displayName":"fit","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-width","displayName":"width","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-height","displayName":"height","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-quality","displayName":"quality","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-withoutEnlargement","displayName":"withoutEnlargement","plug":"input","type":"*","group":"Inputs","index":8},{"name":"in-format","displayName":"format","plug":"input","type":"*","group":"Inputs","index":9},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":10},{"name":"out-query","displayName":"query","plug":"output","type":"*","group":"Outputs","index":11}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"38a78e08-181b-f88c-98dd-57c3a370638c","type":"Component Outputs","x":855.2849626492932,"y":757.439768508006,"parameters":{},"ports":[{"name":"query","plug":"input","type":{"name":"*"},"index":1},{"name":"operation","plug":"input","type":{"name":"*"},"index":2},{"name":"itemID","plug":"input","type":{"name":"*"},"index":3},{"name":"Done","plug":"input","type":{"name":"*"},"index":4}],"dynamicports":[],"children":[]},{"id":"a3ffa967-4aff-424c-a7ca-12e22c979525","type":"String","label":"fit","x":257.71246033753255,"y":481.5622565345449,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"6c241f6c-2231-11cc-ef5d-bd241404db67","type":"Number","label":"width","x":258.71246033753255,"y":577.5622565345449,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"20e03020-5b5a-ec2a-52eb-f525223f0c29","type":"Number","label":"quality","x":259,"y":771,"parameters":{"value":100},"ports":[],"dynamicports":[],"children":[]},{"id":"05abfa78-3343-2dd8-c986-7a8f04bfc901","type":"Number","label":"height","x":259,"y":674,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"4fccceef-53fd-3c43-5ef7-b0910d6c1b97","type":"String","label":"format","x":258,"y":962,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"c3b82e76-0166-5d0f-96a6-046c908ac766","type":"Boolean","label":"withoutEnlargement","x":259.3478175104979,"y":866.4389728895031,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for Read)","id":"0d8eb5f7-9d77-0e49-7373-178c4146b190","graph":{"connections":[{"fromId":"9f50524b-0a22-3bc4-f299-19547a2ff07d","fromProperty":"Search","toId":"dc202206-a3ba-fcba-ee6a-ba7e6b181aed","toProperty":"value"},{"fromId":"9f50524b-0a22-3bc4-f299-19547a2ff07d","fromProperty":"filter","toId":"f0c0d7cd-57d7-6f73-33c1-9fa56f3a956d","toProperty":"in-filter"},{"fromId":"9f50524b-0a22-3bc4-f299-19547a2ff07d","fromProperty":"aggregate","toId":"f0c0d7cd-57d7-6f73-33c1-9fa56f3a956d","toProperty":"in-aggregate"},{"fromId":"9f50524b-0a22-3bc4-f299-19547a2ff07d","fromProperty":"alias","toId":"f0c0d7cd-57d7-6f73-33c1-9fa56f3a956d","toProperty":"in-alias"},{"fromId":"9f50524b-0a22-3bc4-f299-19547a2ff07d","fromProperty":"deep","toId":"f0c0d7cd-57d7-6f73-33c1-9fa56f3a956d","toProperty":"in-deep"},{"fromId":"9f50524b-0a22-3bc4-f299-19547a2ff07d","fromProperty":"groupBy","toId":"f0c0d7cd-57d7-6f73-33c1-9fa56f3a956d","toProperty":"in-groupBy"},{"fromId":"9f50524b-0a22-3bc4-f299-19547a2ff07d","fromProperty":"Page","toId":"a55d591f-2053-5d38-7fc1-c851b3256673","toProperty":"value"},{"fromId":"9f50524b-0a22-3bc4-f299-19547a2ff07d","fromProperty":"Offset","toId":"dbacc64f-d552-8ed2-08e3-73e974b10801","toProperty":"value"},{"fromId":"9f50524b-0a22-3bc4-f299-19547a2ff07d","fromProperty":"Sort","toId":"4aecd9d1-b728-3f53-ba71-b56ae8cb2546","toProperty":"value"},{"fromId":"9f50524b-0a22-3bc4-f299-19547a2ff07d","fromProperty":"Fields","toId":"42e071a3-aa0a-5eaa-154b-cd45a5743580","toProperty":"value"},{"fromId":"9f50524b-0a22-3bc4-f299-19547a2ff07d","fromProperty":"Get all fields","toId":"42309c03-c63f-fa86-3cd7-3c1e2146c72e","toProperty":"value"},{"fromId":"9f50524b-0a22-3bc4-f299-19547a2ff07d","fromProperty":"Limit","toId":"742af1cd-a7cc-5f5f-f2f7-3f6d3f3ef112","toProperty":"value"},{"fromId":"f0c0d7cd-57d7-6f73-33c1-9fa56f3a956d","fromProperty":"out-filter","toId":"bae15d56-b350-36dc-83de-26334cd9d081","toProperty":"in-filter"},{"fromId":"f0c0d7cd-57d7-6f73-33c1-9fa56f3a956d","fromProperty":"out-aggregate","toId":"bae15d56-b350-36dc-83de-26334cd9d081","toProperty":"in-aggregate"},{"fromId":"f0c0d7cd-57d7-6f73-33c1-9fa56f3a956d","fromProperty":"out-groupBy","toId":"bae15d56-b350-36dc-83de-26334cd9d081","toProperty":"in-groupBy"},{"fromId":"f0c0d7cd-57d7-6f73-33c1-9fa56f3a956d","fromProperty":"out-deep","toId":"bae15d56-b350-36dc-83de-26334cd9d081","toProperty":"in-deep"},{"fromId":"f0c0d7cd-57d7-6f73-33c1-9fa56f3a956d","fromProperty":"out-alias","toId":"bae15d56-b350-36dc-83de-26334cd9d081","toProperty":"in-alias"},{"fromId":"4aecd9d1-b728-3f53-ba71-b56ae8cb2546","fromProperty":"savedValue","toId":"bae15d56-b350-36dc-83de-26334cd9d081","toProperty":"in-sort"},{"fromId":"dbacc64f-d552-8ed2-08e3-73e974b10801","fromProperty":"savedValue","toId":"bae15d56-b350-36dc-83de-26334cd9d081","toProperty":"in-offset"},{"fromId":"a55d591f-2053-5d38-7fc1-c851b3256673","fromProperty":"savedValue","toId":"bae15d56-b350-36dc-83de-26334cd9d081","toProperty":"in-page"},{"fromId":"dc202206-a3ba-fcba-ee6a-ba7e6b181aed","fromProperty":"savedValue","toId":"bae15d56-b350-36dc-83de-26334cd9d081","toProperty":"in-search"},{"fromId":"bae15d56-b350-36dc-83de-26334cd9d081","fromProperty":"out-query","toId":"c1a7d795-3b75-8237-dd75-75189cc6e570","toProperty":"query"},{"fromId":"71cf010a-b617-929a-9397-1fa011396539","fromProperty":"out-itemID","toId":"c1a7d795-3b75-8237-dd75-75189cc6e570","toProperty":"itemID"},{"fromId":"9f50524b-0a22-3bc4-f299-19547a2ff07d","fromProperty":"Set","toId":"71cf010a-b617-929a-9397-1fa011396539","toProperty":"run"},{"fromId":"9f50524b-0a22-3bc4-f299-19547a2ff07d","fromProperty":"Get Type","toId":"71cf010a-b617-929a-9397-1fa011396539","toProperty":"in-get_type"},{"fromId":"742af1cd-a7cc-5f5f-f2f7-3f6d3f3ef112","fromProperty":"savedValue","toId":"71cf010a-b617-929a-9397-1fa011396539","toProperty":"in-limit_raw"},{"fromId":"71cf010a-b617-929a-9397-1fa011396539","fromProperty":"out-limit","toId":"bae15d56-b350-36dc-83de-26334cd9d081","toProperty":"in-limit"},{"fromId":"71cf010a-b617-929a-9397-1fa011396539","fromProperty":"out-operation","toId":"c1a7d795-3b75-8237-dd75-75189cc6e570","toProperty":"operation"},{"fromId":"42309c03-c63f-fa86-3cd7-3c1e2146c72e","fromProperty":"savedValue","toId":"236cb76f-7d3e-6804-82bd-d39c4d6fde79","toProperty":"in-get_all_fields"},{"fromId":"42e071a3-aa0a-5eaa-154b-cd45a5743580","fromProperty":"savedValue","toId":"236cb76f-7d3e-6804-82bd-d39c4d6fde79","toProperty":"in-fields"},{"fromId":"236cb76f-7d3e-6804-82bd-d39c4d6fde79","fromProperty":"out-result","toId":"bae15d56-b350-36dc-83de-26334cd9d081","toProperty":"in-fields"},{"fromId":"9f50524b-0a22-3bc4-f299-19547a2ff07d","fromProperty":"Item ID","toId":"71cf010a-b617-929a-9397-1fa011396539","toProperty":"in-item_id"}],"roots":[{"id":"dc202206-a3ba-fcba-ee6a-ba7e6b181aed","type":"String","label":"Search","x":2,"y":1054,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"f0c0d7cd-57d7-6f73-33c1-9fa56f3a956d","type":"JavaScriptFunction","x":0,"y":1155,"parameters":{"functionScript":"const aggregate = Inputs.aggregate || null;\r\nconst groupBy = Inputs.groupBy || null;\r\nconst filter = Inputs.filter || null;\r\nconst deep = Inputs.deep || null;\r\nconst alias = Inputs.alias || null;\r\n\r\nif (aggregate) {\r\n    if (typeof (aggregate == \"object\")) {\r\n        Outputs.aggregate = aggregate;\r\n    } else {\r\n        throw new Error(\"Data provided for 'aggregate' needs to be of 'Object' type!\")\r\n    }\r\n}\r\n\r\nif (groupBy) {\r\n    if (typeof (groupBy == \"object\") && Array.isArray(groupBy)) {\r\n        Outputs.groupBy = groupBy;\r\n    } else {\r\n        throw new Error(\"Data provided for 'groupBy' needs to be of 'Array' type!\")\r\n    }\r\n}\r\n\r\nif (filter) {\r\n    if (typeof (filter == \"object\")) {\r\n        Outputs.filter = filter;\r\n    } else {\r\n        throw new Error(\"Data provided for 'filter' needs to be of 'Object' type!\")\r\n    }\r\n}\r\n\r\nif (deep) {\r\n    if (typeof (deep == \"object\")) {\r\n        Outputs.deep = deep;\r\n    } else {\r\n        throw new Error(\"Data provided for 'deep' needs to be of 'Object' type!\")\r\n    }\r\n}\r\n\r\nif (alias) {\r\n    if (typeof (alias == \"object\")) {\r\n        Outputs.alias = alias;\r\n    } else {\r\n        throw new Error(\"Data provided for 'alias' needs to be of 'Object' type!\")\r\n    }\r\n}"},"ports":[],"dynamicports":[{"name":"in-aggregate","displayName":"aggregate","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-groupBy","displayName":"groupBy","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-filter","displayName":"filter","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-deep","displayName":"deep","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-alias","displayName":"alias","plug":"input","type":"*","group":"Inputs","index":8},{"name":"out-aggregate","displayName":"aggregate","plug":"output","type":"*","group":"Outputs","index":9},{"name":"out-groupBy","displayName":"groupBy","plug":"output","type":"*","group":"Outputs","index":10},{"name":"out-filter","displayName":"filter","plug":"output","type":"*","group":"Outputs","index":11},{"name":"out-deep","displayName":"deep","plug":"output","type":"*","group":"Outputs","index":12},{"name":"out-alias","displayName":"alias","plug":"output","type":"*","group":"Outputs","index":13}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"a55d591f-2053-5d38-7fc1-c851b3256673","type":"Number","label":"Page","x":3,"y":953,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"dbacc64f-d552-8ed2-08e3-73e974b10801","type":"Number","label":"Offset","x":4,"y":853,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"4aecd9d1-b728-3f53-ba71-b56ae8cb2546","type":"String","label":"Sort","x":4,"y":756,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"42e071a3-aa0a-5eaa-154b-cd45a5743580","type":"String","label":"Fields","x":5,"y":658,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"42309c03-c63f-fa86-3cd7-3c1e2146c72e","type":"Boolean","label":"Get all fields","x":5,"y":563,"parameters":{"value":true},"ports":[],"dynamicports":[],"children":[]},{"id":"71cf010a-b617-929a-9397-1fa011396539","type":"JavaScriptFunction","x":326,"y":336,"parameters":{"functionScript":"const get_type = Inputs.get_type ?? null;\r\nconst item_id = Inputs.item_id ?? null;\r\nconst limit_raw = Inputs.limit_raw ?? null;\r\n\r\nlet operation = null;\r\nlet limit = null;\r\nlet itemID = null;\r\n\r\n///////////////////////////////////\r\n\r\nif (get_type) {\r\n    if (get_type == \"Get Single by ID\" && item_id) {\r\n        if (item_id) {\r\n            operation = \"single\";\r\n            itemID = item_id;\r\n        } else {\r\n            throw new Error(\"Provide valid Item ID\");\r\n        }\r\n    } else if (get_type == \"Get Single by Filter\") {\r\n        operation = \"single\";\r\n    } else if (get_type == \"Get Multiple by Filter\") {\r\n\r\n        if (limit_raw < -1) {\r\n            limit = 1;\r\n        } else if (limit_raw == 0) {\r\n            limit = 1;\r\n        } else {\r\n            limit = limit_raw;\r\n        }\r\n        operation = \"multiple\";\r\n\r\n    } else if (get_type == \"Get All\") {\r\n\r\n        limit = -1;\r\n        operation = \"all\";\r\n\r\n    } else if (get_type == \"Get Singleton\") {\r\n        operation = \"singleton\";\r\n    } else {\r\n        operation = null;\r\n    }\r\n    \r\n    Outputs.operation = operation;\r\n    Outputs.limit = limit;\r\n    Outputs.itemID = itemID;\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"in-get_type","displayName":"get_type","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-item_id","displayName":"item_id","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-limit_raw","displayName":"limit_raw","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-operation","displayName":"operation","plug":"output","type":"*","group":"Outputs","index":7},{"name":"out-limit","displayName":"limit","plug":"output","type":"*","group":"Outputs","index":8},{"name":"out-itemID","displayName":"itemID","plug":"output","type":"*","group":"Outputs","index":9}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"742af1cd-a7cc-5f5f-f2f7-3f6d3f3ef112","type":"Number","label":"Limit","x":4,"y":459,"parameters":{"value":50},"ports":[],"dynamicports":[],"children":[]},{"id":"9f50524b-0a22-3bc4-f299-19547a2ff07d","type":"Component Inputs","x":-433.66425978928964,"y":335.3553739167942,"parameters":{},"ports":[{"name":"Search","plug":"output","type":{"name":"*"},"index":13},{"name":"Item ID","plug":"output","type":{"name":"*"},"index":3},{"name":"filter","plug":"output","type":{"name":"*"},"index":16},{"name":"aggregate","plug":"output","type":{"name":"*"},"index":14},{"name":"alias","plug":"output","type":{"name":"*"},"index":18},{"name":"deep","plug":"output","type":{"name":"*"},"index":17},{"name":"groupBy","plug":"output","type":{"name":"*"},"index":15},{"name":"Page","plug":"output","type":{"name":"*"},"index":12},{"name":"Offset","plug":"output","type":{"name":"*"},"index":11},{"name":"Sort","plug":"output","type":{"name":"*"},"index":10},{"name":"Fields","plug":"output","type":{"name":"*"},"index":9},{"name":"Get all fields","plug":"output","type":{"name":"*"},"index":8},{"name":"Limit","plug":"output","type":{"name":"*"},"index":5},{"name":"Set","plug":"output","type":{"name":"*"},"index":0},{"name":"Get Type","plug":"output","type":{"name":"*"},"index":1}],"dynamicports":[],"children":[]},{"id":"bae15d56-b350-36dc-83de-26334cd9d081","type":"JavaScriptFunction","x":856.2412815279195,"y":597.314172687856,"parameters":{"functionScript":"const limit = Inputs.limit;\r\nconst fields = Inputs.fields;\r\nconst filter = Inputs.filter ?? null;\r\nconst search = Inputs.search ?? null;\r\nconst sort = Inputs.sort ?? null;\r\nconst offset = Inputs.offset ?? null;\r\nconst page = Inputs.page ?? null;\r\nconst aggregate = Inputs.aggregate ?? null;\r\nconst groupBy = Inputs.groupBy ?? null;\r\nconst deep = Inputs.deep ?? null;\r\nconst alias = Inputs.alias ?? null;\r\n\r\nconst query = {};\r\n\r\nif (limit) query.limit = limit;\r\nif (filter) query.filter = filter;\r\nif (search) query.search = search;\r\nif (fields) query.fields = fields;\r\nif (sort) query.sort = sort;\r\nif (offset) query.offset = offset;\r\nif (page) query.page = page;\r\nif (aggregate) query.aggregate = aggregate;\r\nif (groupBy) query.groupBy = groupBy;\r\nif (deep) query.deep = deep;\r\nif (alias) query.alias = alias;\r\n\r\nOutputs.query = query;\r\nOutputs.Done();"},"ports":[],"dynamicports":[{"name":"in-limit","displayName":"limit","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-fields","displayName":"fields","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-filter","displayName":"filter","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-search","displayName":"search","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-sort","displayName":"sort","plug":"input","type":"*","group":"Inputs","index":8},{"name":"in-offset","displayName":"offset","plug":"input","type":"*","group":"Inputs","index":9},{"name":"in-page","displayName":"page","plug":"input","type":"*","group":"Inputs","index":10},{"name":"in-aggregate","displayName":"aggregate","plug":"input","type":"*","group":"Inputs","index":11},{"name":"in-groupBy","displayName":"groupBy","plug":"input","type":"*","group":"Inputs","index":12},{"name":"in-deep","displayName":"deep","plug":"input","type":"*","group":"Inputs","index":13},{"name":"in-alias","displayName":"alias","plug":"input","type":"*","group":"Inputs","index":14},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":15},{"name":"out-query","displayName":"query","plug":"output","type":"*","group":"Outputs","index":16}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"c1a7d795-3b75-8237-dd75-75189cc6e570","type":"Component Outputs","x":1138.2849626492932,"y":602.439768508006,"parameters":{},"ports":[{"name":"query","plug":"input","type":{"name":"*"},"index":1},{"name":"operation","plug":"input","type":{"name":"*"},"index":2},{"name":"itemID","plug":"input","type":{"name":"*"},"index":3}],"dynamicports":[],"children":[]},{"id":"236cb76f-7d3e-6804-82bd-d39c4d6fde79","type":"JavaScriptFunction","x":325,"y":599,"parameters":{"functionScript":"Outputs.result = (Inputs.get_all_fields ?? true) ? '*' : (Inputs.fields || '*');"},"ports":[],"dynamicports":[{"name":"in-get_all_fields","displayName":"get_all_fields","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-fields","displayName":"fields","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":6}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for Update)","id":"ce560015-1dc3-2acb-0db3-8ff9bbcec5a9","graph":{"connections":[{"fromId":"5ed65b01-9c4e-2384-089d-5d775347a116","fromProperty":"Search","toId":"e9f646de-bc3e-8cce-5909-f496c673419a","toProperty":"value"},{"fromId":"5ed65b01-9c4e-2384-089d-5d775347a116","fromProperty":"filter","toId":"1747acad-e6a2-a099-74db-0bda9310b775","toProperty":"in-filter"},{"fromId":"5ed65b01-9c4e-2384-089d-5d775347a116","fromProperty":"aggregate","toId":"1747acad-e6a2-a099-74db-0bda9310b775","toProperty":"in-aggregate"},{"fromId":"5ed65b01-9c4e-2384-089d-5d775347a116","fromProperty":"alias","toId":"1747acad-e6a2-a099-74db-0bda9310b775","toProperty":"in-alias"},{"fromId":"5ed65b01-9c4e-2384-089d-5d775347a116","fromProperty":"deep","toId":"1747acad-e6a2-a099-74db-0bda9310b775","toProperty":"in-deep"},{"fromId":"5ed65b01-9c4e-2384-089d-5d775347a116","fromProperty":"groupBy","toId":"1747acad-e6a2-a099-74db-0bda9310b775","toProperty":"in-groupBy"},{"fromId":"5ed65b01-9c4e-2384-089d-5d775347a116","fromProperty":"Page","toId":"98a51035-5dad-51b3-ee81-062038565da2","toProperty":"value"},{"fromId":"5ed65b01-9c4e-2384-089d-5d775347a116","fromProperty":"Offset","toId":"3319ff6a-ac1c-a03b-80cd-a34fbda38571","toProperty":"value"},{"fromId":"5ed65b01-9c4e-2384-089d-5d775347a116","fromProperty":"Sort","toId":"e454c0ad-7759-596b-bf86-2776356d3a8f","toProperty":"value"},{"fromId":"5ed65b01-9c4e-2384-089d-5d775347a116","fromProperty":"Fields","toId":"3fda88a7-1c3f-7935-b4f4-f08b000d6efb","toProperty":"value"},{"fromId":"5ed65b01-9c4e-2384-089d-5d775347a116","fromProperty":"Get all fields","toId":"4b47142d-9697-ddb2-f8bc-0bc30fd4746e","toProperty":"value"},{"fromId":"5ed65b01-9c4e-2384-089d-5d775347a116","fromProperty":"Limit","toId":"5a5bda63-0b47-876d-11d3-fa83e6f44daa","toProperty":"value"},{"fromId":"1747acad-e6a2-a099-74db-0bda9310b775","fromProperty":"out-filter","toId":"5022edf8-54a9-7375-57ef-c37f5fea71d7","toProperty":"in-filter"},{"fromId":"1747acad-e6a2-a099-74db-0bda9310b775","fromProperty":"out-aggregate","toId":"5022edf8-54a9-7375-57ef-c37f5fea71d7","toProperty":"in-aggregate"},{"fromId":"1747acad-e6a2-a099-74db-0bda9310b775","fromProperty":"out-groupBy","toId":"5022edf8-54a9-7375-57ef-c37f5fea71d7","toProperty":"in-groupBy"},{"fromId":"1747acad-e6a2-a099-74db-0bda9310b775","fromProperty":"out-deep","toId":"5022edf8-54a9-7375-57ef-c37f5fea71d7","toProperty":"in-deep"},{"fromId":"1747acad-e6a2-a099-74db-0bda9310b775","fromProperty":"out-alias","toId":"5022edf8-54a9-7375-57ef-c37f5fea71d7","toProperty":"in-alias"},{"fromId":"e454c0ad-7759-596b-bf86-2776356d3a8f","fromProperty":"savedValue","toId":"5022edf8-54a9-7375-57ef-c37f5fea71d7","toProperty":"in-sort"},{"fromId":"3319ff6a-ac1c-a03b-80cd-a34fbda38571","fromProperty":"savedValue","toId":"5022edf8-54a9-7375-57ef-c37f5fea71d7","toProperty":"in-offset"},{"fromId":"98a51035-5dad-51b3-ee81-062038565da2","fromProperty":"savedValue","toId":"5022edf8-54a9-7375-57ef-c37f5fea71d7","toProperty":"in-page"},{"fromId":"e9f646de-bc3e-8cce-5909-f496c673419a","fromProperty":"savedValue","toId":"5022edf8-54a9-7375-57ef-c37f5fea71d7","toProperty":"in-search"},{"fromId":"5022edf8-54a9-7375-57ef-c37f5fea71d7","fromProperty":"out-query","toId":"899c2eb8-77b8-f210-a044-eade0291d69d","toProperty":"query"},{"fromId":"5a5bda63-0b47-876d-11d3-fa83e6f44daa","fromProperty":"savedValue","toId":"2e97e68b-a1f0-1a75-ae55-8cbf55f91d61","toProperty":"in-limit_raw"},{"fromId":"5ed65b01-9c4e-2384-089d-5d775347a116","fromProperty":"Set","toId":"2e97e68b-a1f0-1a75-ae55-8cbf55f91d61","toProperty":"run"},{"fromId":"5ed65b01-9c4e-2384-089d-5d775347a116","fromProperty":"Update Type","toId":"2e97e68b-a1f0-1a75-ae55-8cbf55f91d61","toProperty":"in-update_type"},{"fromId":"2e97e68b-a1f0-1a75-ae55-8cbf55f91d61","fromProperty":"out-limit","toId":"5022edf8-54a9-7375-57ef-c37f5fea71d7","toProperty":"in-limit"},{"fromId":"2e97e68b-a1f0-1a75-ae55-8cbf55f91d61","fromProperty":"out-operation","toId":"899c2eb8-77b8-f210-a044-eade0291d69d","toProperty":"operation"},{"fromId":"5ed65b01-9c4e-2384-089d-5d775347a116","fromProperty":"Item ID","toId":"2e97e68b-a1f0-1a75-ae55-8cbf55f91d61","toProperty":"in-item_id"},{"fromId":"2e97e68b-a1f0-1a75-ae55-8cbf55f91d61","fromProperty":"out-itemID","toId":"899c2eb8-77b8-f210-a044-eade0291d69d","toProperty":"itemID"},{"fromId":"4b47142d-9697-ddb2-f8bc-0bc30fd4746e","fromProperty":"savedValue","toId":"aa8b30c3-c0dd-031a-ece9-0db9663f0b3a","toProperty":"in-get_all_fields"},{"fromId":"3fda88a7-1c3f-7935-b4f4-f08b000d6efb","fromProperty":"savedValue","toId":"aa8b30c3-c0dd-031a-ece9-0db9663f0b3a","toProperty":"in-fields"},{"fromId":"aa8b30c3-c0dd-031a-ece9-0db9663f0b3a","fromProperty":"out-result","toId":"5022edf8-54a9-7375-57ef-c37f5fea71d7","toProperty":"in-fields"},{"fromId":"5ed65b01-9c4e-2384-089d-5d775347a116","fromProperty":"Item IDs Array","toId":"2e97e68b-a1f0-1a75-ae55-8cbf55f91d61","toProperty":"in-item_id_array"},{"fromId":"2e97e68b-a1f0-1a75-ae55-8cbf55f91d61","fromProperty":"out-itemIDArray","toId":"899c2eb8-77b8-f210-a044-eade0291d69d","toProperty":"itemIDArray"}],"roots":[{"id":"e9f646de-bc3e-8cce-5909-f496c673419a","type":"String","label":"Search","x":2,"y":1054,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"1747acad-e6a2-a099-74db-0bda9310b775","type":"JavaScriptFunction","x":0,"y":1155,"parameters":{"functionScript":"const aggregate = Inputs.aggregate || null;\r\nconst groupBy = Inputs.groupBy || null;\r\nconst filter = Inputs.filter || null;\r\nconst deep = Inputs.deep || null;\r\nconst alias = Inputs.alias || null;\r\n\r\nif (aggregate) {\r\n    if (typeof (aggregate == \"object\")) {\r\n        Outputs.aggregate = aggregate;\r\n    } else {\r\n        throw new Error(\"Data provided for 'aggregate' needs to be of 'Object' type!\")\r\n    }\r\n}\r\n\r\nif (groupBy) {\r\n    if (typeof (groupBy == \"object\") && Array.isArray(groupBy)) {\r\n        Outputs.groupBy = groupBy;\r\n    } else {\r\n        throw new Error(\"Data provided for 'groupBy' needs to be of 'Array' type!\")\r\n    }\r\n}\r\n\r\nif (filter) {\r\n    if (typeof (filter == \"object\")) {\r\n        Outputs.filter = filter;\r\n    } else {\r\n        throw new Error(\"Data provided for 'filter' needs to be of 'Object' type!\")\r\n    }\r\n}\r\n\r\nif (deep) {\r\n    if (typeof (deep == \"object\")) {\r\n        Outputs.deep = deep;\r\n    } else {\r\n        throw new Error(\"Data provided for 'deep' needs to be of 'Object' type!\")\r\n    }\r\n}\r\n\r\nif (alias) {\r\n    if (typeof (alias == \"object\")) {\r\n        Outputs.alias = alias;\r\n    } else {\r\n        throw new Error(\"Data provided for 'alias' needs to be of 'Object' type!\")\r\n    }\r\n}"},"ports":[],"dynamicports":[{"name":"in-aggregate","displayName":"aggregate","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-groupBy","displayName":"groupBy","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-filter","displayName":"filter","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-deep","displayName":"deep","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-alias","displayName":"alias","plug":"input","type":"*","group":"Inputs","index":8},{"name":"out-aggregate","displayName":"aggregate","plug":"output","type":"*","group":"Outputs","index":9},{"name":"out-groupBy","displayName":"groupBy","plug":"output","type":"*","group":"Outputs","index":10},{"name":"out-filter","displayName":"filter","plug":"output","type":"*","group":"Outputs","index":11},{"name":"out-deep","displayName":"deep","plug":"output","type":"*","group":"Outputs","index":12},{"name":"out-alias","displayName":"alias","plug":"output","type":"*","group":"Outputs","index":13}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"98a51035-5dad-51b3-ee81-062038565da2","type":"Number","label":"Page","x":3,"y":953,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"3319ff6a-ac1c-a03b-80cd-a34fbda38571","type":"Number","label":"Offset","x":4,"y":853,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"e454c0ad-7759-596b-bf86-2776356d3a8f","type":"String","label":"Sort","x":4,"y":756,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"3fda88a7-1c3f-7935-b4f4-f08b000d6efb","type":"String","label":"Fields","x":5,"y":658,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"4b47142d-9697-ddb2-f8bc-0bc30fd4746e","type":"Boolean","label":"Get all fields","x":5,"y":563,"parameters":{"value":true},"ports":[],"dynamicports":[],"children":[]},{"id":"5a5bda63-0b47-876d-11d3-fa83e6f44daa","type":"Number","label":"Limit","x":8,"y":446,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"5ed65b01-9c4e-2384-089d-5d775347a116","type":"Component Inputs","x":-518.6642597892896,"y":351.3553739167942,"parameters":{},"ports":[{"name":"Search","plug":"output","type":{"name":"*"},"index":10},{"name":"filter","plug":"output","type":{"name":"*"},"index":13},{"name":"aggregate","plug":"output","type":{"name":"*"},"index":11},{"name":"alias","plug":"output","type":{"name":"*"},"index":15},{"name":"deep","plug":"output","type":{"name":"*"},"index":14},{"name":"groupBy","plug":"output","type":{"name":"*"},"index":12},{"name":"Page","plug":"output","type":{"name":"*"},"index":9},{"name":"Offset","plug":"output","type":{"name":"*"},"index":8},{"name":"Sort","plug":"output","type":{"name":"*"},"index":7},{"name":"Fields","plug":"output","type":{"name":"*"},"index":6},{"name":"Get all fields","plug":"output","type":{"name":"*"},"index":5},{"name":"Limit","plug":"output","type":{"name":"*"},"index":4},{"name":"Set","plug":"output","type":{"name":"*"},"index":0},{"name":"Update Type","plug":"output","type":{"name":"*"},"index":1},{"name":"Item ID","plug":"output","type":{"name":"*"},"index":2},{"name":"Item IDs Array","plug":"output","type":{"name":"*"},"index":3}],"dynamicports":[],"children":[]},{"id":"5022edf8-54a9-7375-57ef-c37f5fea71d7","type":"JavaScriptFunction","x":726.2412815279195,"y":684.314172687856,"parameters":{"functionScript":"const limit = Inputs.limit;\r\nconst fields = Inputs.fields;\r\nconst filter = Inputs.filter ?? null;\r\nconst search = Inputs.search ?? null;\r\nconst sort = Inputs.sort ?? null;\r\nconst offset = Inputs.offset ?? null;\r\nconst page = Inputs.page ?? null;\r\nconst aggregate = Inputs.aggregate ?? null;\r\nconst groupBy = Inputs.groupBy ?? null;\r\nconst deep = Inputs.deep ?? null;\r\nconst alias = Inputs.alias ?? null;\r\n\r\nconst query = {};\r\n\r\nif (limit) query.limit = limit;\r\nif (filter) query.filter = filter;\r\nif (search) query.search = search;\r\nif (fields) query.fields = fields;\r\nif (sort) query.sort = sort;\r\nif (offset) query.offset = offset;\r\nif (page) query.page = page;\r\nif (aggregate) query.aggregate = aggregate;\r\nif (groupBy) query.groupBy = groupBy;\r\nif (deep) query.deep = deep;\r\nif (alias) query.alias = alias;\r\n\r\nOutputs.query = query;\r\nOutputs.Done();"},"ports":[],"dynamicports":[{"name":"in-limit","displayName":"limit","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-fields","displayName":"fields","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-filter","displayName":"filter","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-search","displayName":"search","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-sort","displayName":"sort","plug":"input","type":"*","group":"Inputs","index":8},{"name":"in-offset","displayName":"offset","plug":"input","type":"*","group":"Inputs","index":9},{"name":"in-page","displayName":"page","plug":"input","type":"*","group":"Inputs","index":10},{"name":"in-aggregate","displayName":"aggregate","plug":"input","type":"*","group":"Inputs","index":11},{"name":"in-groupBy","displayName":"groupBy","plug":"input","type":"*","group":"Inputs","index":12},{"name":"in-deep","displayName":"deep","plug":"input","type":"*","group":"Inputs","index":13},{"name":"in-alias","displayName":"alias","plug":"input","type":"*","group":"Inputs","index":14},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":15},{"name":"out-query","displayName":"query","plug":"output","type":"*","group":"Outputs","index":16}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"899c2eb8-77b8-f210-a044-eade0291d69d","type":"Component Outputs","x":982.2849626492933,"y":505.43976850800595,"parameters":{},"ports":[{"name":"query","plug":"input","type":{"name":"*"},"index":1},{"name":"operation","plug":"input","type":{"name":"*"},"index":2},{"name":"itemID","plug":"input","type":{"name":"*"},"index":3},{"name":"itemIDArray","plug":"input","type":{"name":"*"},"index":4}],"dynamicports":[],"children":[]},{"id":"2e97e68b-a1f0-1a75-ae55-8cbf55f91d61","type":"JavaScriptFunction","x":363,"y":347,"parameters":{"functionScript":"const update_type = Inputs.update_type ?? null;\r\nconst item_id = Inputs.item_id ?? null;\r\nconst item_ids = Inputs.item_id_array ?? null;\r\nconst limit_raw = Inputs.limit_raw ?? null;\r\n\r\nlet operation = null;\r\nlet limit = null;\r\nlet itemID = null;\r\nlet itemIDArray = null;\r\n\r\n///////////////////////////////////\r\n\r\nif (update_type) {\r\n    if (update_type == \"Update Single by ID\") {\r\n        if (item_id) {\r\n            operation = \"single\";\r\n            itemID = item_id;\r\n        } else {\r\n            throw new Error(\"Provide valid Item ID\");\r\n        }\r\n    } else if (update_type == \"Update Multiple by IDs\") {\r\n        if(!item_ids || !Array.isArray(item_ids) || (item_ids || []).length <= 0 ) throw new Error(\"Provide valid array of Item IDs!\");\r\n        operation = \"multipleByIDs\";\r\n        itemIDArray = [].concat(item_ids);\r\n    } else if (update_type == \"Update Multiple by Filter\") {\r\n        if(limit_raw){\r\n            if(limit_raw <= 0){\r\n                limit = 1\r\n            } else {\r\n                limit = limit_raw;\r\n            }\r\n        }\r\n        operation = \"multiple\";\r\n\r\n    } else if (update_type == \"Update All\") {\r\n\r\n        limit = -1;\r\n        operation = \"all\";\r\n\r\n    } else if (update_type == \"Update Singleton\") {\r\n        operation = \"singleton\";\r\n    } else {\r\n        operation = null;\r\n    }\r\n    \r\n    Outputs.operation = operation;\r\n    Outputs.limit = limit;\r\n    if(itemID) Outputs.itemID = itemID;\r\n    if(itemIDArray) Outputs.itemIDArray = itemIDArray;\r\n}\r\n"},"ports":[],"dynamicports":[{"name":"in-update_type","displayName":"update_type","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-item_id","displayName":"item_id","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-item_id_array","displayName":"item_id_array","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-limit_raw","displayName":"limit_raw","plug":"input","type":"*","group":"Inputs","index":7},{"name":"out-operation","displayName":"operation","plug":"output","type":"*","group":"Outputs","index":8},{"name":"out-limit","displayName":"limit","plug":"output","type":"*","group":"Outputs","index":9},{"name":"out-itemID","displayName":"itemID","plug":"output","type":"*","group":"Outputs","index":10},{"name":"out-itemIDArray","displayName":"itemIDArray","plug":"output","type":"*","group":"Outputs","index":11}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"aa8b30c3-c0dd-031a-ece9-0db9663f0b3a","type":"JavaScriptFunction","x":362,"y":621,"parameters":{"functionScript":"Outputs.result = (Inputs.get_all_fields ?? true) ? '*' : (Inputs.fields || '*');"},"ports":[],"dynamicports":[{"name":"in-get_all_fields","displayName":"get_all_fields","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-fields","displayName":"fields","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":6}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Utils/Check Refresh Process status","id":"40104da3-1579-b08a-29dc-7d9d906873b9","graph":{"connections":[{"fromId":"11a96e60-e7c7-807d-f7a6-ac83cbf4f8aa","fromProperty":"value","toId":"9ab96560-7dbf-f03e-b463-d261cd009462","toProperty":"condition"},{"fromId":"11a96e60-e7c7-807d-f7a6-ac83cbf4f8aa","fromProperty":"fetched","toId":"9ab96560-7dbf-f03e-b463-d261cd009462","toProperty":"eval"},{"fromId":"9ab96560-7dbf-f03e-b463-d261cd009462","fromProperty":"ontrue","toId":"2e53729d-e23b-dd81-e643-80663e8902fe","toProperty":"start"},{"fromId":"2e53729d-e23b-dd81-e643-80663e8902fe","fromProperty":"timerFinished","toId":"11a96e60-e7c7-807d-f7a6-ac83cbf4f8aa","toProperty":"fetch"},{"fromId":"ec75fc6e-f2db-808d-a8de-9f8cfc2f8e04","fromProperty":"Fetch","toId":"11a96e60-e7c7-807d-f7a6-ac83cbf4f8aa","toProperty":"fetch"},{"fromId":"9ab96560-7dbf-f03e-b463-d261cd009462","fromProperty":"onfalse","toId":"af6599bc-b0f4-d8b9-8da1-d418663039ee","toProperty":"Done"}],"roots":[{"id":"2e53729d-e23b-dd81-e643-80663e8902fe","type":"Timer","x":237,"y":285,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"11a96e60-e7c7-807d-f7a6-ac83cbf4f8aa","type":"Variable2","x":0,"y":90,"parameters":{"name":"Token Refresh Process"},"ports":[],"dynamicports":[],"children":[]},{"id":"9ab96560-7dbf-f03e-b463-d261cd009462","type":"Condition","x":489,"y":134,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"ec75fc6e-f2db-808d-a8de-9f8cfc2f8e04","type":"Component Inputs","x":-260,"y":119,"parameters":{},"ports":[{"name":"Fetch","plug":"output","type":{"name":"*"},"index":0}],"dynamicports":[],"children":[]},{"id":"af6599bc-b0f4-d8b9-8da1-d418663039ee","type":"Component Outputs","x":699,"y":133,"parameters":{},"ports":[{"name":"Done","plug":"input","type":{"name":"*"},"index":0}],"dynamicports":[],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Utils/Delay with retry limit","id":"c4085e16-ed10-7c06-d5b5-f4224703ed40","graph":{"connections":[{"fromId":"2e6cc416-4421-a308-3ee0-8a2450bfd2c5","fromProperty":"savedValue","toId":"4879b6c3-859e-557b-2303-e8da3440482b","toProperty":"limitsMax"},{"fromId":"4879b6c3-859e-557b-2303-e8da3440482b","fromProperty":"countChanged","toId":"3931aded-4fdf-716b-ba16-ec6c62f0f748","toProperty":"restart"},{"fromId":"4879b6c3-859e-557b-2303-e8da3440482b","fromProperty":"countChanged","toId":"83ffbd95-b4b3-070a-be28-0898f88d724f","toProperty":"run"},{"fromId":"2e6cc416-4421-a308-3ee0-8a2450bfd2c5","fromProperty":"savedValue","toId":"83ffbd95-b4b3-070a-be28-0898f88d724f","toProperty":"in-max_count"},{"fromId":"4879b6c3-859e-557b-2303-e8da3440482b","fromProperty":"currentCount","toId":"83ffbd95-b4b3-070a-be28-0898f88d724f","toProperty":"in-current_count"},{"fromId":"be2f4014-9653-f001-5acc-2339065a65b1","fromProperty":"Start","toId":"3931aded-4fdf-716b-ba16-ec6c62f0f748","toProperty":"start"},{"fromId":"be2f4014-9653-f001-5acc-2339065a65b1","fromProperty":"Restart","toId":"4879b6c3-859e-557b-2303-e8da3440482b","toProperty":"increase"},{"fromId":"3931aded-4fdf-716b-ba16-ec6c62f0f748","fromProperty":"timerFinished","toId":"b6a29bb3-89d6-2cc8-b03d-97a5472d5d6c","toProperty":"Finished"},{"fromId":"be2f4014-9653-f001-5acc-2339065a65b1","fromProperty":"Max. Retries","toId":"2e6cc416-4421-a308-3ee0-8a2450bfd2c5","toProperty":"value"},{"fromId":"be2f4014-9653-f001-5acc-2339065a65b1","fromProperty":"Error Message","toId":"10fb1229-5c2c-ce22-5124-a85bb4dfef29","toProperty":"value"},{"fromId":"10fb1229-5c2c-ce22-5124-a85bb4dfef29","fromProperty":"savedValue","toId":"83ffbd95-b4b3-070a-be28-0898f88d724f","toProperty":"in-error_message"},{"fromId":"be2f4014-9653-f001-5acc-2339065a65b1","fromProperty":"Delay Duration","toId":"3931aded-4fdf-716b-ba16-ec6c62f0f748","toProperty":"duration"}],"roots":[{"id":"3931aded-4fdf-716b-ba16-ec6c62f0f748","type":"Timer","x":-2185,"y":-222,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"4879b6c3-859e-557b-2303-e8da3440482b","type":"Counter","x":-1882,"y":-418,"parameters":{"limitsEnabled":true},"ports":[],"dynamicports":[],"children":[]},{"id":"2e6cc416-4421-a308-3ee0-8a2450bfd2c5","type":"Number","label":"Max Retries","x":-2173,"y":-506,"parameters":{"value":10},"ports":[],"dynamicports":[],"children":[]},{"id":"83ffbd95-b4b3-070a-be28-0898f88d724f","type":"JavaScriptFunction","x":-1607,"y":-508,"parameters":{"functionScript":"const max_count = Inputs.max_count\r\nconst current_count = Inputs.current_count\r\n\r\nconst error_message = Inputs.error_message || \"Directus Site Client has not yet been set up!\";\r\n\r\nif(current_count >= max_count){\r\n    throw new Error(error_message)\r\n}"},"ports":[],"dynamicports":[{"name":"in-max_count","displayName":"max_count","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-current_count","displayName":"current_count","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-error_message","displayName":"error_message","plug":"input","type":"*","group":"Inputs","index":6}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"be2f4014-9653-f001-5acc-2339065a65b1","type":"Component Inputs","x":-2476,"y":-368,"parameters":{},"ports":[{"name":"Start","plug":"output","type":{"name":"*"},"index":0},{"name":"Restart","plug":"output","type":{"name":"*"},"index":2},{"name":"Max. Retries","plug":"output","type":{"name":"*"},"index":3},{"name":"Error Message","plug":"output","type":{"name":"*"},"index":4},{"name":"Delay Duration","plug":"output","type":{"name":"*"},"index":1}],"dynamicports":[],"children":[]},{"id":"b6a29bb3-89d6-2cc8-b03d-97a5472d5d6c","type":"Component Outputs","x":-1870,"y":-204,"parameters":{},"ports":[{"name":"Finished","plug":"input","type":{"name":"*"},"index":0}],"dynamicports":[],"children":[]},{"id":"10fb1229-5c2c-ce22-5124-a85bb4dfef29","type":"String","label":"Error Message","x":-1597,"y":-304,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[]}},{"name":"/#Directus/Directus Prefab/Components/Utils/Get a SDK client","id":"42d7fe31-7172-99cb-c8b0-027d27dee6a0","graph":{"connections":[{"fromId":"b8fac551-a9a0-b83d-dffd-2dabce9a5629","fromProperty":"Do","toId":"1234b24c-c604-795e-de08-d4d049075733","toProperty":"run"},{"fromId":"1234b24c-c604-795e-de08-d4d049075733","fromProperty":"out-Done","toId":"231049e9-f914-e011-8331-dcbc0ee57f54","toProperty":"Done"},{"fromId":"1234b24c-c604-795e-de08-d4d049075733","fromProperty":"out-client","toId":"231049e9-f914-e011-8331-dcbc0ee57f54","toProperty":"client"}],"roots":[{"id":"1234b24c-c604-795e-de08-d4d049075733","type":"JavaScriptFunction","x":0,"y":0,"parameters":{"functionScript":"const client = (!!Noodl.Objects.DirectusSDK?.SiteClient?.url?.href || false) ? Noodl.Objects.DirectusSDK?.SiteClient : Noodl.Objects.DirectusSDK?.Client;\r\n\r\nif(client){\r\n    Outputs.client = client;\r\n    Outputs.Done();\r\n} else {\r\n    throw new Error(\"No SDK Client found!\");\r\n}"},"ports":[],"dynamicports":[{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":4},{"name":"out-client","displayName":"client","plug":"output","type":"*","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"b8fac551-a9a0-b83d-dffd-2dabce9a5629","type":"Component Inputs","x":-238.4000000000001,"y":2.4000015258789062,"parameters":{},"ports":[{"name":"Do","plug":"output","type":{"name":"*"},"index":1}],"dynamicports":[],"children":[]},{"id":"231049e9-f914-e011-8331-dcbc0ee57f54","type":"Component Outputs","x":257.5999999999999,"y":1.4000015258789062,"parameters":{},"ports":[{"name":"Done","plug":"input","type":{"name":"*"},"index":1},{"name":"client","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]}],"visualRoots":[],"comments":[{"text":"This Utility component tries to first retrieve the Site SDK Client, if installed, and if not, the User SDK Client then.\nOutputs the retrieved Client.\n\nIf none is available, throws an error.","width":597,"height":172,"fill":"transparent","x":-208,"y":-272,"id":"01845ccf-3293-0062-9cb2-a095e886616d","largeFont":true,"color":"notice"}]}},{"name":"/#Directus/Directus Prefab/Components/Utils/SDK Client Check","id":"7b54a247-43e3-9722-e742-97355e7d4d1c","graph":{"connections":[{"fromId":"22975209-2a63-3322-841a-ee93a193b819","fromProperty":"currentState","toId":"dd4438e0-e177-42a6-4de9-82fc6b5046d9","toProperty":"in-SDKClient"},{"fromId":"ebe83bd1-a1c5-4ec3-3db4-99355415f84e","fromProperty":"State","toId":"22975209-2a63-3322-841a-ee93a193b819","toProperty":"currentState"},{"fromId":"dd4438e0-e177-42a6-4de9-82fc6b5046d9","fromProperty":"out-Done","toId":"7446b13c-ccfc-9f1b-a30e-a3c99aeb9f95","toProperty":"Success"},{"fromId":"ebe83bd1-a1c5-4ec3-3db4-99355415f84e","fromProperty":"Do","toId":"3359a62c-1387-59bd-8497-eb75acbd3118","toProperty":"Start"},{"fromId":"3359a62c-1387-59bd-8497-eb75acbd3118","fromProperty":"Finished","toId":"dd4438e0-e177-42a6-4de9-82fc6b5046d9","toProperty":"run"},{"fromId":"dd4438e0-e177-42a6-4de9-82fc6b5046d9","fromProperty":"out-Failure","toId":"3359a62c-1387-59bd-8497-eb75acbd3118","toProperty":"Restart"}],"roots":[{"id":"dd4438e0-e177-42a6-4de9-82fc6b5046d9","type":"JavaScriptFunction","x":380,"y":150,"parameters":{"functionScript":"const state = Inputs.SDKClient ?? null;\r\n\r\nlet res = true;\r\n\r\nif(state == \"Site SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.SiteClient || null;\r\n    if(!client){\r\n        res = false;\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nif(state == \"User SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.Client || null;\r\n    if(!client){ \r\n        res = false;\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nif(res){\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-SDKClient","displayName":"SDKClient","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":6}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"22975209-2a63-3322-841a-ee93a193b819","type":"States","label":"Client type","x":142,"y":209,"parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To User SDK Client","name":"to-User SDK Client","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At User SDK Client","name":"at-User SDK Client","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached User SDK Client","name":"reached-User SDK Client","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Site SDK Client","name":"to-Site SDK Client","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Site SDK Client","name":"at-Site SDK Client","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Site SDK Client","name":"reached-Site SDK Client","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"group":"States","displayName":"State","name":"currentState","default":"User SDK Client","index":12}],"children":[]},{"id":"ebe83bd1-a1c5-4ec3-3db4-99355415f84e","type":"Component Inputs","x":-125,"y":149,"parameters":{},"ports":[{"name":"Do","plug":"output","type":{"name":"*"},"index":0},{"name":"State","plug":"output","type":{"name":"*"},"index":1}],"dynamicports":[],"children":[]},{"id":"7446b13c-ccfc-9f1b-a30e-a3c99aeb9f95","type":"Component Outputs","x":624,"y":150,"parameters":{},"ports":[{"name":"Success","plug":"input","type":{"name":"*"},"index":0}],"dynamicports":[],"children":[]},{"id":"3359a62c-1387-59bd-8497-eb75acbd3118","type":"/#Directus/Directus Prefab/Components/Utils/Delay with retry limit","x":142,"y":92,"parameters":{"Delay Duration":100,"Max. Retries":25},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[],"comments":[{"text":"This component is used to make sure that the SDK Client is properly available.","width":614,"height":118,"fill":"transparent","x":-57,"y":-87,"id":"fa5846ad-3a58-1ccc-444b-daa0c1ba3e5c","color":"notice","largeFont":true}]}},{"name":"/#Directus/Directus Prefab/Initial Set Up/Set up Directus - Option 1 (env)","id":"3319cc09-b015-8ed3-c507-365f1db6d634","graph":{"connections":[{"fromId":"5fe8f6da-3632-4fb9-360e-a4324d5856eb","fromProperty":"prop-url","toId":"8988d80c-7d19-21dd-9fe6-de5ebfa45e86","toProperty":"directusURL"},{"fromId":"5fe8f6da-3632-4fb9-360e-a4324d5856eb","fromProperty":"prop-url","toId":"21dd7a58-f45f-aee4-8427-d37fb1113ec0","toProperty":"directusURL"},{"fromId":"8988d80c-7d19-21dd-9fe6-de5ebfa45e86","fromProperty":"Success","toId":"fe3e78a2-ded6-784a-cd9e-9cce0305caa5","toProperty":"Do"},{"fromId":"5fe8f6da-3632-4fb9-360e-a4324d5856eb","fromProperty":"prop-static_token","toId":"21dd7a58-f45f-aee4-8427-d37fb1113ec0","toProperty":"static_token"},{"fromId":"2f8348fb-31d3-9abb-0867-c7669c6f34ab","fromProperty":"Done","toId":"5fe8f6da-3632-4fb9-360e-a4324d5856eb","toProperty":"fetch"},{"fromId":"5fe8f6da-3632-4fb9-360e-a4324d5856eb","fromProperty":"fetched","toId":"8988d80c-7d19-21dd-9fe6-de5ebfa45e86","toProperty":"Do"},{"fromId":"5fe8f6da-3632-4fb9-360e-a4324d5856eb","fromProperty":"fetched","toId":"21dd7a58-f45f-aee4-8427-d37fb1113ec0","toProperty":"Do"},{"fromId":"5ba746b3-a4c1-a122-6c90-2d0c582d4b3b","fromProperty":"state","toId":"ed4253cc-1384-bb71-9376-cd1d13293e83","toProperty":"input 0"},{"fromId":"7ff42686-311d-8013-d598-067576bd8681","fromProperty":"state","toId":"ed4253cc-1384-bb71-9376-cd1d13293e83","toProperty":"input 1"},{"fromId":"ed4253cc-1384-bb71-9376-cd1d13293e83","fromProperty":"result","toId":"26a761c3-3b1a-b7dc-328b-fec74fcff109","toProperty":"Mounted"},{"fromId":"8988d80c-7d19-21dd-9fe6-de5ebfa45e86","fromProperty":"Success","toId":"5ba746b3-a4c1-a122-6c90-2d0c582d4b3b","toProperty":"on"},{"fromId":"21dd7a58-f45f-aee4-8427-d37fb1113ec0","fromProperty":"Success","toId":"7ff42686-311d-8013-d598-067576bd8681","toProperty":"on"},{"fromId":"3b63dd2b-7d48-5ce5-071c-b0344d6d1fc8","fromProperty":"timerFinished","toId":"8ead4794-6f04-cd91-3e0a-2ddea032fb6d","toProperty":"run"},{"fromId":"8ead4794-6f04-cd91-3e0a-2ddea032fb6d","fromProperty":"out-Failure","toId":"45ea72aa-2ee1-d457-36ba-6aee14a9a975","toProperty":"increase"},{"fromId":"45ea72aa-2ee1-d457-36ba-6aee14a9a975","fromProperty":"currentCount","toId":"9e491e80-6314-b0c7-8963-196d2d77ff4a","toProperty":"in-count"},{"fromId":"9e491e80-6314-b0c7-8963-196d2d77ff4a","fromProperty":"out-Done","toId":"3b63dd2b-7d48-5ce5-071c-b0344d6d1fc8","toProperty":"restart"},{"fromId":"45ea72aa-2ee1-d457-36ba-6aee14a9a975","fromProperty":"countChanged","toId":"9e491e80-6314-b0c7-8963-196d2d77ff4a","toProperty":"run"},{"fromId":"e9cd3581-ce21-6648-5fa8-0e42638f28b9","fromProperty":"Do","toId":"8ead4794-6f04-cd91-3e0a-2ddea032fb6d","toProperty":"run"},{"fromId":"8ead4794-6f04-cd91-3e0a-2ddea032fb6d","fromProperty":"out-Success","toId":"2f8348fb-31d3-9abb-0867-c7669c6f34ab","toProperty":"Do"}],"roots":[{"id":"8988d80c-7d19-21dd-9fe6-de5ebfa45e86","type":"/#Directus/Directus Prefab/Components/Config/Directus - Initialize User Client","label":"Directus - Initialize","x":304,"y":211,"parameters":{"Enable Cross-Domain cookies":true},"ports":[],"dynamicports":[],"children":[]},{"id":"2f8348fb-31d3-9abb-0867-c7669c6f34ab","type":"Javascript2","label":"env.json","x":-232,"y":285,"parameters":{"code":"Script.Signals.Do = async function(){\r\n    const file = await fetch(\"/env.json\");\r\n    const env = await file.json() ?? {};\r\n    for(const key in env){\r\n        Noodl.Objects.env[key] = env[key];\r\n    }\r\n    if(env?.url) Script.Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"Do","plug":"input","type":{"name":"signal"},"group":"Inputs","index":5},{"name":"Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":6}],"children":[],"metadata":{"merge":{"soureCodePorts":["code"]}}},{"id":"5fe8f6da-3632-4fb9-360e-a4324d5856eb","type":"Model2","x":21,"y":285,"parameters":{"modelId":"env","properties":"url,static_token"},"ports":[],"dynamicports":[{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-url","displayName":"url","index":7},{"type":"signal","plug":"output","group":"Changed Events","displayName":"url Changed","name":"changed-url","index":8},{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-static_token","displayName":"static_token","index":9},{"type":"signal","plug":"output","group":"Changed Events","displayName":"static_token Changed","name":"changed-static_token","index":10}],"children":[]},{"id":"21dd7a58-f45f-aee4-8427-d37fb1113ec0","type":"/#Directus/Directus Prefab/Components/Config/Directus - Initialize Site Client","label":"Directus - Initialize Site Client","x":304,"y":349,"parameters":{"Enable Cross-Domain cookies":true},"ports":[],"dynamicports":[],"children":[]},{"id":"fe3e78a2-ded6-784a-cd9e-9cce0305caa5","type":"/#Directus/Directus Prefab/Components/Auth/Directus - Refresh Token","x":609,"y":75,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"e9cd3581-ce21-6648-5fa8-0e42638f28b9","type":"Component Inputs","x":-748,"y":282,"parameters":{},"ports":[{"name":"Do","plug":"output","type":{"name":"*"},"index":0}],"dynamicports":[],"children":[]},{"id":"26a761c3-3b1a-b7dc-328b-fec74fcff109","type":"Component Outputs","x":1058,"y":316,"parameters":{},"ports":[{"name":"Mounted","plug":"input","type":{"name":"*"},"index":0}],"dynamicports":[],"children":[]},{"id":"5ba746b3-a4c1-a122-6c90-2d0c582d4b3b","type":"Switch","x":617,"y":246,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"7ff42686-311d-8013-d598-067576bd8681","type":"Switch","x":614,"y":371,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"ed4253cc-1384-bb71-9376-cd1d13293e83","type":"Or","x":840,"y":313,"parameters":{},"ports":[],"dynamicports":[{"name":"input 0","displayName":"Input 0","type":"boolean","plug":"input","index":1},{"name":"input 1","displayName":"Input 1","type":"boolean","plug":"input","index":2},{"name":"input 2","displayName":"Input 2","type":"boolean","plug":"input","index":3}],"children":[]},{"id":"8ead4794-6f04-cd91-3e0a-2ddea032fb6d","type":"JavaScriptFunction","x":-507,"y":451.00000000000006,"parameters":{"functionScript":"const sdk_installed = window.Directus ?? null;\r\nif(sdk_installed){\r\n    Outputs.Success();\r\n} else {\r\n    Outputs.Failure();\r\n}"},"ports":[],"dynamicports":[{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":4},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"3b63dd2b-7d48-5ce5-071c-b0344d6d1fc8","type":"Timer","x":-504,"y":672,"parameters":{"duration":100},"ports":[],"dynamicports":[],"children":[]},{"id":"45ea72aa-2ee1-d457-36ba-6aee14a9a975","type":"Counter","x":-505,"y":551,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"9e491e80-6314-b0c7-8963-196d2d77ff4a","type":"JavaScriptFunction","x":-309,"y":594,"parameters":{"functionScript":"const result = (Inputs.count || 0) >= 5 ? true: false;\r\n\r\nif(result){\r\n    location.reload()\r\n} else {\r\n    Outputs.Done();\r\n}"},"ports":[],"dynamicports":[{"name":"in-count","displayName":"count","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}}],"visualRoots":[],"comments":[{"text":"Make sure to have \"env.json\" set up properly","width":200,"height":186,"fill":"transparent","x":-256,"y":218,"id":"eb362f50-a4f1-a2c0-7f23-6435a0fd1b88"},{"text":"There are 2 options to include the URL of your Directus project's URL (and optionally, Static Token):\n\n1. Using an environment file (env.json) [For ease of management, and not security]\n2. Directly setting the URL\n\nPS: Choose only 1 and remove the other!","width":521,"height":257,"fill":"transparent","x":-202,"y":-337,"id":"67992a7a-e7db-1fc9-d681-2e7bc129d67e","largeFont":true},{"text":"This is Option 1 :\n\n- Use env.json","width":279,"height":119,"fill":"no-fill","x":-94,"y":-29,"id":"833cf90e-3c64-d0c2-f519-433ff33dbb96","largeFont":true,"color":"success"},{"text":"Is the SDK installed and ready to use?","width":416,"height":367,"fill":"transparent","x":-539,"y":406,"id":"09315472-e17b-88c3-b3b8-c63c419d53d3","color":"notice","largeFont":true}]}},{"name":"/#Directus/Directus Prefab/Initial Set Up/Set up Directus - Option 2 (manual)","id":"d9059474-27e6-d1da-3644-4188145d0b2f","graph":{"connections":[{"fromId":"d240ea85-1db3-75f9-85fa-dce3e1999ec6","fromProperty":"Success","toId":"77673996-ab87-f1fb-3ef3-17de625a907b","toProperty":"Do"},{"fromId":"02de4319-10a4-7199-3a81-aa36ba18a73c","fromProperty":"Do","toId":"582a4887-8f8b-b350-6eec-4fa3cd167cca","toProperty":"saveValue"},{"fromId":"02de4319-10a4-7199-3a81-aa36ba18a73c","fromProperty":"Do","toId":"c7b9fcc4-b7b9-f877-d085-1e0184fe879f","toProperty":"saveValue"},{"fromId":"582a4887-8f8b-b350-6eec-4fa3cd167cca","fromProperty":"stored","toId":"d240ea85-1db3-75f9-85fa-dce3e1999ec6","toProperty":"Do"},{"fromId":"582a4887-8f8b-b350-6eec-4fa3cd167cca","fromProperty":"savedValue","toId":"d240ea85-1db3-75f9-85fa-dce3e1999ec6","toProperty":"directusURL"},{"fromId":"c7b9fcc4-b7b9-f877-d085-1e0184fe879f","fromProperty":"stored","toId":"8baf7c6d-d1ee-3a7d-75b1-79cbbc9b01b3","toProperty":"Do"},{"fromId":"c7b9fcc4-b7b9-f877-d085-1e0184fe879f","fromProperty":"savedValue","toId":"8baf7c6d-d1ee-3a7d-75b1-79cbbc9b01b3","toProperty":"static_token"},{"fromId":"582a4887-8f8b-b350-6eec-4fa3cd167cca","fromProperty":"savedValue","toId":"8baf7c6d-d1ee-3a7d-75b1-79cbbc9b01b3","toProperty":"directusURL"},{"fromId":"161de246-2139-5122-2131-cd54d30ea6f6","fromProperty":"savedValue","toId":"8baf7c6d-d1ee-3a7d-75b1-79cbbc9b01b3","toProperty":"Enable Cross-Domain cookies"},{"fromId":"02de4319-10a4-7199-3a81-aa36ba18a73c","fromProperty":"Do","toId":"161de246-2139-5122-2131-cd54d30ea6f6","toProperty":"saveValue"},{"fromId":"e123ff9a-2716-e9b3-72fd-f5e9083bebb9","fromProperty":"state","toId":"8bbeca60-2b6e-90c4-8c33-7838faf2c251","toProperty":"input 0"},{"fromId":"42ef8d6f-096a-e9ec-038e-52f978f6ca6a","fromProperty":"state","toId":"8bbeca60-2b6e-90c4-8c33-7838faf2c251","toProperty":"input 1"},{"fromId":"8bbeca60-2b6e-90c4-8c33-7838faf2c251","fromProperty":"result","toId":"c77a3f74-0341-c4d3-9315-32f404927251","toProperty":"Mounted"},{"fromId":"d240ea85-1db3-75f9-85fa-dce3e1999ec6","fromProperty":"Success","toId":"e123ff9a-2716-e9b3-72fd-f5e9083bebb9","toProperty":"on"},{"fromId":"8baf7c6d-d1ee-3a7d-75b1-79cbbc9b01b3","fromProperty":"Success","toId":"42ef8d6f-096a-e9ec-038e-52f978f6ca6a","toProperty":"on"}],"roots":[{"id":"d240ea85-1db3-75f9-85fa-dce3e1999ec6","type":"/#Directus/Directus Prefab/Components/Config/Directus - Initialize User Client","label":"Directus - Initialize","x":245,"y":152,"parameters":{"Enable Cross-Domain cookies":true},"ports":[],"dynamicports":[],"children":[]},{"id":"8baf7c6d-d1ee-3a7d-75b1-79cbbc9b01b3","type":"/#Directus/Directus Prefab/Components/Config/Directus - Initialize Site Client","label":"Directus - Initialize Site Client","x":249,"y":345,"parameters":{"Enable Cross-Domain cookies":true},"ports":[],"dynamicports":[],"children":[]},{"id":"77673996-ab87-f1fb-3ef3-17de625a907b","type":"/#Directus/Directus Prefab/Components/Auth/Directus - Refresh Token","x":563,"y":52,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"02de4319-10a4-7199-3a81-aa36ba18a73c","type":"Component Inputs","x":-302,"y":294,"parameters":{},"ports":[{"name":"Do","plug":"output","type":{"name":"*"},"index":0}],"dynamicports":[],"children":[]},{"id":"582a4887-8f8b-b350-6eec-4fa3cd167cca","type":"String","label":"Directus URL","x":-42,"y":200.99999999999994,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"c7b9fcc4-b7b9-f877-d085-1e0184fe879f","type":"String","label":"Static Token","x":-34,"y":344.99999999999994,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"161de246-2139-5122-2131-cd54d30ea6f6","type":"Boolean","label":"Cross-Domain cookies","x":-36.5,"y":473.10000152587895,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"c77a3f74-0341-c4d3-9315-32f404927251","type":"Component Outputs","x":1007,"y":273,"parameters":{},"ports":[{"name":"Mounted","plug":"input","type":{"name":"*"},"index":0}],"dynamicports":[],"children":[]},{"id":"e123ff9a-2716-e9b3-72fd-f5e9083bebb9","type":"Switch","x":566,"y":203,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"42ef8d6f-096a-e9ec-038e-52f978f6ca6a","type":"Switch","x":565,"y":344,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"8bbeca60-2b6e-90c4-8c33-7838faf2c251","type":"Or","x":789,"y":270,"parameters":{},"ports":[],"dynamicports":[{"name":"input 0","displayName":"Input 0","type":"boolean","plug":"input","index":1},{"name":"input 1","displayName":"Input 1","type":"boolean","plug":"input","index":2},{"name":"input 2","displayName":"Input 2","type":"boolean","plug":"input","index":3}],"children":[]}],"visualRoots":[],"comments":[{"text":"There are 2 options to include the URL of your Directus project's URL (and optionally, Static Token):\n\n1. Using an environment file (env.json) [For ease of management, and not security]\n2. Directly setting the URL\n\nPS: Choose only 1 and remove the other!","width":521,"height":257,"fill":"transparent","x":-154,"y":-354,"id":"3b74179e-8b5c-f4bf-be00-1c9df8f7f0f0","largeFont":true},{"text":"This is Option 2 :\n\n- Provide env values directly in Noodl","width":277,"height":150,"fill":"no-fill","x":-26,"y":-69,"id":"78e1c2d4-2fe7-b114-400e-bff9f7632ca4","largeFont":true,"color":"success"}]}},{"name":"/#Pages/clients","id":"80796d73-8f96-570d-c666-9478a2278717","graph":{"connections":[],"roots":[{"id":"bdcf24ab-bdd2-8aec-d58b-aef2165ff610","type":"Page","x":0,"y":0,"parameters":{},"ports":[],"dynamicports":[{"name":"title","displayName":"Title","type":"string","group":"General","plug":"input","default":"clients","index":31},{"name":"urlPath","displayName":"Url Path","type":"string","group":"General","plug":"input","default":"clients","index":32}],"children":[]},{"id":"cf62b209-b31d-169a-c46d-d46fb72ba1ae","type":"PageInputs","x":-100,"y":-50,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":["bdcf24ab-bdd2-8aec-d58b-aef2165ff610"]}},{"name":"/#Pages/compositions","id":"e04085d4-7a05-7897-b95b-7c36d6f195e3","graph":{"connections":[{"fromId":"f8ae5940-7d5c-aa71-b901-55bf93f7a658","fromProperty":"items","toId":"95047918-3c29-e608-ec1b-7557f82b73e1","toProperty":"items"},{"fromId":"e8e77c7b-7a2b-469c-581b-c2794fc4b4b5","fromProperty":"Skip","toId":"f8ae5940-7d5c-aa71-b901-55bf93f7a658","toProperty":"filterSkip"},{"fromId":"e8e77c7b-7a2b-469c-581b-c2794fc4b4b5","fromProperty":"Limit","toId":"f8ae5940-7d5c-aa71-b901-55bf93f7a658","toProperty":"filterLimit"},{"fromId":"a03e3748-5f07-f348-8b21-4fcfb5d08a7c","fromProperty":"onTextChanged","toId":"af8a9e29-f608-7b6b-9833-eb175ed0043b","toProperty":"filterFilterValue-name"},{"fromId":"af8a9e29-f608-7b6b-9833-eb175ed0043b","fromProperty":"items","toId":"f8ae5940-7d5c-aa71-b901-55bf93f7a658","toProperty":"items"},{"fromId":"af8a9e29-f608-7b6b-9833-eb175ed0043b","fromProperty":"count","toId":"e8e77c7b-7a2b-469c-581b-c2794fc4b4b5","toProperty":"Total Count"}],"roots":[{"id":"0aeba36e-3822-7c58-2090-5e78bcc998a9","type":"Page","x":0,"y":0,"parameters":{},"ports":[],"dynamicports":[{"name":"title","displayName":"Title","type":"string","group":"General","plug":"input","default":"compositions","index":31},{"name":"urlPath","displayName":"Url Path","type":"string","group":"General","plug":"input","default":"compositions","index":32}],"children":[{"id":"39d8290a-6b6b-7e1b-818d-0e28e3414e82","type":"Group","label":"Main container","parameters":{"backgroundColor":"Hive page grey"},"ports":[],"dynamicports":[],"children":[{"id":"f7a9e115-4a8e-dfb1-7ed7-99a1bc5e9f60","type":"Group","label":"Composition list","parameters":{},"ports":[],"dynamicports":[],"children":[{"id":"a03e3748-5f07-f348-8b21-4fcfb5d08a7c","type":"net.noodl.controls.textinput","parameters":{"useLabel":false,"placeholder":"Search...","useIcon":true,"iconIconSource":{"class":"material-icons","code":"search","codeAsClass":false}},"ports":[],"dynamicports":[],"children":[]},{"id":"95047918-3c29-e608-ec1b-7557f82b73e1","type":"For Each","parameters":{},"ports":[],"dynamicports":[{"name":"inputMappingScript","type":{"name":"string","codeeditor":"javascript"},"displayName":"Script","group":"Input Mapping","default":"// Here you add mappings between the properties of the item objects and the inputs of the components.\n// 'myComponentInput': 'myObjectProperty',\n// 'anotherComponentInput': function () { return object.get('someProperty') + ' ' + object.get('otherProp') }\n// These are the default mappings based on the selected template component.\nmap({\n})\n","plug":"input","index":6}],"children":[]},{"id":"e8e77c7b-7a2b-469c-581b-c2794fc4b4b5","type":"/Pages And Rows","parameters":{},"ports":[],"dynamicports":[],"children":[]}]}]}]},{"id":"b04abd17-af28-d3ce-0198-ea52887f2f50","type":"PageInputs","x":-100,"y":-50,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"f8ae5940-7d5c-aa71-b901-55bf93f7a658","type":"Filter Collection","label":"Pagination","x":-188,"y":192,"parameters":{"filterEnableLimit":true,"filterFilterOp-name":"regex"},"ports":[],"dynamicports":[{"type":"boolean","plug":"input","group":"Limit","name":"filterEnableLimit","displayName":"Use limit","index":7},{"type":"number","default":10,"plug":"input","group":"Limit","name":"filterLimit","displayName":"Limit","index":8},{"type":"number","default":0,"plug":"input","group":"Limit","name":"filterSkip","displayName":"Skip","index":9},{"type":{"name":"stringlist","allowEditOnly":true},"plug":"input","group":"Filter","name":"filterFilter","displayName":"Filter","index":10},{"type":{"name":"stringlist","allowEditOnly":true},"plug":"input","group":"Sort","name":"filterSort","displayName":"Sort","index":11}],"children":[]},{"id":"af8a9e29-f608-7b6b-9833-eb175ed0043b","type":"Filter Collection","label":"Search filter","x":-389,"y":208,"parameters":{"filterEnableLimit":true,"filterFilterOp-name":"regex","filterFilter":"name"},"ports":[],"dynamicports":[{"type":"boolean","plug":"input","group":"Limit","name":"filterEnableLimit","displayName":"Use limit","index":7},{"type":"number","default":10,"plug":"input","group":"Limit","name":"filterLimit","displayName":"Limit","index":8},{"type":"number","default":0,"plug":"input","group":"Limit","name":"filterSkip","displayName":"Skip","index":9},{"type":{"name":"stringlist","allowEditOnly":true},"plug":"input","group":"Filter","name":"filterFilter","displayName":"Filter","index":10},{"type":{"name":"stringlist","allowEditOnly":true},"plug":"input","group":"Sort","name":"filterSort","displayName":"Sort","index":11},{"type":{"name":"enum","enums":[{"value":"string","label":"String"},{"value":"number","label":"Number"},{"value":"boolean","label":"Boolean"}]},"default":"string","plug":"input","group":"name filter","displayName":"Type","editorName":"name filter | Type","name":"filterFilterType-name","index":12},{"type":{"name":"enum","enums":[{"value":"eq","label":"Equals"},{"value":"neq","label":"Not Equals"},{"value":"regex","label":"Matches RegEx"}]},"default":"eq","plug":"input","group":"name filter","displayName":"Op","editorName":"name filter| Op","name":"filterFilterOp-name","index":13},{"type":"boolean","default":false,"plug":"input","group":"name filter","displayName":"Case sensitive","editorName":"name filter| Case","name":"filterFilterOption-case-name","index":14},{"type":"string","plug":"input","group":"name filter","displayName":"Value","editorName":"name Filter Value","name":"filterFilterValue-name","index":15}],"children":[]}],"visualRoots":["0aeba36e-3822-7c58-2090-5e78bcc998a9"]}},{"name":"/#Pages/connect","id":"44779844-6116-3191-eda0-6d8a2d6c72d6","graph":{"connections":[],"roots":[{"id":"b30f64c1-f81a-3c26-ae80-c019f942fede","type":"Page","x":0,"y":0,"parameters":{},"ports":[],"dynamicports":[{"name":"title","displayName":"Title","type":"string","group":"General","plug":"input","default":"connect","index":31},{"name":"urlPath","displayName":"Url Path","type":"string","group":"General","plug":"input","default":"connect","index":32}],"children":[{"id":"5293cd4f-c59c-9ff9-4ed4-d55e59e6f79e","type":"Group","label":"Main container","parameters":{"backgroundColor":"Hive page grey","paddingTop":{"value":60,"unit":"px"},"paddingBottom":{"value":40,"unit":"px"}},"ports":[],"dynamicports":[],"children":[{"id":"f533ed2b-e7a1-0171-7448-3a81c2c6f277","type":"/#Pages/connect/Signup form","parameters":{},"ports":[],"dynamicports":[],"children":[]}]}]},{"id":"23987ff1-a8a2-0b39-7fb1-f014730265b5","type":"PageInputs","x":-100,"y":-50,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":["b30f64c1-f81a-3c26-ae80-c019f942fede"]}},{"name":"/#Pages/connect/Login form","id":"70fbe3e5-7324-596c-a762-156cf374bc4f","graph":{"connections":[{"fromId":"f9b33e8e-cc2b-bc47-338b-32ee2412822b","fromProperty":"mounted","toId":"79e9245d-bc26-b8f0-ed9d-64345ed3af04","toProperty":"mounted"},{"fromId":"0fca7948-e4a1-34c5-ff79-fe40dd8f4680","fromProperty":"onClick","toId":"14b4b90e-c7a5-73d2-82cf-1caf288798f0","toProperty":"Switch to signup"}],"roots":[{"id":"79e9245d-bc26-b8f0-ed9d-64345ed3af04","type":"Group","label":"Login group","x":0,"y":0,"parameters":{"sizeMode":"contentHeight","alignY":"center","alignX":"center","rowGap":{"value":20,"unit":"px"},"width":{"value":300,"unit":"px"}},"ports":[],"dynamicports":[],"children":[{"id":"60ac7040-16c7-62ef-79a8-a523cd32e411","type":"net.noodl.controls.textinput","variant":"Standard input","parameters":{},"stateParameters":{},"stateTransitions":{},"defaultStateTransitions":{},"ports":[],"dynamicports":[],"children":[]},{"id":"55ed451b-80f5-a155-ff63-95e1a1919b37","type":"net.noodl.controls.textinput","variant":"Standard input","parameters":{"backgroundColor":"White","label":"Password","useLabel":true,"labelcolor":"White","textStyle":"Body Medium","paddingTop":{"value":8,"unit":"px"},"paddingBottom":{"value":8,"unit":"px"},"sizeMode":"contentHeight","paddingLeft":{"value":12,"unit":"px"},"type":"password"},"ports":[],"dynamicports":[],"children":[]},{"id":"0e9a8db9-d311-b2be-3db9-e8500e757a78","type":"net.noodl.controls.button","parameters":{"alignX":"center","backgroundColor":"Hive purple","label":"Log in"},"ports":[],"dynamicports":[],"children":[]},{"id":"0fca7948-e4a1-34c5-ff79-fe40dd8f4680","type":"Text","variant":"Clickable text","parameters":{"text":"Don't have an account? Click here to sign up","alignX":"center","sizeMode":"contentHeight","textAlignX":"center","styleCss":"/* background-color: red; */\ncursor: pointer;"},"ports":[],"dynamicports":[],"children":[]}]},{"id":"f9b33e8e-cc2b-bc47-338b-32ee2412822b","type":"Component Inputs","x":-285.5,"y":16.5,"parameters":{},"ports":[{"name":"mounted","plug":"output","type":{"name":"*"},"index":1}],"dynamicports":[],"children":[]},{"id":"14b4b90e-c7a5-73d2-82cf-1caf288798f0","type":"Component Outputs","x":263.75,"y":97.25,"parameters":{},"ports":[{"name":"Switch to signup","plug":"input","type":{"name":"*"},"index":1}],"dynamicports":[],"children":[]}],"visualRoots":["79e9245d-bc26-b8f0-ed9d-64345ed3af04"]}},{"name":"/#Pages/connect/Signup form","id":"7da523e1-a72b-0858-bea8-25f6b74613a3","graph":{"connections":[{"fromId":"5310be4a-ae90-9283-4999-0cd3de820853","fromProperty":"at-signup","toId":"835757ea-5abb-5024-7f0b-536f8d910022","toProperty":"mounted"},{"fromId":"5310be4a-ae90-9283-4999-0cd3de820853","fromProperty":"at-signup","toId":"b8161b1c-a200-954e-ba3f-e58a2ee6dd65","toProperty":"mounted"},{"fromId":"5310be4a-ae90-9283-4999-0cd3de820853","fromProperty":"link text","toId":"fbdb6c0a-7dc4-78ed-42f5-de50de6e9b72","toProperty":"text"},{"fromId":"5310be4a-ae90-9283-4999-0cd3de820853","fromProperty":"button text","toId":"80131f89-1124-631a-374f-37248ae4a2c6","toProperty":"label"},{"fromId":"fbdb6c0a-7dc4-78ed-42f5-de50de6e9b72","fromProperty":"onClick","toId":"5310be4a-ae90-9283-4999-0cd3de820853","toProperty":"toggle"},{"fromId":"835757ea-5abb-5024-7f0b-536f8d910022","fromProperty":"onTextChanged","toId":"171fa81d-469e-9fe3-2e2b-08aa5943a52c","toProperty":"first_name"},{"fromId":"b8161b1c-a200-954e-ba3f-e58a2ee6dd65","fromProperty":"onTextChanged","toId":"171fa81d-469e-9fe3-2e2b-08aa5943a52c","toProperty":"last_name"},{"fromId":"d11c57ca-e447-fc0f-00ff-d37ffb3b11d3","fromProperty":"onTextChanged","toId":"171fa81d-469e-9fe3-2e2b-08aa5943a52c","toProperty":"email"},{"fromId":"33121d01-0397-02eb-0612-ce912d61556a","fromProperty":"onTextChanged","toId":"171fa81d-469e-9fe3-2e2b-08aa5943a52c","toProperty":"password"},{"fromId":"d11c57ca-e447-fc0f-00ff-d37ffb3b11d3","fromProperty":"onTextChanged","toId":"632c6adc-9ecb-0229-441b-c50c78e53373","toProperty":"email"},{"fromId":"33121d01-0397-02eb-0612-ce912d61556a","fromProperty":"onTextChanged","toId":"632c6adc-9ecb-0229-441b-c50c78e53373","toProperty":"password"},{"fromId":"5310be4a-ae90-9283-4999-0cd3de820853","fromProperty":"at-login","toId":"253c9bbd-3684-3e2d-b36b-4cb4145203d8","toProperty":"condition"},{"fromId":"253c9bbd-3684-3e2d-b36b-4cb4145203d8","fromProperty":"ontrue","toId":"632c6adc-9ecb-0229-441b-c50c78e53373","toProperty":"Do"},{"fromId":"253c9bbd-3684-3e2d-b36b-4cb4145203d8","fromProperty":"onfalse","toId":"171fa81d-469e-9fe3-2e2b-08aa5943a52c","toProperty":"Do"},{"fromId":"835757ea-5abb-5024-7f0b-536f8d910022","fromProperty":"onTextChanged","toId":"c69456a2-d502-193b-de73-5e51a0b20d6a","toProperty":"firstName"},{"fromId":"b8161b1c-a200-954e-ba3f-e58a2ee6dd65","fromProperty":"onTextChanged","toId":"c69456a2-d502-193b-de73-5e51a0b20d6a","toProperty":"lastName"},{"fromId":"d11c57ca-e447-fc0f-00ff-d37ffb3b11d3","fromProperty":"onTextChanged","toId":"c69456a2-d502-193b-de73-5e51a0b20d6a","toProperty":"email"},{"fromId":"33121d01-0397-02eb-0612-ce912d61556a","fromProperty":"onTextChanged","toId":"c69456a2-d502-193b-de73-5e51a0b20d6a","toProperty":"password"},{"fromId":"5310be4a-ae90-9283-4999-0cd3de820853","fromProperty":"at-login","toId":"c69456a2-d502-193b-de73-5e51a0b20d6a","toProperty":"atLogin"},{"fromId":"80131f89-1124-631a-374f-37248ae4a2c6","fromProperty":"onClick","toId":"c69456a2-d502-193b-de73-5e51a0b20d6a","toProperty":"run"},{"fromId":"c69456a2-d502-193b-de73-5e51a0b20d6a","fromProperty":"isTrueEv","toId":"253c9bbd-3684-3e2d-b36b-4cb4145203d8","toProperty":"eval"},{"fromId":"c69456a2-d502-193b-de73-5e51a0b20d6a","fromProperty":"isFalseEv","toId":"d8979137-fb61-e456-7100-a5e795b94cec","toProperty":"Do"},{"fromId":"632c6adc-9ecb-0229-441b-c50c78e53373","fromProperty":"Failure","toId":"de6905f0-af01-ce65-dff9-6bd6bd35bdf0","toProperty":"Do"},{"fromId":"171fa81d-469e-9fe3-2e2b-08aa5943a52c","fromProperty":"Failure","toId":"de6905f0-af01-ce65-dff9-6bd6bd35bdf0","toProperty":"Do"},{"fromId":"632c6adc-9ecb-0229-441b-c50c78e53373","fromProperty":"error","toId":"de6905f0-af01-ce65-dff9-6bd6bd35bdf0","toProperty":"Message"},{"fromId":"171fa81d-469e-9fe3-2e2b-08aa5943a52c","fromProperty":"error","toId":"de6905f0-af01-ce65-dff9-6bd6bd35bdf0","toProperty":"Message"},{"fromId":"33121d01-0397-02eb-0612-ce912d61556a","fromProperty":"onEnter","toId":"c69456a2-d502-193b-de73-5e51a0b20d6a","toProperty":"run"},{"fromId":"632c6adc-9ecb-0229-441b-c50c78e53373","fromProperty":"Success","toId":"cec6f250-6e2e-6729-61cf-525607c0433c","toProperty":"navigate"},{"fromId":"171fa81d-469e-9fe3-2e2b-08aa5943a52c","fromProperty":"Success","toId":"cec6f250-6e2e-6729-61cf-525607c0433c","toProperty":"navigate"}],"roots":[{"id":"91fdb537-7a57-af88-148f-7644f579b4b8","type":"Group","label":"Connect group","x":0,"y":0,"parameters":{"sizeMode":"contentHeight","alignY":"center","alignX":"center","rowGap":{"value":20,"unit":"px"},"width":{"value":300,"unit":"px"}},"ports":[],"dynamicports":[],"children":[{"id":"835757ea-5abb-5024-7f0b-536f8d910022","type":"net.noodl.controls.textinput","variant":"Standard input","parameters":{"label":"First name"},"ports":[],"dynamicports":[],"children":[]},{"id":"b8161b1c-a200-954e-ba3f-e58a2ee6dd65","type":"net.noodl.controls.textinput","variant":"Standard input","parameters":{"label":"Last name"},"ports":[],"dynamicports":[],"children":[]},{"id":"d11c57ca-e447-fc0f-00ff-d37ffb3b11d3","type":"net.noodl.controls.textinput","variant":"Standard input","label":"Email","parameters":{},"stateParameters":{},"stateTransitions":{},"defaultStateTransitions":{},"ports":[],"dynamicports":[],"children":[]},{"id":"33121d01-0397-02eb-0612-ce912d61556a","type":"net.noodl.controls.textinput","variant":"Standard input","parameters":{"backgroundColor":"White","label":"Password","useLabel":true,"labelcolor":"White","textStyle":"Body Medium","paddingTop":{"value":8,"unit":"px"},"paddingBottom":{"value":8,"unit":"px"},"sizeMode":"contentHeight","paddingLeft":{"value":12,"unit":"px"},"type":"password"},"ports":[],"dynamicports":[],"children":[]},{"id":"80131f89-1124-631a-374f-37248ae4a2c6","type":"net.noodl.controls.button","variant":"Standard button","label":"Button","parameters":{},"stateParameters":{},"stateTransitions":{},"defaultStateTransitions":{},"ports":[],"dynamicports":[],"children":[]},{"id":"fbdb6c0a-7dc4-78ed-42f5-de50de6e9b72","type":"Text","variant":"Clickable text","parameters":{},"stateParameters":{},"stateTransitions":{},"defaultStateTransitions":{},"ports":[],"dynamicports":[],"children":[]}]},{"id":"5310be4a-ae90-9283-4999-0cd3de820853","type":"States","x":-281.1666666666667,"y":143.16666666666666,"parameters":{"states":"login,signup","values":"link text,button text","type-link text":"string","value-signup-link text":"Already have an account? Click here to log in","value-login-link text":"Don't have an account? Click here to sign up","type-button text":"string","value-login-button text":"Log in","value-signup-button text":"Sign up"},"ports":[],"dynamicports":[{"type":{"name":"string","allowConnectionsOnly":true},"plug":"output","group":"Values","name":"link text","index":6},{"type":{"name":"enum","enums":[{"label":"Number","value":"number"},{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Color","value":"color"},{"label":"Text Style","value":"textStyle"}],"allowEditOnly":true},"default":"number","plug":"input","group":"Types","displayName":"link text","name":"type-link text","index":7},{"type":{"name":"string","allowConnectionsOnly":true},"plug":"output","group":"Values","name":"button text","index":8},{"type":{"name":"enum","enums":[{"label":"Number","value":"number"},{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Color","value":"color"},{"label":"Text Style","value":"textStyle"}],"allowEditOnly":true},"default":"number","plug":"input","group":"Types","displayName":"button text","name":"type-button text","index":9},{"plug":"input","type":"string","group":"login Values","name":"value-login-link text","displayName":"link text","editorName":"login|link text","index":10},{"plug":"input","type":"string","group":"login Values","name":"value-login-button text","displayName":"button text","editorName":"login|button text","index":11},{"plug":"input","type":"curve","displayName":"Default","default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"login Transitions","name":"transitiondef-login","index":12},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To login","name":"to-login","group":"Go to state","index":13},{"plug":"output","type":"boolean","displayName":"At login","name":"at-login","group":"Current state","index":14},{"plug":"output","type":"signal","displayName":"Has Reached login","name":"reached-login","group":"Current state","index":15},{"plug":"input","type":"string","group":"signup Values","name":"value-signup-link text","displayName":"link text","editorName":"signup|link text","index":16},{"plug":"input","type":"string","group":"signup Values","name":"value-signup-button text","displayName":"button text","editorName":"signup|button text","index":17},{"plug":"input","type":"curve","displayName":"Default","default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"signup Transitions","name":"transitiondef-signup","index":18},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To signup","name":"to-signup","group":"Go to state","index":19},{"plug":"output","type":"boolean","displayName":"At signup","name":"at-signup","group":"Current state","index":20},{"plug":"output","type":"signal","displayName":"Has Reached signup","name":"reached-signup","group":"Current state","index":21},{"plug":"input","type":{"name":"enum","enums":["login","signup"]},"group":"States","displayName":"State","name":"currentState","default":"login","index":22}],"children":[]},{"id":"632c6adc-9ecb-0229-441b-c50c78e53373","type":"/#Directus/Directus Prefab/Components/Auth/Directus - Login","x":779.9293360130388,"y":207.02734434399173,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"171fa81d-469e-9fe3-2e2b-08aa5943a52c","type":"/#Directus/Directus Prefab/Components/Auth/Directus - Signup","x":780.8789285036811,"y":359.6500412170091,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"253c9bbd-3684-3e2d-b36b-4cb4145203d8","type":"Condition","label":"At login","x":508.935979813794,"y":246.01919415683267,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"c69456a2-d502-193b-de73-5e51a0b20d6a","type":"Expression","x":296.4303983338091,"y":177.7834569843609,"parameters":{"expression":"(firstName && lastName && email && password && !atLogin) || (email && password && atLogin)"},"ports":[],"dynamicports":[{"group":"Parameters","name":"firstName","type":{"name":"*","editAsType":"string"},"plug":"input","index":7},{"group":"Parameters","name":"lastName","type":{"name":"*","editAsType":"string"},"plug":"input","index":8},{"group":"Parameters","name":"email","type":{"name":"*","editAsType":"string"},"plug":"input","index":9},{"group":"Parameters","name":"password","type":{"name":"*","editAsType":"string"},"plug":"input","index":10},{"group":"Parameters","name":"atLogin","type":{"name":"*","editAsType":"string"},"plug":"input","index":11}],"children":[],"metadata":{"merge":{"soureCodePorts":["expression"]}}},{"id":"d8979137-fb61-e456-7100-a5e795b94cec","type":"/Show Toast","x":302.27917580573467,"y":491.6678479777314,"parameters":{"Type":"Warning","Message":"Please fill in all fields"},"ports":[],"dynamicports":[],"children":[]},{"id":"cec6f250-6e2e-6729-61cf-525607c0433c","type":"RouterNavigate","x":1201.6838788290559,"y":357.7592216209418,"parameters":{"router":"Main","target":"/#Pages/dashboard"},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"component","title":"Choose page component","components":["/#Pages/connect","/#Pages/dashboard","/#Pages/my-account","/#Pages/clients","/#Pages/videos","/#Pages/project","/#Pages/experiment","/#Pages/projects","/#Pages/compositions"],"allowEditOnly":true},"group":"General","displayName":"Target Page","name":"target","index":3}],"children":[]},{"id":"de6905f0-af01-ce65-dff9-6bd6bd35bdf0","type":"/Show Toast","x":1047.6838788290559,"y":227.7592216209418,"parameters":{"Type":"Error"},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":["91fdb537-7a57-af88-148f-7644f579b4b8"]}},{"name":"/#Pages/dashboard","id":"b00a5db2-3242-1d98-98f7-8503fc401dbd","graph":{"connections":[{"fromId":"dbec89ea-d1c8-afe0-6e10-1ba103d7ae48","fromProperty":"itemOutputSignal-item clicked","toId":"97acee87-0a98-5fe4-342f-f7fadd99dec5","toProperty":"run"},{"fromId":"97acee87-0a98-5fe4-342f-f7fadd99dec5","fromProperty":"out-toClients","toId":"94fc2188-72a2-b864-3132-0876e8b59a96","toProperty":"navigate"},{"fromId":"97acee87-0a98-5fe4-342f-f7fadd99dec5","fromProperty":"out-toProjects","toId":"c8d872d7-53b7-aa10-a0df-0c76c0a1f553","toProperty":"navigate"},{"fromId":"97acee87-0a98-5fe4-342f-f7fadd99dec5","fromProperty":"out-toVideos","toId":"abba5e5d-061a-73b2-5b58-7f3aa5b7f5e2","toProperty":"navigate"},{"fromId":"dbec89ea-d1c8-afe0-6e10-1ba103d7ae48","fromProperty":"itemOutput-item name","toId":"97acee87-0a98-5fe4-342f-f7fadd99dec5","toProperty":"in-menuItem"},{"fromId":"0c0c4bfb-657b-ea12-62af-a59f877ce92e","fromProperty":"items","toId":"4502699a-c6af-ef3d-f023-9e70b464a78e","toProperty":"items"},{"fromId":"4502699a-c6af-ef3d-f023-9e70b464a78e","fromProperty":"items","toId":"93e015d9-4037-7722-57a0-c1cdadab85af","toProperty":"items"},{"fromId":"057669b5-87a8-dc60-3899-b6bb58c69dce","fromProperty":"onClick","toId":"abba5e5d-061a-73b2-5b58-7f3aa5b7f5e2","toProperty":"navigate"},{"fromId":"97acee87-0a98-5fe4-342f-f7fadd99dec5","fromProperty":"out-toCompositions","toId":"d2bb4241-3b75-f599-9453-66466550245e","toProperty":"navigate"}],"roots":[{"id":"20e9fc30-8ee2-8ed3-b4d3-4986299315d3","type":"Page","label":"Dashboard","x":0,"y":0,"parameters":{},"ports":[],"dynamicports":[{"name":"title","displayName":"Title","type":"string","group":"General","plug":"input","default":"dashboard","index":31},{"name":"urlPath","displayName":"Url Path","type":"string","group":"General","plug":"input","default":"dashboard","index":32}],"children":[{"id":"7d11a8e0-ce6b-9976-d921-5b474f48de59","type":"Group","label":"Main container","parameters":{"backgroundColor":"Hive page grey"},"ports":[],"dynamicports":[],"children":[{"id":"be6d9428-5fd4-9a26-0041-d20934bdf475","type":"Group","label":"Dashboard","parameters":{"flexDirection":"row","paddingLeft":{"value":20,"unit":"px"},"paddingRight":{"value":20,"unit":"px"},"paddingBottom":{"value":20,"unit":"px"},"paddingTop":{"value":20,"unit":"px"},"columnGap":{"value":20,"unit":"px"}},"ports":[],"dynamicports":[],"children":[{"id":"31d37f7f-53e8-fa7a-41d8-57b7ee6db436","type":"Group","label":"Left","parameters":{"rowGap":{"value":20,"unit":"px"}},"ports":[],"dynamicports":[],"children":[{"id":"4c1ed690-2083-0d7c-e026-30cc0946d829","type":"Group","variant":"Tile","label":"Recent projects","parameters":{"boxShadowEnabled":false,"borderRadius":{"value":10,"unit":"px"},"backgroundColor":"Hive header grey","paddingLeft":{"value":20,"unit":"px"},"paddingTop":{"value":20,"unit":"px"},"paddingRight":{"value":20,"unit":"px"},"paddingBottom":{"value":20,"unit":"px"},"rowGap":{"value":20,"unit":"px"}},"ports":[],"dynamicports":[],"children":[{"id":"b6812add-241f-de56-1326-ad02ac8c1f4c","type":"Group","parameters":{"flexDirection":"row"},"ports":[],"dynamicports":[],"children":[{"id":"72dcfe1c-1b87-6fd0-7291-7994213727c0","type":"Text","parameters":{"text":"Recent projects","sizeMode":"contentHeight","textStyle":"Title Medium"},"ports":[],"dynamicports":[],"children":[]},{"id":"bbec27a1-1000-fc64-88be-0e92dc0d1f92","type":"Text","label":"View all","parameters":{"text":"View all","sizeMode":"contentSize","textStyle":"Label Small"},"ports":[],"dynamicports":[],"children":[]}]},{"id":"012191c1-d589-001c-4835-9d8c784ed43f","type":"For Each","parameters":{"items":"[\n    {\n        \"title\": \"Test project 1\",\n        \"client\": \"Gary Vee\",\n        \"deadline\": \"30th July 2024\"\n    },\n    {\n        \"title\": \"Test project 2\",\n        \"client\": \"Bogdan\",\n        \"deadline\": \"1st Aug 2024\"\n    }\n]","template":"/#Pages/dashboard/Project tile"},"ports":[],"dynamicports":[{"name":"inputMappingScript","type":{"name":"string","codeeditor":"javascript"},"displayName":"Script","group":"Input Mapping","default":"// Here you add mappings between the properties of the item objects and the inputs of the components.\n// 'myComponentInput': 'myObjectProperty',\n// 'anotherComponentInput': function () { return object.get('someProperty') + ' ' + object.get('otherProp') }\n// These are the default mappings based on the selected template component.\nmap({\n})\n","plug":"input","index":6}],"children":[]}]},{"id":"93bbc898-b385-6ee4-750e-beb8b87e9097","type":"Group","variant":"Tile","label":"Buttons","parameters":{"paddingLeft":{"value":20,"unit":"px"},"paddingTop":{"value":20,"unit":"px"},"paddingRight":{"value":20,"unit":"px"},"paddingBottom":{"value":20,"unit":"px"},"backgroundColor":"Hive header grey","borderRadius":{"value":10,"unit":"px"}},"ports":[],"dynamicports":[],"children":[{"id":"3085eaa7-3a41-55f8-2d76-ffcd9f0b70f6","type":"net.noodl.visual.columns","parameters":{"layoutString":"1 1 1 1","marginX":{"value":20,"unit":"px"},"marginY":{"value":20,"unit":"px"},"justifyContent":"flex-start"},"ports":[],"dynamicports":[],"children":[{"id":"dbec89ea-d1c8-afe0-6e10-1ba103d7ae48","type":"For Each","parameters":{"items":"[\n    {\n        \"title\": \"Clients\",\n        \"icon\": \"groups\"\n    },\n    {\n        \"title\": \"Projects\",\n        \"icon\": \"folder_copy\"\n    },\n    {\n        \"title\": \"Videos\",\n        \"icon\": \"video_library\"\n    },\n    {\n        \"title\": \"Compositions\",\n        \"icon\": \"movie\"\n    }\n]","template":"/#Pages/dashboard/Menu tile"},"ports":[],"dynamicports":[{"name":"itemOutputSignal-item clicked","displayName":"item clicked","type":"signal","plug":"output","group":"Item Signals","index":6},{"name":"itemOutput-item name","displayName":"item name","type":{"name":"*","allowConnectionsOnly":true},"plug":"output","group":"Item Outputs","index":7},{"name":"inputMappingScript","type":{"name":"string","codeeditor":"javascript"},"displayName":"Script","group":"Input Mapping","default":"// Here you add mappings between the properties of the item objects and the inputs of the components.\n// 'myComponentInput': 'myObjectProperty',\n// 'anotherComponentInput': function () { return object.get('someProperty') + ' ' + object.get('otherProp') }\n// These are the default mappings based on the selected template component.\nmap({\n})\n","plug":"input","index":8}],"children":[]}]}]}]},{"id":"cd11efbb-2339-c826-89b0-abe6155ad1c3","type":"Group","label":"Right","parameters":{},"ports":[],"dynamicports":[],"children":[{"id":"87c96520-44a5-da42-bed9-c9259586126f","type":"Group","variant":"Tile","label":"Recent videos","parameters":{"rowGap":{"value":20,"unit":"px"}},"stateParameters":{},"stateTransitions":{},"defaultStateTransitions":{},"ports":[],"dynamicports":[],"children":[{"id":"8b95bdb6-30ca-4d3b-e2c5-ecab1a203d1f","type":"Group","parameters":{"flexDirection":"row"},"ports":[],"dynamicports":[],"children":[{"id":"5100e125-b8f0-9128-5560-7552f7d2e17c","type":"Text","label":"Recent videos","parameters":{"text":"Recent videos","sizeMode":"contentHeight","textStyle":"Title Medium"},"ports":[],"dynamicports":[],"children":[]},{"id":"057669b5-87a8-dc60-3899-b6bb58c69dce","type":"Text","label":"View all","parameters":{"text":"View all","sizeMode":"contentSize","textStyle":"Label Small","styleCss":"/* background-color: red; */\ncursor: pointer;"},"ports":[],"dynamicports":[],"children":[]}]},{"id":"93e015d9-4037-7722-57a0-c1cdadab85af","type":"For Each","parameters":{"items":"[\n    {\n        \"title\": \"Test video 1\",\n        \"duration\": \"2m30s\"\n    },\n    {\n        \"title\": \"Test video 2\",\n        \"duration\": \"24s\"\n    }\n]","template":"/#Pages/dashboard/video tile","inputMappingScript":"// Here you add mappings between the properties of the item objects and the inputs of the components.\n// 'myComponentInput': 'myObjectProperty',\n// 'anotherComponentInput': function () { return object.get('someProperty') + ' ' + object.get('otherProp') }\n// These are the default mappings based on the selected template component.\nmap({\n\t'show menu item': () => true,\n\t'show add button': () => false\n})\n"},"ports":[],"dynamicports":[{"name":"inputMappingScript","type":{"name":"string","codeeditor":"javascript"},"displayName":"Script","group":"Input Mapping","default":"// Here you add mappings between the properties of the item objects and the inputs of the components.\n// 'myComponentInput': 'myObjectProperty',\n// 'anotherComponentInput': function () { return object.get('someProperty') + ' ' + object.get('otherProp') }\n// These are the default mappings based on the selected template component.\nmap({\n\t'show menu item': 'show menu item',\n\t'show add button': 'show add button',\n})\n","plug":"input","index":6}],"children":[]}]}]}]}]}]},{"id":"dbc86d80-6e69-568f-f1a4-8e0b453c8d14","type":"PageInputs","x":-100,"y":-50,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"97acee87-0a98-5fe4-342f-f7fadd99dec5","type":"JavaScriptFunction","label":"Button router","x":377.03899290325177,"y":657.4374061289901,"parameters":{"functionScript":"switch (Inputs.menuItem) {\n    case \"Clients\":\n    Outputs.toClients();\n    break;\n    \n    case \"Projects\":\n    Outputs.toProjects();\n    break;\n    \n    case \"Videos\":\n    Outputs.toVideos();\n    break;\n    \n    case \"Compositions\":\n    Outputs.toCompositions();\n    break;\n    \n}"},"ports":[],"dynamicports":[{"name":"in-menuItem","displayName":"menuItem","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-toClients","displayName":"toClients","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-toProjects","displayName":"toProjects","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-toVideos","displayName":"toVideos","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-toCompositions","displayName":"toCompositions","plug":"output","type":"signal","group":"Outputs","index":8}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"94fc2188-72a2-b864-3132-0876e8b59a96","type":"RouterNavigate","label":"Clients","x":638.3463309677506,"y":589.3124687096633,"parameters":{"router":"Main","target":"/#Pages/clients"},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"component","title":"Choose page component","components":["/#Pages/connect","/#Pages/dashboard","/#Pages/my-account","/#Pages/clients","/#Pages/videos","/#Pages/project","/#Pages/experiment","/#Pages/projects","/#Pages/compositions"],"allowEditOnly":true},"group":"General","displayName":"Target Page","name":"target","index":3}],"children":[]},{"id":"abba5e5d-061a-73b2-5b58-7f3aa5b7f5e2","type":"RouterNavigate","label":"Videos","x":637,"y":819,"parameters":{"router":"Main","target":"/#Pages/videos"},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"component","title":"Choose page component","components":["/#Pages/connect","/#Pages/dashboard","/#Pages/my-account","/#Pages/clients","/#Pages/videos","/#Pages/project","/#Pages/experiment","/#Pages/projects","/#Pages/compositions"],"allowEditOnly":true},"group":"General","displayName":"Target Page","name":"target","index":3}],"children":[]},{"id":"c8d872d7-53b7-aa10-a0df-0c76c0a1f553","type":"RouterNavigate","label":"Projects","x":638,"y":706,"parameters":{"router":"Main","target":"/#Pages/projects"},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"component","title":"Choose page component","components":["/#Pages/connect","/#Pages/dashboard","/#Pages/my-account","/#Pages/clients","/#Pages/videos","/#Pages/project","/#Pages/experiment","/#Pages/projects","/#Pages/compositions"],"allowEditOnly":true},"group":"General","displayName":"Target Page","name":"target","index":3}],"children":[]},{"id":"0c0c4bfb-657b-ea12-62af-a59f877ce92e","type":"Collection2","x":-282.3530971008179,"y":962.4269198224488,"parameters":{"collectionId":"allVideos"},"ports":[],"dynamicports":[],"children":[]},{"id":"4502699a-c6af-ef3d-f023-9e70b464a78e","type":"Filter Collection","x":-94.35309710081782,"y":970.4269198224488,"parameters":{"filterSort":"date_created","filterSort-date_created":"descending","filterEnableLimit":true,"filterLimit":2},"ports":[],"dynamicports":[{"type":"boolean","plug":"input","group":"Limit","name":"filterEnableLimit","displayName":"Use limit","index":7},{"type":"number","default":10,"plug":"input","group":"Limit","name":"filterLimit","displayName":"Limit","index":8},{"type":"number","default":0,"plug":"input","group":"Limit","name":"filterSkip","displayName":"Skip","index":9},{"type":{"name":"stringlist","allowEditOnly":true},"plug":"input","group":"Filter","name":"filterFilter","displayName":"Filter","index":10},{"type":{"name":"stringlist","allowEditOnly":true},"plug":"input","group":"Sort","name":"filterSort","displayName":"Sort","index":11},{"type":{"name":"enum","enums":[{"value":"ascending","label":"Ascending"},{"value":"descending","label":"Descending"}]},"default":"ascending","plug":"input","group":"date_created sort","displayName":"Sort","editorName":"date_created sorting","name":"filterSort-date_created","index":12}],"children":[]},{"id":"d2bb4241-3b75-f599-9453-66466550245e","type":"RouterNavigate","label":"Compositions","x":645,"y":944,"parameters":{"router":"Main","target":"/#Pages/compositions"},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"component","title":"Choose page component","components":["/#Pages/connect","/#Pages/dashboard","/#Pages/my-account","/#Pages/clients","/#Pages/videos","/#Pages/project","/#Pages/experiment","/#Pages/projects","/#Pages/compositions"],"allowEditOnly":true},"group":"General","displayName":"Target Page","name":"target","index":3}],"children":[]}],"visualRoots":["20e9fc30-8ee2-8ed3-b4d3-4986299315d3"]}},{"name":"/#Pages/dashboard/Menu tile","id":"8ff05e27-6b21-61c1-8b31-13233733d472","graph":{"connections":[{"fromId":"330fd0f2-84ca-c21c-1061-dbc768710019","fromProperty":"prop-title","toId":"b96a5f25-b8a9-a548-57af-616121a19176","toProperty":"text"},{"fromId":"330fd0f2-84ca-c21c-1061-dbc768710019","fromProperty":"prop-icon","toId":"6bef67b1-3d42-fd8e-8fd7-662b691b166d","toProperty":"iconName"},{"fromId":"6bef67b1-3d42-fd8e-8fd7-662b691b166d","fromProperty":"iconObject","toId":"8c749d6a-c2fa-48fc-5c85-3c685445fe75","toProperty":"iconIconSource"},{"fromId":"b608fdc7-6d97-f614-e417-b315506a1fcf","fromProperty":"onClick","toId":"dda3374c-bed5-72ca-0c3b-e9cb722af8d6","toProperty":"item clicked"},{"fromId":"330fd0f2-84ca-c21c-1061-dbc768710019","fromProperty":"prop-title","toId":"dda3374c-bed5-72ca-0c3b-e9cb722af8d6","toProperty":"item name"}],"roots":[{"id":"b608fdc7-6d97-f614-e417-b315506a1fcf","type":"Group","x":0,"y":0,"parameters":{"rowGap":{"value":10,"unit":"px"},"styleCss":"/* background-color: red; */\ncursor: pointer;"},"ports":[],"dynamicports":[],"children":[{"id":"b35f494b-55ad-44a2-5dd5-d8538454db36","type":"Group","parameters":{"backgroundColor":"Hive light purple","borderRadius":{"value":4,"unit":"px"},"height":{"value":100,"unit":"px"}},"ports":[],"dynamicports":[],"children":[{"id":"8c749d6a-c2fa-48fc-5c85-3c685445fe75","type":"net.noodl.visual.icon","parameters":{"iconIconSource":{"class":"material-icons","code":"video_library","codeAsClass":false},"iconSize":{"value":64,"unit":"px"},"alignY":"center","alignX":"center"},"ports":[],"dynamicports":[],"children":[]}]},{"id":"b96a5f25-b8a9-a548-57af-616121a19176","type":"Text","parameters":{"textAlignX":"center"},"ports":[],"dynamicports":[],"children":[]}]},{"id":"330fd0f2-84ca-c21c-1061-dbc768710019","type":"Model2","x":-414.5,"y":103,"parameters":{"idSource":"foreach","properties":"title,icon"},"ports":[],"dynamicports":[{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-title","displayName":"title","index":7},{"type":"signal","plug":"output","group":"Changed Events","displayName":"title Changed","name":"changed-title","index":8},{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-icon","displayName":"icon","index":9},{"type":"signal","plug":"output","group":"Changed Events","displayName":"icon Changed","name":"changed-icon","index":10}],"children":[]},{"id":"6bef67b1-3d42-fd8e-8fd7-662b691b166d","type":"/Global logical components/Generate Google icon object","x":-181.5,"y":61,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"dda3374c-bed5-72ca-0c3b-e9cb722af8d6","type":"Component Outputs","x":247.33333333333337,"y":114.83333333333331,"parameters":{},"ports":[{"name":"item clicked","plug":"input","type":{"name":"*"},"index":1},{"name":"item name","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]}],"visualRoots":["b608fdc7-6d97-f614-e417-b315506a1fcf"]}},{"name":"/#Pages/dashboard/Project tile","id":"f5fac5c8-300f-9b39-2220-18794aca54ff","graph":{"connections":[{"fromId":"45aec562-83c2-e72b-3e8d-d7e8b8140bc2","fromProperty":"prop-name","toId":"def1168d-60a1-cb6c-7dfd-e08d061c6abe","toProperty":"text"},{"fromId":"45aec562-83c2-e72b-3e8d-d7e8b8140bc2","fromProperty":"prop-client","toId":"e557e67a-2ef8-1c23-1754-3950a4894f7d","toProperty":"text"},{"fromId":"45aec562-83c2-e72b-3e8d-d7e8b8140bc2","fromProperty":"prop-deadline","toId":"4bf812bb-6246-21d1-6373-05f75f6e2d02","toProperty":"deadline"},{"fromId":"4bf812bb-6246-21d1-6373-05f75f6e2d02","fromProperty":"formatted","toId":"a934c82b-63f4-8806-bb9e-60fb969f58e8","toProperty":"text"},{"fromId":"45aec562-83c2-e72b-3e8d-d7e8b8140bc2","fromProperty":"prop-hasCompositions","toId":"164f2e16-6adc-0772-01f6-f1f51ffc3628","toProperty":"compositions"},{"fromId":"164f2e16-6adc-0772-01f6-f1f51ffc3628","fromProperty":"result","toId":"3a31da60-04db-2b76-2531-7e32bc9eebb8","toProperty":"compositionCount"},{"fromId":"3a31da60-04db-2b76-2531-7e32bc9eebb8","fromProperty":"formatted","toId":"35d029c3-d67c-1a64-5dc9-26cdde1b2c34","toProperty":"text"},{"fromId":"f33af7ee-f667-3dde-4eee-2ccb643de331","fromProperty":"onClick","toId":"b9db1c2a-26e7-ace1-f023-0a3e5de91c3c","toProperty":"navigate"},{"fromId":"45aec562-83c2-e72b-3e8d-d7e8b8140bc2","fromProperty":"id","toId":"b9db1c2a-26e7-ace1-f023-0a3e5de91c3c","toProperty":"pm-project"}],"roots":[{"id":"45aec562-83c2-e72b-3e8d-d7e8b8140bc2","type":"Model2","x":-247.5,"y":54.5,"parameters":{"idSource":"foreach","properties":"name,client,deadline,hasCompositions"},"ports":[],"dynamicports":[{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-name","displayName":"name","index":7},{"type":"signal","plug":"output","group":"Changed Events","displayName":"name Changed","name":"changed-name","index":8},{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-client","displayName":"client","index":9},{"type":"signal","plug":"output","group":"Changed Events","displayName":"client Changed","name":"changed-client","index":10},{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-deadline","displayName":"deadline","index":11},{"type":"signal","plug":"output","group":"Changed Events","displayName":"deadline Changed","name":"changed-deadline","index":12},{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-hasCompositions","displayName":"hasCompositions","index":13},{"type":"signal","plug":"output","group":"Changed Events","displayName":"hasCompositions Changed","name":"changed-hasCompositions","index":14}],"children":[]},{"id":"4bf812bb-6246-21d1-6373-05f75f6e2d02","type":"String Format","x":-227.5,"y":278.5,"parameters":{"format":"Deadline: {deadline}"},"ports":[],"dynamicports":[{"name":"deadline","type":"string","plug":"input","index":2}],"children":[]},{"id":"f33af7ee-f667-3dde-4eee-2ccb643de331","type":"Group","x":16,"y":-50,"parameters":{"sizeMode":"contentHeight","paddingTop":{"value":5,"unit":"px"},"paddingLeft":{"value":10,"unit":"px"},"paddingRight":{"value":10,"unit":"px"},"paddingBottom":{"value":5,"unit":"px"}},"ports":[],"dynamicports":[],"children":[{"id":"b1b30579-e4ae-76f8-59fa-d39d1ca06f1c","type":"Group","parameters":{"flexDirection":"row","columnGap":{"value":20,"unit":"px"},"sizeMode":"contentHeight","paddingLeft":{"value":10,"unit":"px"},"paddingRight":{"value":10,"unit":"px"},"paddingTop":{"value":5,"unit":"px"},"paddingBottom":{"value":5,"unit":"px"},"borderStyle":"solid","borderRadius":{"value":8,"unit":"px"},"borderWidth":{"value":1,"unit":"px"},"borderColor":"Hive header grey","clip":false,"styleCss":"/* background-color: red; */\ncursor: pointer;"},"ports":[],"dynamicports":[],"children":[{"id":"9b257c27-9d44-6eb5-a291-fe9321d9cd89","type":"Group","parameters":{"flexDirection":"row","columnGap":{"value":10,"unit":"px"}},"ports":[],"dynamicports":[],"children":[{"id":"8912c4a6-ea41-3f12-ee5b-2c5f3276546c","type":"Image","parameters":{"src":"media/content-management.png","sizeMode":"explicit","width":{"value":50,"unit":"px"},"height":{"value":50,"unit":"px"}},"ports":[],"dynamicports":[],"children":[]},{"id":"0915e9f5-da38-0351-9540-4d91bb4471d6","type":"Group","parameters":{"alignY":"center"},"ports":[],"dynamicports":[],"children":[{"id":"def1168d-60a1-cb6c-7dfd-e08d061c6abe","type":"Text","parameters":{"textStyle":"Body Medium","fontFamily":"fonts/Istok_Web/IstokWeb-Bold.ttf"},"ports":[],"dynamicports":[],"children":[]},{"id":"e557e67a-2ef8-1c23-1754-3950a4894f7d","type":"Text","parameters":{"fontFamily":"fonts/Istok_Web/IstokWeb-Italic.ttf"},"ports":[],"dynamicports":[],"children":[]}]}]},{"id":"d0624cd9-7932-7b79-810a-ad3d592d2e1f","type":"Group","parameters":{"sizeMode":"contentSize","alignY":"center"},"ports":[],"dynamicports":[],"children":[{"id":"35d029c3-d67c-1a64-5dc9-26cdde1b2c34","type":"Text","parameters":{"alignY":"center"},"ports":[],"dynamicports":[],"children":[]}]},{"id":"f5e18a89-afba-71f4-db8b-536de7f65bde","type":"Group","parameters":{"sizeMode":"contentSize","alignY":"center"},"ports":[],"dynamicports":[],"children":[{"id":"a934c82b-63f4-8806-bb9e-60fb969f58e8","type":"Text","parameters":{"alignY":"center"},"ports":[],"dynamicports":[],"children":[]}]}]}]},{"id":"3a31da60-04db-2b76-2531-7e32bc9eebb8","type":"String Format","x":-232,"y":418,"parameters":{"format":"Compositions: {compositionCount}"},"ports":[],"dynamicports":[{"name":"compositionCount","type":"string","plug":"input","index":2}],"children":[]},{"id":"164f2e16-6adc-0772-01f6-f1f51ffc3628","type":"Expression","x":-477.33333333333337,"y":372.33333333333337,"parameters":{"expression":"compositions.length || 0"},"ports":[],"dynamicports":[{"group":"Parameters","name":"compositions","type":{"name":"*","editAsType":"string"},"plug":"input","index":7}],"children":[],"metadata":{"merge":{"soureCodePorts":["expression"]}}},{"id":"b9db1c2a-26e7-ace1-f023-0a3e5de91c3c","type":"RouterNavigate","x":376.33333333333326,"y":35.866666666666674,"parameters":{"router":"Main","target":"/#Pages/project"},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"component","title":"Choose page component","components":["/#Pages/connect","/#Pages/dashboard","/#Pages/my-account","/#Pages/clients","/#Pages/videos","/#Pages/project","/#Pages/experiment","/#Pages/projects","/#Pages/compositions"],"allowEditOnly":true},"group":"General","displayName":"Target Page","name":"target","index":3},{"name":"pm-project","displayName":"project","type":"string","plug":"input","group":"Parameters","index":4}],"children":[]}],"visualRoots":["f33af7ee-f667-3dde-4eee-2ccb643de331"]}},{"name":"/#Pages/dashboard/video tile","id":"5303f646-7e21-b8ff-2306-0460fa6bdbf0","graph":{"connections":[{"fromId":"c2e8fc97-3c8c-a16e-ee6b-d827c74130cb","fromProperty":"prop-url","toId":"99e2f5e0-b475-3c24-2760-4344e330b68d","toProperty":"videoUrl"},{"fromId":"99e2f5e0-b475-3c24-2760-4344e330b68d","fromProperty":"imageBlob","toId":"2f99ee22-f504-1c8b-6925-74da9525b269","toProperty":"src"},{"fromId":"c2e8fc97-3c8c-a16e-ee6b-d827c74130cb","fromProperty":"prop-name","toId":"c3c0d0cc-72ca-f80e-3bfd-a48435d6857d","toProperty":"text"},{"fromId":"c2e8fc97-3c8c-a16e-ee6b-d827c74130cb","fromProperty":"prop-date_created","toId":"64cb956e-5d7e-e821-8649-c4fa4441ded2","toProperty":"in-ISODate"},{"fromId":"64cb956e-5d7e-e821-8649-c4fa4441ded2","fromProperty":"out-FormattedDate","toId":"5782591b-ecf7-fd6f-9d70-a2decc0c6229","toProperty":"date"},{"fromId":"5782591b-ecf7-fd6f-9d70-a2decc0c6229","fromProperty":"formatted","toId":"24db7fe9-bc6e-f0c1-fdce-184abacf0074","toProperty":"text"},{"fromId":"815b572f-4088-ba39-319b-9421dac0f868","fromProperty":"formatted","toId":"4bd4161e-d5a2-e356-6ef6-5ae9e3adbdd2","toProperty":"text"},{"fromId":"c2e8fc97-3c8c-a16e-ee6b-d827c74130cb","fromProperty":"prop-length","toId":"4a2387e4-b60e-8d8a-c6fe-9a95be9ae0dd","toProperty":"in-seconds"},{"fromId":"4a2387e4-b60e-8d8a-c6fe-9a95be9ae0dd","fromProperty":"out-FormattedTime","toId":"815b572f-4088-ba39-319b-9421dac0f868","toProperty":"length"},{"fromId":"443b22bf-c6fb-4df3-2eed-9b6d05221210","fromProperty":"out-projectData","toId":"d4837eb5-2240-ce0e-a784-bf84ca0829fb","toProperty":"Data"},{"fromId":"d4837eb5-2240-ce0e-a784-bf84ca0829fb","fromProperty":"record ID","toId":"dd2d49b0-54fd-24f6-07f0-26a2863c2006","toProperty":"pm-project"},{"fromId":"c2e8fc97-3c8c-a16e-ee6b-d827c74130cb","fromProperty":"id","toId":"443b22bf-c6fb-4df3-2eed-9b6d05221210","toProperty":"in-mainVideoId"},{"fromId":"443b22bf-c6fb-4df3-2eed-9b6d05221210","fromProperty":"out-Success","toId":"d4837eb5-2240-ce0e-a784-bf84ca0829fb","toProperty":"Do"},{"fromId":"22f2dd49-a603-efd8-0334-1841d7c77ba4","fromProperty":"prop-account","toId":"443b22bf-c6fb-4df3-2eed-9b6d05221210","toProperty":"in-accountId"},{"fromId":"0af0186d-a2e7-6768-1b1d-badd305b3a3d","fromProperty":"Clicked","toId":"fb00b872-1f75-9ebd-4555-7262a26d69ed","toProperty":"clicked"},{"fromId":"fb00b872-1f75-9ebd-4555-7262a26d69ed","fromProperty":"itemClicked","toId":"e04a9310-06e0-8d4e-0f9d-c733e53d1406","toProperty":"run"},{"fromId":"e04a9310-06e0-8d4e-0f9d-c733e53d1406","fromProperty":"out-toCreateProject","toId":"443b22bf-c6fb-4df3-2eed-9b6d05221210","toProperty":"run"},{"fromId":"fb00b872-1f75-9ebd-4555-7262a26d69ed","fromProperty":"itemId","toId":"e04a9310-06e0-8d4e-0f9d-c733e53d1406","toProperty":"in-menuItem"},{"fromId":"d4837eb5-2240-ce0e-a784-bf84ca0829fb","fromProperty":"result","toId":"43142a2f-5bdf-89d4-82ae-203e6788419c","toProperty":"modelId"},{"fromId":"43142a2f-5bdf-89d4-82ae-203e6788419c","fromProperty":"id","toId":"628cdb66-1b7d-aaab-65ea-32c498927694","toProperty":"modifyId"},{"fromId":"d4837eb5-2240-ce0e-a784-bf84ca0829fb","fromProperty":"Success","toId":"43142a2f-5bdf-89d4-82ae-203e6788419c","toProperty":"fetch"},{"fromId":"43142a2f-5bdf-89d4-82ae-203e6788419c","fromProperty":"fetched","toId":"628cdb66-1b7d-aaab-65ea-32c498927694","toProperty":"add"},{"fromId":"628cdb66-1b7d-aaab-65ea-32c498927694","fromProperty":"modified","toId":"dd2d49b0-54fd-24f6-07f0-26a2863c2006","toProperty":"navigate"},{"fromId":"4d7f6aa4-7fdb-9581-8613-5fad350bce15","fromProperty":"show menu item","toId":"0af0186d-a2e7-6768-1b1d-badd305b3a3d","toProperty":"mounted"},{"fromId":"4d7f6aa4-7fdb-9581-8613-5fad350bce15","fromProperty":"show add button","toId":"25d5422b-fd1d-bb6a-2de1-d7a6ad096de8","toProperty":"mounted"},{"fromId":"ab6ece55-e7cf-977f-4b1b-7d28bc6d4a55","fromProperty":"icon","toId":"25d5422b-fd1d-bb6a-2de1-d7a6ad096de8","toProperty":"icon_name"},{"fromId":"ab6ece55-e7cf-977f-4b1b-7d28bc6d4a55","fromProperty":"background colour","toId":"25d5422b-fd1d-bb6a-2de1-d7a6ad096de8","toProperty":"background colour"},{"fromId":"ab6ece55-e7cf-977f-4b1b-7d28bc6d4a55","fromProperty":"icon colour","toId":"25d5422b-fd1d-bb6a-2de1-d7a6ad096de8","toProperty":"icon colour"},{"fromId":"4c066f96-9674-7768-589e-038a46e23c8c","fromProperty":"items","toId":"e9f01ca5-d106-f8d5-66d5-de963a56e933","toProperty":"videos"},{"fromId":"c2e8fc97-3c8c-a16e-ee6b-d827c74130cb","fromProperty":"id","toId":"e9f01ca5-d106-f8d5-66d5-de963a56e933","toProperty":"currentVideoId"},{"fromId":"e9f01ca5-d106-f8d5-66d5-de963a56e933","fromProperty":"isTrueEv","toId":"ab6ece55-e7cf-977f-4b1b-7d28bc6d4a55","toProperty":"to-added"},{"fromId":"e9f01ca5-d106-f8d5-66d5-de963a56e933","fromProperty":"isFalseEv","toId":"ab6ece55-e7cf-977f-4b1b-7d28bc6d4a55","toProperty":"to-not added"},{"fromId":"ab6ece55-e7cf-977f-4b1b-7d28bc6d4a55","fromProperty":"at-not added","toId":"25d5422b-fd1d-bb6a-2de1-d7a6ad096de8","toProperty":"enabled"},{"fromId":"c2e8fc97-3c8c-a16e-ee6b-d827c74130cb","fromProperty":"id","toId":"88fa9ab7-35e0-5788-a00f-914f5fad4837","toProperty":"modifyId"},{"fromId":"25d5422b-fd1d-bb6a-2de1-d7a6ad096de8","fromProperty":"Clicked","toId":"88fa9ab7-35e0-5788-a00f-914f5fad4837","toProperty":"add"},{"fromId":"88fa9ab7-35e0-5788-a00f-914f5fad4837","fromProperty":"modified","toId":"4278c645-d199-1bcc-d980-553e425e9d84","toProperty":"run"},{"fromId":"4278c645-d199-1bcc-d980-553e425e9d84","fromProperty":"out-Success","toId":"a8967c28-0923-b28e-4f14-0174a9f2b8af","toProperty":"Do"},{"fromId":"4278c645-d199-1bcc-d980-553e425e9d84","fromProperty":"out-data","toId":"a8967c28-0923-b28e-4f14-0174a9f2b8af","toProperty":"data"},{"fromId":"4c066f96-9674-7768-589e-038a46e23c8c","fromProperty":"count","toId":"cc347bec-486d-c80d-7299-344f49b25ece","toProperty":"value"},{"fromId":"cc347bec-486d-c80d-7299-344f49b25ece","fromProperty":"valueChanged","toId":"e9f01ca5-d106-f8d5-66d5-de963a56e933","toProperty":"run"},{"fromId":"d8403740-575c-530c-2210-12a4d92016d9","fromProperty":"out-PathParameter","toId":"a8967c28-0923-b28e-4f14-0174a9f2b8af","toProperty":"Item ID"}],"roots":[{"id":"b7fc0395-1dc6-cecd-6d20-e5ea55528af6","type":"Group","x":0,"y":0,"parameters":{"rowGap":{"value":10,"unit":"px"},"backgroundColor":"Grey - 300","borderRadius":{"value":8,"unit":"px"}},"ports":[],"dynamicports":[],"children":[{"id":"0af0186d-a2e7-6768-1b1d-badd305b3a3d","type":"/Global visual components/Pretty icon","label":"Menu","parameters":{"position":"absolute","align x":"right","margin right":{"value":10,"unit":"px"},"margin top":{"value":10,"unit":"px"},"icon_name":"more_horiz","size":"32"},"ports":[],"dynamicports":[],"children":[]},{"id":"25d5422b-fd1d-bb6a-2de1-d7a6ad096de8","type":"/Global visual components/Pretty icon","label":"Add video to project","parameters":{"position":"absolute","align x":"right","margin right":{"value":10,"unit":"px"},"margin top":{"value":10,"unit":"px"},"icon_name":"add","size":"32"},"ports":[],"dynamicports":[],"children":[]},{"id":"fb00b872-1f75-9ebd-4555-7262a26d69ed","type":"/Global visual components/Context menu","parameters":{"menuItems":"[\n    { \"itemText\": \"Create new project\",\n      \"itemId\": \"createProject\",\n        \"textColour\": \"#000\" },\n    { \"itemText\": \"Delete\",\n      \"itemId\": \"delete\",\n        \"textColour\": \"#F75A4F\" }\n]"},"ports":[],"dynamicports":[],"children":[]},{"id":"2f99ee22-f504-1c8b-6925-74da9525b269","type":"Image","parameters":{"sizeMode":"explicit","width":{"value":100,"unit":"%"},"height":{"value":200,"unit":"px"},"objectFit":"cover","src":"media/pexels-zhuhehuai-716276.jpg","borderRadius":{"value":8,"unit":"px"}},"ports":[],"dynamicports":[],"children":[]},{"id":"8a67c04a-33b1-b769-dcb7-c3103d97afda","type":"Group","parameters":{"flexDirection":"row"},"ports":[],"dynamicports":[],"children":[{"id":"df951a53-c189-01d0-335c-4b45453fa094","type":"Group","label":"Video details","parameters":{"flexDirection":"column","columnGap":{"value":20,"unit":"px"},"alignItems":"center","alignY":"center","rowGap":{"value":5,"unit":"px"},"paddingLeft":{"value":20,"unit":"px"},"paddingRight":{"value":20,"unit":"px"},"paddingBottom":{"value":20,"unit":"px"},"paddingTop":{"value":10,"unit":"px"}},"ports":[],"dynamicports":[],"children":[{"id":"c3c0d0cc-72ca-f80e-3bfd-a48435d6857d","type":"Text","label":"Title","parameters":{"fontFamily":"fonts/Istok_Web/IstokWeb-Regular.ttf","sizeMode":"contentHeight","textAlignX":"left","color":"Grey - 900","textStyle":"Body Small","lineHeight":{"value":1,"unit":""},"alignX":"left"},"ports":[],"dynamicports":[],"children":[]},{"id":"4bd4161e-d5a2-e356-6ef6-5ae9e3adbdd2","type":"Text","label":"Length","parameters":{"color":"Grey - 900","textStyle":"Body Small"},"ports":[],"dynamicports":[],"children":[]},{"id":"24db7fe9-bc6e-f0c1-fdce-184abacf0074","type":"Text","label":"Created date","parameters":{"color":"Grey - 900","textStyle":"Body Small"},"ports":[],"dynamicports":[],"children":[]}]}]}]},{"id":"c2e8fc97-3c8c-a16e-ee6b-d827c74130cb","type":"Model2","x":-261.74653401977866,"y":151.21589618611188,"parameters":{"properties":"url,name,type,date_created,length","idSource":"foreach"},"ports":[],"dynamicports":[{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-url","displayName":"url","index":7},{"type":"signal","plug":"output","group":"Changed Events","displayName":"url Changed","name":"changed-url","index":8},{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-name","displayName":"name","index":9},{"type":"signal","plug":"output","group":"Changed Events","displayName":"name Changed","name":"changed-name","index":10},{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-type","displayName":"type","index":11},{"type":"signal","plug":"output","group":"Changed Events","displayName":"type Changed","name":"changed-type","index":12},{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-date_created","displayName":"date_created","index":13},{"type":"signal","plug":"output","group":"Changed Events","displayName":"date_created Changed","name":"changed-date_created","index":14},{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-length","displayName":"length","index":15},{"type":"signal","plug":"output","group":"Changed Events","displayName":"length Changed","name":"changed-length","index":16}],"children":[]},{"id":"99e2f5e0-b475-3c24-2760-4344e330b68d","type":"/Global logical components/Extract video thumbnail","x":-256.37326700988933,"y":14.607948093055938,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"5782591b-ecf7-fd6f-9d70-a2decc0c6229","type":"String Format","x":-345.2066003432227,"y":411.10794809305594,"parameters":{"format":"Uploaded: {date}"},"ports":[],"dynamicports":[{"name":"date","type":"string","plug":"input","index":2}],"children":[]},{"id":"64cb956e-5d7e-e821-8649-c4fa4441ded2","type":"JavaScriptFunction","label":"Format ISO Date","x":-576,"y":368,"parameters":{"functionScript":"const inputDate = Inputs.ISODate || '';\nif (!inputDate) throw new Error('Invalid date');\n\ntry {\n  const date = new Date(inputDate);\n  const now = new Date();\n  const diffMs = now - date;\n  const diffSecs = Math.floor(diffMs / 1000);\n  const diffMins = Math.floor(diffSecs / 60);\n  const diffHours = Math.floor(diffMins / 60);\n  const diffDays = Math.floor(diffHours / 24);\n\n  let formattedDate;\n  if (diffDays > 0) {\n    if (diffDays > 7) {\n      // Format date as DD-MMM-YY\n      const day = date.getDate();\n      const month = date.toLocaleString('default', { month: 'short' });\n      const year = date.getFullYear().toString().substr(-2);\n      formattedDate = `${day}-${month}-${year}`;\n    } else {\n      // Format as 'X days ago'\n      formattedDate = `${diffDays} days ago`;\n    }\n  } else if (diffHours > 0) {\n    // Format as 'X hours ago'\n    formattedDate = `${diffHours} hours ago`;\n  } else if (diffMins > 0) {\n    // Format as 'X minutes ago'\n    formattedDate = `${diffMins} minutes ago`;\n  } else {\n    // Format as 'Just now'\n    formattedDate = 'Just now';\n  }\n\n  Outputs.FormattedDate = formattedDate;\n  Outputs.Success();\n} catch (error) {\n  Outputs.error = error;\n  Outputs.Failure();\n}\n"},"ports":[],"dynamicports":[{"name":"in-ISODate","displayName":"ISODate","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-FormattedDate","displayName":"FormattedDate","plug":"output","type":"*","group":"Outputs","index":7},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":8}],"children":[],"metadata":{"prompt":{"history":[{"content":"Format an input ISO date as either 'X minutes ago' or 'X hours ago' or 'X days ago' or just the date in format DD-MMM-YY","metadata":{"user":{"name":"Local","id":"local","email":""},"code":"const inputDate = Inputs.ISODate || '';\nif (!inputDate) throw new Error('Invalid date');\n\ntry {\n  const date = new Date(inputDate);\n  const now = new Date();\n  const diffMs = now - date;\n  const diffSecs = Math.floor(diffMs / 1000);\n  const diffMins = Math.floor(diffSecs / 60);\n  const diffHours = Math.floor(diffMins / 60);\n  const diffDays = Math.floor(diffHours / 24);\n\n  let formattedDate;\n  if (diffDays > 0) {\n    if (diffDays > 7) {\n      // Format date as DD-MMM-YY\n      const day = date.getDate();\n      const month = date.toLocaleString('default', { month: 'short' });\n      const year = date.getFullYear().toString().substr(-2);\n      formattedDate = `${day}-${month}-${year}`;\n    } else {\n      // Format as 'X days ago'\n      formattedDate = `${diffDays} days ago`;\n    }\n  } else if (diffHours > 0) {\n    // Format as 'X hours ago'\n    formattedDate = `${diffHours} hours ago`;\n  } else if (diffMins > 0) {\n    // Format as 'X minutes ago'\n    formattedDate = `${diffMins} minutes ago`;\n  } else {\n    // Format as 'Just now'\n    formattedDate = 'Just now';\n  }\n\n  Outputs.FormattedDate = formattedDate;\n  Outputs.Success();\n} catch (error) {\n  Outputs.error = error;\n  Outputs.Failure();\n}\n"},"snowflakeId":"0191620bbadd-05idfa","type":"user"},{"type":"assistant","content":"\nThis function takes an ISO date from the <span style=\"color: var(--base-color-yellow-400);\">Inputs.ISODate</span> and formats it into a more human-readable format. \n\nIt calculates the difference between the current date and the input date in milliseconds, then converts this to seconds, minutes, hours, and days. Depending on the size of these differences, it formats the date accordingly. \n\nIf the difference is more than 7 days, it formats the date as DD-MMM-YY. If the difference is less than 7 days but more than 0, it formats the date as 'X days ago'. If the difference is less than a day but more than an hour, it formats the date as 'X hours ago'. If the difference is less than an hour but more than a minute, it formats the date as 'X minutes ago'. If the difference is less than a minute, it formats the date as 'Just now'.\n\nThe formatted date is then set as the <span style=\"color: var(--base-color-yellow-400);\">Outputs.FormattedDate</span>. If the function executes successfully, it triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Success</span> output signal. If there's an error, it sets the <span style=\"color: var(--base-color-yellow-400);\">Outputs.error</span> output and triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Failure</span> output signal.\n","snowflakeId":"0191620c0c7b-h6m7ut","metadata":{}}],"metadata":{"templateId":"function"}},"AiAssistant":"old","merge":{"soureCodePorts":["functionScript"]}}},{"id":"815b572f-4088-ba39-319b-9421dac0f868","type":"String Format","x":-179,"y":310,"parameters":{"format":"Length: {length}"},"ports":[],"dynamicports":[{"name":"length","type":"string","plug":"input","index":2}],"children":[]},{"id":"4a2387e4-b60e-8d8a-c6fe-9a95be9ae0dd","type":"JavaScriptFunction","label":"Format Seconds to Time","x":-590,"y":256,"parameters":{"functionScript":"const seconds = Inputs.seconds || 0;\n\n// Check if the input is a valid number\nif (isNaN(seconds)) throw new Error('Invalid input. Please enter a number');\n\n// Calculate hours, minutes and seconds\nconst hours = Math.floor(seconds / 3600);\nconst minutes = Math.floor((seconds % 3600) / 60);\nconst remainingSeconds = seconds % 60;\n\n// Format the time to be in 00:00:00 format\nconst formattedTime = [hours, minutes, remainingSeconds].map(unit => unit.toString().padStart(2, '0')).join(':');\n\nOutputs.FormattedTime = formattedTime;\nOutputs.Success();\n"},"ports":[],"dynamicports":[{"name":"in-seconds","displayName":"seconds","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-FormattedTime","displayName":"FormattedTime","plug":"output","type":"*","group":"Outputs","index":6}],"children":[],"metadata":{"prompt":{"history":[{"content":"Take an integer input 'seconds' and output in format 00:00:00 for HH:MM:SS\n","metadata":{"user":{"name":"Local","id":"local","email":""},"code":"const seconds = Inputs.seconds || 0;\n\n// Check if the input is a valid number\nif (isNaN(seconds)) throw new Error('Invalid input. Please enter a number');\n\n// Calculate hours, minutes and seconds\nconst hours = Math.floor(seconds / 3600);\nconst minutes = Math.floor((seconds % 3600) / 60);\nconst remainingSeconds = seconds % 60;\n\n// Format the time to be in 00:00:00 format\nconst formattedTime = [hours, minutes, remainingSeconds].map(unit => unit.toString().padStart(2, '0')).join(':');\n\nOutputs.FormattedTime = formattedTime;\nOutputs.Success();\n"},"snowflakeId":"01916217e51d-pfp3a9","type":"user"},{"type":"assistant","content":"\nThis function takes an integer input of seconds and converts it into a time format of HH:MM:SS.\n\nIt takes <span style=\"color: var(--base-color-yellow-400);\">Inputs.seconds</span> as an input, checks if it's a valid number, and then calculates the hours, minutes, and remaining seconds from the input. \n\nThe function then formats these units of time into a string in the format of 00:00:00 and sets this as the <span style=\"color: var(--base-color-yellow-400);\">Outputs.FormattedTime</span>. \n\nFinally, it triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Success</span> output signal to indicate that the function has successfully completed its task.\n","snowflakeId":"01916217f8a7-0mpbb4","metadata":{}}],"metadata":{"templateId":"function"}},"AiAssistant":"old","merge":{"soureCodePorts":["functionScript"]}}},{"id":"d4837eb5-2240-ce0e-a784-bf84ca0829fb","type":"/#Directus/Directus Prefab/Components/Data/Directus - Create Data","x":507,"y":501.99999999999994,"parameters":{"collection":"Project","SDK Client to use":"User SDK Client","limit":1},"ports":[],"dynamicports":[],"children":[]},{"id":"443b22bf-c6fb-4df3-2eed-9b6d05221210","type":"JavaScriptFunction","label":"Generate project data","x":274,"y":483,"parameters":{"functionScript":"// Define the inputs\nconst mainVideoId = Inputs.mainVideoId || null;\nconst introId = Inputs.introId || null;\nconst outroId = Inputs.outroId || null;\nconst projectTitle = Inputs.projectTitle || \"New project\";\nconst projectBrief = Inputs.projectBrief || \"Enter a project brief\";\nconst projectDeadline = Inputs.deadline || null;\nconst projectClient = Inputs.projectClient || null;\n\n// Initialize an empty array\nlet clips = []\nlet videos = [];\n\n// Check if the inputs are valid and if they are, add them to the array\nif (mainVideoId) videos.push({ \"Video_id\": mainVideoId });\nif (introId) videos.push({ \"id\": introId });\nif (outroId) videos.push({ \"id\": outroId });\n\nconst projectData = {\n  name: projectTitle,\n  brief: projectBrief,\n  deadline: projectDeadline,\n  client: projectClient,\n  hasVideos: videos,\n  sharedAccounts: [ { 'Account_id': Inputs.accountId } ]\n}\n\nOutputs.projectData = projectData;\nOutputs.Success();\n"},"ports":[],"dynamicports":[{"name":"in-mainVideoId","displayName":"mainVideoId","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-introId","displayName":"introId","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-outroId","displayName":"outroId","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-projectTitle","displayName":"projectTitle","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-projectBrief","displayName":"projectBrief","plug":"input","type":"*","group":"Inputs","index":8},{"name":"in-deadline","displayName":"deadline","plug":"input","type":"*","group":"Inputs","index":9},{"name":"in-projectClient","displayName":"projectClient","plug":"input","type":"*","group":"Inputs","index":10},{"name":"in-accountId","displayName":"accountId","plug":"input","type":"*","group":"Inputs","index":11},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":12},{"name":"out-projectData","displayName":"projectData","plug":"output","type":"*","group":"Outputs","index":13}],"children":[],"metadata":{"prompt":{"history":[{"content":"Take in 3 input ids and combine them into an array of ids of form { \"id\": intValue }","metadata":{"user":{"name":"Local","id":"local","email":""},"code":"// Define the inputs\nconst id1 = Inputs.Id1 || 0;\nconst id2 = Inputs.Id2 || 0;\nconst id3 = Inputs.Id3 || 0;\n\n// Check if the inputs are valid\nif (!id1 || !id2 || !id3) throw new Error('Invalid input');\n\ntry {\n  // Combine the inputs into an array\n  const ids = [\n    { \"id\": id1 },\n    { \"id\": id2 },\n    { \"id\": id3 }\n  ];\n\n  // Output the array\n  Outputs.IdArray = ids;\n  Outputs.Success();\n} catch (error) {\n  Outputs.error = error;\n  Outputs.Failure();\n}\n"},"snowflakeId":"019127f0dfbc-iz6ku6","type":"user"},{"type":"assistant","content":"\nThis function takes three inputs: <span style=\"color: var(--base-color-yellow-400);\">Inputs.Id1</span>, <span style=\"color: var(--base-color-yellow-400);\">Inputs.Id2</span>, and <span style=\"color: var(--base-color-yellow-400);\">Inputs.Id3</span>. It checks if these inputs are valid and if they are, it combines them into an array of objects. Each object in the array has a single property, \"id\", which is set to the value of the corresponding input. \n\nThe resulting array is then sent to the <span style=\"color: var(--base-color-yellow-400);\">Outputs.IdArray</span> output. If the function executes successfully, it triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Success</span> output signal.\n\nIf there is an error during the process, for example, if the inputs are not valid, the function outputs the error message to the <span style=\"color: var(--base-color-yellow-400);\">Outputs.error</span> output and triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Failure</span> output signal.\n","snowflakeId":"019127f1210d-npmnpk","metadata":{}},{"content":"There may only be one id. Can the script generate the array dynamically depending on which ids inputs are non null","metadata":{"user":{"name":"Local","id":"local","email":""},"code":"// Define the inputs\nconst id1 = Inputs.Id1 || null;\nconst id2 = Inputs.Id2 || null;\nconst id3 = Inputs.Id3 || null;\n\n// Initialize an empty array\nlet ids = [];\n\n// Check if the inputs are valid and if they are, add them to the array\nif (id1) ids.push({ \"id\": id1 });\nif (id2) ids.push({ \"id\": id2 });\nif (id3) ids.push({ \"id\": id3 });\n\n// If no valid id was found, throw an error\nif (ids.length === 0) {\n  Outputs.error = 'No valid id found';\n  Outputs.Failure();\n} else {\n  // Output the array\n  Outputs.IdArray = ids;\n  Outputs.Success();\n}\n"},"snowflakeId":"019127f2a0a6-nhlhbu","type":"user"},{"type":"assistant","content":"\nThis function generates an array of IDs based on the non-null inputs. \n\nIt takes three inputs: <span style=\"color: var(--base-color-yellow-400);\">Inputs.Id1</span>, <span style=\"color: var(--base-color-yellow-400);\">Inputs.Id2</span>, and <span style=\"color: var(--base-color-yellow-400);\">Inputs.Id3</span>. It checks each input and if it is not null, it adds it to the array. \n\nIf no valid ID is found (all inputs are null), it sets the <span style=\"color: var(--base-color-yellow-400);\">Outputs.error</span> output to 'No valid id found' and triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Failure</span> output signal. \n\nIf at least one valid ID is found, it sets the <span style=\"color: var(--base-color-yellow-400);\">Outputs.IdArray</span> output to the array of IDs and triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Success</span> output signal.\n","snowflakeId":"019127f2d40b-29wcd9","metadata":{}}],"metadata":{"templateId":"function"}},"AiAssistant":"old","merge":{"soureCodePorts":["functionScript"]}}},{"id":"dd2d49b0-54fd-24f6-07f0-26a2863c2006","type":"RouterNavigate","label":"Go to video page","x":1134,"y":504,"parameters":{"router":"Main","target":"/#Pages/project"},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"component","title":"Choose page component","components":["/#Pages/connect","/#Pages/dashboard","/#Pages/my-account","/#Pages/clients","/#Pages/videos","/#Pages/project","/#Pages/experiment","/#Pages/projects","/#Pages/compositions"],"allowEditOnly":true},"group":"General","displayName":"Target Page","name":"target","index":3},{"name":"pm-project","displayName":"project","type":"string","plug":"input","group":"Parameters","index":4}],"children":[]},{"id":"22f2dd49-a603-efd8-0334-1841d7c77ba4","type":"Model2","x":461.88617870129644,"y":359.94234727131806,"parameters":{"modelId":"Current User","properties":"account"},"ports":[],"dynamicports":[{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-account","displayName":"account","index":7},{"type":"signal","plug":"output","group":"Changed Events","displayName":"account Changed","name":"changed-account","index":8}],"children":[]},{"id":"e04a9310-06e0-8d4e-0f9d-c733e53d1406","type":"JavaScriptFunction","label":"Context menu router","x":278.53147459731065,"y":280.3008605536184,"parameters":{"functionScript":"switch (Inputs.menuItem) {\n    case \"createProject\":\n    Outputs.toCreateProject();\n    break;\n\n    case \"delete\":\n    Outputs.toDelete();\n    break;\n}"},"ports":[],"dynamicports":[{"name":"in-menuItem","displayName":"menuItem","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-toCreateProject","displayName":"toCreateProject","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-toDelete","displayName":"toDelete","plug":"output","type":"signal","group":"Outputs","index":6}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"43142a2f-5bdf-89d4-82ae-203e6788419c","type":"Model2","label":"New project","x":757.9242709938096,"y":463.8479166830967,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"628cdb66-1b7d-aaab-65ea-32c498927694","type":"CollectionInsert","x":944.9242709938096,"y":499.8479166830967,"parameters":{"collectionId":"allProjects"},"ports":[],"dynamicports":[],"children":[]},{"id":"4d7f6aa4-7fdb-9581-8613-5fad350bce15","type":"Component Inputs","x":-506.53360759372396,"y":76.13674140839163,"parameters":{},"ports":[{"name":"show menu item","plug":"output","type":{"name":"*"},"index":1},{"name":"show add button","plug":"output","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"a8967c28-0923-b28e-4f14-0174a9f2b8af","type":"/#Directus/Directus Prefab/Components/Data/Directus - Update Data","x":940.9177867546141,"y":172.4458479905427,"parameters":{"collection":"Project","SDK Client to use":"User SDK Client"},"ports":[],"dynamicports":[],"children":[]},{"id":"ab6ece55-e7cf-977f-4b1b-7d28bc6d4a55","type":"States","x":255.06041242130743,"y":50.200504998116344,"parameters":{"states":"added,not added","currentState":"not added","values":"icon,background colour,icon colour","useTransitions":true,"type-icon":"string","type-background colour":"color","type-icon colour":"color","value-added-background colour":"Success","value-added-icon colour":"White","value-added-icon":"check","value-not added-icon":"add","value-not added-background colour":"Grey - 400","value-not added-icon colour":"Grey - 900"},"ports":[],"dynamicports":[{"type":{"name":"string","allowConnectionsOnly":true},"plug":"output","group":"Values","name":"icon","index":6},{"type":{"name":"enum","enums":[{"label":"Number","value":"number"},{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Color","value":"color"},{"label":"Text Style","value":"textStyle"}],"allowEditOnly":true},"default":"number","plug":"input","group":"Types","displayName":"icon","name":"type-icon","index":7},{"type":{"name":"color","allowConnectionsOnly":true},"plug":"output","group":"Values","name":"background colour","index":8},{"type":{"name":"enum","enums":[{"label":"Number","value":"number"},{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Color","value":"color"},{"label":"Text Style","value":"textStyle"}],"allowEditOnly":true},"default":"number","plug":"input","group":"Types","displayName":"background colour","name":"type-background colour","index":9},{"type":{"name":"color","allowConnectionsOnly":true},"plug":"output","group":"Values","name":"icon colour","index":10},{"type":{"name":"enum","enums":[{"label":"Number","value":"number"},{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Color","value":"color"},{"label":"Text Style","value":"textStyle"}],"allowEditOnly":true},"default":"number","plug":"input","group":"Types","displayName":"icon colour","name":"type-icon colour","index":11},{"plug":"input","type":"string","group":"added Values","name":"value-added-icon","displayName":"icon","editorName":"added|icon","index":12},{"plug":"input","type":"color","group":"added Values","name":"value-added-background colour","displayName":"background colour","editorName":"added|background colour","index":13},{"plug":"input","type":"color","group":"added Values","name":"value-added-icon colour","displayName":"icon colour","editorName":"added|icon colour","index":14},{"plug":"input","type":"curve","displayName":"Default","default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"added Transitions","name":"transitiondef-added","index":15},{"plug":"input","type":{"name":"curve"},"default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"added Transitions","name":"transition-added-background colour","displayName":"background colour","editorName":"Transition added|background colour","index":16},{"plug":"input","type":{"name":"curve"},"default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"added Transitions","name":"transition-added-icon colour","displayName":"icon colour","editorName":"Transition added|icon colour","index":17},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To added","name":"to-added","group":"Go to state","index":18},{"plug":"output","type":"boolean","displayName":"At added","name":"at-added","group":"Current state","index":19},{"plug":"output","type":"signal","displayName":"Has Reached added","name":"reached-added","group":"Current state","index":20},{"plug":"input","type":"string","group":"not added Values","name":"value-not added-icon","displayName":"icon","editorName":"not added|icon","index":21},{"plug":"input","type":"color","group":"not added Values","name":"value-not added-background colour","displayName":"background colour","editorName":"not added|background colour","index":22},{"plug":"input","type":"color","group":"not added Values","name":"value-not added-icon colour","displayName":"icon colour","editorName":"not added|icon colour","index":23},{"plug":"input","type":"curve","displayName":"Default","default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"not added Transitions","name":"transitiondef-not added","index":24},{"plug":"input","type":{"name":"curve"},"default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"not added Transitions","name":"transition-not added-background colour","displayName":"background colour","editorName":"Transition not added|background colour","index":25},{"plug":"input","type":{"name":"curve"},"default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"not added Transitions","name":"transition-not added-icon colour","displayName":"icon colour","editorName":"Transition not added|icon colour","index":26},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To not added","name":"to-not added","group":"Go to state","index":27},{"plug":"output","type":"boolean","displayName":"At not added","name":"at-not added","group":"Current state","index":28},{"plug":"output","type":"signal","displayName":"Has Reached not added","name":"reached-not added","group":"Current state","index":29},{"plug":"input","type":{"name":"enum","enums":["added","not added"]},"group":"States","displayName":"State","name":"currentState","default":"added","index":30}],"children":[]},{"id":"4c066f96-9674-7768-589e-038a46e23c8c","type":"Collection2","x":245.41335359777804,"y":-86.15243617835426,"parameters":{"collectionId":"projectVideos"},"ports":[],"dynamicports":[],"children":[]},{"id":"e9f01ca5-d106-f8d5-66d5-de963a56e933","type":"Expression","x":461.055233566714,"y":-105.55073945675207,"parameters":{"expression":"videos.some(item => item.id === currentVideoId)"},"ports":[],"dynamicports":[{"group":"Parameters","name":"videos","type":{"name":"*","editAsType":"string"},"plug":"input","index":7},{"group":"Parameters","name":"item","type":{"name":"*","editAsType":"string"},"plug":"input","index":8},{"group":"Parameters","name":"currentVideoId","type":{"name":"*","editAsType":"string"},"plug":"input","index":9}],"children":[],"metadata":{"merge":{"soureCodePorts":["expression"]}}},{"id":"88fa9ab7-35e0-5788-a00f-914f5fad4837","type":"CollectionInsert","x":479.0289167643765,"y":157.63226282175668,"parameters":{"collectionId":"projectVideos"},"ports":[],"dynamicports":[],"children":[]},{"id":"4278c645-d199-1bcc-d980-553e425e9d84","type":"JavaScriptFunction","label":"Set new project data","x":698.2103981355741,"y":210.58542958690688,"parameters":{"functionScript":"const videoArray = Noodl.Arrays.projectVideos;\n\nconst videoIds = videoArray.map(item => {\n    return { \"Video_id\": item.id };\n});\n\nOutputs.data = {\n    hasVideos: videoIds\n};\nOutputs.Success();\n"},"ports":[],"dynamicports":[{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":4},{"name":"out-data","displayName":"data","plug":"output","type":"*","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"cc347bec-486d-c80d-7299-344f49b25ece","type":"Value Changed","x":230.59464118863468,"y":-210.96859170094686,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"d8403740-575c-530c-2210-12a4d92016d9","type":"JavaScriptFunction","label":"Extract Path Parameter from URL","x":696.7070368797935,"y":53.72423566791733,"parameters":{"functionScript":"const url = window.location.href;\n\ntry {\n  const regex = /project\\/([^\\/\\?]+)/;\n  const match = url.match(regex);\n  if (match && match[1]) {\n    Outputs.PathParameter = match[1];\n    Outputs.Success();\n  } else {\n    throw new Error('Path parameter not found');\n  }\n} catch (error) {\n  Outputs.error = error;\n  Outputs.Failure();\n}\n"},"ports":[],"dynamicports":[{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":4},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-PathParameter","displayName":"PathParameter","plug":"output","type":"*","group":"Outputs","index":6},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":7}],"children":[],"metadata":{"prompt":{"history":[{"content":"Fetch the path parameter just after project/ in the URL. Make sure to stop if there's a ? or another /\n","metadata":{"user":{"name":"Local","id":"local","email":""},"code":"const url = Inputs.URL || '';\nif (!url) throw new Error('Invalid URL');\n\ntry {\n  const regex = /project\\/([^\\/\\?]+)/;\n  const match = url.match(regex);\n  if (match && match[1]) {\n    Outputs.PathParameter = match[1];\n    Outputs.Success();\n  } else {\n    throw new Error('Path parameter not found');\n  }\n} catch (error) {\n  Outputs.error = error;\n  Outputs.Failure();\n}\n"},"snowflakeId":"01917b9d2c51-ghynem","type":"user"},{"type":"assistant","content":"\nThis function extracts a specific path parameter from a given URL. \n\nIt takes <span style=\"color: var(--base-color-yellow-400);\">Inputs.URL</span> as an input, checks if the URL is valid, and then uses a regular expression to find the path parameter just after \"project/\" in the URL. The regular expression used will match any characters that are not a slash or a question mark, which are the characters that would end the path parameter.\n\nIf a match is found, the path parameter is sent to the <span style=\"color: var(--base-color-yellow-400);\">Outputs.PathParameter</span> output and the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Success</span> output signal is triggered. \n\nIf no match is found or if an error occurs during the process, an error message is sent to the <span style=\"color: var(--base-color-yellow-400);\">Outputs.error</span> output and the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Failure</span> output signal is triggered.\n","snowflakeId":"01917b9d5a0a-23qvnq","metadata":{}}],"metadata":{"templateId":"function"}},"AiAssistant":"old","merge":{"soureCodePorts":["functionScript"]}}}],"visualRoots":["b7fc0395-1dc6-cecd-6d20-e5ea55528af6"]}},{"name":"/#Pages/experiment","id":"7250f1de-7ef0-9cb5-3d99-998fc18354ee","graph":{"connections":[{"fromId":"b5e968f9-b1ef-7325-ed67-96865ef65c69","fromProperty":"result","toId":"7f41be0f-4bca-f24c-1ff7-8cab1d4595bf","toProperty":"modelId"},{"fromId":"cd8f2732-2f3c-6bbf-6662-5ed066442431","fromProperty":"onClick","toId":"cec55ac7-9655-e5db-8f63-09be6f463a29","toProperty":"Open"},{"fromId":"cec55ac7-9655-e5db-8f63-09be6f463a29","fromProperty":"Success","toId":"f00663a0-549d-3f4c-3b7e-f13edd1b64fe","toProperty":"saveValue"},{"fromId":"cec55ac7-9655-e5db-8f63-09be6f463a29","fromProperty":"error","toId":"f00663a0-549d-3f4c-3b7e-f13edd1b64fe","toProperty":"value"},{"fromId":"cec55ac7-9655-e5db-8f63-09be6f463a29","fromProperty":"fileData","toId":"b5e968f9-b1ef-7325-ed67-96865ef65c69","toProperty":"Data"},{"fromId":"cec55ac7-9655-e5db-8f63-09be6f463a29","fromProperty":"Do","toId":"b5e968f9-b1ef-7325-ed67-96865ef65c69","toProperty":"Do"}],"roots":[{"id":"7d209f7d-44ed-caef-7fb7-a48efe933276","type":"Page","x":0,"y":0,"parameters":{},"ports":[],"dynamicports":[{"name":"title","displayName":"Title","type":"string","group":"General","plug":"input","default":"experiment","index":31},{"name":"urlPath","displayName":"Url Path","type":"string","group":"General","plug":"input","default":"experiment","index":32}],"children":[{"id":"cd8f2732-2f3c-6bbf-6662-5ed066442431","type":"net.noodl.controls.button","parameters":{},"ports":[],"dynamicports":[],"children":[]}]},{"id":"1cb90c5d-8965-cc47-a5d9-65ae251a841e","type":"PageInputs","x":-100,"y":-50,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"f00663a0-549d-3f4c-3b7e-f13edd1b64fe","type":"String","x":779.5,"y":117.5,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"b5e968f9-b1ef-7325-ed67-96865ef65c69","type":"/#Directus/Directus Prefab/Components/Data/Directus - Create Data","x":701.5,"y":-37.5,"parameters":{"collection":"Video","SDK Client to use":"Site SDK Client"},"ports":[],"dynamicports":[],"children":[]},{"id":"7f41be0f-4bca-f24c-1ff7-8cab1d4595bf","type":"Model2","x":1022.25,"y":-19.41666666666663,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"cec55ac7-9655-e5db-8f63-09be6f463a29","type":"/Global logical components/File upload script","x":330.25,"y":36,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":["7d209f7d-44ed-caef-7fb7-a48efe933276"]}},{"name":"/#Pages/my-account","id":"26001f1f-81c3-dba0-6e39-ba1106f85c32","graph":{"connections":[],"roots":[{"id":"9368154b-e1cd-0bcb-7bee-d48e33bcc810","type":"Page","x":0,"y":0,"parameters":{},"ports":[],"dynamicports":[{"name":"title","displayName":"Title","type":"string","group":"General","plug":"input","default":"my-account","index":31},{"name":"urlPath","displayName":"Url Path","type":"string","group":"General","plug":"input","default":"my-account","index":32}],"children":[]},{"id":"5129e1f2-91dc-eea4-0a9b-a8839b46aa34","type":"PageInputs","x":-100,"y":-50,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":["9368154b-e1cd-0bcb-7bee-d48e33bcc810"]}},{"name":"/#Pages/project","id":"d5a3e455-7f3d-4425-8000-ecc4ba4ba1fe","graph":{"connections":[{"fromId":"fdf5ec6f-db0b-7bd1-6b67-c34ca454b99d","fromProperty":"pm-project","toId":"f10c3b76-e2fc-f5b5-6294-073f343db160","toProperty":"modelId"},{"fromId":"fdf5ec6f-db0b-7bd1-6b67-c34ca454b99d","fromProperty":"pm-project","toId":"cc685b21-4d7a-c96b-8d26-1855156cfce6","toProperty":"item ID"},{"fromId":"cc685b21-4d7a-c96b-8d26-1855156cfce6","fromProperty":"result","toId":"f10c3b76-e2fc-f5b5-6294-073f343db160","toProperty":"modelId"},{"fromId":"f10c3b76-e2fc-f5b5-6294-073f343db160","fromProperty":"prop-name","toId":"d89387f3-7357-304d-849d-2daa3d4608ca","toProperty":"title"},{"fromId":"f10c3b76-e2fc-f5b5-6294-073f343db160","fromProperty":"fetched","toId":"d89387f3-7357-304d-849d-2daa3d4608ca","toProperty":"run"},{"fromId":"d89387f3-7357-304d-849d-2daa3d4608ca","fromProperty":"isTrueEv","toId":"cc685b21-4d7a-c96b-8d26-1855156cfce6","toProperty":"Do"},{"fromId":"fdf5ec6f-db0b-7bd1-6b67-c34ca454b99d","fromProperty":"pm-project","toId":"249edd9b-7308-b198-da1b-f00557b28d79","toProperty":"value"},{"fromId":"7ac06abf-6b31-09a3-883b-8afd83400549","fromProperty":"out-mainVideo","toId":"3c7d87c9-49d1-ca4a-4d1b-c4d25ac5361a","toProperty":"mainVideos"},{"fromId":"f27e6f8a-7f26-9c11-d591-6d5291d549fa","fromProperty":"prop-videoUrl","toId":"34a3ad78-7c55-c6e4-070a-10d7f1036849","toProperty":"src"},{"fromId":"cc685b21-4d7a-c96b-8d26-1855156cfce6","fromProperty":"result","toId":"249edd9b-7308-b198-da1b-f00557b28d79","toProperty":"value"},{"fromId":"249edd9b-7308-b198-da1b-f00557b28d79","fromProperty":"valueChanged","toId":"f10c3b76-e2fc-f5b5-6294-073f343db160","toProperty":"fetch"},{"fromId":"fdf5ec6f-db0b-7bd1-6b67-c34ca454b99d","fromProperty":"pm-project","toId":"d89387f3-7357-304d-849d-2daa3d4608ca","toProperty":"itemId"},{"fromId":"34a3ad78-7c55-c6e4-070a-10d7f1036849","fromProperty":"onTimeUpdate","toId":"9d6b5b8f-9947-89f9-0a3c-fd694290a8f2","toProperty":"value-playbackPosition"},{"fromId":"34a3ad78-7c55-c6e4-070a-10d7f1036849","fromProperty":"onTimeUpdate","toId":"3c016e0a-e5cd-9cac-aead-2b8df244b8f6","toProperty":"in-Seconds"},{"fromId":"3c7d87c9-49d1-ca4a-4d1b-c4d25ac5361a","fromProperty":"result","toId":"2d0a5036-4bc7-c32e-8fa5-2b5bccca250e","toProperty":"value"},{"fromId":"2d0a5036-4bc7-c32e-8fa5-2b5bccca250e","fromProperty":"value","toId":"f27e6f8a-7f26-9c11-d591-6d5291d549fa","toProperty":"modelId"},{"fromId":"f27e6f8a-7f26-9c11-d591-6d5291d549fa","fromProperty":"prop-transcript","toId":"e5db8e67-bc99-2eb5-874c-44848a713112","toProperty":"modelId"},{"fromId":"e5db8e67-bc99-2eb5-874c-44848a713112","fromProperty":"prop-paragraphs","toId":"fa766e20-8b53-686c-b34d-c8d60de7aa9b","toProperty":"items"},{"fromId":"e5db8e67-bc99-2eb5-874c-44848a713112","fromProperty":"prop-words","toId":"3b17b12e-ae56-45a1-13d1-f759a31bdd3a","toProperty":"items"},{"fromId":"e5db8e67-bc99-2eb5-874c-44848a713112","fromProperty":"id","toId":"9d6b5b8f-9947-89f9-0a3c-fd694290a8f2","toProperty":"value-transcriptionId"},{"fromId":"53d339f8-ef24-c5e6-89a6-1e6aabe1f2e4","fromProperty":"Clicked","toId":"3d9cf9cb-5896-c800-80c4-5de5010dafaf","toProperty":"show"},{"fromId":"f10c3b76-e2fc-f5b5-6294-073f343db160","fromProperty":"prop-hasVideos","toId":"a5eca2d4-bc96-4a0c-ba39-1b234622cdc9","toProperty":"in-hasVideos"},{"fromId":"a5eca2d4-bc96-4a0c-ba39-1b234622cdc9","fromProperty":"out-videos","toId":"e5fb67c0-14c1-6889-6766-afa926594600","toProperty":"items"},{"fromId":"e5fb67c0-14c1-6889-6766-afa926594600","fromProperty":"items","toId":"949442f2-d685-5879-f5fc-05d3484b073e","toProperty":"items"},{"fromId":"e5fb67c0-14c1-6889-6766-afa926594600","fromProperty":"items","toId":"7ac06abf-6b31-09a3-883b-8afd83400549","toProperty":"in-InputArray"}],"roots":[{"id":"080c5620-2f7b-3bb2-f156-3c76958e7bdd","type":"Page","x":0,"y":0,"parameters":{},"ports":[],"dynamicports":[{"name":"title","displayName":"Title","type":"string","group":"General","plug":"input","default":"project","index":31},{"name":"urlPath","displayName":"Url Path","type":"string","group":"General","plug":"input","default":"project","index":32}],"children":[{"id":"fa926851-65cc-0a5d-1fb9-027c5a00d3e0","type":"Group","label":"Main container","parameters":{"backgroundColor":"Hive page grey","paddingLeft":{"value":40,"unit":"px"},"paddingTop":{"value":40,"unit":"px"},"paddingRight":{"value":40,"unit":"px"},"paddingBottom":{"value":40,"unit":"px"}},"ports":[],"dynamicports":[],"children":[{"id":"2f779670-4b0d-7ca9-c36d-0482d957169e","type":"Group","label":"Top tabs","parameters":{"flexDirection":"row","columnGap":{"value":10,"unit":"px"},"borderBottomStyle":"none","borderBottomWidth":{"value":1,"unit":"px"},"borderBottomColor":"Grey - 800","sizeMode":"contentSize"},"ports":[],"dynamicports":[],"children":[{"id":"53d339f8-ef24-c5e6-89a6-1e6aabe1f2e4","type":"/Global visual components/Pretty icon","parameters":{"align y":"center","icon_name":"add","size":"24"},"ports":[],"dynamicports":[],"children":[]},{"id":"ed4e3673-c3a7-6508-3e29-12b4ccb9dc36","type":"net.noodl.visual.columns","parameters":{"layoutString":"1 1 1 1 1","marginX":{"value":0,"unit":"px"},"marginY":{"value":0,"unit":"px"},"minWidth":{"value":200,"unit":"px"},"justifyContent":"flex-start"},"ports":[],"dynamicports":[],"children":[{"id":"949442f2-d685-5879-f5fc-05d3484b073e","type":"For Each","parameters":{"template":"/#Pages/project/video tab"},"ports":[],"dynamicports":[{"name":"inputMappingScript","type":{"name":"string","codeeditor":"javascript"},"displayName":"Script","group":"Input Mapping","default":"// Here you add mappings between the properties of the item objects and the inputs of the components.\n// 'myComponentInput': 'myObjectProperty',\n// 'anotherComponentInput': function () { return object.get('someProperty') + ' ' + object.get('otherProp') }\n// These are the default mappings based on the selected template component.\nmap({\n})\n","plug":"input","index":6}],"children":[]}]}]},{"id":"0b54ff4f-7ecb-5f15-98be-7ca0920415c6","type":"Group","label":"Middle section","parameters":{"flexDirection":"row","borderTopStyle":"solid","borderTopWidth":{"value":1,"unit":"px"},"borderTopColor":"Grey - 900"},"ports":[],"dynamicports":[],"children":[{"id":"6fc627f1-e14e-6567-a395-d42e8e7920f9","type":"Group","label":"Transcript","parameters":{"borderStyle":"solid","borderWidth":{"value":1,"unit":"px"},"height":{"value":500,"unit":"px"},"scrollEnabled":true,"paddingTop":{"value":10,"unit":"px"},"paddingBottom":{"value":10,"unit":"px"},"boxShadowEnabled":true,"boxShadowInset":true,"boxShadowBlurRadius":{"value":4,"unit":"px"},"boxShadowSpreadRadius":{"value":2,"unit":"px"},"boxShadowColor":"#00000030"},"ports":[],"dynamicports":[],"children":[{"id":"fa766e20-8b53-686c-b34d-c8d60de7aa9b","type":"For Each","parameters":{"template":"/#Pages/project/paragraph item"},"ports":[],"dynamicports":[{"name":"inputMappingScript","type":{"name":"string","codeeditor":"javascript"},"displayName":"Script","group":"Input Mapping","default":"// Here you add mappings between the properties of the item objects and the inputs of the components.\n// 'myComponentInput': 'myObjectProperty',\n// 'anotherComponentInput': function () { return object.get('someProperty') + ' ' + object.get('otherProp') }\n// These are the default mappings based on the selected template component.\nmap({\n})\n","plug":"input","index":6}],"children":[]}]},{"id":"f7ae4629-e16a-c928-6396-b2be9c1f44e9","type":"Group","label":"Video preview","parameters":{"width":{"value":480,"unit":"px"},"height":{"value":360,"unit":"px"},"paddingLeft":{"value":20,"unit":"px"},"paddingTop":{"value":20,"unit":"px"},"paddingRight":{"value":20,"unit":"px"}},"ports":[],"dynamicports":[],"children":[{"id":"34a3ad78-7c55-c6e4-070a-10d7f1036849","type":"Video","parameters":{"sizeMode":"contentHeight","alignY":"top","controls":true},"ports":[],"dynamicports":[],"children":[]}]},{"id":"e00f4d7f-5b40-9500-1540-c580fcbedaf3","type":"Group","label":"Video settings","parameters":{},"ports":[],"dynamicports":[],"children":[{"id":"8738fea9-d87d-8857-91b7-27b7505084c1","type":"net.noodl.controls.checkbox","parameters":{"label":"Add subtitles","borderColor":"White","labelcolor":"White"},"ports":[],"dynamicports":[],"children":[]},{"id":"50c09a37-701f-0556-6a48-808350ab3f43","type":"net.noodl.controls.options","parameters":{"label":"Select font","useLabel":false,"placeholder":"Select font","backgroundColor":"White","color":"Grey - 900"},"ports":[],"dynamicports":[],"children":[]},{"id":"3af45d39-df19-92aa-7ee9-c5b6cba99f76","type":"For Each","parameters":{},"ports":[],"dynamicports":[],"children":[]}]}]},{"id":"3755ef86-c046-3436-6b45-f1020b14573d","type":"Group","label":"Bottom bar","parameters":{},"ports":[],"dynamicports":[],"children":[]}]}]},{"id":"fdf5ec6f-db0b-7bd1-6b67-c34ca454b99d","type":"PageInputs","x":-179,"y":-103,"parameters":{"pathParams":"project"},"ports":[],"dynamicports":[{"name":"pm-project","displayName":"project","type":"*","plug":"output","group":"Parameters","index":2}],"children":[]},{"id":"f10c3b76-e2fc-f5b5-6294-073f343db160","type":"Model2","label":"Local project","x":-289,"y":120.5,"parameters":{"properties":"name,hasVideos"},"ports":[],"dynamicports":[{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-name","displayName":"name","index":7},{"type":"signal","plug":"output","group":"Changed Events","displayName":"name Changed","name":"changed-name","index":8},{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-hasVideos","displayName":"hasVideos","index":9},{"type":"signal","plug":"output","group":"Changed Events","displayName":"hasVideos Changed","name":"changed-hasVideos","index":10}],"children":[]},{"id":"cc685b21-4d7a-c96b-8d26-1855156cfce6","type":"/#Directus/Directus Prefab/Components/Data/Directus - Get Data","x":-508,"y":-73.5,"parameters":{"collection":"Project","SDK Client to use":"User SDK Client","limit":1,"fields":"*,hasVideos.Video_id.id","Get all fields":false},"ports":[],"dynamicports":[],"children":[]},{"id":"d89387f3-7357-304d-849d-2daa3d4608ca","type":"Expression","x":-786,"y":-85.5,"parameters":{"expression":"title == \"\" && itemId != \"\""},"ports":[],"dynamicports":[{"group":"Parameters","name":"title","type":{"name":"*","editAsType":"string"},"plug":"input","index":7},{"group":"Parameters","name":"itemId","type":{"name":"*","editAsType":"string"},"plug":"input","index":8}],"children":[],"metadata":{"merge":{"soureCodePorts":["expression"]}}},{"id":"f27e6f8a-7f26-9c11-d591-6d5291d549fa","type":"Model2","label":"Current video","x":-316.01705188252913,"y":528.9325328984083,"parameters":{"properties":"videoUrl,transcript"},"ports":[],"dynamicports":[{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-videoUrl","displayName":"videoUrl","index":7},{"type":"signal","plug":"output","group":"Changed Events","displayName":"videoUrl Changed","name":"changed-videoUrl","index":8},{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-transcript","displayName":"transcript","index":9},{"type":"signal","plug":"output","group":"Changed Events","displayName":"transcript Changed","name":"changed-transcript","index":10}],"children":[]},{"id":"249edd9b-7308-b198-da1b-f00557b28d79","type":"Value Changed","x":-227.875,"y":5.75,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"7ac06abf-6b31-09a3-883b-8afd83400549","type":"JavaScriptFunction","label":"Extract Video IDs from Array","x":-751,"y":199,"parameters":{"functionScript":"const videoIds = Inputs.InputArray || [];\nif (!videoIds) return;\n\ntry {\n  Outputs.Videos = videoIds;\n  Outputs.mainVideo = videoIds.filter(item => item.type === \"main\");\n  Outputs.introVideo = videoIds.filter(item => item.type === \"intro\") || '';\n  Outputs.outroVideo = videoIds.filter(item => item.type === \"outro\") || '';\n  Outputs.Success();\n} catch (error) {\n  Outputs.error = error;\n  Outputs.Failure();\n}"},"ports":[],"dynamicports":[{"name":"in-InputArray","displayName":"InputArray","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-Videos","displayName":"Videos","plug":"output","type":"*","group":"Outputs","index":7},{"name":"out-mainVideo","displayName":"mainVideo","plug":"output","type":"*","group":"Outputs","index":8},{"name":"out-introVideo","displayName":"introVideo","plug":"output","type":"*","group":"Outputs","index":9},{"name":"out-outroVideo","displayName":"outroVideo","plug":"output","type":"*","group":"Outputs","index":10},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":11}],"children":[],"metadata":{"prompt":{"history":[{"content":"Take an input array of objects, output an array of only the 'Video_id' field of each object","metadata":{"user":{"name":"Local","id":"local","email":""},"code":"const inputArray = Inputs.InputArray || [];\nif (!inputArray) return;\n\ntry {\n  const videoIds = inputArray.map(item => item.Video_id);\n  Outputs.VideoIds = videoIds;\n  Outputs.Success();\n} catch (error) {\n  Outputs.error = error;\n  Outputs.Failure();\n}\n"},"snowflakeId":"0191296dc201-xxa92v","type":"user"},{"type":"assistant","content":"\nThis function takes an array of objects from the <span style=\"color: var(--base-color-yellow-400);\">Inputs.InputArray</span> and creates a new array containing only the 'Video_id' field from each object. \n\nIf the operation is successful, it sends the new array to the <span style=\"color: var(--base-color-yellow-400);\">Outputs.VideoIds</span> output and triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Success</span> signal. \n\nIf an error occurs during the process, it sends the error message to the <span style=\"color: var(--base-color-yellow-400);\">Outputs.error</span> output and triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Failure</span> signal.\n","snowflakeId":"0191296de374-u39893","metadata":{}}],"metadata":{"templateId":"function"}},"AiAssistant":"old","merge":{"soureCodePorts":["functionScript"]}}},{"id":"3c7d87c9-49d1-ca4a-4d1b-c4d25ac5361a","type":"Expression","x":-323.5663189364451,"y":399.1790017104779,"parameters":{"expression":"mainVideos[0].id"},"ports":[],"dynamicports":[{"group":"Parameters","name":"mainVideos","type":{"name":"*","editAsType":"string"},"plug":"input","index":7},{"group":"Parameters","name":"id","type":{"name":"*","editAsType":"string"},"plug":"input","index":8}],"children":[],"metadata":{"merge":{"soureCodePorts":["expression"]}}},{"id":"9d6b5b8f-9947-89f9-0a3c-fd694290a8f2","type":"net.noodl.ComponentObject","x":336.8169178044179,"y":589.5647206959707,"parameters":{"properties":"playbackPosition,clickedWordStart,clickedWord,transcriptionId"},"ports":[],"dynamicports":[{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"value-playbackPosition","displayName":"playbackPosition","index":4},{"type":"signal","plug":"output","group":"Changed Events","displayName":"playbackPosition Changed","name":"changed-playbackPosition","index":5},{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"value-clickedWordStart","displayName":"clickedWordStart","index":6},{"type":"signal","plug":"output","group":"Changed Events","displayName":"clickedWordStart Changed","name":"changed-clickedWordStart","index":7},{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"value-clickedWord","displayName":"clickedWord","index":8},{"type":"signal","plug":"output","group":"Changed Events","displayName":"clickedWord Changed","name":"changed-clickedWord","index":9},{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"value-transcriptionId","displayName":"transcriptionId","index":10},{"type":"signal","plug":"output","group":"Changed Events","displayName":"transcriptionId Changed","name":"changed-transcriptionId","index":11}],"children":[]},{"id":"3c016e0a-e5cd-9cac-aead-2b8df244b8f6","type":"JavaScriptFunction","label":"Format Seconds to Time","x":360,"y":713,"parameters":{"functionScript":"const seconds = Math.round(Inputs.Seconds) || 0;\n\n// Check if the input is a number\nif (isNaN(seconds)) throw new Error('Invalid input. Please input a number');\n\n// Calculate hours, minutes and seconds\nconst hours = Math.floor(seconds / 3600);\nconst minutes = Math.floor((seconds % 3600) / 60);\nconst remainingSeconds = seconds % 60;\n\n// Format the time as HH:MM:SS\nconst formattedTime = [hours, minutes, remainingSeconds]\n  .map(unit => unit.toString().padStart(2, '0')) // Pad the time units with leading zeros\n  .join(':');\n\nOutputs.FormattedTime = formattedTime;\nOutputs.Success();\n"},"ports":[],"dynamicports":[{"name":"in-Seconds","displayName":"Seconds","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-FormattedTime","displayName":"FormattedTime","plug":"output","type":"*","group":"Outputs","index":6}],"children":[],"metadata":{"prompt":{"history":[{"content":"Format an input number of seconds as HH:MM:SS so 130 seconds would be 00:02:10","metadata":{"user":{"name":"Local","id":"local","email":""},"code":"const seconds = Inputs.Seconds || 0;\n\n// Check if the input is a number\nif (isNaN(seconds)) throw new Error('Invalid input. Please input a number');\n\n// Calculate hours, minutes and seconds\nconst hours = Math.floor(seconds / 3600);\nconst minutes = Math.floor((seconds % 3600) / 60);\nconst remainingSeconds = seconds % 60;\n\n// Format the time as HH:MM:SS\nconst formattedTime = [hours, minutes, remainingSeconds]\n  .map(unit => unit.toString().padStart(2, '0')) // Pad the time units with leading zeros\n  .join(':');\n\nOutputs.FormattedTime = formattedTime;\nOutputs.Success();\n"},"snowflakeId":"01912c920db5-ikkemh","type":"user"},{"type":"assistant","content":"\nThis function takes an input number of seconds and formats it into a time string in the format of HH:MM:SS. \n\nThe <span style=\"color: var(--base-color-yellow-400);\">Inputs.Seconds</span> input is the number of seconds to be formatted. The function first checks if the input is a number. If not, it throws an error. \n\nThen, it calculates the hours, minutes, and remaining seconds from the input number. Each unit of time is padded with leading zeros to ensure a two-digit format. \n\nThe units are then joined with a colon (:) to form the time string. The formatted time string is set as the <span style=\"color: var(--base-color-yellow-400);\">Outputs.FormattedTime</span> output. \n\nFinally, the function triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Success</span> output signal to indicate that the operation was successful.\n","snowflakeId":"01912c922a9b-m0dcw7","metadata":{}},{"content":"Round the seconds value to an integer ","metadata":{"user":{"name":"Local","id":"local","email":""},"code":"const seconds = Math.round(Inputs.Seconds) || 0;\n\n// Check if the input is a number\nif (isNaN(seconds)) throw new Error('Invalid input. Please input a number');\n\n// Calculate hours, minutes and seconds\nconst hours = Math.floor(seconds / 3600);\nconst minutes = Math.floor((seconds % 3600) / 60);\nconst remainingSeconds = seconds % 60;\n\n// Format the time as HH:MM:SS\nconst formattedTime = [hours, minutes, remainingSeconds]\n  .map(unit => unit.toString().padStart(2, '0')) // Pad the time units with leading zeros\n  .join(':');\n\nOutputs.FormattedTime = formattedTime;\nOutputs.Success();\n"},"snowflakeId":"01912c92b3b4-ux39sx","type":"user"},{"type":"assistant","content":"\nThis function takes an input of seconds and converts it into a time format (HH:MM:SS). \n\nThe function first rounds the <span style=\"color: var(--base-color-yellow-400);\">Inputs.Seconds</span> to the nearest integer using the Math.round() function. It then checks if the input is a number, throwing an error if it is not. \n\nThe function calculates the hours, minutes, and remaining seconds from the input seconds. It then formats these values into a time string, padding each unit with leading zeros if necessary. \n\nThe formatted time is then set as the <span style=\"color: var(--base-color-yellow-400);\">Outputs.FormattedTime</span> and the function signals a successful operation with the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Success</span> output.\n","snowflakeId":"01912c92d4a8-p6zgdo","metadata":{}}],"metadata":{"templateId":"function"}},"AiAssistant":"old","merge":{"soureCodePorts":["functionScript"]}}},{"id":"3b17b12e-ae56-45a1-13d1-f759a31bdd3a","type":"Collection2","label":"Selected video words","x":-598.9498253045609,"y":570.6928373143784,"parameters":{"collectionId":"videoWords"},"ports":[],"dynamicports":[],"children":[]},{"id":"90d01df3-049e-8b57-c8af-917c0fdc60eb","type":"Collection2","x":296.3774012522972,"y":34.79001329110707,"parameters":{"collectionId":"paragraphSelection"},"ports":[],"dynamicports":[],"children":[]},{"id":"2d0a5036-4bc7-c32e-8fa5-2b5bccca250e","type":"Variable2","label":"Set first video initially","x":-588.5837127320436,"y":376.37582712956095,"parameters":{"name":"projectSelectedVideo"},"ports":[],"dynamicports":[],"children":[]},{"id":"e5db8e67-bc99-2eb5-874c-44848a713112","type":"Model2","label":"Current selection transcription","x":-317.1324406787062,"y":662.3303854824719,"parameters":{"properties":"paragraphs,words"},"ports":[],"dynamicports":[{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-paragraphs","displayName":"paragraphs","index":7},{"type":"signal","plug":"output","group":"Changed Events","displayName":"paragraphs Changed","name":"changed-paragraphs","index":8},{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-words","displayName":"words","index":9},{"type":"signal","plug":"output","group":"Changed Events","displayName":"words Changed","name":"changed-words","index":10}],"children":[]},{"id":"3d9cf9cb-5896-c800-80c4-5de5010dafaf","type":"NavigationShowPopup","x":308.30466463482867,"y":160.50768790149164,"parameters":{"target":"/#Pages/project/popup add video"},"ports":[],"dynamicports":[],"children":[]},{"id":"e5fb67c0-14c1-6889-6766-afa926594600","type":"Collection2","x":-279.91408536517133,"y":300.35143790149164,"parameters":{"collectionId":"projectVideos"},"ports":[],"dynamicports":[],"children":[]},{"id":"a5eca2d4-bc96-4a0c-ba39-1b234622cdc9","type":"JavaScriptFunction","label":"Prune video array","x":-537.9140853651713,"y":196.35143790149164,"parameters":{"functionScript":"const data = Inputs.hasVideos; // Assuming 'hasVideos' is the input connected to this node\n\nconst videos = data.map(item => {\n    if (item.Video_id) {\n        // Extract only the properties inside Video_id, excluding 'id'\n        const { ...rest } = item.Video_id;\n        return rest;\n    } else {\n        return {}; // Return an empty object if Video_id is missing or invalid\n    }\n});\n\nOutputs.videos = videos;\n"},"ports":[],"dynamicports":[{"name":"in-hasVideos","displayName":"hasVideos","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-videos","displayName":"videos","plug":"output","type":"*","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}}],"visualRoots":["080c5620-2f7b-3bb2-f156-3c76958e7bdd"]}},{"name":"/#Pages/project/font style icon","id":"cc27c5c1-1006-7867-2fcf-50cbe90c20ab","graph":{"connections":[],"roots":[{"id":"036f86a0-357b-91a4-0903-e7030c04884e","type":"Group","x":0,"y":0,"parameters":{},"ports":[],"dynamicports":[],"children":[{"id":"074b737f-d16f-117e-6143-73dda9bf8d8c","type":"net.noodl.visual.icon","parameters":{"iconIconSource":{"class":"material-icons","code":"format_bold","codeAsClass":false}},"ports":[],"dynamicports":[],"children":[]}]}],"visualRoots":["036f86a0-357b-91a4-0903-e7030c04884e"]}},{"name":"/#Pages/project/paragraph item","id":"614c6baa-a309-47c9-7cc4-ebdbea8b490e","graph":{"connections":[{"fromId":"534eccd2-a401-147c-f7ee-1594d00f7322","fromProperty":"items","toId":"1045d667-ff0b-12f7-1253-b87c9820650e","toProperty":"in-Array"},{"fromId":"1b279648-848c-8aeb-c99b-fe2647cc0ffa","fromProperty":"prop-start","toId":"1045d667-ff0b-12f7-1253-b87c9820650e","toProperty":"in-Start"},{"fromId":"1b279648-848c-8aeb-c99b-fe2647cc0ffa","fromProperty":"prop-end","toId":"1045d667-ff0b-12f7-1253-b87c9820650e","toProperty":"in-End"},{"fromId":"1045d667-ff0b-12f7-1253-b87c9820650e","fromProperty":"out-FilteredArray","toId":"fc64cc59-aadb-c23f-2889-d58fa2097852","toProperty":"items"},{"fromId":"1b279648-848c-8aeb-c99b-fe2647cc0ffa","fromProperty":"id","toId":"19cbed3d-f461-bb76-3ba3-eb586fc01795","toProperty":"modifyId"},{"fromId":"1b279648-848c-8aeb-c99b-fe2647cc0ffa","fromProperty":"id","toId":"14733596-b03e-ad6d-366e-2bf14cc9d3ef","toProperty":"modifyId"},{"fromId":"fa6eb96d-52e7-38e9-3e64-f7345d3dfb13","fromProperty":"reached-added","toId":"19cbed3d-f461-bb76-3ba3-eb586fc01795","toProperty":"add"},{"fromId":"fa6eb96d-52e7-38e9-3e64-f7345d3dfb13","fromProperty":"reached-notAdded","toId":"14733596-b03e-ad6d-366e-2bf14cc9d3ef","toProperty":"remove"},{"fromId":"444df344-ae9c-8791-7273-1782edd9d2da","fromProperty":"isTrueEv","toId":"fa6eb96d-52e7-38e9-3e64-f7345d3dfb13","toProperty":"to-notAdded"},{"fromId":"444df344-ae9c-8791-7273-1782edd9d2da","fromProperty":"isFalseEv","toId":"fa6eb96d-52e7-38e9-3e64-f7345d3dfb13","toProperty":"to-added"},{"fromId":"8ce7af09-36a7-61c6-1e38-9e3e26452442","fromProperty":"Clicked","toId":"d1d4fb8e-9184-9b12-5f65-758fe5f2ce50","toProperty":"run"},{"fromId":"d1d4fb8e-9184-9b12-5f65-758fe5f2ce50","fromProperty":"out-Success","toId":"444df344-ae9c-8791-7273-1782edd9d2da","toProperty":"run"},{"fromId":"d1d4fb8e-9184-9b12-5f65-758fe5f2ce50","fromProperty":"out-Count","toId":"444df344-ae9c-8791-7273-1782edd9d2da","toProperty":"count"},{"fromId":"1b279648-848c-8aeb-c99b-fe2647cc0ffa","fromProperty":"id","toId":"d1d4fb8e-9184-9b12-5f65-758fe5f2ce50","toProperty":"in-Id"},{"fromId":"fa6eb96d-52e7-38e9-3e64-f7345d3dfb13","fromProperty":"icon","toId":"8ce7af09-36a7-61c6-1e38-9e3e26452442","toProperty":"icon_name"},{"fromId":"fa6eb96d-52e7-38e9-3e64-f7345d3dfb13","fromProperty":"icon colour","toId":"8ce7af09-36a7-61c6-1e38-9e3e26452442","toProperty":"icon colour"},{"fromId":"fa6eb96d-52e7-38e9-3e64-f7345d3dfb13","fromProperty":"background colour","toId":"8ce7af09-36a7-61c6-1e38-9e3e26452442","toProperty":"background colour"}],"roots":[{"id":"f189f511-e269-4a77-ef9a-3dfde74c1937","type":"Group","x":0,"y":0,"parameters":{"flexDirection":"row","borderBottomStyle":"solid","borderBottomWidth":{"value":1,"unit":"px"},"borderBottomColor":"Grey - 600","paddingTop":{"value":5,"unit":"px"},"paddingBottom":{"value":5,"unit":"px"}},"ports":[],"dynamicports":[],"children":[{"id":"f6a72284-2b18-c075-fe04-8f9932f53681","type":"Group","label":"Actions","parameters":{"sizeMode":"contentWidth","justifyContent":"center","paddingLeft":{"value":5,"unit":"px"},"paddingRight":{"value":5,"unit":"px"}},"ports":[],"dynamicports":[],"children":[{"id":"8ce7af09-36a7-61c6-1e38-9e3e26452442","type":"/Global visual components/Pretty icon","parameters":{"icon":{"class":"material-icons","code":"add","codeAsClass":false},"size":"34"},"ports":[],"dynamicports":[],"children":[]}]},{"id":"88bb4f18-1a2b-851a-17d7-649e38285556","type":"Group","parameters":{"cssClassName":"masonry-grid","flexDirection":"column","paddingRight":{"value":10,"unit":"px"}},"ports":[],"dynamicports":[],"children":[{"id":"fc64cc59-aadb-c23f-2889-d58fa2097852","type":"For Each","parameters":{"template":"/#Pages/project/paragraph item/sentence item/word item"},"ports":[],"dynamicports":[{"name":"inputMappingScript","type":{"name":"string","codeeditor":"javascript"},"displayName":"Script","group":"Input Mapping","default":"// Here you add mappings between the properties of the item objects and the inputs of the components.\n// 'myComponentInput': 'myObjectProperty',\n// 'anotherComponentInput': function () { return object.get('someProperty') + ' ' + object.get('otherProp') }\n// These are the default mappings based on the selected template component.\nmap({\n})\n","plug":"input","index":6}],"children":[]}]}]},{"id":"1b279648-848c-8aeb-c99b-fe2647cc0ffa","type":"Model2","x":-292,"y":-56.5,"parameters":{"idSource":"foreach","properties":"sentences,start,end"},"ports":[],"dynamicports":[{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-sentences","displayName":"sentences","index":7},{"type":"signal","plug":"output","group":"Changed Events","displayName":"sentences Changed","name":"changed-sentences","index":8},{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-start","displayName":"start","index":9},{"type":"signal","plug":"output","group":"Changed Events","displayName":"start Changed","name":"changed-start","index":10},{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-end","displayName":"end","index":11},{"type":"signal","plug":"output","group":"Changed Events","displayName":"end Changed","name":"changed-end","index":12}],"children":[]},{"id":"534eccd2-a401-147c-f7ee-1594d00f7322","type":"Collection2","x":-445,"y":168,"parameters":{"collectionId":"videoWords"},"ports":[],"dynamicports":[],"children":[]},{"id":"1045d667-ff0b-12f7-1253-b87c9820650e","type":"JavaScriptFunction","label":"Filter Array by Range","x":-236,"y":144,"parameters":{"functionScript":"const array = Inputs.Array || [];\nconst start = Inputs.Start || 0;\nconst end = Inputs.End || Infinity;\n\ntry {\n  const filteredArray = array.filter(item => item.start >= start && item.start < end);\n  Outputs.FilteredArray = filteredArray;\n  Outputs.Success();\n} catch (error) {\n  Outputs.error = error;\n  Outputs.Failure();\n}\n"},"ports":[],"dynamicports":[{"name":"in-Array","displayName":"Array","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-Start","displayName":"Start","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-End","displayName":"End","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":8},{"name":"out-FilteredArray","displayName":"FilteredArray","plug":"output","type":"*","group":"Outputs","index":9},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":10}],"children":[],"metadata":{"prompt":{"history":[{"content":"filter out items from an input array that have a 'start' field greater than or equal to an input start integer, and also the same 'start' field is less than the 'end' integer input","metadata":{"user":{"name":"Local","id":"local","email":""},"code":"const array = Inputs.Array || [];\nconst start = Inputs.Start || 0;\nconst end = Inputs.End || Infinity;\n\ntry {\n  const filteredArray = array.filter(item => item.start >= start && item.start < end);\n  Outputs.FilteredArray = filteredArray;\n  Outputs.Success();\n} catch (error) {\n  Outputs.error = error;\n  Outputs.Failure();\n}\n"},"snowflakeId":"01913208a788-j66to9","type":"user"},{"type":"assistant","content":"\nThis function filters an array based on a specified range. It takes an <span style=\"color: var(--base-color-yellow-400);\">Inputs.Array</span>, <span style=\"color: var(--base-color-yellow-400);\">Inputs.Start</span>, and <span style=\"color: var(--base-color-yellow-400);\">Inputs.End</span> as inputs. The function goes through each item in the array and checks if the 'start' field of the item is greater than or equal to the 'Start' input and less than the 'End' input. \n\nThe filtered array is then sent to the <span style=\"color: var(--base-color-yellow-400);\">Outputs.FilteredArray</span> output. If the operation is successful, it triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Success</span> output signal. \n\nIf there's an error during the operation, it sets the <span style=\"color: var(--base-color-yellow-400);\">Outputs.error</span> output with the error message and triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Failure</span> output signal.\n","snowflakeId":"01913208d5ce-li52w7","metadata":{}}],"metadata":{"templateId":"function"}},"AiAssistant":"old","merge":{"soureCodePorts":["functionScript"]}}},{"id":"7ae49efb-1634-95bd-cba0-984ce38e39e8","type":"CSS Definition","x":5.25,"y":-99.375,"parameters":{"style":"/* Apply this CSS to the parent container of the Repeater items */\n.masonry-grid {\n  display:flex !important; /* Uses flex to allow columns to dynamically size based on the width of their children */\n  flex-wrap: wrap; /* Wraps items that overflow the width of the container */\n  flex-direction: row !important; /* Override the default column direction */\n  gap: 0.05rem; /* Horitontal gap between items */\n  align-items: flex-start !important; /* Keeps the row items left aligned */\n}\n\n/* Apply this CSS to each item in the Repeater */\n.masonry-grid-item {\n  flex: 0 0 auto; /* Prevent items from stretching */\n  break-inside: avoid; /* Avoids breaking items across rows */\n  margin-bottom: 0.3rem; /* Adjust the gap between rows as needed */\n  min-width: 0px !important; /* Makes sure the items shrink down to their text width */\n}\n"},"ports":[],"dynamicports":[],"children":[],"metadata":{"merge":{"soureCodePorts":["style"]}}},{"id":"19cbed3d-f461-bb76-3ba3-eb586fc01795","type":"CollectionInsert","x":703.95,"y":-47.77499999999998,"parameters":{"collectionId":"paragraphSelection"},"ports":[],"dynamicports":[],"children":[]},{"id":"14733596-b03e-ad6d-366e-2bf14cc9d3ef","type":"CollectionRemove","x":682.95,"y":121.22500000000002,"parameters":{"collectionId":"paragraphSelection"},"ports":[],"dynamicports":[],"children":[]},{"id":"fa6eb96d-52e7-38e9-3e64-f7345d3dfb13","type":"States","x":401.95000000000005,"y":124.22500000000002,"parameters":{"states":"added,notAdded","currentState":"notAdded","useTransitions":false,"values":"icon,icon colour,background colour","type-icon":"string","value-added-icon":"check","value-notAdded-icon":"add","type-icon colour":"color","value-added-icon colour":"White","value-notAdded-icon colour":"Grey - 900","type-background colour":"color","value-added-background colour":"Hive purple","value-notAdded-background colour":"Grey - 300"},"ports":[],"dynamicports":[{"type":{"name":"string","allowConnectionsOnly":true},"plug":"output","group":"Values","name":"icon","index":6},{"type":{"name":"enum","enums":[{"label":"Number","value":"number"},{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Color","value":"color"},{"label":"Text Style","value":"textStyle"}],"allowEditOnly":true},"default":"number","plug":"input","group":"Types","displayName":"icon","name":"type-icon","index":7},{"type":{"name":"color","allowConnectionsOnly":true},"plug":"output","group":"Values","name":"icon colour","index":8},{"type":{"name":"enum","enums":[{"label":"Number","value":"number"},{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Color","value":"color"},{"label":"Text Style","value":"textStyle"}],"allowEditOnly":true},"default":"number","plug":"input","group":"Types","displayName":"icon colour","name":"type-icon colour","index":9},{"type":{"name":"color","allowConnectionsOnly":true},"plug":"output","group":"Values","name":"background colour","index":10},{"type":{"name":"enum","enums":[{"label":"Number","value":"number"},{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Color","value":"color"},{"label":"Text Style","value":"textStyle"}],"allowEditOnly":true},"default":"number","plug":"input","group":"Types","displayName":"background colour","name":"type-background colour","index":11},{"plug":"input","type":"string","group":"added Values","name":"value-added-icon","displayName":"icon","editorName":"added|icon","index":12},{"plug":"input","type":"color","group":"added Values","name":"value-added-icon colour","displayName":"icon colour","editorName":"added|icon colour","index":13},{"plug":"input","type":"color","group":"added Values","name":"value-added-background colour","displayName":"background colour","editorName":"added|background colour","index":14},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To added","name":"to-added","group":"Go to state","index":15},{"plug":"output","type":"boolean","displayName":"At added","name":"at-added","group":"Current state","index":16},{"plug":"output","type":"signal","displayName":"Has Reached added","name":"reached-added","group":"Current state","index":17},{"plug":"input","type":"string","group":"notAdded Values","name":"value-notAdded-icon","displayName":"icon","editorName":"notAdded|icon","index":18},{"plug":"input","type":"color","group":"notAdded Values","name":"value-notAdded-icon colour","displayName":"icon colour","editorName":"notAdded|icon colour","index":19},{"plug":"input","type":"color","group":"notAdded Values","name":"value-notAdded-background colour","displayName":"background colour","editorName":"notAdded|background colour","index":20},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To notAdded","name":"to-notAdded","group":"Go to state","index":21},{"plug":"output","type":"boolean","displayName":"At notAdded","name":"at-notAdded","group":"Current state","index":22},{"plug":"output","type":"signal","displayName":"Has Reached notAdded","name":"reached-notAdded","group":"Current state","index":23},{"plug":"input","type":{"name":"enum","enums":["added","notAdded"]},"group":"States","displayName":"State","name":"currentState","default":"added","index":24}],"children":[]},{"id":"444df344-ae9c-8791-7273-1782edd9d2da","type":"Expression","x":385.95000000000005,"y":-73.77499999999998,"parameters":{"expression":"count > 0"},"ports":[],"dynamicports":[{"group":"Parameters","name":"count","type":{"name":"*","editAsType":"string"},"plug":"input","index":7}],"children":[],"metadata":{"merge":{"soureCodePorts":["expression"]}}},{"id":"d1d4fb8e-9184-9b12-5f65-758fe5f2ce50","type":"JavaScriptFunction","label":"Count Matching IDs in Array","x":361,"y":-271,"parameters":{"functionScript":"const inputArray = Noodl.Array.get('paragraphSelection');\n\nconsole.log('Input array = ',inputArray);\n\n// const inputArray = Inputs.Array || [];\nconst id = Inputs.Id || '';\n\n// Filter the array to only include objects where the 'id' field matches the input 'id'\nconst filteredArray = inputArray.filter(item => item.id === id);\n\n// Output the count of matching objects\nOutputs.Count = filteredArray.length;\n\n// If the operation is successful, send the 'Success' signal\nOutputs.Success();\n"},"ports":[],"dynamicports":[{"name":"in-Array","displayName":"Array","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-Id","displayName":"Id","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-Count","displayName":"Count","plug":"output","type":"*","group":"Outputs","index":7}],"children":[],"metadata":{"prompt":{"history":[{"content":"filter an input array and output the count of objects where the 'id' field is equal to an input string 'id'\n","metadata":{"user":{"name":"Local","id":"local","email":""},"code":"const inputArray = Inputs.Array || [];\nconst id = Inputs.Id || '';\n\n// Filter the array to only include objects where the 'id' field matches the input 'id'\nconst filteredArray = inputArray.filter(item => item.id === id);\n\n// Output the count of matching objects\nOutputs.Count = filteredArray.length;\n\n// If the operation is successful, send the 'Success' signal\nOutputs.Success();\n"},"snowflakeId":"0191335700a5-x3og9f","type":"user"},{"type":"assistant","content":"\nThis function filters an input array and outputs the count of objects where the 'id' field is equal to an input string 'id'. \n\nIt takes <span style=\"color: var(--base-color-yellow-400);\">Inputs.Array</span> and <span style=\"color: var(--base-color-yellow-400);\">Inputs.Id</span> as inputs. The function filters the array to only include objects where the 'id' field matches the input 'id'. \n\nIt then outputs the count of matching objects in the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Count</span> output. \n\nFinally, it triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Success</span> output signal after the operation is successful.\n","snowflakeId":"01913357189b-aabrdw","metadata":{}}],"metadata":{"templateId":"function"}},"AiAssistant":"old","merge":{"soureCodePorts":["functionScript"]}}}],"visualRoots":["f189f511-e269-4a77-ef9a-3dfde74c1937"]}},{"name":"/#Pages/project/paragraph item/sentence item","id":"e09ade0a-f1fd-46a3-310a-f4adde2421bc","graph":{"connections":[],"roots":[{"id":"0e29af49-bcae-0877-e3cd-8df5e75439bd","type":"Group","x":0,"y":0,"parameters":{"paddingLeft":{"value":10,"unit":"px"},"paddingRight":{"value":10,"unit":"px"},"paddingTop":{"value":5,"unit":"px"},"paddingBottom":{"value":5,"unit":"px"},"alignX":"left"},"ports":[],"dynamicports":[],"children":[{"id":"fcc822f8-90a9-4578-0921-922e0d98120e","type":"net.noodl.visual.columns","parameters":{"layoutString":"1 1 1 1 1 1 1 1 1 1 1 1","marginY":{"value":0,"unit":"px"},"marginX":{"value":0,"unit":"px"},"minWidth":{"value":0,"unit":"px"}},"ports":[],"dynamicports":[],"children":[{"id":"d3874f27-c2da-0a1f-e31e-30caa4fe4f6b","type":"For Each","parameters":{"template":"/#Pages/project/paragraph item/sentence item/word item"},"ports":[],"dynamicports":[{"name":"inputMappingScript","type":{"name":"string","codeeditor":"javascript"},"displayName":"Script","group":"Input Mapping","default":"// Here you add mappings between the properties of the item objects and the inputs of the components.\n// 'myComponentInput': 'myObjectProperty',\n// 'anotherComponentInput': function () { return object.get('someProperty') + ' ' + object.get('otherProp') }\n// These are the default mappings based on the selected template component.\nmap({\n})\n","plug":"input","index":6}],"children":[]}]}]},{"id":"38a3601f-324f-a321-689c-0cd1030de383","type":"Model2","x":-193,"y":-1.5,"parameters":{"idSource":"foreach","properties":"text,start,end"},"ports":[],"dynamicports":[{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-text","displayName":"text","index":7},{"type":"signal","plug":"output","group":"Changed Events","displayName":"text Changed","name":"changed-text","index":8},{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-start","displayName":"start","index":9},{"type":"signal","plug":"output","group":"Changed Events","displayName":"start Changed","name":"changed-start","index":10},{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-end","displayName":"end","index":11},{"type":"signal","plug":"output","group":"Changed Events","displayName":"end Changed","name":"changed-end","index":12}],"children":[]}],"visualRoots":["0e29af49-bcae-0877-e3cd-8df5e75439bd"]}},{"name":"/#Pages/project/paragraph item/sentence item/word item","id":"1e926e4b-1724-35fe-fe50-75816e2dffec","graph":{"connections":[{"fromId":"5047e239-a5d4-deb6-4d51-e11503ccade2","fromProperty":"prop-punctuated_word","toId":"942b7088-84b6-1891-6846-73be39fecc2a","toProperty":"text"},{"fromId":"88440e9d-acab-8674-d61e-20a8a8bbabfa","fromProperty":"value-playbackPosition","toId":"c70ac671-cb87-c6a4-94eb-fec1260ade20","toProperty":"playbackPosition"},{"fromId":"c70ac671-cb87-c6a4-94eb-fec1260ade20","fromProperty":"isTrueEv","toId":"802af203-4ca5-25ce-ae28-5a3f8939344f","toProperty":"to-highlight"},{"fromId":"c70ac671-cb87-c6a4-94eb-fec1260ade20","fromProperty":"isFalseEv","toId":"802af203-4ca5-25ce-ae28-5a3f8939344f","toProperty":"to-default"},{"fromId":"5047e239-a5d4-deb6-4d51-e11503ccade2","fromProperty":"prop-start","toId":"c70ac671-cb87-c6a4-94eb-fec1260ade20","toProperty":"start"},{"fromId":"5047e239-a5d4-deb6-4d51-e11503ccade2","fromProperty":"prop-end","toId":"c70ac671-cb87-c6a4-94eb-fec1260ade20","toProperty":"end"},{"fromId":"802af203-4ca5-25ce-ae28-5a3f8939344f","fromProperty":"fontColour","toId":"942b7088-84b6-1891-6846-73be39fecc2a","toProperty":"color"},{"fromId":"802af203-4ca5-25ce-ae28-5a3f8939344f","fromProperty":"backgroundColour","toId":"65c91246-abf5-788a-a17a-581cfdf24124","toProperty":"backgroundColor"},{"fromId":"5047e239-a5d4-deb6-4d51-e11503ccade2","fromProperty":"prop-start","toId":"41197707-3551-d5e3-1017-4d5d0d21967f","toProperty":"prop-clickedWordStart"},{"fromId":"65c91246-abf5-788a-a17a-581cfdf24124","fromProperty":"onClick","toId":"41197707-3551-d5e3-1017-4d5d0d21967f","toProperty":"store"},{"fromId":"65c91246-abf5-788a-a17a-581cfdf24124","fromProperty":"onClick","toId":"41197707-3551-d5e3-1017-4d5d0d21967f","toProperty":"prop-clickedWord"},{"fromId":"e9fcde63-5e0c-97a5-2576-cdbdbaa6b8fd","fromProperty":"at-default","toId":"942b7088-84b6-1891-6846-73be39fecc2a","toProperty":"mounted"},{"fromId":"942b7088-84b6-1891-6846-73be39fecc2a","fromProperty":"onClick","toId":"e9fcde63-5e0c-97a5-2576-cdbdbaa6b8fd","toProperty":"to-clicked"},{"fromId":"5047e239-a5d4-deb6-4d51-e11503ccade2","fromProperty":"prop-punctuated_word","toId":"be9ad897-a40b-1893-090d-4feb2e48f979","toProperty":"startValue"},{"fromId":"942b7088-84b6-1891-6846-73be39fecc2a","fromProperty":"boundingWidth","toId":"4dcb296c-8ffd-d7ea-f93c-7f5af39d0a49","toProperty":"width"},{"fromId":"4dcb296c-8ffd-d7ea-f93c-7f5af39d0a49","fromProperty":"result","toId":"be9ad897-a40b-1893-090d-4feb2e48f979","toProperty":"width"},{"fromId":"e9fcde63-5e0c-97a5-2576-cdbdbaa6b8fd","fromProperty":"at-clicked","toId":"3c970586-0777-f913-a94a-7f291f674c75","toProperty":"mounted"},{"fromId":"5ac16eed-930b-f62e-5540-90aa37eb3366","fromProperty":"Clicked","toId":"8daf001b-731c-a688-250e-a1a6c0247003","toProperty":"run"},{"fromId":"8daf001b-731c-a688-250e-a1a6c0247003","fromProperty":"out-Success","toId":"e9fcde63-5e0c-97a5-2576-cdbdbaa6b8fd","toProperty":"to-default"}],"roots":[{"id":"65c91246-abf5-788a-a17a-581cfdf24124","type":"Group","x":0,"y":0,"parameters":{"sizeMode":"contentSize","marginLeft":{"value":4,"unit":"px"},"cssClassName":"masonry-grid-item","flexDirection":"row"},"ports":[],"dynamicports":[],"children":[{"id":"942b7088-84b6-1891-6846-73be39fecc2a","type":"Text","parameters":{"sizeMode":"contentSize"},"ports":[],"dynamicports":[],"children":[]},{"id":"3c970586-0777-f913-a94a-7f291f674c75","type":"Group","parameters":{"flexDirection":"row"},"ports":[],"dynamicports":[],"children":[{"id":"be9ad897-a40b-1893-090d-4feb2e48f979","type":"net.noodl.controls.textinput","variant":"Standard input","parameters":{"sizeMode":"explicit","height":{"value":25,"unit":"px"},"useLabel":false,"paddingTop":{"value":4,"unit":"px"},"paddingBottom":{"value":4,"unit":"px"},"width":{"value":100,"unit":"px"}},"ports":[],"dynamicports":[],"children":[]},{"id":"5ac16eed-930b-f62e-5540-90aa37eb3366","type":"/Global visual components/Pretty icon","parameters":{"icon":{"class":"material-icons","code":"check","codeAsClass":false},"size":"25","align y":"center","background colour":"Hive purple","icon colour":"White"},"ports":[],"dynamicports":[],"children":[]}]}]},{"id":"5047e239-a5d4-deb6-4d51-e11503ccade2","type":"Model2","x":-243.5,"y":18,"parameters":{"idSource":"foreach","properties":"punctuated_word,start,end,confidence"},"ports":[],"dynamicports":[{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-punctuated_word","displayName":"punctuated_word","index":7},{"type":"signal","plug":"output","group":"Changed Events","displayName":"punctuated_word Changed","name":"changed-punctuated_word","index":8},{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-start","displayName":"start","index":9},{"type":"signal","plug":"output","group":"Changed Events","displayName":"start Changed","name":"changed-start","index":10},{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-end","displayName":"end","index":11},{"type":"signal","plug":"output","group":"Changed Events","displayName":"end Changed","name":"changed-end","index":12},{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-confidence","displayName":"confidence","index":13},{"type":"signal","plug":"output","group":"Changed Events","displayName":"confidence Changed","name":"changed-confidence","index":14}],"children":[]},{"id":"88440e9d-acab-8674-d61e-20a8a8bbabfa","type":"net.noodl.ParentComponentObject","x":-250,"y":291,"parameters":{"properties":"playbackPosition"},"ports":[],"dynamicports":[{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"value-playbackPosition","displayName":"playbackPosition","index":4},{"type":"signal","plug":"output","group":"Changed Events","displayName":"playbackPosition Changed","name":"changed-playbackPosition","index":5}],"children":[]},{"id":"802af203-4ca5-25ce-ae28-5a3f8939344f","type":"States","x":-465,"y":13,"parameters":{"states":"highlight,default","currentState":"default","values":"fontColour,backgroundColour","useTransitions":false,"type-fontColour":"color","type-backgroundColour":"color","value-highlight-fontColour":"#D18ED3","value-highlight-backgroundColour":"#00000019","value-default-fontColour":"Primary Light","value-default-backgroundColour":"transparent"},"ports":[],"dynamicports":[{"type":{"name":"color","allowConnectionsOnly":true},"plug":"output","group":"Values","name":"fontColour","index":6},{"type":{"name":"enum","enums":[{"label":"Number","value":"number"},{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Color","value":"color"},{"label":"Text Style","value":"textStyle"}],"allowEditOnly":true},"default":"number","plug":"input","group":"Types","displayName":"fontColour","name":"type-fontColour","index":7},{"type":{"name":"color","allowConnectionsOnly":true},"plug":"output","group":"Values","name":"backgroundColour","index":8},{"type":{"name":"enum","enums":[{"label":"Number","value":"number"},{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Color","value":"color"},{"label":"Text Style","value":"textStyle"}],"allowEditOnly":true},"default":"number","plug":"input","group":"Types","displayName":"backgroundColour","name":"type-backgroundColour","index":9},{"plug":"input","type":"color","group":"highlight Values","name":"value-highlight-fontColour","displayName":"fontColour","editorName":"highlight|fontColour","index":10},{"plug":"input","type":"color","group":"highlight Values","name":"value-highlight-backgroundColour","displayName":"backgroundColour","editorName":"highlight|backgroundColour","index":11},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To highlight","name":"to-highlight","group":"Go to state","index":12},{"plug":"output","type":"boolean","displayName":"At highlight","name":"at-highlight","group":"Current state","index":13},{"plug":"output","type":"signal","displayName":"Has Reached highlight","name":"reached-highlight","group":"Current state","index":14},{"plug":"input","type":"color","group":"default Values","name":"value-default-fontColour","displayName":"fontColour","editorName":"default|fontColour","index":15},{"plug":"input","type":"color","group":"default Values","name":"value-default-backgroundColour","displayName":"backgroundColour","editorName":"default|backgroundColour","index":16},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To default","name":"to-default","group":"Go to state","index":17},{"plug":"output","type":"boolean","displayName":"At default","name":"at-default","group":"Current state","index":18},{"plug":"output","type":"signal","displayName":"Has Reached default","name":"reached-default","group":"Current state","index":19},{"plug":"input","type":{"name":"enum","enums":["highlight","default"]},"group":"States","displayName":"State","name":"currentState","default":"highlight","index":20}],"children":[]},{"id":"c70ac671-cb87-c6a4-94eb-fec1260ade20","type":"Expression","x":-476,"y":249,"parameters":{"expression":"playbackPosition >= start && playbackPosition < end"},"ports":[],"dynamicports":[{"group":"Parameters","name":"playbackPosition","type":{"name":"*","editAsType":"string"},"plug":"input","index":7},{"group":"Parameters","name":"start","type":{"name":"*","editAsType":"string"},"plug":"input","index":8},{"group":"Parameters","name":"end","type":{"name":"*","editAsType":"string"},"plug":"input","index":9}],"children":[],"metadata":{"merge":{"soureCodePorts":["expression"]}}},{"id":"41197707-3551-d5e3-1017-4d5d0d21967f","type":"net.noodl.SetParentComponentObjectProperties","x":6.75,"y":-171,"parameters":{"properties":"clickedWordStart,clickedWord","type-clickedWordStart":"number"},"ports":[],"dynamicports":[{"type":{"name":"number"},"plug":"input","group":"Property Values","displayName":"clickedWordStart","name":"prop-clickedWordStart","index":3},{"type":{"name":"enum","enums":[{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Number","value":"number"},{"label":"Date","value":"date"},{"label":"Array","value":"array"},{"label":"Object","value":"object"},{"label":"Any","value":"*"}],"allowEditOnly":true},"plug":"input","group":"Property Types","displayName":"clickedWordStart","default":"*","name":"type-clickedWordStart","index":4},{"type":{"name":"*"},"plug":"input","group":"Property Values","displayName":"clickedWord","name":"prop-clickedWord","index":5},{"type":{"name":"enum","enums":[{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Number","value":"number"},{"label":"Date","value":"date"},{"label":"Array","value":"array"},{"label":"Object","value":"object"},{"label":"Any","value":"*"}],"allowEditOnly":true},"plug":"input","group":"Property Types","displayName":"clickedWord","default":"*","name":"type-clickedWord","index":6}],"children":[]},{"id":"e9fcde63-5e0c-97a5-2576-cdbdbaa6b8fd","type":"States","x":354.20833333333337,"y":133.66666666666669,"parameters":{"states":"clicked,default","currentState":"default"},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To clicked","name":"to-clicked","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At clicked","name":"at-clicked","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached clicked","name":"reached-clicked","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To default","name":"to-default","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At default","name":"at-default","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached default","name":"reached-default","group":"Current state","index":11},{"plug":"input","type":{"name":"enum","enums":["clicked","default"]},"group":"States","displayName":"State","name":"currentState","default":"clicked","index":12}],"children":[]},{"id":"4dcb296c-8ffd-d7ea-f93c-7f5af39d0a49","type":"Expression","x":-212.79166666666663,"y":152.66666666666669,"parameters":{"expression":"width + 30"},"ports":[],"dynamicports":[{"group":"Parameters","name":"width","type":{"name":"*","editAsType":"string"},"plug":"input","index":7}],"children":[],"metadata":{"merge":{"soureCodePorts":["expression"]}}},{"id":"8daf001b-731c-a688-250e-a1a6c0247003","type":"JavaScriptFunction","label":"Change word and raw JSON","x":358.70833333333337,"y":371.5416666666667,"parameters":{"functionScript":"// Set the word object to the new word value, then search the strings in Component Object transcriptionId (full transcript, sentence, paragraph) for the word (how to avoid duplicates??)\n\nOutputs.Success();"},"ports":[],"dynamicports":[{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":4}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}}],"visualRoots":["65c91246-abf5-788a-a17a-581cfdf24124"]}},{"name":"/#Pages/project/popup add video","id":"ab0adf11-f07a-226a-7824-22b82dcb17b5","graph":{"connections":[{"fromId":"6ec51214-13dd-cb08-99b8-ca21159b41a9","fromProperty":"close icon clicked","toId":"e47a0bb2-5ffd-ff2f-0945-3a71f98eddf2","toProperty":"close"}],"roots":[{"id":"6ec51214-13dd-cb08-99b8-ca21159b41a9","type":"/Global visual components/Popup template","x":-32.5,"y":-41.5,"parameters":{"popup title":"Add video","max width":{"value":760,"unit":"px"},"left button mounted":false,"right button mounted":false},"ports":[],"dynamicports":[],"children":[{"id":"29ed3229-777c-985e-03eb-ce5f539c78c4","type":"/#Pages/videos/Video library","parameters":{"showMenuItems":"// Here you add mappings between the properties of the item objects and the inputs of the components.\n// 'myComponentInput': 'myObjectProperty',\n// 'anotherComponentInput': function () { return object.get('someProperty') + ' ' + object.get('otherProp') }\n// These are the default mappings based on the selected template component.\nmap({\n\t'show menu item': () => false,\n\t'show add button': () => true\n})\n","padding top":{"value":0,"unit":"px"}},"ports":[],"dynamicports":[],"children":[],"metadata":{"merge":{"soureCodePorts":["showMenuItems"]}}}]},{"id":"e47a0bb2-5ffd-ff2f-0945-3a71f98eddf2","type":"NavigationClosePopup","x":199,"y":-42.5,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":["6ec51214-13dd-cb08-99b8-ca21159b41a9"]}},{"name":"/#Pages/project/video tab","id":"3d16ef14-b649-4c12-a4db-ec3112140a53","graph":{"connections":[{"fromId":"657eee36-60b4-51d7-8d8d-f937df1ba0ab","fromProperty":"prop-name","toId":"51d319f7-32cd-55f3-748b-3026914e278b","toProperty":"text"},{"fromId":"657eee36-60b4-51d7-8d8d-f937df1ba0ab","fromProperty":"id","toId":"75823748-e1e2-a5d1-efe4-f45c57611c95","toProperty":"value"},{"fromId":"3b531b84-f21b-9a38-b164-779508c99cbc","fromProperty":"onClick","toId":"75823748-e1e2-a5d1-efe4-f45c57611c95","toProperty":"do"}],"roots":[{"id":"3b531b84-f21b-9a38-b164-779508c99cbc","type":"Group","x":0,"y":0,"parameters":{"sizeMode":"explicit","width":{"value":190,"unit":"px"},"height":{"value":60,"unit":"px"},"clip":true,"borderTopLeftRadius":{"value":8,"unit":"px"},"borderTopRightRadius":{"value":8,"unit":"px"},"backgroundColor":"Hive header grey","paddingLeft":{"value":10,"unit":"px"},"paddingRight":{"value":10,"unit":"px"},"paddingTop":{"value":10,"unit":"px"},"paddingBottom":{"value":10,"unit":"px"},"styleCss":"/* background-color: red; */\ncursor: pointer;","flexDirection":"row"},"ports":[],"dynamicports":[],"children":[{"id":"51d319f7-32cd-55f3-748b-3026914e278b","type":"Text","parameters":{"sizeMode":"explicit","height":{"value":55,"unit":"px"},"width":{"value":140,"unit":"px"}},"ports":[],"dynamicports":[],"children":[]},{"id":"36da9711-7432-2c86-9121-b15e6ab9bf1b","type":"/Global visual components/Pretty icon","parameters":{"icon_name":"delete","size":"24","align y":"center"},"ports":[],"dynamicports":[],"children":[]}]},{"id":"657eee36-60b4-51d7-8d8d-f937df1ba0ab","type":"Model2","label":"Video","x":-261.75,"y":-10.5,"parameters":{"properties":"name","idSource":"foreach"},"ports":[],"dynamicports":[{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-name","displayName":"name","index":7},{"type":"signal","plug":"output","group":"Changed Events","displayName":"name Changed","name":"changed-name","index":8}],"children":[]},{"id":"75823748-e1e2-a5d1-efe4-f45c57611c95","type":"Set Variable","x":288.08333333333337,"y":42.83333333333334,"parameters":{"name":"projectSelectedVideo","setWith":"string"},"ports":[],"dynamicports":[{"type":"string","plug":"input","group":"General","name":"value","displayName":"Value","index":4}],"children":[]}],"visualRoots":["3b531b84-f21b-9a38-b164-779508c99cbc"]}},{"name":"/#Pages/projects","id":"5e1a7b43-3f44-24c1-9c4a-8e49e0ddd99a","graph":{"connections":[{"fromId":"57eacfba-8ec6-577e-67ee-92e4e3dcba5c","fromProperty":"items","toId":"e3b09297-9ead-7be8-d7c1-a4b254fc82d8","toProperty":"items"},{"fromId":"f5c2534c-eaa8-f01a-cb4c-157e492a9b0d","fromProperty":"Skip","toId":"57eacfba-8ec6-577e-67ee-92e4e3dcba5c","toProperty":"filterSkip"},{"fromId":"f5c2534c-eaa8-f01a-cb4c-157e492a9b0d","fromProperty":"Limit","toId":"57eacfba-8ec6-577e-67ee-92e4e3dcba5c","toProperty":"filterLimit"},{"fromId":"232ec806-29d4-455e-2264-4d3596b61dad","fromProperty":"onTextChanged","toId":"965c4580-36b6-be7d-322e-aabd8d3019d0","toProperty":"filterFilterValue-name"},{"fromId":"a20bd8c5-01b4-1f64-97cc-5915673406d4","fromProperty":"items","toId":"965c4580-36b6-be7d-322e-aabd8d3019d0","toProperty":"items"},{"fromId":"965c4580-36b6-be7d-322e-aabd8d3019d0","fromProperty":"items","toId":"57eacfba-8ec6-577e-67ee-92e4e3dcba5c","toProperty":"items"},{"fromId":"965c4580-36b6-be7d-322e-aabd8d3019d0","fromProperty":"count","toId":"f5c2534c-eaa8-f01a-cb4c-157e492a9b0d","toProperty":"Total Count"}],"roots":[{"id":"f9e4a4b9-fe41-1a81-d1d0-7342c53a4f9d","type":"Page","x":0,"y":0,"parameters":{},"ports":[],"dynamicports":[{"name":"title","displayName":"Title","type":"string","group":"General","plug":"input","default":"projects","index":31},{"name":"urlPath","displayName":"Url Path","type":"string","group":"General","plug":"input","default":"projects","index":32}],"children":[{"id":"e212d1b1-db7c-a812-e040-016a38c495d0","type":"Group","label":"Main container","parameters":{"backgroundColor":"Hive page grey"},"ports":[],"dynamicports":[],"children":[{"id":"7f7d3cd1-43ba-8f19-0705-02ed1876bb88","type":"Group","label":"Project list","parameters":{},"ports":[],"dynamicports":[],"children":[{"id":"232ec806-29d4-455e-2264-4d3596b61dad","type":"net.noodl.controls.textinput","parameters":{"useLabel":false,"placeholder":"Search...","useIcon":true,"iconIconSource":{"class":"material-icons","code":"search","codeAsClass":false}},"ports":[],"dynamicports":[],"children":[]},{"id":"e3b09297-9ead-7be8-d7c1-a4b254fc82d8","type":"For Each","parameters":{"template":"/#Pages/dashboard/Project tile"},"ports":[],"dynamicports":[{"name":"inputMappingScript","type":{"name":"string","codeeditor":"javascript"},"displayName":"Script","group":"Input Mapping","default":"// Here you add mappings between the properties of the item objects and the inputs of the components.\n// 'myComponentInput': 'myObjectProperty',\n// 'anotherComponentInput': function () { return object.get('someProperty') + ' ' + object.get('otherProp') }\n// These are the default mappings based on the selected template component.\nmap({\n})\n","plug":"input","index":6}],"children":[]},{"id":"f5c2534c-eaa8-f01a-cb4c-157e492a9b0d","type":"/Pages And Rows","parameters":{},"ports":[],"dynamicports":[],"children":[]}]}]}]},{"id":"9740f7a8-03ca-7050-0412-73a210f51ad3","type":"PageInputs","x":-100,"y":-50,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"a20bd8c5-01b4-1f64-97cc-5915673406d4","type":"Collection2","x":-605,"y":204,"parameters":{"collectionId":"allProjects"},"ports":[],"dynamicports":[],"children":[]},{"id":"57eacfba-8ec6-577e-67ee-92e4e3dcba5c","type":"Filter Collection","label":"Pagination","x":-188,"y":192,"parameters":{"filterEnableLimit":true,"filterFilterOp-name":"regex"},"ports":[],"dynamicports":[{"type":"boolean","plug":"input","group":"Limit","name":"filterEnableLimit","displayName":"Use limit","index":7},{"type":"number","default":10,"plug":"input","group":"Limit","name":"filterLimit","displayName":"Limit","index":8},{"type":"number","default":0,"plug":"input","group":"Limit","name":"filterSkip","displayName":"Skip","index":9},{"type":{"name":"stringlist","allowEditOnly":true},"plug":"input","group":"Filter","name":"filterFilter","displayName":"Filter","index":10},{"type":{"name":"stringlist","allowEditOnly":true},"plug":"input","group":"Sort","name":"filterSort","displayName":"Sort","index":11}],"children":[]},{"id":"965c4580-36b6-be7d-322e-aabd8d3019d0","type":"Filter Collection","label":"Search filter","x":-389,"y":208,"parameters":{"filterEnableLimit":true,"filterFilterOp-name":"regex","filterFilter":"name"},"ports":[],"dynamicports":[{"type":"boolean","plug":"input","group":"Limit","name":"filterEnableLimit","displayName":"Use limit","index":7},{"type":"number","default":10,"plug":"input","group":"Limit","name":"filterLimit","displayName":"Limit","index":8},{"type":"number","default":0,"plug":"input","group":"Limit","name":"filterSkip","displayName":"Skip","index":9},{"type":{"name":"stringlist","allowEditOnly":true},"plug":"input","group":"Filter","name":"filterFilter","displayName":"Filter","index":10},{"type":{"name":"stringlist","allowEditOnly":true},"plug":"input","group":"Sort","name":"filterSort","displayName":"Sort","index":11},{"type":{"name":"enum","enums":[{"value":"string","label":"String"},{"value":"number","label":"Number"},{"value":"boolean","label":"Boolean"}]},"default":"string","plug":"input","group":"name filter","displayName":"Type","editorName":"name filter | Type","name":"filterFilterType-name","index":12},{"type":{"name":"enum","enums":[{"value":"eq","label":"Equals"},{"value":"neq","label":"Not Equals"},{"value":"regex","label":"Matches RegEx"}]},"default":"eq","plug":"input","group":"name filter","displayName":"Op","editorName":"name filter| Op","name":"filterFilterOp-name","index":13},{"type":"boolean","default":false,"plug":"input","group":"name filter","displayName":"Case sensitive","editorName":"name filter| Case","name":"filterFilterOption-case-name","index":14},{"type":"string","plug":"input","group":"name filter","displayName":"Value","editorName":"name Filter Value","name":"filterFilterValue-name","index":15}],"children":[]}],"visualRoots":["f9e4a4b9-fe41-1a81-d1d0-7342c53a4f9d"]}},{"name":"/#Pages/videos","id":"46996fe3-0776-941a-9601-1578fbf612f5","graph":{"connections":[],"roots":[{"id":"dacb9e5d-f2fc-a4aa-91f7-13c7613f3937","type":"Page","x":0,"y":0,"parameters":{},"ports":[],"dynamicports":[{"name":"title","displayName":"Title","type":"string","group":"General","plug":"input","default":"videos","index":31},{"name":"urlPath","displayName":"Url Path","type":"string","group":"General","plug":"input","default":"videos","index":32}],"children":[{"id":"44625704-12de-b231-1ae2-bbf79ff684e0","type":"Group","label":"Main container","parameters":{"backgroundColor":"Hive page grey"},"ports":[],"dynamicports":[],"children":[{"id":"6808883d-addd-b618-cc5e-dee2f5056aad","type":"/#Pages/videos/Video library","parameters":{},"ports":[],"dynamicports":[],"children":[]}]}]},{"id":"1ac0007c-9543-820d-ab1a-70e40d637b0a","type":"PageInputs","x":-100,"y":-50,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":["dacb9e5d-f2fc-a4aa-91f7-13c7613f3937"]}},{"name":"/#Pages/videos/New video container","id":"87cf3391-04f7-2b01-166e-cd0d2204816e","graph":{"connections":[{"fromId":"51219d71-15f8-5e73-cb22-c118d1769eb9","fromProperty":"record ID","toId":"fe933154-bb1e-dba8-c226-e46a7bcdf331","toProperty":"in-mainVideoId"},{"fromId":"fe933154-bb1e-dba8-c226-e46a7bcdf331","fromProperty":"out-projectData","toId":"3ca16357-d814-0bc9-262c-0efdf91056a6","toProperty":"Data"},{"fromId":"ee37e8de-25ed-09b8-6d35-0dea12e77824","fromProperty":"onClick","toId":"3ca16357-d814-0bc9-262c-0efdf91056a6","toProperty":"Do"},{"fromId":"51219d71-15f8-5e73-cb22-c118d1769eb9","fromProperty":"record ID","toId":"87a5d42b-92f0-cc37-42b5-ff30cdff903a","toProperty":"mainId"},{"fromId":"87a5d42b-92f0-cc37-42b5-ff30cdff903a","fromProperty":"result","toId":"ee37e8de-25ed-09b8-6d35-0dea12e77824","toProperty":"enabled"},{"fromId":"3ca16357-d814-0bc9-262c-0efdf91056a6","fromProperty":"record ID","toId":"86e30623-63e4-4030-0e22-3352ba4b1833","toProperty":"pm-project"},{"fromId":"3ca16357-d814-0bc9-262c-0efdf91056a6","fromProperty":"Success","toId":"86e30623-63e4-4030-0e22-3352ba4b1833","toProperty":"navigate"},{"fromId":"98e8b643-aab0-1733-dac7-337534877132","fromProperty":"localBlob","toId":"f6f3c904-1b4f-d42d-de1b-2b1e8a65a88e","toProperty":"in-videoBlob"},{"fromId":"98e8b643-aab0-1733-dac7-337534877132","fromProperty":"fileData","toId":"10867600-d16c-f3f0-2ab2-43086d69525b","toProperty":"in-videoObject"},{"fromId":"f6f3c904-1b4f-d42d-de1b-2b1e8a65a88e","fromProperty":"out-duration","toId":"10867600-d16c-f3f0-2ab2-43086d69525b","toProperty":"in-length"},{"fromId":"10867600-d16c-f3f0-2ab2-43086d69525b","fromProperty":"out-videoObject","toId":"51219d71-15f8-5e73-cb22-c118d1769eb9","toProperty":"Data"},{"fromId":"98e8b643-aab0-1733-dac7-337534877132","fromProperty":"Success","toId":"f6f3c904-1b4f-d42d-de1b-2b1e8a65a88e","toProperty":"run"},{"fromId":"f6f3c904-1b4f-d42d-de1b-2b1e8a65a88e","fromProperty":"out-Success","toId":"10867600-d16c-f3f0-2ab2-43086d69525b","toProperty":"run"},{"fromId":"10867600-d16c-f3f0-2ab2-43086d69525b","fromProperty":"out-Success","toId":"51219d71-15f8-5e73-cb22-c118d1769eb9","toProperty":"Do"},{"fromId":"5a40b166-3008-81d2-7c8b-b7f3a6abc8ff","fromProperty":"prop-account","toId":"10867600-d16c-f3f0-2ab2-43086d69525b","toProperty":"in-accountId"},{"fromId":"5a40b166-3008-81d2-7c8b-b7f3a6abc8ff","fromProperty":"prop-account","toId":"fe933154-bb1e-dba8-c226-e46a7bcdf331","toProperty":"in-accountId"},{"fromId":"51219d71-15f8-5e73-cb22-c118d1769eb9","fromProperty":"record ID","toId":"d384396c-abdc-463f-a376-91abaf329cae","toProperty":"topic"},{"fromId":"51219d71-15f8-5e73-cb22-c118d1769eb9","fromProperty":"Success","toId":"d384396c-abdc-463f-a376-91abaf329cae","toProperty":"Send"},{"fromId":"51219d71-15f8-5e73-cb22-c118d1769eb9","fromProperty":"Success","toId":"d268fd30-08d5-3629-8b7a-399e0c9da364","toProperty":"run"}],"roots":[{"id":"6d4fc198-c022-a3a5-3570-7fb6839c6e4e","type":"Group","label":"New video container","x":-18.655875229150126,"y":102.07019546743184,"parameters":{"sizeMode":"contentSize"},"ports":[],"dynamicports":[],"children":[{"id":"4d9698a2-38d8-b8ef-7cae-b3719f97761a","type":"Group","label":"New video","parameters":{"flexDirection":"column"},"ports":[],"dynamicports":[],"children":[]},{"id":"98e8b643-aab0-1733-dac7-337534877132","type":"/Global visual components/File picker","parameters":{"align y":"center","align x":"left"},"ports":[],"dynamicports":[],"children":[]},{"id":"ee37e8de-25ed-09b8-6d35-0dea12e77824","type":"net.noodl.controls.button","parameters":{"label":"Next"},"ports":[],"dynamicports":[],"children":[]}]},{"id":"51219d71-15f8-5e73-cb22-c118d1769eb9","type":"/#Directus/Directus Prefab/Components/Data/Directus - Create Data","x":886.4909220880637,"y":180.7722430645676,"parameters":{"collection":"Video","SDK Client to use":"User SDK Client"},"ports":[],"dynamicports":[],"children":[]},{"id":"3ca16357-d814-0bc9-262c-0efdf91056a6","type":"/#Directus/Directus Prefab/Components/Data/Directus - Create Data","x":1030,"y":376,"parameters":{"collection":"Project","SDK Client to use":"User SDK Client"},"ports":[],"dynamicports":[],"children":[]},{"id":"fe933154-bb1e-dba8-c226-e46a7bcdf331","type":"JavaScriptFunction","label":"Generate project data","x":757,"y":371,"parameters":{"functionScript":"// Define the inputs\nconst mainVideoId = Inputs.mainVideoId || null;\nconst introId = Inputs.introId || null;\nconst outroId = Inputs.outroId || null;\nconst projectTitle = Inputs.projectTitle || \"Default\";\nconst projectBrief = Inputs.projectBrief || \"Default\";\nconst projectDeadline = Inputs.deadline || null;\nconst projectClient = Inputs.projectClient || null;\n\n// Initialize an empty array\nlet clips = []\nlet videos = [];\n\n// Check if the inputs are valid and if they are, add them to the array\nif (mainVideoId) videos.push({ \"Video_id\": mainVideoId });\nif (introId) videos.push({ \"id\": introId });\nif (outroId) videos.push({ \"id\": outroId });\n\nconst projectData = {\n  title: projectTitle,\n  brief: projectBrief,\n  deadline: projectDeadline,\n  client: projectClient,\n  hasVideos: videos,\n  hasClips: clips,\n  sharedAccounts: [ { \"Account_id\": Inputs.accountId } ]\n}\n\nOutputs.projectData = projectData;\nOutputs.Success();\n"},"ports":[],"dynamicports":[{"name":"in-mainVideoId","displayName":"mainVideoId","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-introId","displayName":"introId","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-outroId","displayName":"outroId","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-projectTitle","displayName":"projectTitle","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-projectBrief","displayName":"projectBrief","plug":"input","type":"*","group":"Inputs","index":8},{"name":"in-deadline","displayName":"deadline","plug":"input","type":"*","group":"Inputs","index":9},{"name":"in-projectClient","displayName":"projectClient","plug":"input","type":"*","group":"Inputs","index":10},{"name":"in-accountId","displayName":"accountId","plug":"input","type":"*","group":"Inputs","index":11},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":12},{"name":"out-projectData","displayName":"projectData","plug":"output","type":"*","group":"Outputs","index":13}],"children":[],"metadata":{"prompt":{"history":[{"content":"Take in 3 input ids and combine them into an array of ids of form { \"id\": intValue }","metadata":{"user":{"name":"Local","id":"local","email":""},"code":"// Define the inputs\nconst id1 = Inputs.Id1 || 0;\nconst id2 = Inputs.Id2 || 0;\nconst id3 = Inputs.Id3 || 0;\n\n// Check if the inputs are valid\nif (!id1 || !id2 || !id3) throw new Error('Invalid input');\n\ntry {\n  // Combine the inputs into an array\n  const ids = [\n    { \"id\": id1 },\n    { \"id\": id2 },\n    { \"id\": id3 }\n  ];\n\n  // Output the array\n  Outputs.IdArray = ids;\n  Outputs.Success();\n} catch (error) {\n  Outputs.error = error;\n  Outputs.Failure();\n}\n"},"snowflakeId":"019127f0dfbc-iz6ku6","type":"user"},{"type":"assistant","content":"\nThis function takes three inputs: <span style=\"color: var(--base-color-yellow-400);\">Inputs.Id1</span>, <span style=\"color: var(--base-color-yellow-400);\">Inputs.Id2</span>, and <span style=\"color: var(--base-color-yellow-400);\">Inputs.Id3</span>. It checks if these inputs are valid and if they are, it combines them into an array of objects. Each object in the array has a single property, \"id\", which is set to the value of the corresponding input. \n\nThe resulting array is then sent to the <span style=\"color: var(--base-color-yellow-400);\">Outputs.IdArray</span> output. If the function executes successfully, it triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Success</span> output signal.\n\nIf there is an error during the process, for example, if the inputs are not valid, the function outputs the error message to the <span style=\"color: var(--base-color-yellow-400);\">Outputs.error</span> output and triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Failure</span> output signal.\n","snowflakeId":"019127f1210d-npmnpk","metadata":{}},{"content":"There may only be one id. Can the script generate the array dynamically depending on which ids inputs are non null","metadata":{"user":{"name":"Local","id":"local","email":""},"code":"// Define the inputs\nconst id1 = Inputs.Id1 || null;\nconst id2 = Inputs.Id2 || null;\nconst id3 = Inputs.Id3 || null;\n\n// Initialize an empty array\nlet ids = [];\n\n// Check if the inputs are valid and if they are, add them to the array\nif (id1) ids.push({ \"id\": id1 });\nif (id2) ids.push({ \"id\": id2 });\nif (id3) ids.push({ \"id\": id3 });\n\n// If no valid id was found, throw an error\nif (ids.length === 0) {\n  Outputs.error = 'No valid id found';\n  Outputs.Failure();\n} else {\n  // Output the array\n  Outputs.IdArray = ids;\n  Outputs.Success();\n}\n"},"snowflakeId":"019127f2a0a6-nhlhbu","type":"user"},{"type":"assistant","content":"\nThis function generates an array of IDs based on the non-null inputs. \n\nIt takes three inputs: <span style=\"color: var(--base-color-yellow-400);\">Inputs.Id1</span>, <span style=\"color: var(--base-color-yellow-400);\">Inputs.Id2</span>, and <span style=\"color: var(--base-color-yellow-400);\">Inputs.Id3</span>. It checks each input and if it is not null, it adds it to the array. \n\nIf no valid ID is found (all inputs are null), it sets the <span style=\"color: var(--base-color-yellow-400);\">Outputs.error</span> output to 'No valid id found' and triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Failure</span> output signal. \n\nIf at least one valid ID is found, it sets the <span style=\"color: var(--base-color-yellow-400);\">Outputs.IdArray</span> output to the array of IDs and triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Success</span> output signal.\n","snowflakeId":"019127f2d40b-29wcd9","metadata":{}}],"metadata":{"templateId":"function"}},"AiAssistant":"old","merge":{"soureCodePorts":["functionScript"]}}},{"id":"87a5d42b-92f0-cc37-42b5-ff30cdff903a","type":"Expression","x":451.81071817201456,"y":350.039226878859,"parameters":{"expression":"mainId != \"\""},"ports":[],"dynamicports":[{"group":"Parameters","name":"mainId","type":{"name":"*","editAsType":"string"},"plug":"input","index":7}],"children":[],"metadata":{"merge":{"soureCodePorts":["expression"]}}},{"id":"86e30623-63e4-4030-0e22-3352ba4b1833","type":"RouterNavigate","label":"Go to video page","x":1291,"y":416,"parameters":{"router":"Main","target":"/#Pages/project"},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"component","title":"Choose page component","components":["/#Pages/connect","/#Pages/dashboard","/#Pages/my-account","/#Pages/clients","/#Pages/videos","/#Pages/project","/#Pages/experiment","/#Pages/projects","/#Pages/compositions"],"allowEditOnly":true},"group":"General","displayName":"Target Page","name":"target","index":3},{"name":"pm-project","displayName":"project","type":"string","plug":"input","group":"Parameters","index":4}],"children":[]},{"id":"f6f3c904-1b4f-d42d-de1b-2b1e8a65a88e","type":"JavaScriptFunction","label":"Get video duration","x":470.1363636363636,"y":68.22727272727275,"parameters":{"functionScript":"function getVideoDuration(videoBlob) {\n  return new Promise((resolve, reject) => {\n    const url = URL.createObjectURL(videoBlob);\n    const video = document.createElement('video');\n\n    video.src = url;\n    video.addEventListener('loadedmetadata', () => {\n      resolve(video.duration);\n      URL.revokeObjectURL(url);\n    });\n\n    video.onerror = () => {\n      reject('Failed to load video metadata.');\n    };\n  });\n}\n\nconst videoBlob = Inputs.videoBlob;\n\nif (!videoBlob) return;\n\ngetVideoDuration(videoBlob).then(duration => {\n  Outputs.duration = duration;\n  Outputs.Success();\n}).catch(console.error);\n"},"ports":[],"dynamicports":[{"name":"in-videoBlob","displayName":"videoBlob","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-duration","displayName":"duration","plug":"output","type":"*","group":"Outputs","index":6}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"10867600-d16c-f3f0-2ab2-43086d69525b","type":"JavaScriptFunction","label":"Append duration and type","x":667.7866854278623,"y":169.65518234401526,"parameters":{"functionScript":"const videoObject = Inputs.videoObject;\n\nif (!videoObject) return;\n\nOutputs.videoObject = {\n    ...videoObject,\n    type: \"main\",\n    length: Math.floor(Inputs.length),\n//    sharedAccounts: [ { \"Account_id\": { \"id\": Inputs.accountId } } ]\n    sharedAccounts: [ { \"Account_id\": Inputs.accountId }\n    ]\n}\nOutputs.Success();"},"ports":[],"dynamicports":[{"name":"in-videoObject","displayName":"videoObject","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-length","displayName":"length","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-accountId","displayName":"accountId","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-videoObject","displayName":"videoObject","plug":"output","type":"*","group":"Outputs","index":8}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"5a40b166-3008-81d2-7c8b-b7f3a6abc8ff","type":"Model2","x":792.2973181088447,"y":57.490455613885445,"parameters":{"modelId":"Current User","properties":"account"},"ports":[],"dynamicports":[{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-account","displayName":"account","index":7},{"type":"signal","plug":"output","group":"Changed Events","displayName":"account Changed","name":"changed-account","index":8}],"children":[]},{"id":"d384396c-abdc-463f-a376-91abaf329cae","type":"Send Message","x":1117.9866756967015,"y":216.09564572402917,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"d268fd30-08d5-3629-8b7a-399e0c9da364","type":"JavaScriptFunction","label":"Send API Call to n8n Endpoint","x":1117.5706875449218,"y":99.06706010314181,"parameters":{"functionScript":"const endpoint = Inputs.Endpoint || '';\nif (!endpoint) throw new Error('Invalid endpoint');\n\nconst apiKey = Inputs.ApiKey || '';\nif (!apiKey) throw new Error('Invalid API key');\n\nconst payload = {\n  data1: Inputs.Data1 || '',\n  data2: Inputs.Data2 || '',\n  data3: Inputs.Data3 || '',\n  // Add more data inputs as needed\n};\n\nconst url = `${endpoint}?apikey=${apiKey}`;\n\ntry {\n  const response = await fetch(url, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(payload),\n  });\n\n  if (!response.ok) throw new Error('Response not OK');\n\n  const data = await response.json();\n  Outputs.Response = data;\n  Outputs.Success();\n} catch (error) {\n  Outputs.error = error;\n  Outputs.Failure();\n}\n"},"ports":[],"dynamicports":[{"name":"in-Endpoint","displayName":"Endpoint","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-ApiKey","displayName":"ApiKey","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-Data1","displayName":"Data1","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-Data2","displayName":"Data2","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-Data3","displayName":"Data3","plug":"input","type":"*","group":"Inputs","index":8},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":9},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":10},{"name":"out-Response","displayName":"Response","plug":"output","type":"*","group":"Outputs","index":11},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":12}],"children":[],"metadata":{"prompt":{"history":[{"content":"Send an API call to an n8n endpoint with a payload made up of several generic inputs","metadata":{"user":{"name":"Local","id":"local","email":""},"code":"const endpoint = Inputs.Endpoint || '';\nif (!endpoint) throw new Error('Invalid endpoint');\n\nconst apiKey = Inputs.ApiKey || '';\nif (!apiKey) throw new Error('Invalid API key');\n\nconst payload = {\n  data1: Inputs.Data1 || '',\n  data2: Inputs.Data2 || '',\n  data3: Inputs.Data3 || '',\n  // Add more data inputs as needed\n};\n\nconst url = `${endpoint}?apikey=${apiKey}`;\n\ntry {\n  const response = await fetch(url, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(payload),\n  });\n\n  if (!response.ok) throw new Error('Response not OK');\n\n  const data = await response.json();\n  Outputs.Response = data;\n  Outputs.Success();\n} catch (error) {\n  Outputs.error = error;\n  Outputs.Failure();\n}\n"},"snowflakeId":"0191740be9ca-98eovj","type":"user"},{"type":"assistant","content":"\nThis function sends a POST request to an n8n endpoint with a JSON payload. The payload is constructed from the inputs <span style=\"color: var(--base-color-yellow-400);\">Inputs.Data1</span>, <span style=\"color: var(--base-color-yellow-400);\">Inputs.Data2</span>, and <span style=\"color: var(--base-color-yellow-400);\">Inputs.Data3</span>. \n\nThe function requires an <span style=\"color: var(--base-color-yellow-400);\">Inputs.Endpoint</span> and an <span style=\"color: var(--base-color-yellow-400);\">Inputs.ApiKey</span> to be provided. It constructs the URL for the request by appending the API key as a query parameter to the endpoint.\n\nIf the request is successful, the function parses the JSON response and sends it to the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Response</span> output. It also triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Success</span> signal.\n\nIf there's an error during the request, the function sends the error to the <span style=\"color: var(--base-color-yellow-400);\">Outputs.error</span> output and triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Failure</span> signal.\n","snowflakeId":"0191740c2151-xejolw","metadata":{}}],"metadata":{"templateId":"function"}},"AiAssistant":"old","merge":{"soureCodePorts":["functionScript"]}}},{"id":"77d8f471-e915-91b4-8f57-8c4a09d1ebe0","type":"Component Outputs","x":934.5722293946142,"y":604.6351021046934,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":["6d4fc198-c022-a3a5-3570-7fb6839c6e4e"]}},{"name":"/#Pages/videos/Popup new video","id":"a71d6d48-943c-582d-5384-0ed9fcdfdd8f","graph":{"connections":[{"fromId":"f54507de-9789-0e16-6141-07ec54ef7d1a","fromProperty":"close icon clicked","toId":"b54a0371-df6c-bfc8-bd67-b4f9d3a0f980","toProperty":"close"},{"fromId":"5013add9-858a-2081-c42c-dc5d7436131b","fromProperty":"record ID","toId":"d3057152-45f2-c923-dafd-d0abb804e95a","toProperty":"in-mainVideoId"},{"fromId":"d3057152-45f2-c923-dafd-d0abb804e95a","fromProperty":"out-projectData","toId":"d13c45e6-10e6-a1a0-055f-2899d4858181","toProperty":"Data"},{"fromId":"5013add9-858a-2081-c42c-dc5d7436131b","fromProperty":"record ID","toId":"bb5191d6-4c1c-b3c7-b294-408a5d32330c","toProperty":"mainId"},{"fromId":"d13c45e6-10e6-a1a0-055f-2899d4858181","fromProperty":"record ID","toId":"f6330609-5321-ca6e-a436-d41199b3acde","toProperty":"pm-project"},{"fromId":"d13c45e6-10e6-a1a0-055f-2899d4858181","fromProperty":"Success","toId":"f6330609-5321-ca6e-a436-d41199b3acde","toProperty":"navigate"},{"fromId":"e9c68c47-97a1-cf3d-d60b-b2603f56cbcd","fromProperty":"localBlob","toId":"7ddcc7f1-3e09-96dd-9504-661a98972dff","toProperty":"in-videoBlob"},{"fromId":"e9c68c47-97a1-cf3d-d60b-b2603f56cbcd","fromProperty":"fileData","toId":"8620355e-6cf6-7766-8ee3-ab16466db3be","toProperty":"in-videoObject"},{"fromId":"7ddcc7f1-3e09-96dd-9504-661a98972dff","fromProperty":"out-duration","toId":"8620355e-6cf6-7766-8ee3-ab16466db3be","toProperty":"in-length"},{"fromId":"8620355e-6cf6-7766-8ee3-ab16466db3be","fromProperty":"out-videoObject","toId":"5013add9-858a-2081-c42c-dc5d7436131b","toProperty":"Data"},{"fromId":"e9c68c47-97a1-cf3d-d60b-b2603f56cbcd","fromProperty":"Success","toId":"7ddcc7f1-3e09-96dd-9504-661a98972dff","toProperty":"run"},{"fromId":"7ddcc7f1-3e09-96dd-9504-661a98972dff","fromProperty":"out-Success","toId":"8620355e-6cf6-7766-8ee3-ab16466db3be","toProperty":"run"},{"fromId":"8620355e-6cf6-7766-8ee3-ab16466db3be","fromProperty":"out-Success","toId":"5013add9-858a-2081-c42c-dc5d7436131b","toProperty":"Do"},{"fromId":"80f87f4d-c42c-9a8b-7c72-3aa0e83d7ac6","fromProperty":"prop-account","toId":"8620355e-6cf6-7766-8ee3-ab16466db3be","toProperty":"in-accountId"},{"fromId":"80f87f4d-c42c-9a8b-7c72-3aa0e83d7ac6","fromProperty":"prop-account","toId":"d3057152-45f2-c923-dafd-d0abb804e95a","toProperty":"in-accountId"},{"fromId":"5013add9-858a-2081-c42c-dc5d7436131b","fromProperty":"record ID","toId":"f834d60f-c7f6-8791-c86e-8410d1381e2d","toProperty":"topic"},{"fromId":"5013add9-858a-2081-c42c-dc5d7436131b","fromProperty":"Success","toId":"f834d60f-c7f6-8791-c86e-8410d1381e2d","toProperty":"Send"},{"fromId":"5013add9-858a-2081-c42c-dc5d7436131b","fromProperty":"Success","toId":"956dbe13-65c5-2022-2dc3-1b87a9dfb4a2","toProperty":"run"}],"roots":[{"id":"f54507de-9789-0e16-6141-07ec54ef7d1a","type":"/Global visual components/Popup template","x":19.5,"y":-54.5,"parameters":{"popup title":"Upload video","max width":{"value":400,"unit":"px"}},"ports":[],"dynamicports":[],"children":[{"id":"e9c68c47-97a1-cf3d-d60b-b2603f56cbcd","type":"/Global visual components/File picker","parameters":{"align y":"center","align x":"center"},"ports":[],"dynamicports":[],"children":[]}]},{"id":"b54a0371-df6c-bfc8-bd67-b4f9d3a0f980","type":"NavigationClosePopup","x":294,"y":-21,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"5013add9-858a-2081-c42c-dc5d7436131b","type":"/#Directus/Directus Prefab/Components/Data/Directus - Create Data","x":698,"y":222,"parameters":{"collection":"Video","SDK Client to use":"User SDK Client"},"ports":[],"dynamicports":[],"children":[]},{"id":"d13c45e6-10e6-a1a0-055f-2899d4858181","type":"/#Directus/Directus Prefab/Components/Data/Directus - Create Data","x":841,"y":417,"parameters":{"collection":"Project","SDK Client to use":"User SDK Client"},"ports":[],"dynamicports":[],"children":[]},{"id":"d3057152-45f2-c923-dafd-d0abb804e95a","type":"JavaScriptFunction","label":"Generate project data","x":568,"y":412,"parameters":{"functionScript":"// Define the inputs\nconst mainVideoId = Inputs.mainVideoId || null;\nconst introId = Inputs.introId || null;\nconst outroId = Inputs.outroId || null;\nconst projectTitle = Inputs.projectTitle || \"Default\";\nconst projectBrief = Inputs.projectBrief || \"Default\";\nconst projectDeadline = Inputs.deadline || null;\nconst projectClient = Inputs.projectClient || null;\n\n// Initialize an empty array\nlet clips = []\nlet videos = [];\n\n// Check if the inputs are valid and if they are, add them to the array\nif (mainVideoId) videos.push({ \"Video_id\": mainVideoId });\nif (introId) videos.push({ \"id\": introId });\nif (outroId) videos.push({ \"id\": outroId });\n\nconst projectData = {\n  title: projectTitle,\n  brief: projectBrief,\n  deadline: projectDeadline,\n  client: projectClient,\n  hasVideos: videos,\n  hasClips: clips,\n  sharedAccounts: [ { \"Account_id\": Inputs.accountId } ]\n}\n\nOutputs.projectData = projectData;\nOutputs.Success();\n"},"ports":[],"dynamicports":[{"name":"in-mainVideoId","displayName":"mainVideoId","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-introId","displayName":"introId","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-outroId","displayName":"outroId","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-projectTitle","displayName":"projectTitle","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-projectBrief","displayName":"projectBrief","plug":"input","type":"*","group":"Inputs","index":8},{"name":"in-deadline","displayName":"deadline","plug":"input","type":"*","group":"Inputs","index":9},{"name":"in-projectClient","displayName":"projectClient","plug":"input","type":"*","group":"Inputs","index":10},{"name":"in-accountId","displayName":"accountId","plug":"input","type":"*","group":"Inputs","index":11},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":12},{"name":"out-projectData","displayName":"projectData","plug":"output","type":"*","group":"Outputs","index":13}],"children":[],"metadata":{"prompt":{"history":[{"content":"Take in 3 input ids and combine them into an array of ids of form { \"id\": intValue }","metadata":{"user":{"name":"Local","id":"local","email":""},"code":"// Define the inputs\nconst id1 = Inputs.Id1 || 0;\nconst id2 = Inputs.Id2 || 0;\nconst id3 = Inputs.Id3 || 0;\n\n// Check if the inputs are valid\nif (!id1 || !id2 || !id3) throw new Error('Invalid input');\n\ntry {\n  // Combine the inputs into an array\n  const ids = [\n    { \"id\": id1 },\n    { \"id\": id2 },\n    { \"id\": id3 }\n  ];\n\n  // Output the array\n  Outputs.IdArray = ids;\n  Outputs.Success();\n} catch (error) {\n  Outputs.error = error;\n  Outputs.Failure();\n}\n"},"snowflakeId":"019127f0dfbc-iz6ku6","type":"user"},{"type":"assistant","content":"\nThis function takes three inputs: <span style=\"color: var(--base-color-yellow-400);\">Inputs.Id1</span>, <span style=\"color: var(--base-color-yellow-400);\">Inputs.Id2</span>, and <span style=\"color: var(--base-color-yellow-400);\">Inputs.Id3</span>. It checks if these inputs are valid and if they are, it combines them into an array of objects. Each object in the array has a single property, \"id\", which is set to the value of the corresponding input. \n\nThe resulting array is then sent to the <span style=\"color: var(--base-color-yellow-400);\">Outputs.IdArray</span> output. If the function executes successfully, it triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Success</span> output signal.\n\nIf there is an error during the process, for example, if the inputs are not valid, the function outputs the error message to the <span style=\"color: var(--base-color-yellow-400);\">Outputs.error</span> output and triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Failure</span> output signal.\n","snowflakeId":"019127f1210d-npmnpk","metadata":{}},{"content":"There may only be one id. Can the script generate the array dynamically depending on which ids inputs are non null","metadata":{"user":{"name":"Local","id":"local","email":""},"code":"// Define the inputs\nconst id1 = Inputs.Id1 || null;\nconst id2 = Inputs.Id2 || null;\nconst id3 = Inputs.Id3 || null;\n\n// Initialize an empty array\nlet ids = [];\n\n// Check if the inputs are valid and if they are, add them to the array\nif (id1) ids.push({ \"id\": id1 });\nif (id2) ids.push({ \"id\": id2 });\nif (id3) ids.push({ \"id\": id3 });\n\n// If no valid id was found, throw an error\nif (ids.length === 0) {\n  Outputs.error = 'No valid id found';\n  Outputs.Failure();\n} else {\n  // Output the array\n  Outputs.IdArray = ids;\n  Outputs.Success();\n}\n"},"snowflakeId":"019127f2a0a6-nhlhbu","type":"user"},{"type":"assistant","content":"\nThis function generates an array of IDs based on the non-null inputs. \n\nIt takes three inputs: <span style=\"color: var(--base-color-yellow-400);\">Inputs.Id1</span>, <span style=\"color: var(--base-color-yellow-400);\">Inputs.Id2</span>, and <span style=\"color: var(--base-color-yellow-400);\">Inputs.Id3</span>. It checks each input and if it is not null, it adds it to the array. \n\nIf no valid ID is found (all inputs are null), it sets the <span style=\"color: var(--base-color-yellow-400);\">Outputs.error</span> output to 'No valid id found' and triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Failure</span> output signal. \n\nIf at least one valid ID is found, it sets the <span style=\"color: var(--base-color-yellow-400);\">Outputs.IdArray</span> output to the array of IDs and triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Success</span> output signal.\n","snowflakeId":"019127f2d40b-29wcd9","metadata":{}}],"metadata":{"templateId":"function"}},"AiAssistant":"old","merge":{"soureCodePorts":["functionScript"]}}},{"id":"bb5191d6-4c1c-b3c7-b294-408a5d32330c","type":"Expression","x":263,"y":391,"parameters":{"expression":"mainId != \"\""},"ports":[],"dynamicports":[{"group":"Parameters","name":"mainId","type":{"name":"*","editAsType":"string"},"plug":"input","index":7}],"children":[],"metadata":{"merge":{"soureCodePorts":["expression"]}}},{"id":"f6330609-5321-ca6e-a436-d41199b3acde","type":"RouterNavigate","label":"Go to video page","x":1102,"y":457,"parameters":{"router":"Main","target":"/#Pages/project"},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"component","title":"Choose page component","components":["/#Pages/connect","/#Pages/dashboard","/#Pages/my-account","/#Pages/clients","/#Pages/videos","/#Pages/project","/#Pages/experiment","/#Pages/projects","/#Pages/compositions"],"allowEditOnly":true},"group":"General","displayName":"Target Page","name":"target","index":3},{"name":"pm-project","displayName":"project","type":"string","plug":"input","group":"Parameters","index":4}],"children":[]},{"id":"7ddcc7f1-3e09-96dd-9504-661a98972dff","type":"JavaScriptFunction","label":"Get video duration","x":281,"y":109,"parameters":{"functionScript":"function getVideoDuration(videoBlob) {\n  return new Promise((resolve, reject) => {\n    const url = URL.createObjectURL(videoBlob);\n    const video = document.createElement('video');\n\n    video.src = url;\n    video.addEventListener('loadedmetadata', () => {\n      resolve(video.duration);\n      URL.revokeObjectURL(url);\n    });\n\n    video.onerror = () => {\n      reject('Failed to load video metadata.');\n    };\n  });\n}\n\nconst videoBlob = Inputs.videoBlob;\n\nif (!videoBlob) return;\n\ngetVideoDuration(videoBlob).then(duration => {\n  Outputs.duration = duration;\n  Outputs.Success();\n}).catch(console.error);\n"},"ports":[],"dynamicports":[{"name":"in-videoBlob","displayName":"videoBlob","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-duration","displayName":"duration","plug":"output","type":"*","group":"Outputs","index":6}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"8620355e-6cf6-7766-8ee3-ab16466db3be","type":"JavaScriptFunction","label":"Append duration and type","x":479,"y":211,"parameters":{"functionScript":"const videoObject = Inputs.videoObject;\n\nif (!videoObject) return;\n\nOutputs.videoObject = {\n    ...videoObject,\n    type: \"main\",\n    length: Math.floor(Inputs.length),\n//    sharedAccounts: [ { \"Account_id\": { \"id\": Inputs.accountId } } ]\n    sharedAccounts: [ { \"Account_id\": Inputs.accountId }\n    ]\n}\nOutputs.Success();"},"ports":[],"dynamicports":[{"name":"in-videoObject","displayName":"videoObject","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-length","displayName":"length","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-accountId","displayName":"accountId","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-videoObject","displayName":"videoObject","plug":"output","type":"*","group":"Outputs","index":8}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"80f87f4d-c42c-9a8b-7c72-3aa0e83d7ac6","type":"Model2","x":604,"y":99,"parameters":{"modelId":"Current User","properties":"account"},"ports":[],"dynamicports":[{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-account","displayName":"account","index":7},{"type":"signal","plug":"output","group":"Changed Events","displayName":"account Changed","name":"changed-account","index":8}],"children":[]},{"id":"f834d60f-c7f6-8791-c86e-8410d1381e2d","type":"Send Message","x":929,"y":257,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"956dbe13-65c5-2022-2dc3-1b87a9dfb4a2","type":"JavaScriptFunction","label":"Send API Call to n8n Endpoint","x":929,"y":140,"parameters":{"functionScript":"const endpoint = Inputs.Endpoint || '';\nif (!endpoint) throw new Error('Invalid endpoint');\n\nconst apiKey = Inputs.ApiKey || '';\nif (!apiKey) throw new Error('Invalid API key');\n\nconst payload = {\n  data1: Inputs.Data1 || '',\n  data2: Inputs.Data2 || '',\n  data3: Inputs.Data3 || '',\n  // Add more data inputs as needed\n};\n\nconst url = `${endpoint}?apikey=${apiKey}`;\n\ntry {\n  const response = await fetch(url, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(payload),\n  });\n\n  if (!response.ok) throw new Error('Response not OK');\n\n  const data = await response.json();\n  Outputs.Response = data;\n  Outputs.Success();\n} catch (error) {\n  Outputs.error = error;\n  Outputs.Failure();\n}\n"},"ports":[],"dynamicports":[{"name":"in-Endpoint","displayName":"Endpoint","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-ApiKey","displayName":"ApiKey","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-Data1","displayName":"Data1","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-Data2","displayName":"Data2","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-Data3","displayName":"Data3","plug":"input","type":"*","group":"Inputs","index":8},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":9},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":10},{"name":"out-Response","displayName":"Response","plug":"output","type":"*","group":"Outputs","index":11},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":12}],"children":[],"metadata":{"prompt":{"history":[{"content":"Send an API call to an n8n endpoint with a payload made up of several generic inputs","metadata":{"user":{"name":"Local","id":"local","email":""},"code":"const endpoint = Inputs.Endpoint || '';\nif (!endpoint) throw new Error('Invalid endpoint');\n\nconst apiKey = Inputs.ApiKey || '';\nif (!apiKey) throw new Error('Invalid API key');\n\nconst payload = {\n  data1: Inputs.Data1 || '',\n  data2: Inputs.Data2 || '',\n  data3: Inputs.Data3 || '',\n  // Add more data inputs as needed\n};\n\nconst url = `${endpoint}?apikey=${apiKey}`;\n\ntry {\n  const response = await fetch(url, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(payload),\n  });\n\n  if (!response.ok) throw new Error('Response not OK');\n\n  const data = await response.json();\n  Outputs.Response = data;\n  Outputs.Success();\n} catch (error) {\n  Outputs.error = error;\n  Outputs.Failure();\n}\n"},"snowflakeId":"0191740be9ca-98eovj","type":"user"},{"type":"assistant","content":"\nThis function sends a POST request to an n8n endpoint with a JSON payload. The payload is constructed from the inputs <span style=\"color: var(--base-color-yellow-400);\">Inputs.Data1</span>, <span style=\"color: var(--base-color-yellow-400);\">Inputs.Data2</span>, and <span style=\"color: var(--base-color-yellow-400);\">Inputs.Data3</span>. \n\nThe function requires an <span style=\"color: var(--base-color-yellow-400);\">Inputs.Endpoint</span> and an <span style=\"color: var(--base-color-yellow-400);\">Inputs.ApiKey</span> to be provided. It constructs the URL for the request by appending the API key as a query parameter to the endpoint.\n\nIf the request is successful, the function parses the JSON response and sends it to the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Response</span> output. It also triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Success</span> signal.\n\nIf there's an error during the request, the function sends the error to the <span style=\"color: var(--base-color-yellow-400);\">Outputs.error</span> output and triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Failure</span> signal.\n","snowflakeId":"0191740c2151-xejolw","metadata":{}}],"metadata":{"templateId":"function"}},"AiAssistant":"old","merge":{"soureCodePorts":["functionScript"]}}},{"id":"78ef2bd8-465b-8789-09cd-c53005c26176","type":"Component Outputs","x":780,"y":105,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":["f54507de-9789-0e16-6141-07ec54ef7d1a"]}},{"name":"/#Pages/videos/Video library","id":"91892c7b-002c-9e19-9422-3774c7d3d04a","graph":{"connections":[{"fromId":"d53df41d-89e2-7a39-ee55-943541f82d22","fromProperty":"items","toId":"bf508b18-4b81-1c75-1f91-8b2cc1fb6488","toProperty":"items"},{"fromId":"bf508b18-4b81-1c75-1f91-8b2cc1fb6488","fromProperty":"items","toId":"2733d171-db8e-6409-89cb-7e440d1d5a9a","toProperty":"items"},{"fromId":"d53df41d-89e2-7a39-ee55-943541f82d22","fromProperty":"count","toId":"650fe975-1c81-793c-a32e-ed17c149f708","toProperty":"value"},{"fromId":"650fe975-1c81-793c-a32e-ed17c149f708","fromProperty":"valueChanged","toId":"bf508b18-4b81-1c75-1f91-8b2cc1fb6488","toProperty":"filter"},{"fromId":"d53df41d-89e2-7a39-ee55-943541f82d22","fromProperty":"count","toId":"e5776d53-e3e4-ae67-433a-3c59e4d890e1","toProperty":"Total Count"},{"fromId":"e5776d53-e3e4-ae67-433a-3c59e4d890e1","fromProperty":"Skip","toId":"bf508b18-4b81-1c75-1f91-8b2cc1fb6488","toProperty":"filterSkip"},{"fromId":"e5776d53-e3e4-ae67-433a-3c59e4d890e1","fromProperty":"Limit","toId":"bf508b18-4b81-1c75-1f91-8b2cc1fb6488","toProperty":"filterLimit"},{"fromId":"413f8763-d057-9e8b-2e7c-27df3785f992","fromProperty":"onTextChanged","toId":"bf508b18-4b81-1c75-1f91-8b2cc1fb6488","toProperty":"filterFilterValue-name"},{"fromId":"413f8763-d057-9e8b-2e7c-27df3785f992","fromProperty":"textChanged","toId":"bf508b18-4b81-1c75-1f91-8b2cc1fb6488","toProperty":"filter"},{"fromId":"103cc302-bad1-b89e-83d3-f589af62996e","fromProperty":"showMenuItems","toId":"2733d171-db8e-6409-89cb-7e440d1d5a9a","toProperty":"inputMappingScript"},{"fromId":"103cc302-bad1-b89e-83d3-f589af62996e","fromProperty":"padding top","toId":"2b32064e-41d1-32f3-08a7-f038f21eef1a","toProperty":"paddingTop"}],"roots":[{"id":"2b32064e-41d1-32f3-08a7-f038f21eef1a","type":"Group","label":"Video library","x":412,"y":0,"parameters":{"paddingTop":{"value":40,"unit":"px"},"paddingLeft":{"value":40,"unit":"px"},"paddingRight":{"value":40,"unit":"px"},"paddingBottom":{"value":40,"unit":"px"},"rowGap":{"value":20,"unit":"px"}},"ports":[],"dynamicports":[],"children":[{"id":"413f8763-d057-9e8b-2e7c-27df3785f992","type":"net.noodl.controls.textinput","label":"Search bar","parameters":{"placeholder":"Search...","useLabel":false},"ports":[],"dynamicports":[],"children":[]},{"id":"b5307fd2-ac62-cb09-bcf6-6a236c65c0ec","type":"net.noodl.visual.columns","parameters":{"layoutString":"1 1 1 1 1","marginX":{"value":40,"unit":"px"},"marginY":{"value":40,"unit":"px"},"minWidth":{"value":320,"unit":"px"}},"ports":[],"dynamicports":[],"children":[{"id":"2733d171-db8e-6409-89cb-7e440d1d5a9a","type":"For Each","parameters":{"template":"/#Pages/dashboard/video tile","inputMappingScript":"// Here you add mappings between the properties of the item objects and the inputs of the components.\n// 'myComponentInput': 'myObjectProperty',\n// 'anotherComponentInput': function () { return object.get('someProperty') + ' ' + object.get('otherProp') }\n// These are the default mappings based on the selected template component.\nmap({\n\t'show menu item': () => true,\n\t'show add button': () => false\n})\n"},"ports":[],"dynamicports":[{"name":"inputMappingScript","type":{"name":"string","codeeditor":"javascript"},"displayName":"Script","group":"Input Mapping","default":"// Here you add mappings between the properties of the item objects and the inputs of the components.\n// 'myComponentInput': 'myObjectProperty',\n// 'anotherComponentInput': function () { return object.get('someProperty') + ' ' + object.get('otherProp') }\n// These are the default mappings based on the selected template component.\nmap({\n\t'show menu item': 'show menu item',\n\t'show add button': 'show add button',\n})\n","plug":"input","index":6}],"children":[]}]},{"id":"e5776d53-e3e4-ae67-433a-3c59e4d890e1","type":"/Pages And Rows","parameters":{"Options":"[5,20,50,100]"},"ports":[],"dynamicports":[],"children":[]}]},{"id":"d53df41d-89e2-7a39-ee55-943541f82d22","type":"Collection2","x":26,"y":226,"parameters":{"collectionId":"allVideos"},"ports":[],"dynamicports":[],"children":[]},{"id":"bf508b18-4b81-1c75-1f91-8b2cc1fb6488","type":"Filter Collection","x":214,"y":233,"parameters":{"filterSort":"date_created","filterSort-date_created":"descending","filterEnableLimit":true,"filterFilter":"name","filterFilterType-name":"string","filterFilterOp-name":"regex"},"ports":[],"dynamicports":[{"type":"boolean","plug":"input","group":"Limit","name":"filterEnableLimit","displayName":"Use limit","index":7},{"type":"number","default":10,"plug":"input","group":"Limit","name":"filterLimit","displayName":"Limit","index":8},{"type":"number","default":0,"plug":"input","group":"Limit","name":"filterSkip","displayName":"Skip","index":9},{"type":{"name":"stringlist","allowEditOnly":true},"plug":"input","group":"Filter","name":"filterFilter","displayName":"Filter","index":10},{"type":{"name":"stringlist","allowEditOnly":true},"plug":"input","group":"Sort","name":"filterSort","displayName":"Sort","index":11},{"type":{"name":"enum","enums":[{"value":"string","label":"String"},{"value":"number","label":"Number"},{"value":"boolean","label":"Boolean"}]},"default":"string","plug":"input","group":"name filter","displayName":"Type","editorName":"name filter | Type","name":"filterFilterType-name","index":12},{"type":{"name":"enum","enums":[{"value":"eq","label":"Equals"},{"value":"neq","label":"Not Equals"},{"value":"regex","label":"Matches RegEx"}]},"default":"eq","plug":"input","group":"name filter","displayName":"Op","editorName":"name filter| Op","name":"filterFilterOp-name","index":13},{"type":"boolean","default":false,"plug":"input","group":"name filter","displayName":"Case sensitive","editorName":"name filter| Case","name":"filterFilterOption-case-name","index":14},{"type":"string","plug":"input","group":"name filter","displayName":"Value","editorName":"name Filter Value","name":"filterFilterValue-name","index":15},{"type":{"name":"enum","enums":[{"value":"ascending","label":"Ascending"},{"value":"descending","label":"Descending"}]},"default":"ascending","plug":"input","group":"date_created sort","displayName":"Sort","editorName":"date_created sorting","name":"filterSort-date_created","index":16}],"children":[]},{"id":"650fe975-1c81-793c-a32e-ed17c149f708","type":"Value Changed","x":0,"y":106,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"103cc302-bad1-b89e-83d3-f589af62996e","type":"Component Inputs","x":-7.5,"y":-14.25,"parameters":{},"ports":[{"name":"showMenuItems","plug":"output","type":{"name":"*"},"index":1},{"name":"padding top","plug":"output","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]}],"visualRoots":["2b32064e-41d1-32f3-08a7-f038f21eef1a"]}},{"name":"/App","graph":{"connections":[{"fromId":"246f9453-a119-ac78-171e-3806cf596ecc","fromProperty":"didMount","toId":"44f02f3e-9bc7-51d1-8116-6fe31df56b86","toProperty":"Do"},{"fromId":"246f9453-a119-ac78-171e-3806cf596ecc","fromProperty":"didMount","toId":"8fe11d25-b588-c266-4eeb-a4c9f28b4bc8","toProperty":"Do"},{"fromId":"6cba386e-8b51-f4f5-5853-212245b4c32e","fromProperty":"prop-authenticated","toId":"5123bee8-2079-220c-64b9-92cb450e44de","toProperty":"authenticated"},{"fromId":"5123bee8-2079-220c-64b9-92cb450e44de","fromProperty":"isTrueEv","toId":"e71b24fd-633a-4219-8c0c-78e0b141e888","toProperty":"navigate"},{"fromId":"13c84929-158b-76a0-c908-c8b8ea6a4b97","fromProperty":"value","toId":"5123bee8-2079-220c-64b9-92cb450e44de","toProperty":"appMounted"}],"roots":[{"id":"246f9453-a119-ac78-171e-3806cf596ecc","type":"Group","x":-111.4681915301291,"y":311.4376377651178,"parameters":{"backgroundColor":"#FFFFFF","minHeight":{"value":100,"unit":"vh"}},"ports":[],"dynamicports":[],"children":[{"id":"53952126-61e8-792d-ab1e-8f7857bc64b6","type":"/Global visual components/Header","parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"a24a02ae-c1b8-1250-72c3-a1d48cbc9558","type":"Router","parameters":{"name":"Main","pages":{"routes":["/#Pages/connect","/#Pages/dashboard","/#Pages/my-account","/#Pages/clients","/#Pages/videos","/#Pages/project","/#Pages/experiment","/#Pages/projects","/#Pages/compositions"],"startPage":"/#Pages/dashboard"}},"ports":[],"dynamicports":[],"children":[]}]},{"id":"44f02f3e-9bc7-51d1-8116-6fe31df56b86","type":"/#Directus/Directus Prefab/Initial Set Up/Set up Directus - Option 1 (env)","x":134.03180846987084,"y":302.9376377651178,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"8fe11d25-b588-c266-4eeb-a4c9f28b4bc8","type":"/Global logical components/Preload queries","x":-355.21819153012916,"y":306.6876377651178,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"6cba386e-8b51-f4f5-5853-212245b4c32e","type":"Model2","x":-256.3848581967958,"y":192.35430443178444,"parameters":{"modelId":"Current User","properties":"authenticated"},"ports":[],"dynamicports":[{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-authenticated","displayName":"authenticated","index":7},{"type":"signal","plug":"output","group":"Changed Events","displayName":"authenticated Changed","name":"changed-authenticated","index":8}],"children":[]},{"id":"5123bee8-2079-220c-64b9-92cb450e44de","type":"Expression","x":-39.38485819679579,"y":142.35430443178444,"parameters":{"expression":"!authenticated && appMounted"},"ports":[],"dynamicports":[{"group":"Parameters","name":"authenticated","type":{"name":"*","editAsType":"string"},"plug":"input","index":7},{"group":"Parameters","name":"appMounted","type":{"name":"*","editAsType":"string"},"plug":"input","index":8}],"children":[],"metadata":{"merge":{"soureCodePorts":["expression"]}}},{"id":"e71b24fd-633a-4219-8c0c-78e0b141e888","type":"RouterNavigate","x":236.6151418032042,"y":205.35430443178444,"parameters":{"router":"Main","target":"/#Pages/connect"},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"component","title":"Choose page component","components":["/#Pages/connect","/#Pages/dashboard","/#Pages/my-account","/#Pages/clients","/#Pages/videos","/#Pages/project","/#Pages/experiment","/#Pages/projects","/#Pages/compositions"],"allowEditOnly":true},"group":"General","displayName":"Target Page","name":"target","index":3}],"children":[]},{"id":"13c84929-158b-76a0-c908-c8b8ea6a4b97","type":"Variable2","x":193.69847513653758,"y":88.68763776511776,"parameters":{"name":"Token Refresh Complete"},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":["246f9453-a119-ac78-171e-3806cf596ecc"]},"metadata":{"canvasSize":{"width":"1039px","height":"751px"},"canvasPos":{"x":0,"y":0}}},{"name":"/Global logical components/Append value to object","id":"c0cbff10-868b-bd1e-f021-867c2d06abd0","graph":{"connections":[{"fromId":"d4100c1f-ed2f-a0c8-f2a4-157bdd3a16e9","fromProperty":"object","toId":"ac97dbe7-a621-0efa-7389-f02d214e79e5","toProperty":"in-InputObject"},{"fromId":"d4100c1f-ed2f-a0c8-f2a4-157bdd3a16e9","fromProperty":"property","toId":"ac97dbe7-a621-0efa-7389-f02d214e79e5","toProperty":"in-property"},{"fromId":"d4100c1f-ed2f-a0c8-f2a4-157bdd3a16e9","fromProperty":"value","toId":"ac97dbe7-a621-0efa-7389-f02d214e79e5","toProperty":"in-value"},{"fromId":"ac97dbe7-a621-0efa-7389-f02d214e79e5","fromProperty":"out-OutputObject","toId":"55812d3f-3786-5104-7bec-289ca7307536","toProperty":"newObject"},{"fromId":"d4100c1f-ed2f-a0c8-f2a4-157bdd3a16e9","fromProperty":"Do","toId":"ac97dbe7-a621-0efa-7389-f02d214e79e5","toProperty":"run"},{"fromId":"ac97dbe7-a621-0efa-7389-f02d214e79e5","fromProperty":"out-Success","toId":"55812d3f-3786-5104-7bec-289ca7307536","toProperty":"Success"}],"roots":[{"id":"ac97dbe7-a621-0efa-7389-f02d214e79e5","type":"JavaScriptFunction","label":"Add Type to Object","x":0,"y":0,"parameters":{"functionScript":"const inputObject = Inputs.InputObject || {};\nconst value = Inputs.value || '';\nconst property = Inputs.property;\n\n// Append 'type' field to the input object\ninputObject[property] = value;\n\n// Output the new object\nOutputs.OutputObject = inputObject;\nOutputs.Success();\n","scriptInputs":[{"id":"gwi3","label":"value"},{"id":"q8m4","label":"property"}],"intype-value":"string","intype-property":"string"},"ports":[],"dynamicports":[{"name":"intype-value","displayName":"Type","editorName":"value | Type","plug":"input","type":{"name":"enum","enums":[{"value":"string","label":"String"},{"value":"boolean","label":"Boolean"},{"value":"number","label":"Number"},{"value":"object","label":"Object"},{"value":"date","label":"Date"},{"value":"array","label":"Array"},{"value":"color","label":"Color"}],"allowEditOnly":true},"default":"string","parent":"scriptInputs","parentItemId":"gwi3","index":4},{"name":"in-value","displayName":"value","plug":"input","type":"string","group":"Inputs","index":5},{"name":"intype-property","displayName":"Type","editorName":"property | Type","plug":"input","type":{"name":"enum","enums":[{"value":"string","label":"String"},{"value":"boolean","label":"Boolean"},{"value":"number","label":"Number"},{"value":"object","label":"Object"},{"value":"date","label":"Date"},{"value":"array","label":"Array"},{"value":"color","label":"Color"}],"allowEditOnly":true},"default":"string","parent":"scriptInputs","parentItemId":"q8m4","index":6},{"name":"in-property","displayName":"property","plug":"input","type":"string","group":"Inputs","index":7},{"name":"in-InputObject","displayName":"InputObject","plug":"input","type":"*","group":"Inputs","index":8},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":9},{"name":"out-OutputObject","displayName":"OutputObject","plug":"output","type":"*","group":"Outputs","index":10}],"children":[],"metadata":{"prompt":{"history":[{"content":"Take an input object and append a string field 'type' to it, then output the new object","metadata":{"user":{"name":"Local","id":"local","email":""},"code":"const inputObject = Inputs.InputObject || {};\nconst type = Inputs.Type || 'default';\n\n// Append 'type' field to the input object\ninputObject.type = type;\n\n// Output the new object\nOutputs.OutputObject = inputObject;\nOutputs.Success();\n"},"snowflakeId":"019127fbbf0e-3mtbgs","type":"user"},{"type":"assistant","content":"\nThis function takes an input object and a type string, appends the type string as a 'type' field to the input object, and outputs the new object.\n\nIt takes <span style=\"color: var(--base-color-yellow-400);\">Inputs.InputObject</span> and <span style=\"color: var(--base-color-yellow-400);\">Inputs.Type</span> as inputs. It then appends the 'type' field to the input object with the value of the Type input. If no Type input is provided, it defaults to 'default'.\n\nThe function then sets the <span style=\"color: var(--base-color-yellow-400);\">Outputs.OutputObject</span> to the new object with the appended 'type' field and triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Success</span> output signal.\n","snowflakeId":"019127fbd330-22nt97","metadata":{}}],"metadata":{"templateId":"function"}},"AiAssistant":"old","merge":{"soureCodePorts":["functionScript"]}}},{"id":"d4100c1f-ed2f-a0c8-f2a4-157bdd3a16e9","type":"Component Inputs","x":-291,"y":0.5,"parameters":{},"ports":[{"name":"object","plug":"output","type":{"name":"*"},"index":1},{"name":"property","plug":"output","type":{"name":"*"},"index":2},{"name":"value","plug":"output","type":{"name":"*"},"index":3},{"name":"Do","plug":"output","type":{"name":"*"},"index":4}],"dynamicports":[],"children":[]},{"id":"55812d3f-3786-5104-7bec-289ca7307536","type":"Component Outputs","x":243,"y":63.5,"parameters":{},"ports":[{"name":"newObject","plug":"input","type":{"name":"*"},"index":1},{"name":"Success","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]}],"visualRoots":[]}},{"name":"/Global logical components/Extract video thumbnail","id":"3dc1b73e-ffe3-a6b2-93a8-2d3b7550b450","graph":{"connections":[{"fromId":"22e922c9-526e-a2ed-b78e-6470ff0b883d","fromProperty":"localVideo","toId":"35c42d74-d01d-01e7-5992-8f01323c1dfd","toProperty":"in-VideoFile"},{"fromId":"22e922c9-526e-a2ed-b78e-6470ff0b883d","fromProperty":"videoUrl","toId":"35c42d74-d01d-01e7-5992-8f01323c1dfd","toProperty":"in-VideoUrl"},{"fromId":"35c42d74-d01d-01e7-5992-8f01323c1dfd","fromProperty":"out-ThumbnailImage","toId":"cf2ba75e-eccd-92e6-de80-434fd4a87138","toProperty":"imageBlob"}],"roots":[{"id":"35c42d74-d01d-01e7-5992-8f01323c1dfd","type":"JavaScriptFunction","label":"Output video thumbnail","x":0,"y":0,"parameters":{"functionScript":"const videoFile = Inputs.VideoFile;  // Noodl input for a local video file\nconst videoUrl = Inputs.VideoUrl || '';  // Noodl input for a remote video URL\n\nif (!videoFile && !videoUrl) {\n    Outputs.Failure();  // Fail if neither a file nor a URL is provided\n    return;\n}\n\ntry {\n    const videoElement = document.createElement('video');\n    const canvas = document.createElement('canvas');\n    const context = canvas.getContext('2d');\n\n    if (videoFile) {\n        // Handle local file\n        videoElement.src = URL.createObjectURL(videoFile);\n    } else if (videoUrl) {\n        // Handle remote URL\n        videoElement.src = videoUrl;\n        videoElement.crossOrigin = 'anonymous'; // Allow cross-origin access if needed\n    }\n\n    videoElement.addEventListener('loadeddata', () => {\n        // Seek to the middle of the video\n        videoElement.currentTime = videoElement.duration / 2;\n    });\n\n    videoElement.addEventListener('seeked', () => {\n        // Set canvas size to video dimensions\n        canvas.width = videoElement.videoWidth;\n        canvas.height = videoElement.videoHeight;\n\n        // Draw the video frame onto the canvas\n        context.drawImage(videoElement, 0, 0, videoElement.videoWidth, videoElement.videoHeight);\n\n        // Convert canvas to an image (base64 format)\n        const thumbnailImage = canvas.toDataURL('image/png');\n\n        // Output the thumbnail image\n        Outputs.ThumbnailImage = thumbnailImage;\n        Outputs.Success();  // Trigger Success signal\n    });\n\n    videoElement.addEventListener('error', () => {\n        Outputs.Failure();  // Handle video loading errors\n    });\n\n} catch (error) {\n    console.error(\"Error generating thumbnail:\", error);\n    Outputs.Failure();  // Trigger Failure signal\n}\n"},"ports":[],"dynamicports":[{"name":"in-VideoFile","displayName":"VideoFile","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-VideoUrl","displayName":"VideoUrl","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-ThumbnailImage","displayName":"ThumbnailImage","plug":"output","type":"*","group":"Outputs","index":8}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"22e922c9-526e-a2ed-b78e-6470ff0b883d","type":"Component Inputs","x":-250,"y":100,"parameters":{},"ports":[{"name":"localVideo","plug":"output","type":{"name":"*"},"index":0},{"name":"videoUrl","plug":"output","type":{"name":"*"},"index":1}],"dynamicports":[],"children":[]},{"id":"cf2ba75e-eccd-92e6-de80-434fd4a87138","type":"Component Outputs","x":259.5,"y":89,"parameters":{},"ports":[{"name":"imageBlob","plug":"input","type":{"name":"*"},"index":1}],"dynamicports":[],"children":[]}],"visualRoots":[]}},{"name":"/Global logical components/File upload script","id":"549c4090-2e67-2dd9-ccb4-e45c99b1c18c","graph":{"connections":[{"fromId":"a3f4a013-92e9-70a4-39b7-a332bce43f4e","fromProperty":"success","toId":"76205701-984e-0b70-5039-8016354f383e","toProperty":"run"},{"fromId":"a3f4a013-92e9-70a4-39b7-a332bce43f4e","fromProperty":"file","toId":"76205701-984e-0b70-5039-8016354f383e","toProperty":"in-File"},{"fromId":"12c1c68a-692d-b252-8ee7-3db599a4e975","fromProperty":"Open","toId":"a3f4a013-92e9-70a4-39b7-a332bce43f4e","toProperty":"open"},{"fromId":"76205701-984e-0b70-5039-8016354f383e","fromProperty":"out-Success","toId":"bef69651-ed1e-89de-0c46-7bc7100744d6","toProperty":"Success"},{"fromId":"76205701-984e-0b70-5039-8016354f383e","fromProperty":"out-error","toId":"bef69651-ed1e-89de-0c46-7bc7100744d6","toProperty":"error"},{"fromId":"76205701-984e-0b70-5039-8016354f383e","fromProperty":"out-fileData","toId":"bef69651-ed1e-89de-0c46-7bc7100744d6","toProperty":"fileData"},{"fromId":"76205701-984e-0b70-5039-8016354f383e","fromProperty":"out-Failure","toId":"bef69651-ed1e-89de-0c46-7bc7100744d6","toProperty":"Failure"},{"fromId":"76205701-984e-0b70-5039-8016354f383e","fromProperty":"out-progress","toId":"bef69651-ed1e-89de-0c46-7bc7100744d6","toProperty":"progress"},{"fromId":"a3f4a013-92e9-70a4-39b7-a332bce43f4e","fromProperty":"name","toId":"bef69651-ed1e-89de-0c46-7bc7100744d6","toProperty":"fileName"},{"fromId":"a3f4a013-92e9-70a4-39b7-a332bce43f4e","fromProperty":"sizeInBytes","toId":"bef69651-ed1e-89de-0c46-7bc7100744d6","toProperty":"fileSize"},{"fromId":"1e01708b-8ece-aca9-c1cd-9ec18edef705","fromProperty":"savedValue","toId":"bef69651-ed1e-89de-0c46-7bc7100744d6","toProperty":"progress"},{"fromId":"a3f4a013-92e9-70a4-39b7-a332bce43f4e","fromProperty":"file","toId":"bef69651-ed1e-89de-0c46-7bc7100744d6","toProperty":"localBlob"},{"fromId":"a3f4a013-92e9-70a4-39b7-a332bce43f4e","fromProperty":"success","toId":"4752e995-0476-7583-9521-9095874501cc","toProperty":"start"},{"fromId":"4752e995-0476-7583-9521-9095874501cc","fromProperty":"timerFinished","toId":"1e01708b-8ece-aca9-c1cd-9ec18edef705","toProperty":"saveValue"}],"roots":[{"id":"a3f4a013-92e9-70a4-39b7-a332bce43f4e","type":"Open File Picker","x":0,"y":11,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"76205701-984e-0b70-5039-8016354f383e","type":"JavaScriptFunction","label":"Upload Video to Azure Storage","x":236,"y":0,"parameters":{"functionScript":"const file = Inputs.File || null; // File from file picker node\nconst sasToken = Inputs.SasToken || 'sv=2022-11-02&ss=b&srt=sco&sp=rwdlaciytfx&se=2025-08-01T18:06:34Z&st=2024-08-05T10:06:34Z&spr=https,http&sig=U2aHk1OiRypOFtdXZBr9kYa%2F8X6xt0rnVwk5h%2FSruDA%3D'; // Shared Access Signature (SAS) token\nconst storageAccountName = Inputs.StorageAccountName || 'sacdnvhivedev002'; // Azure storage account name\nconst containerName = Inputs.ContainerName || 'hive-clip-noodl-storage'; // Azure storage container name\nconst companyId = Inputs.CompanyId || 'defaultCompanyId'; // Unique object ID for the company\n\nif (!file) throw new Error('No file provided');\nif (!sasToken) throw new Error('Invalid SAS token');\nif (!storageAccountName) throw new Error('Invalid storage account name');\nif (!containerName) throw new Error('Invalid container name');\nif (!companyId) throw new Error('Invalid company ID');\n\n// Generate a unique identifier, e.g., UUID\nconst uniqueId = generateUUID(); // Implement or import a function to generate a UUID\n\n// Construct a unique file name with company ID as the folder and unique ID as a prefix\nconst fileName = `${uniqueId}_${file.name}`; // e.g., 'd3b07384_document.pdf'\nconst filePath = `${companyId}/${fileName}`; // e.g., 'company123/d3b07384_document.pdf'\n\n// Construct the URL for the file in Azure Blob Storage\nconst fileUrl = `https://${storageAccountName}.blob.core.windows.net/${containerName}/${filePath}`;\nconst uploadUrl = `${fileUrl}?${sasToken}`;\n\ntry {\n  const xhr = new XMLHttpRequest();\n  xhr.open('PUT', uploadUrl, true);\n  xhr.setRequestHeader('x-ms-blob-type', 'BlockBlob');\n  xhr.setRequestHeader('Content-Type', file.type);\n\n  xhr.upload.onprogress = function (event) {\n    if (event.lengthComputable) {\n      const percentComplete = Math.round((event.loaded / event.total) * 100);\n      Outputs.progress = percentComplete; // Output the progress percentage\n    }\n  };\n\n  xhr.onload = function () {\n    if (xhr.status >= 200 && xhr.status < 300) {\n      // File successfully uploaded, return relevant data\n      const fileData = {\n        url: fileUrl, // URL to access the file\n        name: fileName, // Name of the uploaded file\n        storageAccount: storageAccountName, // Storage account name\n        container: containerName, // Container name\n      };\n\n      Outputs.fileData = fileData; // Store file data in Outputs for further use\n      Outputs.Success(); // Indicate success\n    } else {\n      Outputs.error = xhr.statusText || 'Upload failed';\n      Outputs.Failure(); // Indicate failure\n    }\n  };\n\n  xhr.onerror = function () {\n    Outputs.error = xhr.statusText || 'An error occurred';\n    Outputs.Failure(); // Indicate failure\n  };\n\n  xhr.send(file); // Send the file\n} catch (error) {\n  Outputs.error = error.message || 'An error occurred'; // Provide a meaningful error message\n  Outputs.Failure(); // Indicate failure\n}\n\n// Function to generate a UUID (placeholder implementation)\nfunction generateUUID() {\n  // Generate a random UUID (v4)\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    const r = (Math.random() * 16) | 0,\n      v = c === 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n"},"ports":[],"dynamicports":[{"name":"in-File","displayName":"File","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-SasToken","displayName":"SasToken","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-StorageAccountName","displayName":"StorageAccountName","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-ContainerName","displayName":"ContainerName","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-CompanyId","displayName":"CompanyId","plug":"input","type":"*","group":"Inputs","index":8},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":9},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":10},{"name":"out-progress","displayName":"progress","plug":"output","type":"*","group":"Outputs","index":11},{"name":"out-fileData","displayName":"fileData","plug":"output","type":"*","group":"Outputs","index":12},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":13}],"children":[],"metadata":{"prompt":{"history":[{"content":"Upload a video blob from a file picker node to an Azure storage account","metadata":{"user":{"name":"Local","id":"local","email":""},"code":"const file = Inputs.File || null; // File from file picker node\nconst sasToken = Inputs.SasToken || ''; // Shared Access Signature (SAS) token\nconst storageAccountName = Inputs.StorageAccountName || ''; // Azure storage account name\nconst containerName = Inputs.ContainerName || ''; // Azure storage container name\n\nif (!file) throw new Error('No file provided');\nif (!sasToken) throw new Error('Invalid SAS token');\nif (!storageAccountName) throw new Error('Invalid storage account name');\nif (!containerName) throw new Error('Invalid container name');\n\nconst url = `https://${storageAccountName}.blob.core.windows.net/${containerName}/${file.name}?${sasToken}`;\n\ntry {\n  const response = await fetch(url, {\n    method: 'PUT',\n    headers: {\n      'x-ms-blob-type': 'BlockBlob',\n      'Content-Type': file.type,\n    },\n    body: file,\n  });\n\n  if (!response.ok) {\n    throw new Error('Upload failed');\n  }\n\n  Outputs.Success();\n} catch (error) {\n  Outputs.error = error;\n  Outputs.Failure();\n}\n"},"snowflakeId":"019121fce2d2-getr8g","type":"user"},{"type":"assistant","content":"\nThis function uploads a video file to an Azure storage account. \n\nIt takes four inputs: <span style=\"color: var(--base-color-yellow-400);\">Inputs.File</span>, which is the file from a file picker node; <span style=\"color: var(--base-color-yellow-400);\">Inputs.SasToken</span>, which is the Shared Access Signature (SAS) token; <span style=\"color: var(--base-color-yellow-400);\">Inputs.StorageAccountName</span>, which is the name of the Azure storage account; and <span style=\"color: var(--base-color-yellow-400);\">Inputs.ContainerName</span>, which is the name of the Azure storage container.\n\nThe function constructs the URL for the Azure Blob Storage service and sends a PUT request to upload the file. If the upload is successful, it triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Success</span> output signal. If there's an error during the upload, it sets the <span style=\"color: var(--base-color-yellow-400);\">Outputs.error</span> output with the error message and triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Failure</span> output signal.\n","snowflakeId":"019121fd2127-dx1eaa","metadata":{}}],"metadata":{"templateId":"function"}},"AiAssistant":"old","merge":{"soureCodePorts":["functionScript"]}}},{"id":"12c1c68a-692d-b252-8ee7-3db599a4e975","type":"Component Inputs","x":-250,"y":100,"parameters":{},"ports":[{"name":"Open","plug":"output","type":{"name":"*"},"index":0}],"dynamicports":[],"children":[]},{"id":"bef69651-ed1e-89de-0c46-7bc7100744d6","type":"Component Outputs","x":486,"y":100,"parameters":{},"ports":[{"name":"Success","plug":"input","type":{"name":"*"},"index":0},{"name":"error","plug":"input","type":{"name":"*"},"index":1},{"name":"fileData","plug":"input","type":{"name":"*"},"index":2},{"name":"Failure","plug":"input","type":{"name":"*"},"index":3},{"name":"progress","plug":"input","type":{"name":"*"},"index":4},{"name":"fileName","plug":"input","type":{"name":"*"},"index":5},{"name":"fileSize","plug":"input","type":{"name":"*"},"index":6},{"name":"localBlob","plug":"input","type":{"name":"*"},"index":7}],"dynamicports":[],"children":[]},{"id":"24bc5171-7316-dc3a-49f1-f07358b2cb74","type":"JavaScriptFunction","label":"BACKUP 6-8-24","x":292,"y":-165,"parameters":{"functionScript":"const file = Inputs.File || null; // File from file picker node\nconst sasToken = Inputs.SasToken || 'sv=2022-11-02&ss=b&srt=sco&sp=rwdlaciytfx&se=2025-08-01T18:06:34Z&st=2024-08-05T10:06:34Z&spr=https,http&sig=U2aHk1OiRypOFtdXZBr9kYa%2F8X6xt0rnVwk5h%2FSruDA%3D'; // Shared Access Signature (SAS) token\nconst storageAccountName = Inputs.StorageAccountName || 'sacdnvhivedev002'; // Azure storage account name\nconst containerName = Inputs.ContainerName || 'hive-clip-noodl-storage'; // Azure storage container name\nconst companyId = Inputs.CompanyId || 'defaultCompanyId'; // Unique object ID for the company\n\nif (!file) throw new Error('No file provided');\nif (!sasToken) throw new Error('Invalid SAS token');\nif (!storageAccountName) throw new Error('Invalid storage account name');\nif (!containerName) throw new Error('Invalid container name');\nif (!companyId) throw new Error('Invalid company ID');\n\n// Generate a unique identifier, e.g., UUID\nconst uniqueId = generateUUID(); // Implement or import a function to generate a UUID\n\n// Construct a unique file name with company ID as the folder and unique ID as a prefix\nconst fileName = `${uniqueId}_${file.name}`; // e.g., 'd3b07384_document.pdf'\nconst filePath = `${companyId}/${fileName}`; // e.g., 'company123/d3b07384_document.pdf'\n\n// Construct the URL for the file in Azure Blob Storage\nconst fileUrl = `https://${storageAccountName}.blob.core.windows.net/${containerName}/${filePath}`;\nconst uploadUrl = `${fileUrl}?${sasToken}`;\n\ntry {\n  // Upload the file\n  const response = await fetch(uploadUrl, {\n    method: 'PUT',\n    headers: {\n      'x-ms-blob-type': 'BlockBlob',\n      'Content-Type': file.type,\n    },\n    body: file,\n  });\n\n  if (!response.ok) {\n    throw new Error('Upload failed');\n  }\n\n  // File successfully uploaded, return relevant data\n  const fileData = {\n    videoUrl: fileUrl, // URL to access the file\n    videoName: fileName, // Name of the uploaded file\n    storageAccount: storageAccountName, // Storage account name\n    container: containerName, // Container name\n  };\n\n  // Store or use fileData as needed, for example:\n  Outputs.fileData = fileData; // Store file data in Outputs for further use\n  Outputs.Success(); // Indicate success\n} catch (error) {\n  Outputs.error = error.message || 'An error occurred'; // Provide a meaningful error message\n  Outputs.Failure(); // Indicate failure\n}\n\n// Function to generate a UUID (placeholder implementation)\nfunction generateUUID() {\n  // Generate a random UUID (v4)\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    const r = (Math.random() * 16) | 0,\n      v = c === 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}"},"ports":[],"dynamicports":[{"name":"in-File","displayName":"File","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-SasToken","displayName":"SasToken","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-StorageAccountName","displayName":"StorageAccountName","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-ContainerName","displayName":"ContainerName","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-CompanyId","displayName":"CompanyId","plug":"input","type":"*","group":"Inputs","index":8},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":9},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":10},{"name":"out-fileData","displayName":"fileData","plug":"output","type":"*","group":"Outputs","index":11},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":12}],"children":[],"metadata":{"prompt":{"history":[{"content":"Upload a video blob from a file picker node to an Azure storage account","metadata":{"user":{"name":"Local","id":"local","email":""},"code":"const file = Inputs.File || null; // File from file picker node\nconst sasToken = Inputs.SasToken || ''; // Shared Access Signature (SAS) token\nconst storageAccountName = Inputs.StorageAccountName || ''; // Azure storage account name\nconst containerName = Inputs.ContainerName || ''; // Azure storage container name\n\nif (!file) throw new Error('No file provided');\nif (!sasToken) throw new Error('Invalid SAS token');\nif (!storageAccountName) throw new Error('Invalid storage account name');\nif (!containerName) throw new Error('Invalid container name');\n\nconst url = `https://${storageAccountName}.blob.core.windows.net/${containerName}/${file.name}?${sasToken}`;\n\ntry {\n  const response = await fetch(url, {\n    method: 'PUT',\n    headers: {\n      'x-ms-blob-type': 'BlockBlob',\n      'Content-Type': file.type,\n    },\n    body: file,\n  });\n\n  if (!response.ok) {\n    throw new Error('Upload failed');\n  }\n\n  Outputs.Success();\n} catch (error) {\n  Outputs.error = error;\n  Outputs.Failure();\n}\n"},"snowflakeId":"019121fce2d2-getr8g","type":"user"},{"type":"assistant","content":"\nThis function uploads a video file to an Azure storage account. \n\nIt takes four inputs: <span style=\"color: var(--base-color-yellow-400);\">Inputs.File</span>, which is the file from a file picker node; <span style=\"color: var(--base-color-yellow-400);\">Inputs.SasToken</span>, which is the Shared Access Signature (SAS) token; <span style=\"color: var(--base-color-yellow-400);\">Inputs.StorageAccountName</span>, which is the name of the Azure storage account; and <span style=\"color: var(--base-color-yellow-400);\">Inputs.ContainerName</span>, which is the name of the Azure storage container.\n\nThe function constructs the URL for the Azure Blob Storage service and sends a PUT request to upload the file. If the upload is successful, it triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Success</span> output signal. If there's an error during the upload, it sets the <span style=\"color: var(--base-color-yellow-400);\">Outputs.error</span> output with the error message and triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Failure</span> output signal.\n","snowflakeId":"019121fd2127-dx1eaa","metadata":{}}],"metadata":{"templateId":"function"}},"AiAssistant":"old","merge":{"soureCodePorts":["functionScript"]}}},{"id":"1e01708b-8ece-aca9-c1cd-9ec18edef705","type":"Number","label":"Reset progress counter","x":174.8,"y":213.3,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"4752e995-0476-7583-9521-9095874501cc","type":"Timer","x":-30.033333333333303,"y":237.88333333333333,"parameters":{"duration":500},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[]}},{"name":"/Global logical components/Generate Google icon object","id":"37bbd474-4e8d-1262-7bc8-82c226b43251","graph":{"connections":[{"fromId":"0edd1f18-d94b-872b-9642-1068251ac77d","fromProperty":"iconName","toId":"2dedfbec-084b-de53-48f2-39e453b36d91","toProperty":"in-iconName"},{"fromId":"2dedfbec-084b-de53-48f2-39e453b36d91","fromProperty":"out-iconObject","toId":"cbc8b566-768c-7508-e182-3235b8d66e32","toProperty":"iconObject"}],"roots":[{"id":"0edd1f18-d94b-872b-9642-1068251ac77d","type":"Component Inputs","x":-126,"y":-16,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"iconName","plug":"output","type":{"name":"*"},"index":1}],"dynamicports":[],"children":[]},{"id":"cbc8b566-768c-7508-e182-3235b8d66e32","type":"Component Outputs","x":300,"y":0,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1},{"name":"iconObject","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"2dedfbec-084b-de53-48f2-39e453b36d91","type":"JavaScriptFunction","label":"Format icon","x":91,"y":-17,"parameters":{"functionScript":"Outputs.iconObject = {\n    \"class\": \"material-icons\",\n    \"code\": Inputs.iconName // in your case you would pass \"thumbs_up\" to this function\n}","scriptInputs":[{"id":"86hq","label":"iconName"}]},"ports":[],"dynamicports":[{"name":"intype-iconName","displayName":"Type","editorName":"iconName | Type","plug":"input","type":{"name":"enum","enums":[{"value":"string","label":"String"},{"value":"boolean","label":"Boolean"},{"value":"number","label":"Number"},{"value":"object","label":"Object"},{"value":"date","label":"Date"},{"value":"array","label":"Array"},{"value":"color","label":"Color"}],"allowEditOnly":true},"default":"string","parent":"scriptInputs","parentItemId":"86hq","index":4},{"name":"in-iconName","displayName":"iconName","plug":"input","type":"string","group":"Inputs","index":5},{"name":"out-iconObject","displayName":"iconObject","plug":"output","type":"*","group":"Outputs","index":6}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}}],"visualRoots":[]}},{"name":"/Global logical components/Preload queries","id":"be5d6005-6267-225a-820b-bcdeb1010d18","graph":{"connections":[{"fromId":"af3bb453-c6f8-885d-dca3-d2e3fcf93146","fromProperty":"Do","toId":"f95ff81f-00a3-b8e1-90b2-b91f1b38f1c3","toProperty":"Do"},{"fromId":"65f1ee7b-d12a-e489-95e4-c700fc19cd78","fromProperty":"prop-authenticated","toId":"297456a4-523b-d341-186a-1a55066db5c7","toProperty":"authenticated"},{"fromId":"f95ff81f-00a3-b8e1-90b2-b91f1b38f1c3","fromProperty":"Success","toId":"b536dc42-f2d3-43e2-b8d4-8019558e98aa","toProperty":"Do"},{"fromId":"297456a4-523b-d341-186a-1a55066db5c7","fromProperty":"isTrueEv","toId":"b536dc42-f2d3-43e2-b8d4-8019558e98aa","toProperty":"Do"},{"fromId":"b536dc42-f2d3-43e2-b8d4-8019558e98aa","fromProperty":"result","toId":"566442f8-a2bf-c785-ad22-43ab5982cdf2","toProperty":"items"},{"fromId":"d3309764-b15a-42f8-c1b9-a51c38389aab","fromProperty":"result","toId":"71ea1bc7-3c56-e4c3-0af9-9989d9900dd7","toProperty":"items"},{"fromId":"297456a4-523b-d341-186a-1a55066db5c7","fromProperty":"isTrueEv","toId":"d3309764-b15a-42f8-c1b9-a51c38389aab","toProperty":"Do"}],"roots":[{"id":"af3bb453-c6f8-885d-dca3-d2e3fcf93146","type":"Component Inputs","x":-316,"y":-24,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0}],"dynamicports":[],"children":[]},{"id":"bf191bda-8e62-6a1a-caaa-d32aa0038940","type":"Component Outputs","x":527,"y":21,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1}],"dynamicports":[],"children":[]},{"id":"f95ff81f-00a3-b8e1-90b2-b91f1b38f1c3","type":"/#Directus/Directus Prefab/Components/User/Directus - Get Current User","x":-49.5,"y":-111,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"65f1ee7b-d12a-e489-95e4-c700fc19cd78","type":"Model2","x":-89.33333333333337,"y":31.333333333333343,"parameters":{"modelId":"Current User","properties":"authenticated"},"ports":[],"dynamicports":[{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-authenticated","displayName":"authenticated","index":7},{"type":"signal","plug":"output","group":"Changed Events","displayName":"authenticated Changed","name":"changed-authenticated","index":8}],"children":[]},{"id":"297456a4-523b-d341-186a-1a55066db5c7","type":"Expression","x":140.66666666666663,"y":25.333333333333343,"parameters":{"expression":"authenticated"},"ports":[],"dynamicports":[{"group":"Parameters","name":"authenticated","type":{"name":"*","editAsType":"string"},"plug":"input","index":7}],"children":[],"metadata":{"merge":{"soureCodePorts":["expression"]}}},{"id":"b536dc42-f2d3-43e2-b8d4-8019558e98aa","type":"/#Directus/Directus Prefab/Components/Data/Directus - Get Data","x":232.66666666666663,"y":-93.66666666666666,"parameters":{"collection":"Project","Item Get type":"Get Multiple by Filter","limit":99999,"fields":"id,name,brief,deadline,hasVideos.Video_id.id","Get all fields":false},"ports":[],"dynamicports":[],"children":[]},{"id":"566442f8-a2bf-c785-ad22-43ab5982cdf2","type":"Collection2","x":667.6785714285714,"y":-225.14285714285714,"parameters":{"collectionId":"allProjects"},"ports":[],"dynamicports":[],"children":[]},{"id":"71ea1bc7-3c56-e4c3-0af9-9989d9900dd7","type":"Collection2","x":661,"y":-92,"parameters":{"collectionId":"allVideos"},"ports":[],"dynamicports":[],"children":[]},{"id":"d3309764-b15a-42f8-c1b9-a51c38389aab","type":"/#Directus/Directus Prefab/Components/Data/Directus - Get Data","x":231,"y":-229,"parameters":{"collection":"Video","Item Get type":"Get Multiple by Filter","fields":"id,name,url,type,transcript.*,date_created,length","Get all fields":false,"sort":"date_created","limit":99999},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":[]}},{"name":"/Global visual components/Context menu","id":"6657454d-83dc-19b5-7bec-eb293f751659","graph":{"connections":[{"fromId":"c2e9d817-d9d8-0673-0a3b-c39c13a5d985","fromProperty":"this","toId":"e4371250-b794-0d3f-8258-c7002e37a747","toProperty":"in-This"},{"fromId":"c40cfb0b-dbcd-c770-5fee-fddaa47ab90e","fromProperty":"mounted","toId":"c2e9d817-d9d8-0673-0a3b-c39c13a5d985","toProperty":"mounted"},{"fromId":"74d4a855-d20a-1dbf-790b-3690bc065d13","fromProperty":"clicked","toId":"c40cfb0b-dbcd-c770-5fee-fddaa47ab90e","toProperty":"to-visible"},{"fromId":"e4371250-b794-0d3f-8258-c7002e37a747","fromProperty":"out-ClickedOutside","toId":"c40cfb0b-dbcd-c770-5fee-fddaa47ab90e","toProperty":"to-notVisible"},{"fromId":"74d4a855-d20a-1dbf-790b-3690bc065d13","fromProperty":"offset top","toId":"c2e9d817-d9d8-0673-0a3b-c39c13a5d985","toProperty":"marginTop"},{"fromId":"74d4a855-d20a-1dbf-790b-3690bc065d13","fromProperty":"offset bottom","toId":"c2e9d817-d9d8-0673-0a3b-c39c13a5d985","toProperty":"marginBottom"},{"fromId":"74d4a855-d20a-1dbf-790b-3690bc065d13","fromProperty":"offset left","toId":"c2e9d817-d9d8-0673-0a3b-c39c13a5d985","toProperty":"marginLeft"},{"fromId":"74d4a855-d20a-1dbf-790b-3690bc065d13","fromProperty":"offset right","toId":"c2e9d817-d9d8-0673-0a3b-c39c13a5d985","toProperty":"marginRight"},{"fromId":"11e033e1-fec3-83c6-09a4-48a1be7b6b88","fromProperty":"itemOutputSignal-clicked","toId":"c40cfb0b-dbcd-c770-5fee-fddaa47ab90e","toProperty":"to-notVisible"},{"fromId":"11e033e1-fec3-83c6-09a4-48a1be7b6b88","fromProperty":"itemOutput-itemClicked","toId":"fe3f38a7-006a-ac3d-621d-90971b979d65","toProperty":"itemId"},{"fromId":"11e033e1-fec3-83c6-09a4-48a1be7b6b88","fromProperty":"itemOutputSignal-clicked","toId":"fe3f38a7-006a-ac3d-621d-90971b979d65","toProperty":"itemClicked"},{"fromId":"74d4a855-d20a-1dbf-790b-3690bc065d13","fromProperty":"menuItems","toId":"aac29615-63e5-310f-d7b0-919631ad0ff6","toProperty":"items"},{"fromId":"aac29615-63e5-310f-d7b0-919631ad0ff6","fromProperty":"items","toId":"11e033e1-fec3-83c6-09a4-48a1be7b6b88","toProperty":"items"}],"roots":[{"id":"c2e9d817-d9d8-0673-0a3b-c39c13a5d985","type":"Group","x":393,"y":193,"parameters":{"position":"absolute","width":{"value":100,"unit":"px"},"sizeMode":"contentSize","alignX":"right","marginTop":{"value":30,"unit":"px"},"backgroundColor":"White","boxShadowEnabled":false,"boxShadowBlurRadius":{"value":4,"unit":"px"},"boxShadowColor":"#00000019","borderRadius":{"value":10,"unit":"px"},"paddingTop":{"value":20,"unit":"px"},"paddingLeft":{"value":30,"unit":"px"},"paddingRight":{"value":30,"unit":"px"},"paddingBottom":{"value":20,"unit":"px"},"rowGap":{"value":15,"unit":"px"},"zIndex":999,"styleCss":"/* background-color: red; */\n\nbox-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n","cssClassName":"animated"},"ports":[],"dynamicports":[],"children":[{"id":"6069fa22-2d2d-6e6d-cf91-2de577a48001","type":"Component Children","parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"11e033e1-fec3-83c6-09a4-48a1be7b6b88","type":"For Each","parameters":{"template":"/Global visual components/Context menu/Context menu item"},"ports":[],"dynamicports":[{"name":"itemOutputSignal-clicked","displayName":"clicked","type":"signal","plug":"output","group":"Item Signals","index":6},{"name":"itemOutput-itemClicked","displayName":"itemClicked","type":"*","plug":"output","group":"Item Outputs","index":7},{"name":"inputMappingScript","type":{"name":"string","codeeditor":"javascript"},"displayName":"Script","group":"Input Mapping","default":"// Here you add mappings between the properties of the item objects and the inputs of the components.\n// 'myComponentInput': 'myObjectProperty',\n// 'anotherComponentInput': function () { return object.get('someProperty') + ' ' + object.get('otherProp') }\n// These are the default mappings based on the selected template component.\nmap({\n})\n","plug":"input","index":8}],"children":[]}]},{"id":"74d4a855-d20a-1dbf-790b-3690bc065d13","type":"Component Inputs","x":115,"y":206,"parameters":{},"ports":[{"name":"menuItems","plug":"output","type":{"name":"*"},"index":1},{"name":"clicked","plug":"output","type":{"name":"*"},"index":2},{"name":"offset top","plug":"output","type":{"name":"*"},"index":3},{"name":"offset bottom","plug":"output","type":{"name":"*"},"index":4},{"name":"offset left","plug":"output","type":{"name":"*"},"index":5},{"name":"offset right","plug":"output","type":{"name":"*"},"index":6}],"dynamicports":[],"children":[]},{"id":"fe3f38a7-006a-ac3d-621d-90971b979d65","type":"Component Outputs","x":638,"y":223,"parameters":{},"ports":[{"name":"itemClicked","plug":"input","type":{"name":"*"},"index":1},{"name":"itemId","plug":"input","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"e4371250-b794-0d3f-8258-c7002e37a747","type":"JavaScriptFunction","label":"Detect user click outside group","x":635,"y":62,"parameters":{"functionScript":"document.addEventListener('click', function(event) {\n  const filtersPopunder = Inputs.This.getDOMElement();\n  if (filtersPopunder && !filtersPopunder.contains(event.target)) {\n    Outputs.ClickedOutside = true;\n\n    // Reset Outputs.ClickedOutside to false after 500 milliseconds\n    setTimeout(function() {\n      Outputs.ClickedOutside = false;\n    }, 500);\n  }\n});"},"ports":[],"dynamicports":[{"name":"in-This","displayName":"This","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-ClickedOutside","displayName":"ClickedOutside","plug":"output","type":"*","group":"Outputs","index":5}],"children":[],"metadata":{"prompt":{"history":[{"content":"When the user clicks outside the 'Filters popunder' group, the function outputs true\n","metadata":{"user":{"id":"b769f437-0f92-4325-8a22-572da312e722","email":"richard@digitalbricks.io","name":"Richard Osborne"},"code":"\ndocument.addEventListener('click', function(event) {\n  const filtersPopunder = document.querySelector('.filters-popunder');\n  if (filtersPopunder && !filtersPopunder.contains(event.target)) {\n    Outputs.ClickedOutside = true;\n  }\n});\n"},"snowflakeId":"0189279609eb-qyrn7l","type":"user"},{"type":"assistant","content":"This event listener listens for a click event on the document. It checks if the clicked element is not a child of the '.filters-popunder' element. If it is not, it sets the <span style=\"color: var(--base-color-yellow-400);\">Outputs.ClickedOutside</span> property to true","snowflakeId":"0189279616fe-k2usun","metadata":{}}],"metadata":{"templateId":"function"}},"AiAssistant":"old","merge":{"soureCodePorts":["functionScript"]}}},{"id":"c40cfb0b-dbcd-c770-5fee-fddaa47ab90e","type":"States","x":391,"y":70,"parameters":{"states":"visible,notVisible","currentState":"notVisible","values":"mounted","useTransitions":false,"type-mounted":"boolean","value-visible-mounted":true},"ports":[],"dynamicports":[{"type":{"name":"boolean","allowConnectionsOnly":true},"plug":"output","group":"Values","name":"mounted","index":6},{"type":{"name":"enum","enums":[{"label":"Number","value":"number"},{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Color","value":"color"},{"label":"Text Style","value":"textStyle"}],"allowEditOnly":true},"default":"number","plug":"input","group":"Types","displayName":"mounted","name":"type-mounted","index":7},{"plug":"input","type":"boolean","group":"visible Values","name":"value-visible-mounted","displayName":"mounted","editorName":"visible|mounted","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To visible","name":"to-visible","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At visible","name":"at-visible","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached visible","name":"reached-visible","group":"Current state","index":11},{"plug":"input","type":"boolean","group":"notVisible Values","name":"value-notVisible-mounted","displayName":"mounted","editorName":"notVisible|mounted","index":12},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To notVisible","name":"to-notVisible","group":"Go to state","index":13},{"plug":"output","type":"boolean","displayName":"At notVisible","name":"at-notVisible","group":"Current state","index":14},{"plug":"output","type":"signal","displayName":"Has Reached notVisible","name":"reached-notVisible","group":"Current state","index":15},{"plug":"input","type":{"name":"enum","enums":["visible","notVisible"]},"group":"States","displayName":"State","name":"currentState","default":"visible","index":16}],"children":[]},{"id":"aac29615-63e5-310f-d7b0-919631ad0ff6","type":"Collection2","x":91.89999999999998,"y":408.1,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"visualRoots":["c2e9d817-d9d8-0673-0a3b-c39c13a5d985"],"comments":[{"text":"Input array should be like:\n\n[\n{ \"itemText\": \"value\",\n  \"itemId\": \"value\",\n   \"textColour\": \"value\" }\n]","width":207,"height":155,"fill":true,"x":84,"y":12,"id":"1c6d54a1-c084-12f2-74ba-f59dbd729214"}]}},{"name":"/Global visual components/Context menu/Context menu item","id":"1a201397-badc-a9f8-320a-df561c8240e1","graph":{"connections":[{"fromId":"639fec7d-55d5-3093-f095-7261519f730a","fromProperty":"prop-itemText","toId":"e45b0d2a-692f-e4de-98e7-5a12730698ee","toProperty":"text"},{"fromId":"639fec7d-55d5-3093-f095-7261519f730a","fromProperty":"prop-textColour","toId":"e45b0d2a-692f-e4de-98e7-5a12730698ee","toProperty":"color"},{"fromId":"7b621af9-ad48-5ae8-b943-972ed4799e63","fromProperty":"result","toId":"c5a7c08f-5a06-bd42-c5f7-02fc55799a45","toProperty":"mounted"},{"fromId":"639fec7d-55d5-3093-f095-7261519f730a","fromProperty":"prop-itemIcon","toId":"7b621af9-ad48-5ae8-b943-972ed4799e63","toProperty":"icon"},{"fromId":"639fec7d-55d5-3093-f095-7261519f730a","fromProperty":"prop-itemIcon","toId":"6e9bf065-e8e6-7f55-856c-e791800e87bd","toProperty":"iconName"},{"fromId":"6e9bf065-e8e6-7f55-856c-e791800e87bd","fromProperty":"iconObject","toId":"c5a7c08f-5a06-bd42-c5f7-02fc55799a45","toProperty":"iconIconSource"},{"fromId":"11c11cc9-9de6-c690-4bce-9d28de9a4438","fromProperty":"onClick","toId":"fc2ad55c-f27d-e312-fdc4-1138961e932f","toProperty":"run"},{"fromId":"fc2ad55c-f27d-e312-fdc4-1138961e932f","fromProperty":"out-Success","toId":"e43e318f-5b90-7b4f-c779-5f7f27ee61be","toProperty":"clicked"},{"fromId":"fc2ad55c-f27d-e312-fdc4-1138961e932f","fromProperty":"out-itemClicked","toId":"e43e318f-5b90-7b4f-c779-5f7f27ee61be","toProperty":"itemClicked"},{"fromId":"639fec7d-55d5-3093-f095-7261519f730a","fromProperty":"prop-itemId","toId":"fc2ad55c-f27d-e312-fdc4-1138961e932f","toProperty":"in-itemClicked"}],"roots":[{"id":"11c11cc9-9de6-c690-4bce-9d28de9a4438","type":"Group","x":350,"y":21,"parameters":{"flexDirection":"row","columnGap":{"value":5,"unit":"px"},"styleCss":"/* background-color: red; */\ncursor: pointer;"},"ports":[],"dynamicports":[],"children":[{"id":"c5a7c08f-5a06-bd42-c5f7-02fc55799a45","type":"net.noodl.visual.icon","parameters":{"mounted":false,"alignY":"center","iconSize":{"value":24,"unit":"px"},"iconColor":"Grey - 700"},"ports":[],"dynamicports":[],"children":[]},{"id":"e45b0d2a-692f-e4de-98e7-5a12730698ee","type":"Text","label":"Menu item text","parameters":{},"ports":[],"dynamicports":[],"children":[]}]},{"id":"639fec7d-55d5-3093-f095-7261519f730a","type":"Model2","x":102,"y":48,"parameters":{"properties":"textColour,itemText,itemIcon,itemId","idSource":"foreach"},"ports":[],"dynamicports":[{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-textColour","displayName":"textColour","index":7},{"type":"signal","plug":"output","group":"Changed Events","displayName":"textColour Changed","name":"changed-textColour","index":8},{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-itemText","displayName":"itemText","index":9},{"type":"signal","plug":"output","group":"Changed Events","displayName":"itemText Changed","name":"changed-itemText","index":10},{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-itemIcon","displayName":"itemIcon","index":11},{"type":"signal","plug":"output","group":"Changed Events","displayName":"itemIcon Changed","name":"changed-itemIcon","index":12},{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-itemId","displayName":"itemId","index":13},{"type":"signal","plug":"output","group":"Changed Events","displayName":"itemId Changed","name":"changed-itemId","index":14}],"children":[]},{"id":"e43e318f-5b90-7b4f-c779-5f7f27ee61be","type":"Component Outputs","x":891,"y":130,"parameters":{},"ports":[{"name":"clicked","plug":"input","type":{"name":"*"},"index":1},{"name":"itemClicked","plug":"input","type":{"name":"*"},"index":3}],"dynamicports":[],"children":[]},{"id":"7b621af9-ad48-5ae8-b943-972ed4799e63","type":"Expression","x":112,"y":170,"parameters":{"expression":"icon"},"ports":[],"dynamicports":[{"group":"Parameters","name":"icon","type":{"name":"*","editAsType":"string"},"plug":"input","index":7}],"children":[],"metadata":{"merge":{"soureCodePorts":["expression"]}}},{"id":"6e9bf065-e8e6-7f55-856c-e791800e87bd","type":"/Global logical components/Generate Google icon object","x":107,"y":281,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"fc2ad55c-f27d-e312-fdc4-1138961e932f","type":"JavaScriptFunction","x":656,"y":145,"parameters":{"functionScript":"console.log(Inputs.itemClicked);\nif (!Inputs.itemClicked) return;\n\nconst itemClicked = Inputs.itemClicked;\n\nOutputs.itemClicked = itemClicked;\nOutputs.Success()"},"ports":[],"dynamicports":[{"name":"in-itemClicked","displayName":"itemClicked","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-itemClicked","displayName":"itemClicked","plug":"output","type":"*","group":"Outputs","index":6}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}}],"visualRoots":["11c11cc9-9de6-c690-4bce-9d28de9a4438"]}},{"name":"/Global visual components/File picker","id":"a25830d1-bbbb-d400-01fb-7a5e1d4f4b0a","graph":{"connections":[{"fromId":"3572809a-2ab3-991c-b9d6-e178c1dad138","fromProperty":"error","toId":"41c9cd82-7e13-96eb-47e8-2dcc50d99931","toProperty":"error"},{"fromId":"3572809a-2ab3-991c-b9d6-e178c1dad138","fromProperty":"Success","toId":"41c9cd82-7e13-96eb-47e8-2dcc50d99931","toProperty":"Success"},{"fromId":"3572809a-2ab3-991c-b9d6-e178c1dad138","fromProperty":"fileData","toId":"41c9cd82-7e13-96eb-47e8-2dcc50d99931","toProperty":"fileData"},{"fromId":"3572809a-2ab3-991c-b9d6-e178c1dad138","fromProperty":"Failure","toId":"41c9cd82-7e13-96eb-47e8-2dcc50d99931","toProperty":"Failure"},{"fromId":"f969ddb5-9b8f-9d68-1cca-dba45efad63b","fromProperty":"align x","toId":"11191ff5-578d-ee60-1567-deb1a48260dd","toProperty":"alignX"},{"fromId":"f969ddb5-9b8f-9d68-1cca-dba45efad63b","fromProperty":"align y","toId":"11191ff5-578d-ee60-1567-deb1a48260dd","toProperty":"alignY"},{"fromId":"3572809a-2ab3-991c-b9d6-e178c1dad138","fromProperty":"progress","toId":"41c9cd82-7e13-96eb-47e8-2dcc50d99931","toProperty":"progress"},{"fromId":"21271210-d700-5b27-8c37-3da5b77cf3e4","fromProperty":"isTrueEv","toId":"16b41337-e614-d5ac-2b80-dc54641ef98d","toProperty":"to-uploading"},{"fromId":"b305c110-e60a-b6d4-3baf-95b33367143e","fromProperty":"isTrueEv","toId":"16b41337-e614-d5ac-2b80-dc54641ef98d","toProperty":"to-complete"},{"fromId":"3d1b3c66-43c2-b6b3-6580-b6949be6b93a","fromProperty":"isTrueEv","toId":"16b41337-e614-d5ac-2b80-dc54641ef98d","toProperty":"to-idle"},{"fromId":"3572809a-2ab3-991c-b9d6-e178c1dad138","fromProperty":"progress","toId":"3d1b3c66-43c2-b6b3-6580-b6949be6b93a","toProperty":"progress"},{"fromId":"3572809a-2ab3-991c-b9d6-e178c1dad138","fromProperty":"progress","toId":"21271210-d700-5b27-8c37-3da5b77cf3e4","toProperty":"progress"},{"fromId":"3572809a-2ab3-991c-b9d6-e178c1dad138","fromProperty":"progress","toId":"b305c110-e60a-b6d4-3baf-95b33367143e","toProperty":"progress"},{"fromId":"16b41337-e614-d5ac-2b80-dc54641ef98d","fromProperty":"backgroundColour","toId":"11191ff5-578d-ee60-1567-deb1a48260dd","toProperty":"backgroundColor"},{"fromId":"16b41337-e614-d5ac-2b80-dc54641ef98d","fromProperty":"text","toId":"15df4675-0c47-23fe-aa5e-53b2d7c86229","toProperty":"text"},{"fromId":"16b41337-e614-d5ac-2b80-dc54641ef98d","fromProperty":"icon","toId":"ea857e75-d4ed-ecd8-20b1-e5055e978dfc","toProperty":"iconName"},{"fromId":"ea857e75-d4ed-ecd8-20b1-e5055e978dfc","fromProperty":"iconObject","toId":"d096911c-e4da-4bc1-f492-653604833802","toProperty":"icon"},{"fromId":"3572809a-2ab3-991c-b9d6-e178c1dad138","fromProperty":"fileSize","toId":"3ce4e43b-69ce-7f35-4eae-9a700e9d6c92","toProperty":"in-Bytes"},{"fromId":"3ce4e43b-69ce-7f35-4eae-9a700e9d6c92","fromProperty":"out-Megabytes","toId":"fd2a5789-f112-91b8-2359-9e8621988f21","toProperty":"fileSize"},{"fromId":"3572809a-2ab3-991c-b9d6-e178c1dad138","fromProperty":"fileName","toId":"fd2a5789-f112-91b8-2359-9e8621988f21","toProperty":"fileName"},{"fromId":"fd2a5789-f112-91b8-2359-9e8621988f21","fromProperty":"formatted","toId":"83643ac4-7723-e136-e74c-d8cf1748955e","toProperty":"text"},{"fromId":"3572809a-2ab3-991c-b9d6-e178c1dad138","fromProperty":"progress","toId":"30c28e20-d094-2694-1d8d-c2098071636d","toProperty":"percent"},{"fromId":"30c28e20-d094-2694-1d8d-c2098071636d","fromProperty":"formatted","toId":"16b41337-e614-d5ac-2b80-dc54641ef98d","toProperty":"value-uploading-text"},{"fromId":"16b41337-e614-d5ac-2b80-dc54641ef98d","fromProperty":"at-complete","toId":"a3c694ed-1053-0285-aa34-4c45cfe0047c","toProperty":"mounted"},{"fromId":"1bb8b5bb-aa6a-1105-b424-c3ffb3c2d6c3","fromProperty":"Clicked","toId":"16b41337-e614-d5ac-2b80-dc54641ef98d","toProperty":"to-idle"},{"fromId":"11191ff5-578d-ee60-1567-deb1a48260dd","fromProperty":"onClick","toId":"3572809a-2ab3-991c-b9d6-e178c1dad138","toProperty":"Open"},{"fromId":"3572809a-2ab3-991c-b9d6-e178c1dad138","fromProperty":"localBlob","toId":"41c9cd82-7e13-96eb-47e8-2dcc50d99931","toProperty":"localBlob"}],"roots":[{"id":"11191ff5-578d-ee60-1567-deb1a48260dd","type":"Group","x":0,"y":0,"parameters":{"sizeMode":"contentHeight","backgroundColor":"Grey - 200","borderRadius":{"value":6,"unit":"px"},"paddingTop":{"value":20,"unit":"px"},"paddingBottom":{"value":20,"unit":"px"},"paddingLeft":{"value":20,"unit":"px"},"paddingRight":{"value":20,"unit":"px"},"rowGap":{"value":10,"unit":"px"},"width":{"value":240,"unit":"px"},"styleCss":"/* background-color: red; */\ncursor: pointer;"},"ports":[],"dynamicports":[],"children":[{"id":"d096911c-e4da-4bc1-f492-653604833802","type":"/Global visual components/Pretty icon","parameters":{"align x":"center","icon_name":"cloud_upload","icon colour":"White","size":"32"},"ports":[],"dynamicports":[],"children":[]},{"id":"15df4675-0c47-23fe-aa5e-53b2d7c86229","type":"Text","parameters":{"text":"Click to upload your video","color":"Grey - 900","textAlignX":"center"},"ports":[],"dynamicports":[],"children":[]},{"id":"a3c694ed-1053-0285-aa34-4c45cfe0047c","type":"Group","parameters":{"flexDirection":"row","clip":true},"ports":[],"dynamicports":[],"children":[{"id":"83643ac4-7723-e136-e74c-d8cf1748955e","type":"Text","parameters":{"color":"Grey - 900","textAlignX":"center","sizeMode":"contentHeight","maxHeight":{"value":44,"unit":"px"}},"ports":[],"dynamicports":[],"children":[]},{"id":"1bb8b5bb-aa6a-1105-b424-c3ffb3c2d6c3","type":"/Global visual components/Pretty icon","parameters":{"icon":{"class":"material-icons","code":"delete_forever","codeAsClass":false}},"ports":[],"dynamicports":[],"children":[]}]}]},{"id":"3572809a-2ab3-991c-b9d6-e178c1dad138","type":"/Global logical components/File upload script","x":333.8473138286208,"y":-4.296418438161055,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"41c9cd82-7e13-96eb-47e8-2dcc50d99931","type":"Component Outputs","x":710.0605088611268,"y":72.37803959870493,"parameters":{},"ports":[{"name":"Success","plug":"input","type":{"name":"*"},"index":1},{"name":"Failure","plug":"input","type":{"name":"*"},"index":2},{"name":"fileData","plug":"input","type":{"name":"*"},"index":3},{"name":"error","plug":"input","type":{"name":"*"},"index":4},{"name":"progress","plug":"input","type":{"name":"*"},"index":5},{"name":"localBlob","plug":"input","type":{"name":"*"},"index":6}],"dynamicports":[],"children":[]},{"id":"f969ddb5-9b8f-9d68-1cca-dba45efad63b","type":"Component Inputs","x":-279,"y":53.83333333333333,"parameters":{},"ports":[{"name":"align x","plug":"output","type":{"name":"*"},"index":1},{"name":"align y","plug":"output","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"21271210-d700-5b27-8c37-3da5b77cf3e4","type":"Expression","x":41.58642789587748,"y":695.0665330946973,"parameters":{"expression":"progress > 0 && progress < 100"},"ports":[],"dynamicports":[{"group":"Parameters","name":"progress","type":{"name":"*","editAsType":"string"},"plug":"input","index":7}],"children":[],"metadata":{"merge":{"soureCodePorts":["expression"]}}},{"id":"16b41337-e614-d5ac-2b80-dc54641ef98d","type":"States","x":-277,"y":322.9583333333333,"parameters":{"states":"idle,uploading,complete","values":"text,icon,backgroundColour","type-text":"string","type-icon":"string","value-idle-text":"Click to upload your video","value-idle-icon":"upload_file","value-uploading-text":"Upload in progress...","value-uploading-icon":"pending","value-complete-icon":"task_alt","value-complete-text":"Upload complete","type-backgroundColour":"color","value-idle-backgroundColour":"Grey - 200","value-uploading-backgroundColour":"Grey - 300","value-complete-backgroundColour":"#49AD7F"},"ports":[],"dynamicports":[{"type":{"name":"string","allowConnectionsOnly":true},"plug":"output","group":"Values","name":"text","index":6},{"type":{"name":"enum","enums":[{"label":"Number","value":"number"},{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Color","value":"color"},{"label":"Text Style","value":"textStyle"}],"allowEditOnly":true},"default":"number","plug":"input","group":"Types","displayName":"text","name":"type-text","index":7},{"type":{"name":"string","allowConnectionsOnly":true},"plug":"output","group":"Values","name":"icon","index":8},{"type":{"name":"enum","enums":[{"label":"Number","value":"number"},{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Color","value":"color"},{"label":"Text Style","value":"textStyle"}],"allowEditOnly":true},"default":"number","plug":"input","group":"Types","displayName":"icon","name":"type-icon","index":9},{"type":{"name":"color","allowConnectionsOnly":true},"plug":"output","group":"Values","name":"backgroundColour","index":10},{"type":{"name":"enum","enums":[{"label":"Number","value":"number"},{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Color","value":"color"},{"label":"Text Style","value":"textStyle"}],"allowEditOnly":true},"default":"number","plug":"input","group":"Types","displayName":"backgroundColour","name":"type-backgroundColour","index":11},{"plug":"input","type":"string","group":"idle Values","name":"value-idle-text","displayName":"text","editorName":"idle|text","index":12},{"plug":"input","type":"string","group":"idle Values","name":"value-idle-icon","displayName":"icon","editorName":"idle|icon","index":13},{"plug":"input","type":"color","group":"idle Values","name":"value-idle-backgroundColour","displayName":"backgroundColour","editorName":"idle|backgroundColour","index":14},{"plug":"input","type":"curve","displayName":"Default","default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"idle Transitions","name":"transitiondef-idle","index":15},{"plug":"input","type":{"name":"curve"},"default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"idle Transitions","name":"transition-idle-backgroundColour","displayName":"backgroundColour","editorName":"Transition idle|backgroundColour","index":16},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To idle","name":"to-idle","group":"Go to state","index":17},{"plug":"output","type":"boolean","displayName":"At idle","name":"at-idle","group":"Current state","index":18},{"plug":"output","type":"signal","displayName":"Has Reached idle","name":"reached-idle","group":"Current state","index":19},{"plug":"input","type":"string","group":"uploading Values","name":"value-uploading-text","displayName":"text","editorName":"uploading|text","index":20},{"plug":"input","type":"string","group":"uploading Values","name":"value-uploading-icon","displayName":"icon","editorName":"uploading|icon","index":21},{"plug":"input","type":"color","group":"uploading Values","name":"value-uploading-backgroundColour","displayName":"backgroundColour","editorName":"uploading|backgroundColour","index":22},{"plug":"input","type":"curve","displayName":"Default","default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"uploading Transitions","name":"transitiondef-uploading","index":23},{"plug":"input","type":{"name":"curve"},"default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"uploading Transitions","name":"transition-uploading-backgroundColour","displayName":"backgroundColour","editorName":"Transition uploading|backgroundColour","index":24},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To uploading","name":"to-uploading","group":"Go to state","index":25},{"plug":"output","type":"boolean","displayName":"At uploading","name":"at-uploading","group":"Current state","index":26},{"plug":"output","type":"signal","displayName":"Has Reached uploading","name":"reached-uploading","group":"Current state","index":27},{"plug":"input","type":"string","group":"complete Values","name":"value-complete-text","displayName":"text","editorName":"complete|text","index":28},{"plug":"input","type":"string","group":"complete Values","name":"value-complete-icon","displayName":"icon","editorName":"complete|icon","index":29},{"plug":"input","type":"color","group":"complete Values","name":"value-complete-backgroundColour","displayName":"backgroundColour","editorName":"complete|backgroundColour","index":30},{"plug":"input","type":"curve","displayName":"Default","default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"complete Transitions","name":"transitiondef-complete","index":31},{"plug":"input","type":{"name":"curve"},"default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"complete Transitions","name":"transition-complete-backgroundColour","displayName":"backgroundColour","editorName":"Transition complete|backgroundColour","index":32},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To complete","name":"to-complete","group":"Go to state","index":33},{"plug":"output","type":"boolean","displayName":"At complete","name":"at-complete","group":"Current state","index":34},{"plug":"output","type":"signal","displayName":"Has Reached complete","name":"reached-complete","group":"Current state","index":35},{"plug":"input","type":{"name":"enum","enums":["idle","uploading","complete"]},"group":"States","displayName":"State","name":"currentState","default":"idle","index":36}],"children":[]},{"id":"b305c110-e60a-b6d4-3baf-95b33367143e","type":"Expression","x":39.58642789587748,"y":806.1081997613641,"parameters":{"expression":"progress === 100"},"ports":[],"dynamicports":[{"group":"Parameters","name":"progress","type":{"name":"*","editAsType":"string"},"plug":"input","index":7}],"children":[],"metadata":{"merge":{"soureCodePorts":["expression"]}}},{"id":"3d1b3c66-43c2-b6b3-6580-b6949be6b93a","type":"Expression","x":40.58642789587748,"y":590.1081997613641,"parameters":{"expression":"progress == 0"},"ports":[],"dynamicports":[{"group":"Parameters","name":"progress","type":{"name":"*","editAsType":"string"},"plug":"input","index":7}],"children":[],"metadata":{"merge":{"soureCodePorts":["expression"]}}},{"id":"ea857e75-d4ed-ecd8-20b1-e5055e978dfc","type":"/Global logical components/Generate Google icon object","x":-385,"y":173.95833333333331,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"fd2a5789-f112-91b8-2359-9e8621988f21","type":"String Format","x":316.2,"y":264.2666666666667,"parameters":{"format":"{fileName} - {fileSize}MB"},"ports":[],"dynamicports":[{"name":"fileName","type":"string","plug":"input","index":2},{"name":"fileSize","type":"string","plug":"input","index":3}],"children":[]},{"id":"3ce4e43b-69ce-7f35-4eae-9a700e9d6c92","type":"JavaScriptFunction","label":"Convert Bytes to Megabytes","x":619,"y":295,"parameters":{"functionScript":"const bytes = Inputs.Bytes || 0; // Get the input bytes, default to 0 if not provided\n\nif (bytes < 0) throw new Error('Invalid number of bytes'); // Throw an error if the number of bytes is negative\n\nconst megabytes = bytes / (1024 * 1024); // Convert bytes to megabytes\n\nconst roundedMegabytes = Math.round(megabytes * 100) / 100; // Round the result to 2 decimal places\n\nOutputs.Megabytes = roundedMegabytes; // Output the result\nOutputs.Success(); // Signal success\n"},"ports":[],"dynamicports":[{"name":"in-Bytes","displayName":"Bytes","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-Megabytes","displayName":"Megabytes","plug":"output","type":"*","group":"Outputs","index":6}],"children":[],"metadata":{"prompt":{"history":[{"content":"convert input number of bytes into MB ","metadata":{"user":{"name":"Local","id":"local","email":""},"code":"const bytes = Inputs.Bytes || 0; // Get the input bytes, default to 0 if not provided\n\nif (bytes < 0) throw new Error('Invalid number of bytes'); // Throw an error if the number of bytes is negative\n\nconst megabytes = bytes / (1024 * 1024); // Convert bytes to megabytes\n\nOutputs.Megabytes = megabytes; // Output the result\nOutputs.Success(); // Signal success\n"},"snowflakeId":"019127e35b55-2y4fm6","type":"user"},{"type":"assistant","content":"\nThis function converts a number of bytes into megabytes.\n\nIt takes <span style=\"color: var(--base-color-yellow-400);\">Inputs.Bytes</span> as an input, checks if the number of bytes is negative and throws an error if it is. Then, it converts the bytes into megabytes by dividing the number of bytes by 1024 twice (since 1 megabyte is 1024 kilobytes and 1 kilobyte is 1024 bytes).\n\nThe result is then set as the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Megabytes</span> output. Finally, it triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Success</span> output signal to indicate that the conversion was successful.\n","snowflakeId":"019127e37802-mu7t6n","metadata":{}},{"content":"Round the result to 2 decimal places","metadata":{"user":{"name":"Local","id":"local","email":""},"code":"const bytes = Inputs.Bytes || 0; // Get the input bytes, default to 0 if not provided\n\nif (bytes < 0) throw new Error('Invalid number of bytes'); // Throw an error if the number of bytes is negative\n\nconst megabytes = bytes / (1024 * 1024); // Convert bytes to megabytes\n\nconst roundedMegabytes = Math.round(megabytes * 100) / 100; // Round the result to 2 decimal places\n\nOutputs.Megabytes = roundedMegabytes; // Output the result\nOutputs.Success(); // Signal success\n"},"snowflakeId":"019127e41c82-et813z","type":"user"},{"type":"assistant","content":"\nThis function converts a given number of bytes into megabytes and rounds the result to two decimal places.\n\nIt takes <span style=\"color: var(--base-color-yellow-400);\">Inputs.Bytes</span> as an input, checks if the number of bytes is not negative, and then converts the bytes to megabytes. The result is then rounded to two decimal places.\n\nThe rounded result is then set as the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Megabytes</span> output. After the conversion and rounding process is completed successfully, it triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Success</span> output signal.\n","snowflakeId":"019127e44614-6d1wxy","metadata":{}}],"metadata":{"templateId":"function"}},"AiAssistant":"old","merge":{"soureCodePorts":["functionScript"]}}},{"id":"30c28e20-d094-2694-1d8d-c2098071636d","type":"String Format","x":-212.79999999999995,"y":603.225,"parameters":{"format":"Upload in progress... {percent}%"},"ports":[],"dynamicports":[{"name":"percent","type":"string","plug":"input","index":2}],"children":[]}],"visualRoots":["11191ff5-578d-ee60-1567-deb1a48260dd"]}},{"name":"/Global visual components/Header","id":"b2a3688b-0567-d117-69aa-236471052587","graph":{"connections":[{"fromId":"6f436b92-8f46-7f04-277b-e6bf6c8ef8b5","fromProperty":"Show menu","toId":"be4e39fd-d4e9-64ad-00bd-744d1be5a838","toProperty":"visible"},{"fromId":"35b1c1ee-4643-e453-dd71-1dfdec6acfd4","fromProperty":"clicked","toId":"fc40c6f6-2741-2686-d210-1211cc75f66b","toProperty":"navigate"},{"fromId":"73ccc4db-f46a-e985-b40f-db1937f58bc7","fromProperty":"clicked","toId":"9f8a4af0-ddec-7471-cdb3-32ff46d5215f","toProperty":"Do"},{"fromId":"9f8a4af0-ddec-7471-cdb3-32ff46d5215f","fromProperty":"Success","toId":"c72c3a27-90c0-b17b-1dae-3567a1ff3ebe","toProperty":"run"},{"fromId":"869c535c-28af-91d0-1d10-c913981bdda4","fromProperty":"this","toId":"82c1f83b-fb84-e881-aa54-e0f56d583a5c","toProperty":"in-This"},{"fromId":"dc085f9e-beef-b142-2ec8-330b00bfc192","fromProperty":"clicked","toId":"d0267b91-e6fa-25c0-aa8c-9b8024718370","toProperty":"flip"},{"fromId":"d0267b91-e6fa-25c0-aa8c-9b8024718370","fromProperty":"state","toId":"869c535c-28af-91d0-1d10-c913981bdda4","toProperty":"mounted"},{"fromId":"82c1f83b-fb84-e881-aa54-e0f56d583a5c","fromProperty":"out-ClickedOutside","toId":"d0267b91-e6fa-25c0-aa8c-9b8024718370","toProperty":"off"},{"fromId":"725518a5-560c-c4fc-ff4d-10ecef8aa2fd","fromProperty":"record ID","toId":"049e6cf4-91bc-c5da-29c6-478cb9f9b1dd","toProperty":"in-mainVideoId"},{"fromId":"049e6cf4-91bc-c5da-29c6-478cb9f9b1dd","fromProperty":"out-projectData","toId":"2fe612d6-012a-fc50-60fc-e897514474ca","toProperty":"Data"},{"fromId":"725518a5-560c-c4fc-ff4d-10ecef8aa2fd","fromProperty":"record ID","toId":"ef4cf083-179e-2265-3958-4431ccda8b44","toProperty":"mainId"},{"fromId":"2fe612d6-012a-fc50-60fc-e897514474ca","fromProperty":"record ID","toId":"cc4a559c-eadd-6571-1d86-0006bd01a748","toProperty":"pm-project"},{"fromId":"2fe612d6-012a-fc50-60fc-e897514474ca","fromProperty":"Success","toId":"cc4a559c-eadd-6571-1d86-0006bd01a748","toProperty":"navigate"},{"fromId":"c10795c8-32cf-cdad-07c1-60d7b5d0a56f","fromProperty":"out-duration","toId":"ec537466-2ac2-858e-e727-e1ceaa2b92e3","toProperty":"in-length"},{"fromId":"ec537466-2ac2-858e-e727-e1ceaa2b92e3","fromProperty":"out-videoObject","toId":"725518a5-560c-c4fc-ff4d-10ecef8aa2fd","toProperty":"Data"},{"fromId":"c10795c8-32cf-cdad-07c1-60d7b5d0a56f","fromProperty":"out-Success","toId":"ec537466-2ac2-858e-e727-e1ceaa2b92e3","toProperty":"run"},{"fromId":"ec537466-2ac2-858e-e727-e1ceaa2b92e3","fromProperty":"out-Success","toId":"725518a5-560c-c4fc-ff4d-10ecef8aa2fd","toProperty":"Do"},{"fromId":"29d76958-6916-37ce-5dbd-964432a73cc1","fromProperty":"prop-account","toId":"ec537466-2ac2-858e-e727-e1ceaa2b92e3","toProperty":"in-accountId"},{"fromId":"29d76958-6916-37ce-5dbd-964432a73cc1","fromProperty":"prop-account","toId":"049e6cf4-91bc-c5da-29c6-478cb9f9b1dd","toProperty":"in-accountId"},{"fromId":"725518a5-560c-c4fc-ff4d-10ecef8aa2fd","fromProperty":"record ID","toId":"538ea1a3-c79e-d465-6d03-438e42b30c6a","toProperty":"topic"},{"fromId":"725518a5-560c-c4fc-ff4d-10ecef8aa2fd","fromProperty":"Success","toId":"538ea1a3-c79e-d465-6d03-438e42b30c6a","toProperty":"Send"},{"fromId":"1ecb1bf6-dbe9-6385-340d-a6aa83e9f026","fromProperty":"Success","toId":"c10795c8-32cf-cdad-07c1-60d7b5d0a56f","toProperty":"run"},{"fromId":"1ecb1bf6-dbe9-6385-340d-a6aa83e9f026","fromProperty":"localBlob","toId":"c10795c8-32cf-cdad-07c1-60d7b5d0a56f","toProperty":"in-videoBlob"},{"fromId":"1ecb1bf6-dbe9-6385-340d-a6aa83e9f026","fromProperty":"fileData","toId":"ec537466-2ac2-858e-e727-e1ceaa2b92e3","toProperty":"in-videoObject"},{"fromId":"869de535-9673-3f1b-1654-285414a7298e","fromProperty":"formatted","toId":"44e1e201-93fd-ccec-741e-d878f0eb09b2","toProperty":"value-uploading-label"},{"fromId":"44e1e201-93fd-ccec-741e-d878f0eb09b2","fromProperty":"label","toId":"dc085f9e-beef-b142-2ec8-330b00bfc192","toProperty":"Label"},{"fromId":"1ecb1bf6-dbe9-6385-340d-a6aa83e9f026","fromProperty":"progress","toId":"869de535-9673-3f1b-1654-285414a7298e","toProperty":"percent"},{"fromId":"a9ba221d-80ab-1bf2-f641-91a406de9426","fromProperty":"isTrueEv","toId":"44e1e201-93fd-ccec-741e-d878f0eb09b2","toProperty":"to-uploading"},{"fromId":"a9ba221d-80ab-1bf2-f641-91a406de9426","fromProperty":"isFalseEv","toId":"44e1e201-93fd-ccec-741e-d878f0eb09b2","toProperty":"to-idle"},{"fromId":"1ecb1bf6-dbe9-6385-340d-a6aa83e9f026","fromProperty":"progress","toId":"a9ba221d-80ab-1bf2-f641-91a406de9426","toProperty":"progress"},{"fromId":"2118bae5-0d48-1acb-258f-34b7fb5481cc","fromProperty":"id","toId":"3b3eb7b1-8b77-11dc-da84-81bcf208bf30","toProperty":"modifyId"},{"fromId":"2118bae5-0d48-1acb-258f-34b7fb5481cc","fromProperty":"fetched","toId":"3b3eb7b1-8b77-11dc-da84-81bcf208bf30","toProperty":"add"},{"fromId":"725518a5-560c-c4fc-ff4d-10ecef8aa2fd","fromProperty":"result","toId":"2118bae5-0d48-1acb-258f-34b7fb5481cc","toProperty":"modelId"},{"fromId":"725518a5-560c-c4fc-ff4d-10ecef8aa2fd","fromProperty":"Success","toId":"2118bae5-0d48-1acb-258f-34b7fb5481cc","toProperty":"fetch"},{"fromId":"725518a5-560c-c4fc-ff4d-10ecef8aa2fd","fromProperty":"record ID","toId":"09a897ed-611d-61d1-083c-852ad4ae01a0","toProperty":"topic"},{"fromId":"2118bae5-0d48-1acb-258f-34b7fb5481cc","fromProperty":"id","toId":"7dafcb73-5168-806a-1163-2525d933b1e0","toProperty":"modelId"},{"fromId":"09a897ed-611d-61d1-083c-852ad4ae01a0","fromProperty":"payload-transcript","toId":"7dafcb73-5168-806a-1163-2525d933b1e0","toProperty":"prop-transcript"},{"fromId":"09a897ed-611d-61d1-083c-852ad4ae01a0","fromProperty":"messageReceived","toId":"7dafcb73-5168-806a-1163-2525d933b1e0","toProperty":"store"}],"roots":[{"id":"6f436b92-8f46-7f04-277b-e6bf6c8ef8b5","type":"Component Inputs","x":-281.5,"y":-13.5,"parameters":{},"ports":[{"name":"Show menu","plug":"output","type":{"name":"*"},"index":1}],"dynamicports":[],"children":[]},{"id":"534b4418-d04f-ea97-e271-558b83eed55b","type":"Group","label":"Header","x":0,"y":0,"parameters":{"height":{"value":80,"unit":"px"},"flexDirection":"row","justifyContent":"space-between","backgroundColor":"Hive header grey","paddingLeft":{"value":20,"unit":"px"},"paddingRight":{"value":20,"unit":"px"},"boxShadowEnabled":true,"boxShadowColor":"Hive purple","boxShadowOffsetY":{"value":4,"unit":"px"},"boxShadowInset":false,"zIndex":1,"boxShadowBlurRadius":{"value":24,"unit":"px"},"boxShadowSpreadRadius":{"value":-5,"unit":"px"}},"ports":[],"dynamicports":[],"children":[{"id":"be4e39fd-d4e9-64ad-00bd-744d1be5a838","type":"Group","label":"Left button menu","parameters":{"flexDirection":"row","sizeMode":"contentSize","columnGap":{"value":5,"unit":"px"},"alignY":"center"},"ports":[],"dynamicports":[],"children":[{"id":"35b1c1ee-4643-e453-dd71-1dfdec6acfd4","type":"/Global visual components/Icon button","parameters":{"Icon":{"class":"material-icons","code":"house","codeAsClass":false},"Label":"Dashboard"},"ports":[],"dynamicports":[],"children":[]},{"id":"d01c3d41-fec0-8ae2-193f-0d43471a78f1","type":"/Global visual components/Icon button","parameters":{"Icon":{"class":"material-icons","code":"person","codeAsClass":false},"Label":"Account"},"ports":[],"dynamicports":[],"children":[]},{"id":"f2d1f0ab-0769-84ca-fb2c-b8ec735d7302","type":"Group","parameters":{},"ports":[],"dynamicports":[],"children":[{"id":"dc085f9e-beef-b142-2ec8-330b00bfc192","type":"/Global visual components/Icon button","parameters":{"Icon":{"class":"material-icons","code":"cloud_upload","codeAsClass":false},"Label":"Upload video"},"ports":[],"dynamicports":[],"children":[]},{"id":"869c535c-28af-91d0-1d10-c913981bdda4","type":"Group","label":"Upload group","parameters":{"position":"absolute","width":{"value":300,"unit":"px"},"height":{"value":300,"unit":"px"},"marginTop":{"value":60,"unit":"px"},"backgroundColor":"Hive header grey","marginRight":{"value":0,"unit":"px"},"marginLeft":{"value":-70,"unit":"px"},"boxShadowEnabled":true,"boxShadowOffsetY":{"value":10,"unit":"px"},"boxShadowColor":"Hive purple","boxShadowBlurRadius":{"value":14,"unit":"px"},"boxShadowSpreadRadius":{"value":-5,"unit":"px"},"sizeMode":"contentHeight","paddingTop":{"value":40,"unit":"px"},"paddingBottom":{"value":40,"unit":"px"}},"ports":[],"dynamicports":[],"children":[{"id":"1ecb1bf6-dbe9-6385-340d-a6aa83e9f026","type":"/Global visual components/File picker","parameters":{"align y":"center","align x":"center"},"ports":[],"dynamicports":[],"children":[]}]}]},{"id":"73ccc4db-f46a-e985-b40f-db1937f58bc7","type":"/Global visual components/Icon button","parameters":{"Icon":{"class":"material-icons","code":"logout","codeAsClass":false},"Label":"Log out"},"ports":[],"dynamicports":[],"children":[]}]},{"id":"18339c22-24d0-269d-3fda-cf07e9f30828","type":"Group","label":"Logo group","parameters":{"sizeMode":"explicit","height":{"value":80,"unit":"px"},"width":{"value":180,"unit":"px"}},"ports":[],"dynamicports":[],"children":[{"id":"7351088c-ece7-07d0-3b9c-a89d8b9f6771","type":"Image","parameters":{"src":"media/visualHiveLogo.png","sizeMode":"explicit","objectFit":"contain"},"ports":[],"dynamicports":[],"children":[]}]}]},{"id":"fc40c6f6-2741-2686-d210-1211cc75f66b","type":"RouterNavigate","x":317.25,"y":173.25,"parameters":{"router":"Main","target":"/#Pages/dashboard"},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"component","title":"Choose page component","components":["/#Pages/connect","/#Pages/dashboard","/#Pages/my-account","/#Pages/clients","/#Pages/videos","/#Pages/project","/#Pages/experiment","/#Pages/projects","/#Pages/compositions"],"allowEditOnly":true},"group":"General","displayName":"Target Page","name":"target","index":3}],"children":[]},{"id":"9f8a4af0-ddec-7471-cdb3-32ff46d5215f","type":"/#Directus/Directus Prefab/Components/Auth/Directus - Logout","x":-167.2979487114206,"y":679.0025959844324,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"c72c3a27-90c0-b17b-1dae-3567a1ff3ebe","type":"JavaScriptFunction","label":"Refresh Current Window","x":-188.9265185794682,"y":766.2486773095976,"parameters":{"functionScript":"// Refresh the current window\nwindow.location.reload();\n"},"ports":[],"dynamicports":[],"children":[],"metadata":{"prompt":{"history":[{"content":"Refresh the current window","metadata":{"user":{"name":"Local","id":"local","email":""},"code":"// Refresh the current window\nwindow.location.reload();\n"},"snowflakeId":"01912eb14e80-24hfif","type":"user"},{"type":"assistant","content":"\nThis function refreshes the current window in the web browser. It uses the built-in JavaScript function `window.location.reload()` to refresh or reload the current document. This function does not have any inputs or outputs.\n","snowflakeId":"01912eb1599e-eqy567","metadata":{}}],"metadata":{"templateId":"function"}},"AiAssistant":"old","merge":{"soureCodePorts":["functionScript"]}}},{"id":"82c1f83b-fb84-e881-aa54-e0f56d583a5c","type":"JavaScriptFunction","label":"Detect user click outside group","x":-231.27500258082958,"y":488.01436580646134,"parameters":{"functionScript":"document.addEventListener('click', function(event) {\n  const filtersPopunder = Inputs.This.getDOMElement();\n  if (filtersPopunder && !filtersPopunder.contains(event.target)) {\n    Outputs.ClickedOutside = true;\n\n    // Reset Outputs.ClickedOutside to false after 500 milliseconds\n    setTimeout(function() {\n      Outputs.ClickedOutside = false;\n    }, 500);\n  }\n});"},"ports":[],"dynamicports":[{"name":"in-This","displayName":"This","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-ClickedOutside","displayName":"ClickedOutside","plug":"output","type":"*","group":"Outputs","index":5}],"children":[],"metadata":{"prompt":{"history":[{"content":"When the user clicks outside the 'Filters popunder' group, the function outputs true\n","metadata":{"user":{"id":"b769f437-0f92-4325-8a22-572da312e722","email":"richard@digitalbricks.io","name":"Richard Osborne"},"code":"\ndocument.addEventListener('click', function(event) {\n  const filtersPopunder = document.querySelector('.filters-popunder');\n  if (filtersPopunder && !filtersPopunder.contains(event.target)) {\n    Outputs.ClickedOutside = true;\n  }\n});\n"},"snowflakeId":"0189279609eb-qyrn7l","type":"user"},{"type":"assistant","content":"This event listener listens for a click event on the document. It checks if the clicked element is not a child of the '.filters-popunder' element. If it is not, it sets the <span style=\"color: var(--base-color-yellow-400);\">Outputs.ClickedOutside</span> property to true","snowflakeId":"0189279616fe-k2usun","metadata":{}}],"metadata":{"templateId":"function"}},"AiAssistant":"old","merge":{"soureCodePorts":["functionScript"]}}},{"id":"d0267b91-e6fa-25c0-aa8c-9b8024718370","type":"Switch","x":-222.66666666666669,"y":382.76666666666665,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"725518a5-560c-c4fc-ff4d-10ecef8aa2fd","type":"/#Directus/Directus Prefab/Components/Data/Directus - Create Data","x":900,"y":527,"parameters":{"collection":"Video","SDK Client to use":"User SDK Client"},"ports":[],"dynamicports":[],"children":[]},{"id":"2fe612d6-012a-fc50-60fc-e897514474ca","type":"/#Directus/Directus Prefab/Components/Data/Directus - Create Data","x":1044,"y":722,"parameters":{"collection":"Project","SDK Client to use":"User SDK Client"},"ports":[],"dynamicports":[],"children":[]},{"id":"049e6cf4-91bc-c5da-29c6-478cb9f9b1dd","type":"JavaScriptFunction","label":"Generate project data","x":771,"y":717,"parameters":{"functionScript":"// Define the inputs\nconst mainVideoId = Inputs.mainVideoId || null;\nconst introId = Inputs.introId || null;\nconst outroId = Inputs.outroId || null;\nconst projectTitle = Inputs.projectTitle || \"Default\";\nconst projectBrief = Inputs.projectBrief || \"Default\";\nconst projectDeadline = Inputs.deadline || null;\nconst projectClient = Inputs.projectClient || null;\n\n// Initialize an empty array\nlet clips = []\nlet videos = [];\n\n// Check if the inputs are valid and if they are, add them to the array\nif (mainVideoId) videos.push({ \"Video_id\": mainVideoId });\nif (introId) videos.push({ \"id\": introId });\nif (outroId) videos.push({ \"id\": outroId });\n\nconst projectData = {\n  title: projectTitle,\n  brief: projectBrief,\n  deadline: projectDeadline,\n  client: projectClient,\n  hasVideos: videos,\n  hasClips: clips,\n  sharedAccounts: [ { \"Account_id\": Inputs.accountId } ]\n}\n\nOutputs.projectData = projectData;\nOutputs.Success();\n"},"ports":[],"dynamicports":[{"name":"in-mainVideoId","displayName":"mainVideoId","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-introId","displayName":"introId","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-outroId","displayName":"outroId","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-projectTitle","displayName":"projectTitle","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-projectBrief","displayName":"projectBrief","plug":"input","type":"*","group":"Inputs","index":8},{"name":"in-deadline","displayName":"deadline","plug":"input","type":"*","group":"Inputs","index":9},{"name":"in-projectClient","displayName":"projectClient","plug":"input","type":"*","group":"Inputs","index":10},{"name":"in-accountId","displayName":"accountId","plug":"input","type":"*","group":"Inputs","index":11},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":12},{"name":"out-projectData","displayName":"projectData","plug":"output","type":"*","group":"Outputs","index":13}],"children":[],"metadata":{"prompt":{"history":[{"content":"Take in 3 input ids and combine them into an array of ids of form { \"id\": intValue }","metadata":{"user":{"name":"Local","id":"local","email":""},"code":"// Define the inputs\nconst id1 = Inputs.Id1 || 0;\nconst id2 = Inputs.Id2 || 0;\nconst id3 = Inputs.Id3 || 0;\n\n// Check if the inputs are valid\nif (!id1 || !id2 || !id3) throw new Error('Invalid input');\n\ntry {\n  // Combine the inputs into an array\n  const ids = [\n    { \"id\": id1 },\n    { \"id\": id2 },\n    { \"id\": id3 }\n  ];\n\n  // Output the array\n  Outputs.IdArray = ids;\n  Outputs.Success();\n} catch (error) {\n  Outputs.error = error;\n  Outputs.Failure();\n}\n"},"snowflakeId":"019127f0dfbc-iz6ku6","type":"user"},{"type":"assistant","content":"\nThis function takes three inputs: <span style=\"color: var(--base-color-yellow-400);\">Inputs.Id1</span>, <span style=\"color: var(--base-color-yellow-400);\">Inputs.Id2</span>, and <span style=\"color: var(--base-color-yellow-400);\">Inputs.Id3</span>. It checks if these inputs are valid and if they are, it combines them into an array of objects. Each object in the array has a single property, \"id\", which is set to the value of the corresponding input. \n\nThe resulting array is then sent to the <span style=\"color: var(--base-color-yellow-400);\">Outputs.IdArray</span> output. If the function executes successfully, it triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Success</span> output signal.\n\nIf there is an error during the process, for example, if the inputs are not valid, the function outputs the error message to the <span style=\"color: var(--base-color-yellow-400);\">Outputs.error</span> output and triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Failure</span> output signal.\n","snowflakeId":"019127f1210d-npmnpk","metadata":{}},{"content":"There may only be one id. Can the script generate the array dynamically depending on which ids inputs are non null","metadata":{"user":{"name":"Local","id":"local","email":""},"code":"// Define the inputs\nconst id1 = Inputs.Id1 || null;\nconst id2 = Inputs.Id2 || null;\nconst id3 = Inputs.Id3 || null;\n\n// Initialize an empty array\nlet ids = [];\n\n// Check if the inputs are valid and if they are, add them to the array\nif (id1) ids.push({ \"id\": id1 });\nif (id2) ids.push({ \"id\": id2 });\nif (id3) ids.push({ \"id\": id3 });\n\n// If no valid id was found, throw an error\nif (ids.length === 0) {\n  Outputs.error = 'No valid id found';\n  Outputs.Failure();\n} else {\n  // Output the array\n  Outputs.IdArray = ids;\n  Outputs.Success();\n}\n"},"snowflakeId":"019127f2a0a6-nhlhbu","type":"user"},{"type":"assistant","content":"\nThis function generates an array of IDs based on the non-null inputs. \n\nIt takes three inputs: <span style=\"color: var(--base-color-yellow-400);\">Inputs.Id1</span>, <span style=\"color: var(--base-color-yellow-400);\">Inputs.Id2</span>, and <span style=\"color: var(--base-color-yellow-400);\">Inputs.Id3</span>. It checks each input and if it is not null, it adds it to the array. \n\nIf no valid ID is found (all inputs are null), it sets the <span style=\"color: var(--base-color-yellow-400);\">Outputs.error</span> output to 'No valid id found' and triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Failure</span> output signal. \n\nIf at least one valid ID is found, it sets the <span style=\"color: var(--base-color-yellow-400);\">Outputs.IdArray</span> output to the array of IDs and triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Success</span> output signal.\n","snowflakeId":"019127f2d40b-29wcd9","metadata":{}}],"metadata":{"templateId":"function"}},"AiAssistant":"old","merge":{"soureCodePorts":["functionScript"]}}},{"id":"ef4cf083-179e-2265-3958-4431ccda8b44","type":"Expression","x":465,"y":696,"parameters":{"expression":"mainId != \"\""},"ports":[],"dynamicports":[{"group":"Parameters","name":"mainId","type":{"name":"*","editAsType":"string"},"plug":"input","index":7}],"children":[],"metadata":{"merge":{"soureCodePorts":["expression"]}}},{"id":"cc4a559c-eadd-6571-1d86-0006bd01a748","type":"RouterNavigate","label":"Go to video page","x":1305,"y":762,"parameters":{"router":"Main","target":"/#Pages/project"},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"component","title":"Choose page component","components":["/#Pages/connect","/#Pages/dashboard","/#Pages/my-account","/#Pages/clients","/#Pages/videos","/#Pages/project","/#Pages/experiment","/#Pages/projects","/#Pages/compositions"],"allowEditOnly":true},"group":"General","displayName":"Target Page","name":"target","index":3},{"name":"pm-project","displayName":"project","type":"string","plug":"input","group":"Parameters","index":4}],"children":[]},{"id":"c10795c8-32cf-cdad-07c1-60d7b5d0a56f","type":"JavaScriptFunction","label":"Get video duration","x":492,"y":479,"parameters":{"functionScript":"function getVideoDuration(videoBlob) {\n  return new Promise((resolve, reject) => {\n    const url = URL.createObjectURL(videoBlob);\n    const video = document.createElement('video');\n\n    video.src = url;\n    video.addEventListener('loadedmetadata', () => {\n      resolve(video.duration);\n      URL.revokeObjectURL(url);\n    });\n\n    video.onerror = () => {\n      reject('Failed to load video metadata.');\n    };\n  });\n}\n\nconst videoBlob = Inputs.videoBlob;\n\nif (!videoBlob) return;\n\ngetVideoDuration(videoBlob).then(duration => {\n  Outputs.duration = duration;\n  Outputs.Success();\n}).catch(console.error);\n"},"ports":[],"dynamicports":[{"name":"in-videoBlob","displayName":"videoBlob","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-duration","displayName":"duration","plug":"output","type":"*","group":"Outputs","index":6}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"ec537466-2ac2-858e-e727-e1ceaa2b92e3","type":"JavaScriptFunction","label":"Append duration and type","x":681,"y":516,"parameters":{"functionScript":"const videoObject = Inputs.videoObject;\n\nif (!videoObject) return;\n\nOutputs.videoObject = {\n    ...videoObject,\n    type: \"main\",\n    length: Math.floor(Inputs.length),\n//    sharedAccounts: [ { \"Account_id\": { \"id\": Inputs.accountId } } ]\n    sharedAccounts: [ { \"Account_id\": Inputs.accountId }\n    ]\n}\nOutputs.Success();"},"ports":[],"dynamicports":[{"name":"in-videoObject","displayName":"videoObject","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-length","displayName":"length","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-accountId","displayName":"accountId","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-videoObject","displayName":"videoObject","plug":"output","type":"*","group":"Outputs","index":8}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"29d76958-6916-37ce-5dbd-964432a73cc1","type":"Model2","x":806,"y":403,"parameters":{"modelId":"Current User","properties":"account"},"ports":[],"dynamicports":[{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"prop-account","displayName":"account","index":7},{"type":"signal","plug":"output","group":"Changed Events","displayName":"account Changed","name":"changed-account","index":8}],"children":[]},{"id":"538ea1a3-c79e-d465-6d03-438e42b30c6a","type":"Send Message","x":1345,"y":628,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"273c2f7f-c008-b690-8059-b3484fcde54c","type":"JavaScriptFunction","label":"Send API Call to n8n Endpoint","x":1451,"y":372,"parameters":{"functionScript":"const endpoint = Inputs.Endpoint || '';\nif (!endpoint) throw new Error('Invalid endpoint');\n\nconst apiKey = Inputs.ApiKey || '';\nif (!apiKey) throw new Error('Invalid API key');\n\nconst payload = {\n  data1: Inputs.Data1 || '',\n  data2: Inputs.Data2 || '',\n  data3: Inputs.Data3 || '',\n  // Add more data inputs as needed\n};\n\nconst url = `${endpoint}?apikey=${apiKey}`;\n\ntry {\n  const response = await fetch(url, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(payload),\n  });\n\n  if (!response.ok) throw new Error('Response not OK');\n\n  const data = await response.json();\n  Outputs.Response = data;\n  Outputs.Success();\n} catch (error) {\n  Outputs.error = error;\n  Outputs.Failure();\n}\n"},"ports":[],"dynamicports":[{"name":"in-Endpoint","displayName":"Endpoint","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-ApiKey","displayName":"ApiKey","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-Data1","displayName":"Data1","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-Data2","displayName":"Data2","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-Data3","displayName":"Data3","plug":"input","type":"*","group":"Inputs","index":8},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":9},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":10},{"name":"out-Response","displayName":"Response","plug":"output","type":"*","group":"Outputs","index":11},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":12}],"children":[],"metadata":{"prompt":{"history":[{"content":"Send an API call to an n8n endpoint with a payload made up of several generic inputs","metadata":{"user":{"name":"Local","id":"local","email":""},"code":"const endpoint = Inputs.Endpoint || '';\nif (!endpoint) throw new Error('Invalid endpoint');\n\nconst apiKey = Inputs.ApiKey || '';\nif (!apiKey) throw new Error('Invalid API key');\n\nconst payload = {\n  data1: Inputs.Data1 || '',\n  data2: Inputs.Data2 || '',\n  data3: Inputs.Data3 || '',\n  // Add more data inputs as needed\n};\n\nconst url = `${endpoint}?apikey=${apiKey}`;\n\ntry {\n  const response = await fetch(url, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(payload),\n  });\n\n  if (!response.ok) throw new Error('Response not OK');\n\n  const data = await response.json();\n  Outputs.Response = data;\n  Outputs.Success();\n} catch (error) {\n  Outputs.error = error;\n  Outputs.Failure();\n}\n"},"snowflakeId":"0191740be9ca-98eovj","type":"user"},{"type":"assistant","content":"\nThis function sends a POST request to an n8n endpoint with a JSON payload. The payload is constructed from the inputs <span style=\"color: var(--base-color-yellow-400);\">Inputs.Data1</span>, <span style=\"color: var(--base-color-yellow-400);\">Inputs.Data2</span>, and <span style=\"color: var(--base-color-yellow-400);\">Inputs.Data3</span>. \n\nThe function requires an <span style=\"color: var(--base-color-yellow-400);\">Inputs.Endpoint</span> and an <span style=\"color: var(--base-color-yellow-400);\">Inputs.ApiKey</span> to be provided. It constructs the URL for the request by appending the API key as a query parameter to the endpoint.\n\nIf the request is successful, the function parses the JSON response and sends it to the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Response</span> output. It also triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Success</span> signal.\n\nIf there's an error during the request, the function sends the error to the <span style=\"color: var(--base-color-yellow-400);\">Outputs.error</span> output and triggers the <span style=\"color: var(--base-color-yellow-400);\">Outputs.Failure</span> signal.\n","snowflakeId":"0191740c2151-xejolw","metadata":{}}],"metadata":{"templateId":"function"}},"AiAssistant":"old","merge":{"soureCodePorts":["functionScript"]}}},{"id":"44e1e201-93fd-ccec-741e-d878f0eb09b2","type":"States","x":285.6806209083071,"y":336.2102216188382,"parameters":{"states":"uploading,idle","values":"label","type-label":"string","value-idle-label":"Upload video"},"ports":[],"dynamicports":[{"type":{"name":"string","allowConnectionsOnly":true},"plug":"output","group":"Values","name":"label","index":6},{"type":{"name":"enum","enums":[{"label":"Number","value":"number"},{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Color","value":"color"},{"label":"Text Style","value":"textStyle"}],"allowEditOnly":true},"default":"number","plug":"input","group":"Types","displayName":"label","name":"type-label","index":7},{"plug":"input","type":"string","group":"uploading Values","name":"value-uploading-label","displayName":"label","editorName":"uploading|label","index":8},{"plug":"input","type":"curve","displayName":"Default","default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"uploading Transitions","name":"transitiondef-uploading","index":9},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To uploading","name":"to-uploading","group":"Go to state","index":10},{"plug":"output","type":"boolean","displayName":"At uploading","name":"at-uploading","group":"Current state","index":11},{"plug":"output","type":"signal","displayName":"Has Reached uploading","name":"reached-uploading","group":"Current state","index":12},{"plug":"input","type":"string","group":"idle Values","name":"value-idle-label","displayName":"label","editorName":"idle|label","index":13},{"plug":"input","type":"curve","displayName":"Default","default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"idle Transitions","name":"transitiondef-idle","index":14},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To idle","name":"to-idle","group":"Go to state","index":15},{"plug":"output","type":"boolean","displayName":"At idle","name":"at-idle","group":"Current state","index":16},{"plug":"output","type":"signal","displayName":"Has Reached idle","name":"reached-idle","group":"Current state","index":17},{"plug":"input","type":{"name":"enum","enums":["uploading","idle"]},"group":"States","displayName":"State","name":"currentState","default":"uploading","index":18}],"children":[]},{"id":"869de535-9673-3f1b-1654-285414a7298e","type":"String Format","x":556.1706374326146,"y":328.15992350799564,"parameters":{"format":"Uploading... {percent}%"},"ports":[],"dynamicports":[{"name":"percent","type":"string","plug":"input","index":2}],"children":[]},{"id":"a9ba221d-80ab-1bf2-f641-91a406de9426","type":"Expression","x":300.1711575078235,"y":484.3357068583399,"parameters":{"expression":"progress > 0"},"ports":[],"dynamicports":[{"group":"Parameters","name":"progress","type":{"name":"*","editAsType":"string"},"plug":"input","index":7}],"children":[],"metadata":{"merge":{"soureCodePorts":["expression"]}}},{"id":"3b3eb7b1-8b77-11dc-da84-81bcf208bf30","type":"CollectionInsert","x":1516.3303139655181,"y":468.82440788761653,"parameters":{"collectionId":"allVideos"},"ports":[],"dynamicports":[],"children":[]},{"id":"2118bae5-0d48-1acb-258f-34b7fb5481cc","type":"Model2","label":"New video","x":1301.2698451489036,"y":500.33238934727024,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"09a897ed-611d-61d1-083c-852ad4ae01a0","type":"Receive Message","x":1210.1457363889147,"y":893.8696081086496,"parameters":{"payload":"transcript"},"ports":[],"dynamicports":[{"name":"payload-transcript","displayName":"transcript","group":"Payload","plug":"output","type":{"name":"*","allowConnectionsOnly":true},"index":4}],"children":[]},{"id":"7dafcb73-5168-806a-1163-2525d933b1e0","type":"SetModelProperties","label":"Set transcript to video","x":1598.065506966621,"y":842.011064402431,"parameters":{"properties":"transcript","type-transcript":"string"},"ports":[],"dynamicports":[{"type":{"name":"string"},"plug":"input","group":"Property Values","displayName":"transcript","name":"prop-transcript","index":6},{"type":{"name":"enum","enums":[{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Number","value":"number"},{"label":"Date","value":"date"},{"label":"Array","value":"array"},{"label":"Object","value":"object"},{"label":"Any","value":"*"}],"allowEditOnly":true},"plug":"input","group":"Property Types","displayName":"transcript","default":"*","name":"type-transcript","index":7}],"children":[]}],"visualRoots":["534b4418-d04f-ea97-e271-558b83eed55b"],"comments":[{"text":"OPTIMISATION NEEDED: It's theoretically possible, albeit unlikely, that the MQTT message will take longer to be received than it will take the user to upload a new video. This would apply the previous video's transcript to the latter video by mistake.","width":452,"height":111,"fill":"transparent","x":1212,"y":1013,"id":"d026a44c-a7eb-5d88-9cab-b2eb74312048","color":"danger"}]}},{"name":"/Global visual components/Icon button","id":"c958f137-04ef-7a8d-b488-3318ce31ebaa","graph":{"connections":[{"fromId":"c0a51c58-4366-48f9-0dbf-ef4cd355c52c","fromProperty":"onClick","toId":"c9026f98-9cad-6f57-b853-9952ee03e599","toProperty":"clicked"},{"fromId":"5464ac12-9ac4-f61b-1888-9f6c81cd5f47","fromProperty":"Icon","toId":"9b1ef9fc-ca9c-53fd-84e8-cf3c86d3311b","toProperty":"iconIconSource"},{"fromId":"5464ac12-9ac4-f61b-1888-9f6c81cd5f47","fromProperty":"Label","toId":"eb3d1b01-ea32-7ac2-e351-abf68f5c2601","toProperty":"text"},{"fromId":"5464ac12-9ac4-f61b-1888-9f6c81cd5f47","fromProperty":"Foreground colour neutral","toId":"bce9c507-5f65-d7fe-0630-bf843e3b08a4","toProperty":"value-neutral-foreground colour"},{"fromId":"5464ac12-9ac4-f61b-1888-9f6c81cd5f47","fromProperty":"Background colour neutral","toId":"bce9c507-5f65-d7fe-0630-bf843e3b08a4","toProperty":"value-neutral-background colour"},{"fromId":"5464ac12-9ac4-f61b-1888-9f6c81cd5f47","fromProperty":"Foreground colour hovered","toId":"bce9c507-5f65-d7fe-0630-bf843e3b08a4","toProperty":"value-hovered-foreground colour"},{"fromId":"5464ac12-9ac4-f61b-1888-9f6c81cd5f47","fromProperty":"Background colour hovered","toId":"bce9c507-5f65-d7fe-0630-bf843e3b08a4","toProperty":"value-hovered-background colour"},{"fromId":"5464ac12-9ac4-f61b-1888-9f6c81cd5f47","fromProperty":"Foreground colour disabled","toId":"bce9c507-5f65-d7fe-0630-bf843e3b08a4","toProperty":"value-disabled-foreground colour"},{"fromId":"5464ac12-9ac4-f61b-1888-9f6c81cd5f47","fromProperty":"Background colour disabled","toId":"bce9c507-5f65-d7fe-0630-bf843e3b08a4","toProperty":"value-disabled-background colour"},{"fromId":"bce9c507-5f65-d7fe-0630-bf843e3b08a4","fromProperty":"foreground colour","toId":"9b1ef9fc-ca9c-53fd-84e8-cf3c86d3311b","toProperty":"iconColor"},{"fromId":"bce9c507-5f65-d7fe-0630-bf843e3b08a4","fromProperty":"foreground colour","toId":"eb3d1b01-ea32-7ac2-e351-abf68f5c2601","toProperty":"color"},{"fromId":"bce9c507-5f65-d7fe-0630-bf843e3b08a4","fromProperty":"background colour","toId":"c0a51c58-4366-48f9-0dbf-ef4cd355c52c","toProperty":"backgroundColor"}],"roots":[{"id":"c0a51c58-4366-48f9-0dbf-ef4cd355c52c","type":"Group","x":0,"y":0,"parameters":{"height":{"value":40,"unit":"px"},"sizeMode":"contentWidth","flexDirection":"row","paddingLeft":{"value":10,"unit":"px"},"paddingRight":{"value":10,"unit":"px"},"paddingTop":{"value":5,"unit":"px"},"paddingBottom":{"value":5,"unit":"px"},"borderRadius":{"value":8,"unit":"px"},"alignItems":"center","columnGap":{"value":5,"unit":"px"},"styleCss":"/* background-color: red; */\ncursor: pointer;"},"ports":[],"dynamicports":[],"children":[{"id":"9b1ef9fc-ca9c-53fd-84e8-cf3c86d3311b","type":"net.noodl.visual.icon","parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"eb3d1b01-ea32-7ac2-e351-abf68f5c2601","type":"Text","parameters":{},"ports":[],"dynamicports":[],"children":[]}]},{"id":"c9026f98-9cad-6f57-b853-9952ee03e599","type":"Component Outputs","x":277.5,"y":26,"parameters":{},"ports":[{"name":"clicked","plug":"input","type":{"name":"*"},"index":1}],"dynamicports":[],"children":[]},{"id":"bce9c507-5f65-d7fe-0630-bf843e3b08a4","type":"States","x":-222.5,"y":74,"parameters":{"states":"hovered,neutral,disabled","currentState":"neutral","values":"foreground colour,background colour","type-foreground colour":"color","type-background colour":"color","value-hovered-foreground colour":"Hive blue","value-hovered-background colour":"transparent","value-neutral-foreground colour":"White","value-neutral-background colour":"transparent","value-disabled-foreground colour":"Grey - 400","value-disabled-background colour":"transparent"},"ports":[],"dynamicports":[{"type":{"name":"color","allowConnectionsOnly":true},"plug":"output","group":"Values","name":"foreground colour","index":6},{"type":{"name":"enum","enums":[{"label":"Number","value":"number"},{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Color","value":"color"},{"label":"Text Style","value":"textStyle"}],"allowEditOnly":true},"default":"number","plug":"input","group":"Types","displayName":"foreground colour","name":"type-foreground colour","index":7},{"type":{"name":"color","allowConnectionsOnly":true},"plug":"output","group":"Values","name":"background colour","index":8},{"type":{"name":"enum","enums":[{"label":"Number","value":"number"},{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Color","value":"color"},{"label":"Text Style","value":"textStyle"}],"allowEditOnly":true},"default":"number","plug":"input","group":"Types","displayName":"background colour","name":"type-background colour","index":9},{"plug":"input","type":"color","group":"hovered Values","name":"value-hovered-foreground colour","displayName":"foreground colour","editorName":"hovered|foreground colour","index":10},{"plug":"input","type":"color","group":"hovered Values","name":"value-hovered-background colour","displayName":"background colour","editorName":"hovered|background colour","index":11},{"plug":"input","type":"curve","displayName":"Default","default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"hovered Transitions","name":"transitiondef-hovered","index":12},{"plug":"input","type":{"name":"curve"},"default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"hovered Transitions","name":"transition-hovered-foreground colour","displayName":"foreground colour","editorName":"Transition hovered|foreground colour","index":13},{"plug":"input","type":{"name":"curve"},"default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"hovered Transitions","name":"transition-hovered-background colour","displayName":"background colour","editorName":"Transition hovered|background colour","index":14},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To hovered","name":"to-hovered","group":"Go to state","index":15},{"plug":"output","type":"boolean","displayName":"At hovered","name":"at-hovered","group":"Current state","index":16},{"plug":"output","type":"signal","displayName":"Has Reached hovered","name":"reached-hovered","group":"Current state","index":17},{"plug":"input","type":"color","group":"neutral Values","name":"value-neutral-foreground colour","displayName":"foreground colour","editorName":"neutral|foreground colour","index":18},{"plug":"input","type":"color","group":"neutral Values","name":"value-neutral-background colour","displayName":"background colour","editorName":"neutral|background colour","index":19},{"plug":"input","type":"curve","displayName":"Default","default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"neutral Transitions","name":"transitiondef-neutral","index":20},{"plug":"input","type":{"name":"curve"},"default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"neutral Transitions","name":"transition-neutral-foreground colour","displayName":"foreground colour","editorName":"Transition neutral|foreground colour","index":21},{"plug":"input","type":{"name":"curve"},"default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"neutral Transitions","name":"transition-neutral-background colour","displayName":"background colour","editorName":"Transition neutral|background colour","index":22},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To neutral","name":"to-neutral","group":"Go to state","index":23},{"plug":"output","type":"boolean","displayName":"At neutral","name":"at-neutral","group":"Current state","index":24},{"plug":"output","type":"signal","displayName":"Has Reached neutral","name":"reached-neutral","group":"Current state","index":25},{"plug":"input","type":"color","group":"disabled Values","name":"value-disabled-foreground colour","displayName":"foreground colour","editorName":"disabled|foreground colour","index":26},{"plug":"input","type":"color","group":"disabled Values","name":"value-disabled-background colour","displayName":"background colour","editorName":"disabled|background colour","index":27},{"plug":"input","type":"curve","displayName":"Default","default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"disabled Transitions","name":"transitiondef-disabled","index":28},{"plug":"input","type":{"name":"curve"},"default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"disabled Transitions","name":"transition-disabled-foreground colour","displayName":"foreground colour","editorName":"Transition disabled|foreground colour","index":29},{"plug":"input","type":{"name":"curve"},"default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"disabled Transitions","name":"transition-disabled-background colour","displayName":"background colour","editorName":"Transition disabled|background colour","index":30},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To disabled","name":"to-disabled","group":"Go to state","index":31},{"plug":"output","type":"boolean","displayName":"At disabled","name":"at-disabled","group":"Current state","index":32},{"plug":"output","type":"signal","displayName":"Has Reached disabled","name":"reached-disabled","group":"Current state","index":33},{"plug":"input","type":{"name":"enum","enums":["hovered","neutral","disabled"]},"group":"States","displayName":"State","name":"currentState","default":"hovered","index":34}],"children":[]},{"id":"5464ac12-9ac4-f61b-1888-9f6c81cd5f47","type":"Component Inputs","x":-476.5,"y":55,"parameters":{},"ports":[{"name":"Foreground colour neutral","plug":"output","type":{"name":"*"},"group":"Neutral","index":0},{"name":"Background colour neutral","plug":"output","type":{"name":"*"},"group":"Neutral","index":1},{"name":"Foreground colour hovered","plug":"output","type":{"name":"*"},"group":"Hovered","index":2},{"name":"Background colour hovered","plug":"output","type":{"name":"*"},"group":"Hovered","index":3},{"name":"Icon","plug":"output","type":{"name":"*"},"group":"General","index":6},{"name":"Label","plug":"output","type":{"name":"*"},"group":"General","index":7},{"name":"Foreground colour disabled","plug":"output","type":{"name":"*"},"group":"Disabled","index":4},{"name":"Background colour disabled","plug":"output","type":{"name":"*"},"group":"Disabled","index":5}],"dynamicports":[],"children":[]}],"visualRoots":["c0a51c58-4366-48f9-0dbf-ef4cd355c52c"]}},{"name":"/Global visual components/Popup template","id":"6e8ae3fe-b829-8e75-6e15-d77b8136029f","graph":{"connections":[{"fromId":"094b11f3-cbba-23c3-7ed7-08c91ddb15d6","fromProperty":"blur colour","toId":"09b71ffa-cd01-177d-765a-4700392de19d","toProperty":"backgroundColor"},{"fromId":"094b11f3-cbba-23c3-7ed7-08c91ddb15d6","fromProperty":"blur opacity","toId":"09b71ffa-cd01-177d-765a-4700392de19d","toProperty":"opacity"},{"fromId":"094b11f3-cbba-23c3-7ed7-08c91ddb15d6","fromProperty":"popup title","toId":"c54eb696-d754-ff02-4d11-165c583e4f33","toProperty":"text"},{"fromId":"094b11f3-cbba-23c3-7ed7-08c91ddb15d6","fromProperty":"popup subtitle","toId":"90012de0-7e37-ccb8-029a-f1279af0ade0","toProperty":"text"},{"fromId":"094b11f3-cbba-23c3-7ed7-08c91ddb15d6","fromProperty":"max width","toId":"79a3e586-605e-ad6c-d913-12479f1a6098","toProperty":"maxWidth"},{"fromId":"094b11f3-cbba-23c3-7ed7-08c91ddb15d6","fromProperty":"show buttons","toId":"ddab4562-c6f3-c6cc-f786-bffa17ed6bd9","toProperty":"mounted"},{"fromId":"094b11f3-cbba-23c3-7ed7-08c91ddb15d6","fromProperty":"left button colour","toId":"c4eaff78-05dc-0c04-aafe-778892272be4","toProperty":"backgroundColor"},{"fromId":"094b11f3-cbba-23c3-7ed7-08c91ddb15d6","fromProperty":"left button label","toId":"c4eaff78-05dc-0c04-aafe-778892272be4","toProperty":"label"},{"fromId":"094b11f3-cbba-23c3-7ed7-08c91ddb15d6","fromProperty":"left button mounted","toId":"c4eaff78-05dc-0c04-aafe-778892272be4","toProperty":"mounted"},{"fromId":"094b11f3-cbba-23c3-7ed7-08c91ddb15d6","fromProperty":"left button enabled","toId":"c4eaff78-05dc-0c04-aafe-778892272be4","toProperty":"enabled"},{"fromId":"094b11f3-cbba-23c3-7ed7-08c91ddb15d6","fromProperty":"right button label","toId":"58bf3a48-69b4-35ff-832b-ef2f0e81e56c","toProperty":"label"},{"fromId":"094b11f3-cbba-23c3-7ed7-08c91ddb15d6","fromProperty":"right button mounted","toId":"58bf3a48-69b4-35ff-832b-ef2f0e81e56c","toProperty":"mounted"},{"fromId":"094b11f3-cbba-23c3-7ed7-08c91ddb15d6","fromProperty":"right button enabled","toId":"58bf3a48-69b4-35ff-832b-ef2f0e81e56c","toProperty":"enabled"},{"fromId":"094b11f3-cbba-23c3-7ed7-08c91ddb15d6","fromProperty":"CSS class","toId":"9bc27f0b-ab84-31f3-12de-21f3861f9708","toProperty":"currentState"},{"fromId":"9bc27f0b-ab84-31f3-12de-21f3861f9708","fromProperty":"classValue","toId":"09b71ffa-cd01-177d-765a-4700392de19d","toProperty":"cssClassName"},{"fromId":"c4eaff78-05dc-0c04-aafe-778892272be4","fromProperty":"onClick","toId":"aede797e-5f0e-b7aa-f7b2-ae7d21a2214d","toProperty":"left button clicked"},{"fromId":"58bf3a48-69b4-35ff-832b-ef2f0e81e56c","fromProperty":"onClick","toId":"aede797e-5f0e-b7aa-f7b2-ae7d21a2214d","toProperty":"right button clicked"},{"fromId":"094b11f3-cbba-23c3-7ed7-08c91ddb15d6","fromProperty":"popup subtitle","toId":"11b7cb24-6780-e82b-a405-581d6a7396ca","toProperty":"subtitle"},{"fromId":"11b7cb24-6780-e82b-a405-581d6a7396ca","fromProperty":"result","toId":"90012de0-7e37-ccb8-029a-f1279af0ade0","toProperty":"mounted"},{"fromId":"41b68dfc-cb6d-1ce9-c6ac-1abadf2f5a47","fromProperty":"background colour","toId":"58bf3a48-69b4-35ff-832b-ef2f0e81e56c","toProperty":"backgroundColor"},{"fromId":"41b68dfc-cb6d-1ce9-c6ac-1abadf2f5a47","fromProperty":"text colour","toId":"58bf3a48-69b4-35ff-832b-ef2f0e81e56c","toProperty":"textStyle"},{"fromId":"094b11f3-cbba-23c3-7ed7-08c91ddb15d6","fromProperty":"right button enabled","toId":"010ada22-eb42-5a92-113f-59e19ac87428","toProperty":"enabled"},{"fromId":"010ada22-eb42-5a92-113f-59e19ac87428","fromProperty":"isTrueEv","toId":"41b68dfc-cb6d-1ce9-c6ac-1abadf2f5a47","toProperty":"to-enabled"},{"fromId":"010ada22-eb42-5a92-113f-59e19ac87428","fromProperty":"isFalseEv","toId":"41b68dfc-cb6d-1ce9-c6ac-1abadf2f5a47","toProperty":"to-disabled"},{"fromId":"094b11f3-cbba-23c3-7ed7-08c91ddb15d6","fromProperty":"right button colour","toId":"41b68dfc-cb6d-1ce9-c6ac-1abadf2f5a47","toProperty":"value-enabled-background colour"},{"fromId":"53dc4490-c610-b7ca-69e2-664bebbf069a","fromProperty":"onClick","toId":"aede797e-5f0e-b7aa-f7b2-ae7d21a2214d","toProperty":"delete clicked"},{"fromId":"094b11f3-cbba-23c3-7ed7-08c91ddb15d6","fromProperty":"danger zone","toId":"4c621eee-c468-6f0f-37dc-b0528c624cf4","toProperty":"mounted"},{"fromId":"69d7372c-97b3-3d1c-da02-c2db222e18de","fromProperty":"Clicked","toId":"aede797e-5f0e-b7aa-f7b2-ae7d21a2214d","toProperty":"close icon clicked"}],"roots":[{"id":"09b71ffa-cd01-177d-765a-4700392de19d","type":"Group","label":"Background blur","x":472,"y":20,"parameters":{"backgroundColor":"#0000007F","styleCss":"/* background-color: red; */\n"},"ports":[],"dynamicports":[],"children":[{"id":"79a3e586-605e-ad6c-d913-12479f1a6098","type":"Group","label":"Popup shell","parameters":{"alignY":"center","alignX":"center","alignItems":"center","maxWidth":{"value":600,"unit":"px"},"minWidth":{"value":300,"unit":"px"},"backgroundColor":"White","sizeMode":"contentHeight","borderRadius":{"value":6,"unit":"px"},"boxShadowEnabled":true,"boxShadowBlurRadius":{"value":10,"unit":"px"},"boxShadowColor":"#00000026","paddingLeft":{"value":30,"unit":"px"},"paddingRight":{"value":30,"unit":"px"},"paddingBottom":{"value":30,"unit":"px"},"paddingTop":{"value":50,"unit":"px"},"scrollEnabled":true,"maxHeight":{"value":700,"unit":"px"}},"ports":[],"dynamicports":[],"children":[{"id":"69d7372c-97b3-3d1c-da02-c2db222e18de","type":"/Global visual components/Pretty icon","parameters":{"align x":"right","icon":{"class":"material-icons","code":"close","codeAsClass":false},"icon colour":"#FFFFFF","icon_name":"close","size":"32","position":"absolute","margin top":{"value":20,"unit":"px"},"margin right":{"value":20,"unit":"px"}},"ports":[],"dynamicports":[],"children":[]},{"id":"c54eb696-d754-ff02-4d11-165c583e4f33","type":"Text","label":"Title","parameters":{"textStyle":"Title Large","textAlignX":"center","sizeMode":"contentSize","marginBottom":{"value":25,"unit":"px"},"color":"Grey - 900"},"ports":[],"dynamicports":[],"children":[]},{"id":"90012de0-7e37-ccb8-029a-f1279af0ade0","type":"Text","label":"Subtitle","parameters":{"sizeMode":"contentHeight","textStyle":"Body Small","marginBottom":{"value":20,"unit":"px"},"textAlignX":"center"},"ports":[],"dynamicports":[],"children":[]},{"id":"02a6c955-806a-5b28-7087-2bfc78240e0d","type":"Component Children","parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"ddab4562-c6f3-c6cc-f786-bffa17ed6bd9","type":"Group","label":"Bottom bar","parameters":{"flexDirection":"row","sizeMode":"contentHeight","justifyContent":"center","columnGap":{"value":20,"unit":"px"},"borderTopStyle":"solid","borderTopWidth":{"value":1,"unit":"px"},"borderTopColor":"Grey - 300","marginTop":{"value":30,"unit":"px"},"paddingTop":{"value":30,"unit":"px"}},"ports":[],"dynamicports":[],"children":[{"id":"c4eaff78-05dc-0c04-aafe-778892272be4","type":"net.noodl.controls.button","variant":"Standard button","label":"Left button","parameters":{"minWidth":{"value":146,"unit":"px"}},"ports":[],"dynamicports":[],"children":[]},{"id":"58bf3a48-69b4-35ff-832b-ef2f0e81e56c","type":"net.noodl.controls.button","variant":"Standard button","label":"Right button","parameters":{},"ports":[],"dynamicports":[],"children":[]}]},{"id":"4c621eee-c468-6f0f-37dc-b0528c624cf4","type":"Group","label":"Danger zone","parameters":{"marginTop":{"value":30,"unit":"px"},"alignItems":"center","rowGap":{"value":15,"unit":"px"},"paddingTop":{"value":15,"unit":"px"},"borderTopStyle":"solid","borderTopColor":"#F75A4F63","borderTopWidth":{"value":2,"unit":"px"},"mounted":false},"ports":[],"dynamicports":[],"children":[{"id":"5f334fdc-0199-7b60-1111-9834af90e700","type":"Text","parameters":{"sizeMode":"contentSize","text":"Danger zone","color":"Danger","textStyle":"Title Medium"},"ports":[],"dynamicports":[],"children":[]},{"id":"53dc4490-c610-b7ca-69e2-664bebbf069a","type":"net.noodl.controls.button","variant":"Standard button","label":"Right button","parameters":{"marginTop":{"value":0,"unit":"px"},"marginBottom":{"value":0,"unit":"px"},"label":"Delete"},"ports":[],"dynamicports":[],"children":[]}]}]}]},{"id":"094b11f3-cbba-23c3-7ed7-08c91ddb15d6","type":"Component Inputs","x":91,"y":174,"parameters":{},"ports":[{"name":"blur colour","plug":"output","type":{"name":"*"},"group":"general","index":0},{"name":"blur opacity","plug":"output","type":{"name":"*"},"group":"general","index":1},{"name":"popup title","plug":"output","type":{"name":"*"},"group":"general","index":2},{"name":"left button label","plug":"output","type":{"name":"*"},"group":"left button","index":9},{"name":"right button label","plug":"output","type":{"name":"*"},"group":"right button","index":13},{"name":"left button colour","plug":"output","type":{"name":"*"},"group":"left button","index":8},{"name":"right button colour","plug":"output","type":{"name":"*"},"group":"right button","index":12},{"name":"left button mounted","plug":"output","type":{"name":"*"},"group":"left button","index":10},{"name":"right button mounted","plug":"output","type":{"name":"*"},"group":"right button","index":14},{"name":"left button enabled","plug":"output","type":{"name":"*"},"group":"left button","index":11},{"name":"right button enabled","plug":"output","type":{"name":"*"},"group":"right button","index":15},{"name":"popup subtitle","plug":"output","type":{"name":"*"},"group":"general","index":3},{"name":"max width","plug":"output","type":{"name":"*"},"group":"general","index":4},{"name":"show buttons","plug":"output","type":{"name":"*"},"group":"general","index":5},{"name":"CSS class","plug":"output","type":{"name":"*"},"group":"general","index":6},{"name":"danger zone","plug":"output","type":{"name":"*"},"group":"general","index":7}],"dynamicports":[],"children":[]},{"id":"aede797e-5f0e-b7aa-f7b2-ae7d21a2214d","type":"Component Outputs","x":897,"y":474,"parameters":{},"ports":[{"name":"close icon clicked","plug":"input","type":{"name":"*"},"index":2},{"name":"right button clicked","plug":"input","type":{"name":"*"},"index":3},{"name":"left button clicked","plug":"input","type":{"name":"*"},"index":4},{"name":"delete clicked","plug":"input","type":{"name":"*"},"index":5}],"dynamicports":[],"children":[]},{"id":"9bc27f0b-ab84-31f3-12de-21f3861f9708","type":"States","label":"CSS classes","x":236,"y":34,"parameters":{"states":"blurred background,no blur","useTransitions":false,"values":"classValue","type-classValue":"string","value-blurred background-classValue":"popup-blurred","value-no blur-classValue":"pop-no-blur"},"ports":[],"dynamicports":[{"type":{"name":"string","allowConnectionsOnly":true},"plug":"output","group":"Values","name":"classValue","index":6},{"type":{"name":"enum","enums":[{"label":"Number","value":"number"},{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Color","value":"color"},{"label":"Text Style","value":"textStyle"}],"allowEditOnly":true},"default":"number","plug":"input","group":"Types","displayName":"classValue","name":"type-classValue","index":7},{"plug":"input","type":"string","group":"blurred background Values","name":"value-blurred background-classValue","displayName":"classValue","editorName":"blurred background|classValue","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To blurred background","name":"to-blurred background","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At blurred background","name":"at-blurred background","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached blurred background","name":"reached-blurred background","group":"Current state","index":11},{"plug":"input","type":"string","group":"no blur Values","name":"value-no blur-classValue","displayName":"classValue","editorName":"no blur|classValue","index":12},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To no blur","name":"to-no blur","group":"Go to state","index":13},{"plug":"output","type":"boolean","displayName":"At no blur","name":"at-no blur","group":"Current state","index":14},{"plug":"output","type":"signal","displayName":"Has Reached no blur","name":"reached-no blur","group":"Current state","index":15},{"plug":"input","type":{"name":"enum","enums":["blurred background","no blur"]},"group":"States","displayName":"State","name":"currentState","default":"blurred background","index":16}],"children":[]},{"id":"ea72da4a-af55-e6c3-bc80-f9f95482c804","type":"CSS Definition","x":236,"y":-29,"parameters":{"style":".popup-blurred {\n    backdrop-filter: blur(5px); /* Blur effect for the background */\n}\n\n.popup-no-blur {\n    backdrop-filter: blur(0px); /* Blur effect for the background */\n}"},"ports":[],"dynamicports":[],"children":[],"metadata":{"merge":{"soureCodePorts":["style"]}}},{"id":"11b7cb24-6780-e82b-a405-581d6a7396ca","type":"Expression","x":290,"y":455,"parameters":{"expression":"subtitle != \"\""},"ports":[],"dynamicports":[{"group":"Parameters","name":"subtitle","type":{"name":"*","editAsType":"string"},"plug":"input","index":7}],"children":[],"metadata":{"merge":{"soureCodePorts":["expression"]}}},{"id":"41b68dfc-cb6d-1ce9-c6ac-1abadf2f5a47","type":"States","x":281,"y":900,"parameters":{"states":"enabled,disabled","values":"background colour,text colour","useTransitions":false,"type-background colour":"color","type-text colour":"textStyle","value-enabled-text colour":"Label Medium","value-disabled-text colour":"Label Medium","value-disabled-background colour":"Grey - 300"},"ports":[],"dynamicports":[{"type":{"name":"color","allowConnectionsOnly":true},"plug":"output","group":"Values","name":"background colour","index":6},{"type":{"name":"enum","enums":[{"label":"Number","value":"number"},{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Color","value":"color"},{"label":"Text Style","value":"textStyle"}],"allowEditOnly":true},"default":"number","plug":"input","group":"Types","displayName":"background colour","name":"type-background colour","index":7},{"type":{"name":"textStyle","allowConnectionsOnly":true},"plug":"output","group":"Values","name":"text colour","index":8},{"type":{"name":"enum","enums":[{"label":"Number","value":"number"},{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Color","value":"color"},{"label":"Text Style","value":"textStyle"}],"allowEditOnly":true},"default":"number","plug":"input","group":"Types","displayName":"text colour","name":"type-text colour","index":9},{"plug":"input","type":"color","group":"enabled Values","name":"value-enabled-background colour","displayName":"background colour","editorName":"enabled|background colour","index":10},{"plug":"input","type":"textStyle","group":"enabled Values","name":"value-enabled-text colour","displayName":"text colour","editorName":"enabled|text colour","index":11},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To enabled","name":"to-enabled","group":"Go to state","index":12},{"plug":"output","type":"boolean","displayName":"At enabled","name":"at-enabled","group":"Current state","index":13},{"plug":"output","type":"signal","displayName":"Has Reached enabled","name":"reached-enabled","group":"Current state","index":14},{"plug":"input","type":"color","group":"disabled Values","name":"value-disabled-background colour","displayName":"background colour","editorName":"disabled|background colour","index":15},{"plug":"input","type":"textStyle","group":"disabled Values","name":"value-disabled-text colour","displayName":"text colour","editorName":"disabled|text colour","index":16},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To disabled","name":"to-disabled","group":"Go to state","index":17},{"plug":"output","type":"boolean","displayName":"At disabled","name":"at-disabled","group":"Current state","index":18},{"plug":"output","type":"signal","displayName":"Has Reached disabled","name":"reached-disabled","group":"Current state","index":19},{"plug":"input","type":{"name":"enum","enums":["enabled","disabled"]},"group":"States","displayName":"State","name":"currentState","default":"enabled","index":20}],"children":[]},{"id":"010ada22-eb42-5a92-113f-59e19ac87428","type":"Expression","x":108,"y":921,"parameters":{"expression":"enabled"},"ports":[],"dynamicports":[{"group":"Parameters","name":"enabled","type":{"name":"*","editAsType":"string"},"plug":"input","index":7}],"children":[],"metadata":{"merge":{"soureCodePorts":["expression"]}}}],"visualRoots":["09b71ffa-cd01-177d-765a-4700392de19d"],"comments":[{"text":"Put in cover image uploader","width":150,"height":100,"fill":true,"x":270,"y":705,"id":"70ffb5e0-3722-1d0b-556e-cf7c92d6d1ce","color":"comment"}]}},{"name":"/Global visual components/Pretty icon","id":"9608c708-10a3-2181-0dd3-2a181963f679","graph":{"connections":[{"fromId":"d4f3fc5e-4686-c484-e2b4-bceaf6f50528","fromProperty":"onClick","toId":"59375b57-9958-d08b-c8ab-28c5f4ae29e6","toProperty":"Clicked"},{"fromId":"5575baba-daf6-4792-ec0e-ae2628936c36","fromProperty":"align x","toId":"d4f3fc5e-4686-c484-e2b4-bceaf6f50528","toProperty":"alignX"},{"fromId":"5575baba-daf6-4792-ec0e-ae2628936c36","fromProperty":"align y","toId":"d4f3fc5e-4686-c484-e2b4-bceaf6f50528","toProperty":"alignY"},{"fromId":"5575baba-daf6-4792-ec0e-ae2628936c36","fromProperty":"icon_name","toId":"16917778-a3c4-0ec6-8145-723586e9c117","toProperty":"iconName"},{"fromId":"5575baba-daf6-4792-ec0e-ae2628936c36","fromProperty":"background colour","toId":"d4f3fc5e-4686-c484-e2b4-bceaf6f50528","toProperty":"backgroundColor"},{"fromId":"5575baba-daf6-4792-ec0e-ae2628936c36","fromProperty":"icon colour","toId":"07ea4d48-be06-0251-ce41-d21523a41c7d","toProperty":"iconColor"},{"fromId":"5575baba-daf6-4792-ec0e-ae2628936c36","fromProperty":"size","toId":"d4f3fc5e-4686-c484-e2b4-bceaf6f50528","toProperty":"width"},{"fromId":"5575baba-daf6-4792-ec0e-ae2628936c36","fromProperty":"size","toId":"d4f3fc5e-4686-c484-e2b4-bceaf6f50528","toProperty":"height"},{"fromId":"5575baba-daf6-4792-ec0e-ae2628936c36","fromProperty":"size","toId":"c5c051ed-7c5a-e239-3aea-1ae2566f2553","toProperty":"size"},{"fromId":"c5c051ed-7c5a-e239-3aea-1ae2566f2553","fromProperty":"result","toId":"07ea4d48-be06-0251-ce41-d21523a41c7d","toProperty":"iconSize"},{"fromId":"16917778-a3c4-0ec6-8145-723586e9c117","fromProperty":"iconObject","toId":"07ea4d48-be06-0251-ce41-d21523a41c7d","toProperty":"iconIconSource"},{"fromId":"5575baba-daf6-4792-ec0e-ae2628936c36","fromProperty":"position","toId":"d4f3fc5e-4686-c484-e2b4-bceaf6f50528","toProperty":"position"},{"fromId":"5575baba-daf6-4792-ec0e-ae2628936c36","fromProperty":"margin top","toId":"d4f3fc5e-4686-c484-e2b4-bceaf6f50528","toProperty":"marginTop"},{"fromId":"5575baba-daf6-4792-ec0e-ae2628936c36","fromProperty":"margin bottom","toId":"d4f3fc5e-4686-c484-e2b4-bceaf6f50528","toProperty":"marginBottom"},{"fromId":"5575baba-daf6-4792-ec0e-ae2628936c36","fromProperty":"margin left","toId":"d4f3fc5e-4686-c484-e2b4-bceaf6f50528","toProperty":"marginLeft"},{"fromId":"5575baba-daf6-4792-ec0e-ae2628936c36","fromProperty":"margin right","toId":"d4f3fc5e-4686-c484-e2b4-bceaf6f50528","toProperty":"marginRight"},{"fromId":"5575baba-daf6-4792-ec0e-ae2628936c36","fromProperty":"mounted","toId":"d4f3fc5e-4686-c484-e2b4-bceaf6f50528","toProperty":"mounted"},{"fromId":"5575baba-daf6-4792-ec0e-ae2628936c36","fromProperty":"enabled","toId":"d4f3fc5e-4686-c484-e2b4-bceaf6f50528","toProperty":"pointerEventsEnabled"}],"roots":[{"id":"d4f3fc5e-4686-c484-e2b4-bceaf6f50528","type":"Group","x":0,"y":0,"parameters":{"sizeMode":"explicit","borderRadius":{"value":20,"unit":"px"},"backgroundColor":"Grey - 400","styleCss":"/* background-color: red; */\ncursor: pointer;","width":{"value":34,"unit":"px"},"height":{"value":34,"unit":"px"},"justifyContent":"center","alignItems":"center","zIndex":1,"pointerEventsMode":"explicit"},"ports":[],"dynamicports":[],"children":[{"id":"07ea4d48-be06-0251-ce41-d21523a41c7d","type":"net.noodl.visual.icon","parameters":{"iconIconSource":{"class":"material-icons","code":"upload_file","codeAsClass":false},"iconColor":"Grey - 900","iconSize":{"value":24,"unit":"px"},"alignY":"center","alignX":"center"},"ports":[],"dynamicports":[],"children":[]}]},{"id":"5575baba-daf6-4792-ec0e-ae2628936c36","type":"Component Inputs","x":-228,"y":47.5,"parameters":{},"ports":[{"name":"icon","plug":"output","type":{"name":"*"},"index":1},{"name":"align x","plug":"output","type":{"name":"*"},"index":2},{"name":"align y","plug":"output","type":{"name":"*"},"index":3},{"name":"icon_name","plug":"output","type":{"name":"*"},"index":4},{"name":"background colour","plug":"output","type":{"name":"*"},"index":5},{"name":"icon colour","plug":"output","type":{"name":"*"},"index":6},{"name":"size","plug":"output","type":{"name":"*"},"index":7},{"name":"position","plug":"output","type":{"name":"*"},"index":8},{"name":"margin top","plug":"output","type":{"name":"*"},"index":9},{"name":"margin bottom","plug":"output","type":{"name":"*"},"index":10},{"name":"margin left","plug":"output","type":{"name":"*"},"index":11},{"name":"margin right","plug":"output","type":{"name":"*"},"index":12},{"name":"mounted","plug":"output","type":{"name":"*"},"index":13},{"name":"enabled","plug":"output","type":{"name":"*"},"index":14}],"dynamicports":[],"children":[]},{"id":"59375b57-9958-d08b-c8ab-28c5f4ae29e6","type":"Component Outputs","x":268,"y":35.5,"parameters":{},"ports":[{"name":"Clicked","plug":"input","type":{"name":"*"},"index":1}],"dynamicports":[],"children":[]},{"id":"16917778-a3c4-0ec6-8145-723586e9c117","type":"/Global logical components/Generate Google icon object","x":-230.16666666666663,"y":349.6666666666667,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"c5c051ed-7c5a-e239-3aea-1ae2566f2553","type":"Expression","x":-221.04166666666663,"y":-71.08333333333331,"parameters":{"expression":"size * 0.8\n"},"ports":[],"dynamicports":[{"group":"Parameters","name":"size","type":{"name":"*","editAsType":"string"},"plug":"input","index":7}],"children":[],"metadata":{"merge":{"soureCodePorts":["expression"]}}}],"visualRoots":["d4f3fc5e-4686-c484-e2b4-bceaf6f50528"]}},{"name":"/Loading Spinner","id":"c8179b37-4d33-05f3-b92c-eb88e4931b07","graph":{"connections":[{"fromId":"f0828ae2-8b1b-1c80-23ce-d694e84ec047","fromProperty":"Closed","toId":"bb6ce493-a9a1-2cb6-be97-6c8e84a121a0","toProperty":"Done"},{"fromId":"a8059560-2324-5e3d-7a7b-33f8d7651218","fromProperty":"Hide","toId":"fcb7744a-9f8a-5556-2814-4b440e418e14","toProperty":"run"},{"fromId":"a8059560-2324-5e3d-7a7b-33f8d7651218","fromProperty":"Show","toId":"a0cf88b9-65a2-1c31-0142-791517d23d83","toProperty":"run"},{"fromId":"a0cf88b9-65a2-1c31-0142-791517d23d83","fromProperty":"out-ShowPopup","toId":"f0828ae2-8b1b-1c80-23ce-d694e84ec047","toProperty":"show"}],"roots":[{"id":"a8059560-2324-5e3d-7a7b-33f8d7651218","type":"Component Inputs","x":-182,"y":261,"parameters":{},"ports":[{"name":"Show","plug":"output","type":{"name":"*"},"index":1},{"name":"Hide","plug":"output","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"f0828ae2-8b1b-1c80-23ce-d694e84ec047","type":"NavigationShowPopup","x":301.9709826726816,"y":260.2677808484063,"parameters":{"target":"/Loading Spinner/Loader Component"},"ports":[],"dynamicports":[],"children":[]},{"id":"bb6ce493-a9a1-2cb6-be97-6c8e84a121a0","type":"Component Outputs","x":527.6450866365918,"y":296.5526177477978,"parameters":{},"ports":[{"name":"Done","plug":"input","type":{"name":"*"},"index":1}],"dynamicports":[],"children":[]},{"id":"fcb7744a-9f8a-5556-2814-4b440e418e14","type":"JavaScriptFunction","label":"Send Hide Signal","x":159.96516310060855,"y":429.6337696246332,"parameters":{"functionScript":"// Decrease loading spinner running counter\nNoodl.Variables.NumLoadingSpinnerRunning--\n\n// When we reach zero, hide the loading spinner\nif(Noodl.Variables.NumLoadingSpinnerRunning < 1)\n    Noodl.Events.emit(\"Hide loader\");"},"ports":[],"dynamicports":[],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"a0cf88b9-65a2-1c31-0142-791517d23d83","type":"JavaScriptFunction","label":"Function","x":39.895308102470494,"y":191.86354205520934,"parameters":{"functionScript":"// If we have multiple show signals sent, only update the\n// running count\nif(Noodl.Variables.NumLoadingSpinnerRunning > 0)\n    Noodl.Variables.NumLoadingSpinnerRunning++\nelse {\n    // If this is the first show signal, show the popup\n    Noodl.Variables.NumLoadingSpinnerRunning = 1\n    Outputs.ShowPopup()\n}"},"ports":[],"dynamicports":[{"name":"out-ShowPopup","displayName":"ShowPopup","plug":"output","type":"signal","group":"Outputs","index":4}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}}],"visualRoots":[]}},{"name":"/Loading Spinner/Loader Component","id":"c84b2f35-f417-e233-49c2-121fef421f2a","graph":{"connections":[{"fromId":"c1100352-5f22-587e-8078-674c66d571ff","fromProperty":"didMount","toId":"38ede379-fe78-a83b-859e-b4eccb215349","toProperty":"to-Show"},{"fromId":"021df3bc-8985-a870-b5da-3d1353398310","fromProperty":"out-hide","toId":"38ede379-fe78-a83b-859e-b4eccb215349","toProperty":"to-Hide"},{"fromId":"38ede379-fe78-a83b-859e-b4eccb215349","fromProperty":"reached-Hide","toId":"ad29c5ef-060e-1ab6-db85-4e8cd7e96042","toProperty":"close"},{"fromId":"38ede379-fe78-a83b-859e-b4eccb215349","fromProperty":"opacity","toId":"c1100352-5f22-587e-8078-674c66d571ff","toProperty":"opacity"}],"roots":[{"id":"c1100352-5f22-587e-8078-674c66d571ff","type":"Group","x":-91,"y":180,"parameters":{"position":"absolute","width":{"value":100,"unit":"vw"},"height":{"value":100,"unit":"vh"},"backgroundColor":"#FFFFFF7F"},"ports":[],"dynamicports":[],"children":[{"id":"ba51f314-c48b-ea92-4f84-1f6c80481315","type":"Image","parameters":{"src":"Rolling-1s-200px.svg","sizeMode":"explicit","position":"absolute","alignX":"center","alignY":"center","width":{"value":100,"unit":"px"},"height":{"value":100,"unit":"px"}},"ports":[],"dynamicports":[],"children":[]}]},{"id":"ad29c5ef-060e-1ab6-db85-4e8cd7e96042","type":"NavigationClosePopup","x":434,"y":177,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"021df3bc-8985-a870-b5da-3d1353398310","type":"JavaScriptFunction","label":"Recieve Hide Signal","x":168,"y":7.666666666666629,"parameters":{"functionScript":"Noodl.Events.on(\"Hide loader\", function () {\n    Outputs.hide();\n});"},"ports":[],"dynamicports":[{"name":"out-hide","displayName":"hide","plug":"output","type":"signal","group":"Outputs","index":4}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"38ede379-fe78-a83b-859e-b4eccb215349","type":"States","label":"Animate in/out","x":166,"y":167.66666666666663,"parameters":{"states":"Show,Hide","currentState":"Hide","values":"opacity","value-Show-opacity":1,"value-Hide-opacity":0},"ports":[],"dynamicports":[{"type":{"name":"number","allowConnectionsOnly":true},"plug":"output","group":"Values","name":"opacity","index":6},{"type":{"name":"enum","enums":[{"label":"Number","value":"number"},{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Color","value":"color"},{"label":"Text Style","value":"textStyle"}],"allowEditOnly":true},"default":"number","plug":"input","group":"Types","displayName":"opacity","name":"type-opacity","index":7},{"plug":"input","type":"number","group":"Show Values","name":"value-Show-opacity","displayName":"opacity","editorName":"Show|opacity","index":8},{"plug":"input","type":"curve","displayName":"Default","default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"Show Transitions","name":"transitiondef-Show","index":9},{"plug":"input","type":{"name":"curve"},"default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"Show Transitions","name":"transition-Show-opacity","displayName":"opacity","editorName":"Transition Show|opacity","index":10},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Show","name":"to-Show","group":"Go to state","index":11},{"plug":"output","type":"boolean","displayName":"At Show","name":"at-Show","group":"Current state","index":12},{"plug":"output","type":"signal","displayName":"Has Reached Show","name":"reached-Show","group":"Current state","index":13},{"plug":"input","type":"number","group":"Hide Values","name":"value-Hide-opacity","displayName":"opacity","editorName":"Hide|opacity","index":14},{"plug":"input","type":"curve","displayName":"Default","default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"Hide Transitions","name":"transitiondef-Hide","index":15},{"plug":"input","type":{"name":"curve"},"default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"Hide Transitions","name":"transition-Hide-opacity","displayName":"opacity","editorName":"Transition Hide|opacity","index":16},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Hide","name":"to-Hide","group":"Go to state","index":17},{"plug":"output","type":"boolean","displayName":"At Hide","name":"at-Hide","group":"Current state","index":18},{"plug":"output","type":"signal","displayName":"Has Reached Hide","name":"reached-Hide","group":"Current state","index":19},{"plug":"input","type":{"name":"enum","enums":["Show","Hide"]},"group":"States","displayName":"State","name":"currentState","default":"Show","index":20}],"children":[]}],"visualRoots":["c1100352-5f22-587e-8078-674c66d571ff"]}},{"name":"/Pages And Rows","id":"d5962b71-7ca1-51c8-6c44-efea78cf31ca","graph":{"connections":[{"fromId":"aa32602c-1cab-c83c-5a83-5026eb4fc65d","fromProperty":"out-Pages","toId":"81e67b41-1c7e-2cac-aedf-41f080f19cb8","toProperty":"items"},{"fromId":"9b793a38-5c23-cc83-ff8b-a930b774957d","fromProperty":"Rows Per Page","toId":"0c552e92-2c4b-457f-3f23-aa940f22a998","toProperty":"value"},{"fromId":"81e67b41-1c7e-2cac-aedf-41f080f19cb8","fromProperty":"onChange","toId":"e72b941f-4e48-c987-4af0-4dbab14710ce","toProperty":"run"},{"fromId":"0c552e92-2c4b-457f-3f23-aa940f22a998","fromProperty":"savedValue","toId":"c7bcab99-bff8-832b-e42e-fcada6607c56","toProperty":"value-RowsPerPage"},{"fromId":"c7bcab99-bff8-832b-e42e-fcada6607c56","fromProperty":"value-RowsPerPage","toId":"81e67b41-1c7e-2cac-aedf-41f080f19cb8","toProperty":"value"},{"fromId":"81e67b41-1c7e-2cac-aedf-41f080f19cb8","fromProperty":"value","toId":"e72b941f-4e48-c987-4af0-4dbab14710ce","toProperty":"in-Value"},{"fromId":"c7bcab99-bff8-832b-e42e-fcada6607c56","fromProperty":"value-RowsPerPage","toId":"9227f49c-ebd8-1d5b-0757-990e7ed634be","toProperty":"Limit"},{"fromId":"e72b941f-4e48-c987-4af0-4dbab14710ce","fromProperty":"out-Changed","toId":"9227f49c-ebd8-1d5b-0757-990e7ed634be","toProperty":"Changed"},{"fromId":"9b793a38-5c23-cc83-ff8b-a930b774957d","fromProperty":"Selected Page","toId":"b27c25e6-4396-e014-2d5e-220ea8677a9f","toProperty":"value"},{"fromId":"b27c25e6-4396-e014-2d5e-220ea8677a9f","fromProperty":"savedValue","toId":"c7bcab99-bff8-832b-e42e-fcada6607c56","toProperty":"value-Selected Page"},{"fromId":"c7bcab99-bff8-832b-e42e-fcada6607c56","fromProperty":"value-RowsPerPage","toId":"4ec9f524-320c-af64-3e7a-ecf6925940b9","toProperty":"in-RowsPerPage"},{"fromId":"c7bcab99-bff8-832b-e42e-fcada6607c56","fromProperty":"value-Selected Page","toId":"4ec9f524-320c-af64-3e7a-ecf6925940b9","toProperty":"in-SelectedPage"},{"fromId":"4ec9f524-320c-af64-3e7a-ecf6925940b9","fromProperty":"out-Text","toId":"de3a8ba3-9ba8-4c50-b0a8-e83a9766693d","toProperty":"text"},{"fromId":"9b793a38-5c23-cc83-ff8b-a930b774957d","fromProperty":"Total Count","toId":"4ec9f524-320c-af64-3e7a-ecf6925940b9","toProperty":"in-TotalCount"},{"fromId":"c7bcab99-bff8-832b-e42e-fcada6607c56","fromProperty":"value-RowsPerPage","toId":"1b0dc689-6e0d-31d2-7ff8-30ef6cd93b4d","toProperty":"RowsPerPage"},{"fromId":"c7bcab99-bff8-832b-e42e-fcada6607c56","fromProperty":"value-Selected Page","toId":"1b0dc689-6e0d-31d2-7ff8-30ef6cd93b4d","toProperty":"SelectedPage"},{"fromId":"1b0dc689-6e0d-31d2-7ff8-30ef6cd93b4d","fromProperty":"result","toId":"9227f49c-ebd8-1d5b-0757-990e7ed634be","toProperty":"Skip"},{"fromId":"0160f64e-38de-abf4-15ba-6a34e9b4f3df","fromProperty":"onClick","toId":"89698522-2f75-3245-52c4-4e86225738f7","toProperty":"run"},{"fromId":"b3c097a1-2b57-f0b9-7a33-7d6cfa41d006","fromProperty":"onClick","toId":"1a355da5-47d7-4c3e-256e-f2f95e082cc5","toProperty":"run"},{"fromId":"89698522-2f75-3245-52c4-4e86225738f7","fromProperty":"out-Changed","toId":"9227f49c-ebd8-1d5b-0757-990e7ed634be","toProperty":"Changed"},{"fromId":"1a355da5-47d7-4c3e-256e-f2f95e082cc5","fromProperty":"out-Changed","toId":"9227f49c-ebd8-1d5b-0757-990e7ed634be","toProperty":"Changed"},{"fromId":"4112055f-7f05-26b6-999f-a2504428a948","fromProperty":"onClick","toId":"8b21a3b3-8bc6-6f53-9950-e9f910b56102","toProperty":"run"},{"fromId":"95bb3ac0-eec2-6c24-db7b-6f03f5000169","fromProperty":"onClick","toId":"f080768b-e214-603b-92ab-57d5e94dec22","toProperty":"run"},{"fromId":"8b21a3b3-8bc6-6f53-9950-e9f910b56102","fromProperty":"out-Changed","toId":"9227f49c-ebd8-1d5b-0757-990e7ed634be","toProperty":"Changed"},{"fromId":"f080768b-e214-603b-92ab-57d5e94dec22","fromProperty":"out-Changed","toId":"9227f49c-ebd8-1d5b-0757-990e7ed634be","toProperty":"Changed"},{"fromId":"4ec9f524-320c-af64-3e7a-ecf6925940b9","fromProperty":"out-BackEnabled","toId":"0160f64e-38de-abf4-15ba-6a34e9b4f3df","toProperty":"enabled"},{"fromId":"4ec9f524-320c-af64-3e7a-ecf6925940b9","fromProperty":"out-BackEnabled","toId":"4112055f-7f05-26b6-999f-a2504428a948","toProperty":"enabled"},{"fromId":"4ec9f524-320c-af64-3e7a-ecf6925940b9","fromProperty":"out-NextEnabled","toId":"95bb3ac0-eec2-6c24-db7b-6f03f5000169","toProperty":"enabled"},{"fromId":"4ec9f524-320c-af64-3e7a-ecf6925940b9","fromProperty":"out-NextEnabled","toId":"b3c097a1-2b57-f0b9-7a33-7d6cfa41d006","toProperty":"enabled"},{"fromId":"c7bcab99-bff8-832b-e42e-fcada6607c56","fromProperty":"value-Selected Page","toId":"9227f49c-ebd8-1d5b-0757-990e7ed634be","toProperty":"Selected Page"},{"fromId":"ce4ecf21-4afe-1c56-5e6c-4056bf4f2312","fromProperty":"Align Y","toId":"43d3a2c6-d738-f093-2844-9faa5a3b4c3a","toProperty":"alignY"},{"fromId":"ce4ecf21-4afe-1c56-5e6c-4056bf4f2312","fromProperty":"Align X","toId":"43d3a2c6-d738-f093-2844-9faa5a3b4c3a","toProperty":"alignX"},{"fromId":"ce4ecf21-4afe-1c56-5e6c-4056bf4f2312","fromProperty":"Margin Top","toId":"43d3a2c6-d738-f093-2844-9faa5a3b4c3a","toProperty":"marginTop"},{"fromId":"ce4ecf21-4afe-1c56-5e6c-4056bf4f2312","fromProperty":"Margin Bottom","toId":"43d3a2c6-d738-f093-2844-9faa5a3b4c3a","toProperty":"marginBottom"},{"fromId":"ce4ecf21-4afe-1c56-5e6c-4056bf4f2312","fromProperty":"Margin Left","toId":"43d3a2c6-d738-f093-2844-9faa5a3b4c3a","toProperty":"marginLeft"},{"fromId":"ce4ecf21-4afe-1c56-5e6c-4056bf4f2312","fromProperty":"Margin Right","toId":"43d3a2c6-d738-f093-2844-9faa5a3b4c3a","toProperty":"marginRight"},{"fromId":"ce4ecf21-4afe-1c56-5e6c-4056bf4f2312","fromProperty":"Position","toId":"43d3a2c6-d738-f093-2844-9faa5a3b4c3a","toProperty":"position"},{"fromId":"ce4ecf21-4afe-1c56-5e6c-4056bf4f2312","fromProperty":"Width","toId":"43d3a2c6-d738-f093-2844-9faa5a3b4c3a","toProperty":"width"},{"fromId":"9b793a38-5c23-cc83-ff8b-a930b774957d","fromProperty":"Options","toId":"aa32602c-1cab-c83c-5a83-5026eb4fc65d","toProperty":"in-RowPerPageOptions"}],"roots":[{"id":"43d3a2c6-d738-f093-2844-9faa5a3b4c3a","type":"Group","x":0,"y":0,"parameters":{"flexDirection":"row","justifyContent":"flex-end","alignItems":"center","sizeMode":"contentSize"},"ports":[],"dynamicports":[],"children":[{"id":"ecb398be-1349-35e1-b7ba-0c89f3011999","type":"Text","parameters":{"text":"Rows per page","sizeMode":"contentSize","alignY":"center","marginRight":{"value":12,"unit":"px"},"textStyle":"Body Medium","color":"White"},"ports":[],"dynamicports":[],"children":[]},{"id":"81e67b41-1c7e-2cac-aedf-41f080f19cb8","type":"net.noodl.controls.options","parameters":{"useLabel":false,"width":{"value":80,"unit":"px"},"placeholder":"","color":"White","iconSize":{"value":24,"unit":"px"},"iconColor":"White","borderColor":"White"},"ports":[],"dynamicports":[],"children":[]},{"id":"de3a8ba3-9ba8-4c50-b0a8-e83a9766693d","type":"Text","label":"Text","parameters":{"text":"Rows per page","sizeMode":"contentSize","alignY":"center","marginRight":{"value":40,"unit":"px"},"marginLeft":{"value":32,"unit":"px"},"color":"White"},"ports":[],"dynamicports":[],"children":[]},{"id":"0160f64e-38de-abf4-15ba-6a34e9b4f3df","type":"net.noodl.controls.button","parameters":{"useLabel":false,"useIcon":true,"iconIconSource":{"class":"material-icons","code":"skip_previous"},"backgroundColor":"transparent","minWidth":{"value":0,"unit":"px"},"iconColor":"White","iconSize":{"value":26,"unit":"px"},"paddingRight":{"value":0,"unit":"px"},"paddingLeft":{"value":0,"unit":"px"},"sizeMode":"explicit","width":{"value":32,"unit":"px"},"height":{"value":32,"unit":"px"},"marginRight":{"value":16,"unit":"px"}},"stateParameters":{"disabled":{"iconColor":"Grey - 500"},"hover":{"iconColor":"Grey - 700"}},"ports":[],"dynamicports":[],"children":[]},{"id":"4112055f-7f05-26b6-999f-a2504428a948","type":"net.noodl.controls.button","parameters":{"useLabel":false,"useIcon":true,"iconIconSource":{"class":"material-icons","code":"chevron_left"},"backgroundColor":"transparent","paddingLeft":{"value":0,"unit":"px"},"paddingRight":{"value":0,"unit":"px"},"minWidth":{"value":0,"unit":"px"},"iconColor":"White","iconSize":{"value":26,"unit":"px"},"sizeMode":"explicit","width":{"value":32,"unit":"px"},"height":{"value":32,"unit":"px"},"marginRight":{"value":16,"unit":"px"}},"stateParameters":{"disabled":{"iconColor":"Grey - 500"},"hover":{"iconColor":"Grey - 700"}},"ports":[],"dynamicports":[],"children":[]},{"id":"95bb3ac0-eec2-6c24-db7b-6f03f5000169","type":"net.noodl.controls.button","parameters":{"useLabel":false,"useIcon":true,"iconIconSource":{"class":"material-icons","code":"chevron_right"},"backgroundColor":"transparent","paddingLeft":{"value":0,"unit":"px"},"paddingRight":{"value":0,"unit":"px"},"minWidth":{"value":0,"unit":"px"},"iconColor":"White","iconSize":{"value":26,"unit":"px"},"sizeMode":"explicit","width":{"value":32,"unit":"px"},"height":{"value":32,"unit":"px"},"marginRight":{"value":16,"unit":"px"}},"stateParameters":{"disabled":{"iconColor":"Grey - 500"},"hover":{"iconColor":"Grey - 700"}},"ports":[],"dynamicports":[],"children":[]},{"id":"b3c097a1-2b57-f0b9-7a33-7d6cfa41d006","type":"net.noodl.controls.button","parameters":{"useLabel":false,"useIcon":true,"iconIconSource":{"class":"material-icons","code":"skip_next"},"backgroundColor":"transparent","paddingLeft":{"value":0,"unit":"px"},"paddingRight":{"value":0,"unit":"px"},"minWidth":{"value":0,"unit":"px"},"iconColor":"White","iconSize":{"value":26,"unit":"px"},"sizeMode":"explicit","width":{"value":32,"unit":"px"},"height":{"value":32,"unit":"px"}},"stateParameters":{"disabled":{"iconColor":"Grey - 500"},"hover":{"iconColor":"Grey - 700"}},"ports":[],"dynamicports":[],"children":[]}]},{"id":"aa32602c-1cab-c83c-5a83-5026eb4fc65d","type":"JavaScriptFunction","x":-467.00411151705737,"y":17,"parameters":{"functionScript":"const pages = Inputs.RowPerPageOptions;\n\nOutputs.Pages = pages.map(p => ({\n    Label:\"\"+p,\n    Value:\"\"+p\n}))","scriptInputs":[{"id":"8g7v","label":"RowPerPageOptions"}],"intype-RowPerPageOptions":"array","in-RowPerPageOptions":"[5,10,15,20,30,40,50]"},"ports":[],"dynamicports":[{"name":"intype-RowPerPageOptions","displayName":"Type","editorName":"RowPerPageOptions | Type","plug":"input","type":{"name":"enum","enums":[{"value":"string","label":"String"},{"value":"boolean","label":"Boolean"},{"value":"number","label":"Number"},{"value":"object","label":"Object"},{"value":"date","label":"Date"},{"value":"array","label":"Array"},{"value":"color","label":"Color"}],"allowEditOnly":true},"default":"string","parent":"scriptInputs","parentItemId":"8g7v","index":4},{"name":"in-RowPerPageOptions","displayName":"RowPerPageOptions","plug":"input","type":"array","group":"Inputs","index":5},{"name":"out-Pages","displayName":"Pages","plug":"output","type":"*","group":"Outputs","index":6}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"9b793a38-5c23-cc83-ff8b-a930b774957d","type":"Component Inputs","x":-750,"y":127,"parameters":{},"ports":[{"name":"Total Count","plug":"output","type":{"name":"*"},"index":1},{"name":"Selected Page","plug":"output","type":{"name":"*"},"index":2},{"name":"Rows Per Page","plug":"output","type":{"name":"*"},"index":3},{"name":"Options","plug":"output","type":{"name":"*"},"index":4}],"dynamicports":[],"children":[]},{"id":"0c552e92-2c4b-457f-3f23-aa940f22a998","type":"Number","x":-471,"y":136,"parameters":{"value":5},"ports":[],"dynamicports":[],"children":[]},{"id":"e72b941f-4e48-c987-4af0-4dbab14710ce","type":"JavaScriptFunction","x":307,"y":-30,"parameters":{"functionScript":"const rowsPerPage = parseInt(Inputs.Value);\n\nComponent.Object.RowsPerPage = isNaN(rowsPerPage)?5:rowsPerPage;\n\nOutputs.Changed();"},"ports":[],"dynamicports":[{"name":"in-Value","displayName":"Value","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Changed","displayName":"Changed","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"c7bcab99-bff8-832b-e42e-fcada6607c56","type":"net.noodl.ComponentObject","x":-237,"y":185,"parameters":{"properties":"RowsPerPage,Selected Page"},"ports":[],"dynamicports":[{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"value-RowsPerPage","displayName":"RowsPerPage","index":4},{"type":"signal","plug":"output","group":"Changed Events","displayName":"RowsPerPage Changed","name":"changed-RowsPerPage","index":5},{"type":{"name":"*","allowConnectionsOnly":true},"plug":"input/output","group":"Properties","name":"value-Selected Page","displayName":"Selected Page","index":6},{"type":"signal","plug":"output","group":"Changed Events","displayName":"Selected Page Changed","name":"changed-Selected Page","index":7}],"children":[]},{"id":"9227f49c-ebd8-1d5b-0757-990e7ed634be","type":"Component Outputs","x":608,"y":181,"parameters":{},"ports":[{"name":"Skip","plug":"input","type":{"name":"*"},"index":1},{"name":"Limit","plug":"input","type":{"name":"*"},"index":2},{"name":"Changed","plug":"input","type":{"name":"*"},"index":3},{"name":"Selected Page","plug":"input","type":{"name":"*"},"index":4}],"dynamicports":[],"children":[]},{"id":"b27c25e6-4396-e014-2d5e-220ea8677a9f","type":"Number","x":-482,"y":260,"parameters":{"value":0},"ports":[],"dynamicports":[],"children":[]},{"id":"4ec9f524-320c-af64-3e7a-ecf6925940b9","type":"JavaScriptFunction","x":-235.07142857142856,"y":308.7142857142857,"parameters":{"functionScript":"const startRow = Inputs.RowsPerPage*Inputs.SelectedPage;\nlet endRow = startRow + Inputs.RowsPerPage;\n\nif(endRow > Inputs.TotalCount)\n    endRow = Inputs.TotalCount;\n\nconst numPages = Math.ceil(Inputs.TotalCount / Inputs.RowsPerPage);\nComponent.Object.NumPages = numPages;\n\nif(Component.Object['Selected Page'] > numPages-1) {\n    Component.Object['Selected Page'] = numPages-1;\n}\n\nOutputs.NextEnabled = Component.Object['Selected Page'] < numPages-1;\nOutputs.BackEnabled = Component.Object['Selected Page'] > 0;\n\nOutputs.Text = (startRow+1) + \"-\" + endRow + \" of \" + (Inputs.TotalCount!==undefined?Inputs.TotalCount:\"?\");"},"ports":[],"dynamicports":[{"name":"in-RowsPerPage","displayName":"RowsPerPage","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-SelectedPage","displayName":"SelectedPage","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-TotalCount","displayName":"TotalCount","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-NextEnabled","displayName":"NextEnabled","plug":"output","type":"*","group":"Outputs","index":7},{"name":"out-BackEnabled","displayName":"BackEnabled","plug":"output","type":"*","group":"Outputs","index":8},{"name":"out-Text","displayName":"Text","plug":"output","type":"*","group":"Outputs","index":9}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"1b0dc689-6e0d-31d2-7ff8-30ef6cd93b4d","type":"Expression","x":315.5857142857143,"y":108.64285714285717,"parameters":{"expression":"RowsPerPage*SelectedPage"},"ports":[],"dynamicports":[{"group":"Parameters","name":"RowsPerPage","type":{"name":"*","editAsType":"string"},"plug":"input","index":7},{"group":"Parameters","name":"SelectedPage","type":{"name":"*","editAsType":"string"},"plug":"input","index":8}],"children":[],"metadata":{"merge":{"soureCodePorts":["expression"]}}},{"id":"89698522-2f75-3245-52c4-4e86225738f7","type":"JavaScriptFunction","label":"To start","x":282.5857142857144,"y":279.64285714285717,"parameters":{"functionScript":"Component.Object['Selected Page'] = 0;\n\nOutputs.Changed();"},"ports":[],"dynamicports":[{"name":"out-Changed","displayName":"Changed","plug":"output","type":"signal","group":"Outputs","index":4}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"1a355da5-47d7-4c3e-256e-f2f95e082cc5","type":"JavaScriptFunction","label":"To start","x":293,"y":581,"parameters":{"functionScript":"Component.Object['Selected Page'] = Component.Object.NumPages-1;\n\nOutputs.Changed();"},"ports":[],"dynamicports":[{"name":"out-Changed","displayName":"Changed","plug":"output","type":"signal","group":"Outputs","index":4}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"8b21a3b3-8bc6-6f53-9950-e9f910b56102","type":"JavaScriptFunction","label":"Back","x":289,"y":377,"parameters":{"functionScript":"if(Component.Object['Selected Page'] > 0)\n    Component.Object['Selected Page']--;\n\nOutputs.Changed();"},"ports":[],"dynamicports":[{"name":"out-Changed","displayName":"Changed","plug":"output","type":"signal","group":"Outputs","index":4}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"f080768b-e214-603b-92ab-57d5e94dec22","type":"JavaScriptFunction","label":"Next","x":286,"y":479,"parameters":{"functionScript":"if(Component.Object['Selected Page'] < Component.Object.NumPages-1)\n    Component.Object['Selected Page']++;\n\nOutputs.Changed();"},"ports":[],"dynamicports":[{"name":"out-Changed","displayName":"Changed","plug":"output","type":"signal","group":"Outputs","index":4}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"ce4ecf21-4afe-1c56-5e6c-4056bf4f2312","type":"Component Inputs","x":-317,"y":-239,"parameters":{},"ports":[{"name":"Align X","plug":"output","type":{"name":"*"},"group":"Alignment","index":1},{"name":"Align Y","plug":"output","type":{"name":"*"},"group":"Alignment","index":0},{"name":"Position","plug":"output","type":{"name":"*"},"group":"Layout","index":6},{"name":"Margin Top","plug":"output","type":{"name":"*"},"group":"Margins","index":2},{"name":"Margin Bottom","plug":"output","type":{"name":"*"},"group":"Margins","index":3},{"name":"Margin Left","plug":"output","type":{"name":"*"},"group":"Margins","index":4},{"name":"Margin Right","plug":"output","type":{"name":"*"},"group":"Margins","index":5},{"name":"Width","plug":"output","type":{"name":"*"},"group":"Dimensions","index":7}],"dynamicports":[],"children":[]}],"visualRoots":["43d3a2c6-d738-f093-2844-9faa5a3b4c3a"]}},{"name":"/Show Toast","id":"6e555d84-cf95-758d-ef3b-c3ea23a79401","graph":{"connections":[{"fromId":"e89d9f0d-5fd7-ac9d-ce70-81ef25b1ec34","fromProperty":"Do","toId":"d0854933-5e3a-5671-8866-d8ccb810c1cf","toProperty":"show"},{"fromId":"e89d9f0d-5fd7-ac9d-ce70-81ef25b1ec34","fromProperty":"Message","toId":"29dc7ffb-a564-bfc2-6af1-0cba7c2784f1","toProperty":"value"},{"fromId":"29dc7ffb-a564-bfc2-6af1-0cba7c2784f1","fromProperty":"savedValue","toId":"d0854933-5e3a-5671-8866-d8ccb810c1cf","toProperty":"popupParam-Message"},{"fromId":"e89d9f0d-5fd7-ac9d-ce70-81ef25b1ec34","fromProperty":"Type","toId":"bfead1e7-4ce8-8f5f-4230-dac1b81dc931","toProperty":"currentState"},{"fromId":"bfead1e7-4ce8-8f5f-4230-dac1b81dc931","fromProperty":"currentState","toId":"d0854933-5e3a-5671-8866-d8ccb810c1cf","toProperty":"popupParam-Type"}],"roots":[{"id":"e89d9f0d-5fd7-ac9d-ce70-81ef25b1ec34","type":"Component Inputs","x":-408,"y":16,"parameters":{},"ports":[{"name":"Do","plug":"output","type":"*","index":0},{"name":"Message","plug":"output","type":{"name":"*"},"index":1,"group":"General"},{"name":"Type","plug":"output","type":{"name":"*"},"group":"General","index":2}],"dynamicports":[],"children":[]},{"id":"00c7594a-c478-2bbb-560f-011d15acc7b6","type":"Component Outputs","x":330,"y":27,"parameters":{},"ports":[{"name":"Success","plug":"input","type":"*","index":0},{"name":"Failure","plug":"input","type":"*","index":1}],"dynamicports":[],"children":[]},{"id":"d0854933-5e3a-5671-8866-d8ccb810c1cf","type":"NavigationShowPopup","x":81.5,"y":-2.5,"parameters":{"target":"/Show Toast/Toast Component"},"ports":[],"dynamicports":[{"name":"popupParam-Message","displayName":"Message","type":"*","plug":"input","group":"Params","index":3},{"name":"popupParam-Type","displayName":"Type","type":"*","plug":"input","group":"Params","index":4}],"children":[]},{"id":"29dc7ffb-a564-bfc2-6af1-0cba7c2784f1","type":"String","x":-160.5,"y":-53.5,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"bfead1e7-4ce8-8f5f-4230-dac1b81dc931","type":"States","x":-158.75,"y":92.75,"parameters":{"states":"Warning,Normal,Error,Success","currentState":"Normal"},"ports":[],"dynamicports":[{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Warning","name":"to-Warning","group":"Go to state","index":6},{"plug":"output","type":"boolean","displayName":"At Warning","name":"at-Warning","group":"Current state","index":7},{"plug":"output","type":"signal","displayName":"Has Reached Warning","name":"reached-Warning","group":"Current state","index":8},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Normal","name":"to-Normal","group":"Go to state","index":9},{"plug":"output","type":"boolean","displayName":"At Normal","name":"at-Normal","group":"Current state","index":10},{"plug":"output","type":"signal","displayName":"Has Reached Normal","name":"reached-Normal","group":"Current state","index":11},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Error","name":"to-Error","group":"Go to state","index":12},{"plug":"output","type":"boolean","displayName":"At Error","name":"at-Error","group":"Current state","index":13},{"plug":"output","type":"signal","displayName":"Has Reached Error","name":"reached-Error","group":"Current state","index":14},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Success","name":"to-Success","group":"Go to state","index":15},{"plug":"output","type":"boolean","displayName":"At Success","name":"at-Success","group":"Current state","index":16},{"plug":"output","type":"signal","displayName":"Has Reached Success","name":"reached-Success","group":"Current state","index":17},{"plug":"input","type":{"name":"enum","enums":["Warning","Normal","Error","Success"]},"group":"States","displayName":"State","name":"currentState","default":"Warning","index":18}],"children":[]}],"visualRoots":[]}},{"name":"/Show Toast/Error","id":"9e3d1a19-7254-efcc-f1cc-9e5cad5b2130","graph":{"connections":[{"fromId":"9f1adbd6-2de4-6876-df61-c68958a914f5","fromProperty":"Message","toId":"59f52c0d-0e1f-03e9-5493-00e35b815d76","toProperty":"text"}],"roots":[{"id":"9f1adbd6-2de4-6876-df61-c68958a914f5","type":"Component Inputs","x":-301.5,"y":117.5,"parameters":{},"ports":[{"name":"Message","plug":"output","type":{"name":"*"},"index":1},{"name":"Mounted","plug":"output","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"fe90b7e2-a336-51c7-f9d8-eab086d2fa1e","type":"Group","x":15.5,"y":100,"parameters":{"sizeMode":"contentWidth","backgroundColor":"White","alignX":"center","alignY":"top","boxShadowEnabled":true,"borderRadius":{"value":4,"unit":"px"},"boxShadowBlurRadius":{"value":4,"unit":"px"},"boxShadowSpreadRadius":{"value":0,"unit":"px"},"boxShadowOffsetY":{"value":2,"unit":"px"},"maxWidth":{"value":380,"unit":"px"},"boxShadowColor":"#00000033","borderWidth":{"value":1,"unit":"px"},"borderColor":"Danger","flexDirection":"row","alignItems":"center","height":{"value":56,"unit":"px"},"borderStyle":"solid","paddingRight":{"value":16,"unit":"px"}},"ports":[],"dynamicports":[],"children":[{"id":"546180d6-130a-5dea-e85e-7aea6d4eb582","type":"Group","parameters":{"width":{"value":56,"unit":"px"},"height":{"value":56,"unit":"px"},"backgroundColor":"#F75A4F3F","alignItems":"center","justifyContent":"center"},"ports":[],"dynamicports":[],"children":[{"id":"c1efaf92-a6b6-24a3-c33f-00136a62efda","type":"net.noodl.visual.icon","parameters":{"iconIconSource":{"class":"material-icons","code":"error"},"iconSize":{"value":24,"unit":"px"},"iconColor":"Danger"},"ports":[],"dynamicports":[],"children":[]}]},{"id":"59f52c0d-0e1f-03e9-5493-00e35b815d76","type":"Text","parameters":{"text":"Some message","color":"Grey - 900","textStyle":"Label Large","marginLeft":{"value":16,"unit":"px"}},"ports":[],"dynamicports":[],"children":[]}]}],"visualRoots":["fe90b7e2-a336-51c7-f9d8-eab086d2fa1e"]}},{"name":"/Show Toast/Normal","id":"c567da49-4d6d-31cd-8fcd-0af18de931c7","graph":{"connections":[{"fromId":"cafa463d-2da7-73eb-41e9-1244a0bc69d3","fromProperty":"Message","toId":"9f876913-2117-8e25-f754-a3819ba3f30d","toProperty":"text"}],"roots":[{"id":"6526d39d-c7ad-1d5d-b080-b65e807268b3","type":"Group","x":-26.5,"y":77.5,"parameters":{"sizeMode":"contentWidth","backgroundColor":"White","alignX":"center","alignY":"top","boxShadowEnabled":true,"borderRadius":{"value":4,"unit":"px"},"boxShadowBlurRadius":{"value":4,"unit":"px"},"boxShadowSpreadRadius":{"value":0,"unit":"px"},"boxShadowOffsetY":{"value":2,"unit":"px"},"maxWidth":{"value":380,"unit":"px"},"boxShadowColor":"#00000026","borderStyle":"solid","borderWidth":{"value":1,"unit":"px"},"borderColor":"Grey - 500","paddingLeft":{"value":24,"unit":"px"},"paddingRight":{"value":24,"unit":"px"},"height":{"value":56,"unit":"px"},"justifyContent":"center"},"ports":[],"dynamicports":[],"children":[{"id":"9f876913-2117-8e25-f754-a3819ba3f30d","type":"Text","parameters":{"text":"Some message","color":"Grey - 900","textStyle":"Label Medium"},"ports":[],"dynamicports":[],"children":[]}]},{"id":"cafa463d-2da7-73eb-41e9-1244a0bc69d3","type":"Component Inputs","x":-301.5,"y":117.5,"parameters":{},"ports":[{"name":"Message","plug":"output","type":{"name":"*"},"index":1},{"name":"Mounted","plug":"output","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]}],"visualRoots":["6526d39d-c7ad-1d5d-b080-b65e807268b3"]}},{"name":"/Show Toast/Success","id":"db33b6e9-303f-1325-3148-ebb7d7c79538","graph":{"connections":[{"fromId":"11b96af8-f4ab-ba4d-95d8-8ca17e425569","fromProperty":"Message","toId":"08c55f80-6c37-4b1c-5176-d75a1ba1e62e","toProperty":"text"}],"roots":[{"id":"061a6d75-f19c-3c4c-fc32-7bf3ec96718b","type":"Group","x":-26.5,"y":77.5,"parameters":{"sizeMode":"contentWidth","backgroundColor":"White","alignX":"center","alignY":"top","boxShadowEnabled":true,"borderRadius":{"value":4,"unit":"px"},"boxShadowBlurRadius":{"value":4,"unit":"px"},"boxShadowSpreadRadius":{"value":0,"unit":"px"},"boxShadowOffsetY":{"value":2,"unit":"px"},"maxWidth":{"value":380,"unit":"px"},"boxShadowColor":"#00000019","borderWidth":{"value":1,"unit":"px"},"borderColor":"Success","flexDirection":"row","alignItems":"center","height":{"value":56,"unit":"px"},"borderStyle":"solid","paddingRight":{"value":16,"unit":"px"}},"ports":[],"dynamicports":[],"children":[{"id":"3d7c2111-8e09-9eec-29f1-7f8d82873c60","type":"Group","parameters":{"width":{"value":56,"unit":"px"},"height":{"value":56,"unit":"px"},"backgroundColor":"#49AD7F3F","alignItems":"center","justifyContent":"center"},"ports":[],"dynamicports":[],"children":[{"id":"8f2f3718-da44-7aaa-4549-763d08c7c7db","type":"net.noodl.visual.icon","parameters":{"iconIconSource":{"class":"material-icons","code":"check_circle"},"iconSize":{"value":24,"unit":"px"},"iconColor":"Success"},"ports":[],"dynamicports":[],"children":[]}]},{"id":"08c55f80-6c37-4b1c-5176-d75a1ba1e62e","type":"Text","parameters":{"text":"Some message","color":"Grey - 900","textStyle":"Label Large","marginLeft":{"value":16,"unit":"px"}},"ports":[],"dynamicports":[],"children":[]}]},{"id":"11b96af8-f4ab-ba4d-95d8-8ca17e425569","type":"Component Inputs","x":-301.5,"y":117.5,"parameters":{},"ports":[{"name":"Message","plug":"output","type":{"name":"*"},"index":1},{"name":"Mounted","plug":"output","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]}],"visualRoots":["061a6d75-f19c-3c4c-fc32-7bf3ec96718b"]}},{"name":"/Show Toast/Toast Component","id":"ce821687-53d9-b313-f7d3-810a38aa6bda","graph":{"connections":[{"fromId":"bf8b26e1-45d2-7bb9-0849-5ff1441a5108","fromProperty":"didMount","toId":"090305f6-d969-c82e-9aa4-46ede7f4a915","toProperty":"run"},{"fromId":"bf8b26e1-45d2-7bb9-0849-5ff1441a5108","fromProperty":"this","toId":"090305f6-d969-c82e-9aa4-46ede7f4a915","toProperty":"in-This"},{"fromId":"284bd218-4ee9-ce3a-7b1c-69e63bcd906f","fromProperty":"timerFinished","toId":"e89af086-c453-4aad-cd01-9cbd62085e71","toProperty":"to-No"},{"fromId":"e89af086-c453-4aad-cd01-9cbd62085e71","fromProperty":"reached-No","toId":"f5726579-309c-4ed3-4b3b-62ab54873413","toProperty":"close"},{"fromId":"bf8b26e1-45d2-7bb9-0849-5ff1441a5108","fromProperty":"didMount","toId":"e89af086-c453-4aad-cd01-9cbd62085e71","toProperty":"to-Yes"},{"fromId":"e89af086-c453-4aad-cd01-9cbd62085e71","fromProperty":"Pos","toId":"5154ad5a-2d59-3337-975f-c6b5fc9ba8f4","toProperty":"transformY"},{"fromId":"bf8b26e1-45d2-7bb9-0849-5ff1441a5108","fromProperty":"didMount","toId":"284bd218-4ee9-ce3a-7b1c-69e63bcd906f","toProperty":"start"},{"fromId":"c72a82ce-962c-7968-e70d-cc1aeb519578","fromProperty":"Message","toId":"06f173fe-02d0-3039-cab4-15b1c84c4c99","toProperty":"in-Message"},{"fromId":"c72a82ce-962c-7968-e70d-cc1aeb519578","fromProperty":"Type","toId":"06f173fe-02d0-3039-cab4-15b1c84c4c99","toProperty":"in-Type"},{"fromId":"06f173fe-02d0-3039-cab4-15b1c84c4c99","fromProperty":"out-ToastType","toId":"a5047273-0784-b83d-c140-95643e12f8af","toProperty":"items"}],"roots":[{"id":"bf8b26e1-45d2-7bb9-0849-5ff1441a5108","type":"Group","x":-22,"y":-39,"parameters":{"position":"absolute","pointerEventsEnabled":false,"mounted":true,"sizeMode":"contentHeight"},"ports":[],"dynamicports":[],"children":[{"id":"5154ad5a-2d59-3337-975f-c6b5fc9ba8f4","type":"Group","label":"Toast","parameters":{"sizeMode":"contentSize","marginTop":{"value":24,"unit":"px"},"alignX":"center","alignY":"top","minWidth":{"value":150,"unit":"px"}},"ports":[],"dynamicports":[],"children":[{"id":"a5047273-0784-b83d-c140-95643e12f8af","type":"For Each","parameters":{"templateType":"dynamic","templateScript":"component = '../' + item.Type;"},"ports":[],"dynamicports":[],"children":[],"metadata":{"merge":{"soureCodePorts":["templateScript"]}}}]}]},{"id":"090305f6-d969-c82e-9aa4-46ede7f4a915","type":"JavaScriptFunction","label":"Ensure click through","x":258.5,"y":-62.5,"parameters":{"functionScript":"// Make sure you can click through parent div\n// so it doesn't block like normal popups\nInputs.This.getDOMElement().style.pointerEvents = 'none'\nInputs.This.getDOMElement().parentElement.style.pointerEvents = 'none'"},"ports":[],"dynamicports":[{"name":"in-This","displayName":"This","plug":"input","type":"*","group":"Inputs","index":4}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}},{"id":"284bd218-4ee9-ce3a-7b1c-69e63bcd906f","type":"Timer","x":-269.5,"y":-49.5,"parameters":{"duration":3000},"ports":[],"dynamicports":[],"children":[]},{"id":"f5726579-309c-4ed3-4b3b-62ab54873413","type":"NavigationClosePopup","x":-778.5,"y":69.5,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"e89af086-c453-4aad-cd01-9cbd62085e71","type":"States","label":"Visible","x":-513.5,"y":5.5,"parameters":{"states":"Yes,No","values":"Pos","value-Yes-Pos":0,"value-No-Pos":-200,"currentState":"No"},"ports":[],"dynamicports":[{"type":{"name":"number","allowConnectionsOnly":true},"plug":"output","group":"Values","name":"Pos","index":6},{"type":{"name":"enum","enums":[{"label":"Number","value":"number"},{"label":"String","value":"string"},{"label":"Boolean","value":"boolean"},{"label":"Color","value":"color"},{"label":"Text Style","value":"textStyle"}],"allowEditOnly":true},"default":"number","plug":"input","group":"Types","displayName":"Pos","name":"type-Pos","index":7},{"plug":"input","type":"number","group":"Yes Values","name":"value-Yes-Pos","displayName":"Pos","editorName":"Yes|Pos","index":8},{"plug":"input","type":"curve","displayName":"Default","default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"Yes Transitions","name":"transitiondef-Yes","index":9},{"plug":"input","type":{"name":"curve"},"default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"Yes Transitions","name":"transition-Yes-Pos","displayName":"Pos","editorName":"Transition Yes|Pos","index":10},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To Yes","name":"to-Yes","group":"Go to state","index":11},{"plug":"output","type":"boolean","displayName":"At Yes","name":"at-Yes","group":"Current state","index":12},{"plug":"output","type":"signal","displayName":"Has Reached Yes","name":"reached-Yes","group":"Current state","index":13},{"plug":"input","type":"number","group":"No Values","name":"value-No-Pos","displayName":"Pos","editorName":"No|Pos","index":14},{"plug":"input","type":"curve","displayName":"Default","default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"No Transitions","name":"transitiondef-No","index":15},{"plug":"input","type":{"name":"curve"},"default":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"group":"No Transitions","name":"transition-No-Pos","displayName":"Pos","editorName":"Transition No|Pos","index":16},{"plug":"input","type":{"name":"signal","allowConnectionsOnly":true},"displayName":"To No","name":"to-No","group":"Go to state","index":17},{"plug":"output","type":"boolean","displayName":"At No","name":"at-No","group":"Current state","index":18},{"plug":"output","type":"signal","displayName":"Has Reached No","name":"reached-No","group":"Current state","index":19},{"plug":"input","type":{"name":"enum","enums":["Yes","No"]},"group":"States","displayName":"State","name":"currentState","default":"Yes","index":20}],"children":[]},{"id":"c72a82ce-962c-7968-e70d-cc1aeb519578","type":"Component Inputs","x":542.5,"y":140.5,"parameters":{},"ports":[{"name":"Message","plug":"output","type":{"name":"*"},"index":1},{"name":"Type","plug":"output","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"06f173fe-02d0-3039-cab4-15b1c84c4c99","type":"JavaScriptFunction","x":279.91666666666663,"y":139.25,"parameters":{"functionScript":"Outputs.ToastType = [\n    {\n        Message:Inputs.Message,\n        Type:Inputs.Type\n    }\n]"},"ports":[],"dynamicports":[{"name":"in-Message","displayName":"Message","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-Type","displayName":"Type","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-ToastType","displayName":"ToastType","plug":"output","type":"*","group":"Outputs","index":6}],"children":[],"metadata":{"merge":{"soureCodePorts":["functionScript"]}}}],"visualRoots":["bf8b26e1-45d2-7bb9-0849-5ff1441a5108"]}},{"name":"/Show Toast/Warning","id":"11ccd9ed-7783-0bcd-2453-a7decbf10092","graph":{"connections":[{"fromId":"8f56b260-a51e-c11d-a2b5-3ed3b0461ff7","fromProperty":"Message","toId":"76f6b8b1-7043-4e72-98c9-d6905f4d8bc3","toProperty":"text"}],"roots":[{"id":"8f56b260-a51e-c11d-a2b5-3ed3b0461ff7","type":"Component Inputs","x":-301.5,"y":117.5,"parameters":{},"ports":[{"name":"Message","plug":"output","type":{"name":"*"},"index":1},{"name":"Mounted","plug":"output","type":{"name":"*"},"index":2}],"dynamicports":[],"children":[]},{"id":"20a46ab6-fb14-aa64-33d6-4bf096db3e81","type":"Group","x":-42.5,"y":-21,"parameters":{"sizeMode":"contentWidth","backgroundColor":"White","alignX":"center","alignY":"top","boxShadowEnabled":true,"borderRadius":{"value":4,"unit":"px"},"boxShadowBlurRadius":{"value":4,"unit":"px"},"boxShadowSpreadRadius":{"value":0,"unit":"px"},"boxShadowOffsetY":{"value":2,"unit":"px"},"maxWidth":{"value":380,"unit":"px"},"boxShadowColor":"#00000033","borderWidth":{"value":1,"unit":"px"},"borderColor":"Notice","flexDirection":"row","alignItems":"center","height":{"value":56,"unit":"px"},"borderStyle":"solid","paddingRight":{"value":16,"unit":"px"}},"ports":[],"dynamicports":[],"children":[{"id":"f8d8c0aa-6831-b1d5-5c11-bd371863cfde","type":"Group","parameters":{"width":{"value":56,"unit":"px"},"height":{"value":56,"unit":"px"},"backgroundColor":"#F2C4413F","alignItems":"center","justifyContent":"center"},"ports":[],"dynamicports":[],"children":[{"id":"40ae3ecd-b047-34cc-2c46-3a81dba213ee","type":"net.noodl.visual.icon","parameters":{"iconIconSource":{"class":"material-icons","code":"warning"},"iconSize":{"value":24,"unit":"px"},"iconColor":"Notice"},"ports":[],"dynamicports":[],"children":[]}]},{"id":"76f6b8b1-7043-4e72-98c9-d6905f4d8bc3","type":"Text","parameters":{"text":"Some message","color":"Grey - 900","textStyle":"Label Large","marginLeft":{"value":16,"unit":"px"}},"ports":[],"dynamicports":[],"children":[]}]}],"visualRoots":["20a46ab6-fb14-aa64-33d6-4bf096db3e81"]}}],"settings":{"bodyScroll":true,"navigationPathType":"path","headCode":"<script type=\"module\">\n  import * as Directus from \"https://esm.sh/@directus/sdk\";\n  window.Directus = Directus;\n</script>","mqtt-module-broker-url":"wss://hiveclip:hR9sfDNFCIFum3Dz@hiveclip.cloud.shiftr.io"},"rootNodeId":"246f9453-a119-ac78-171e-3806cf596ecc","version":"4","metadata":{"styles":{"text":{"Display":{"letterSpacing":"Auto","lineHeight":{"value":"120","unit":"%"},"textTransform":"none","fontSize":{"value":"40","unit":"px"},"fontFamily":"fonts/Roboto/Roboto-Regular.ttf","color":"#000000"},"Headline":{"fontFamily":"fonts/Roboto/Roboto-Regular.ttf","fontSize":{"value":"32","unit":"px"},"color":"#000000","letterSpacing":"Auto","lineHeight":{"value":"120","unit":"%"},"textTransform":"none"},"Title Large":{"fontFamily":"fonts/Istok_Web/IstokWeb-Bold.ttf","fontSize":{"value":"24","unit":"px"},"color":"#FFFFFF","letterSpacing":"Auto","lineHeight":{"value":"120%","unit":"px"},"textTransform":"none"},"Title Medium":{"fontFamily":"fonts/Istok_Web/IstokWeb-Bold.ttf","fontSize":{"value":"20","unit":"px"},"color":"#FFFFFF","letterSpacing":"Auto","lineHeight":{"value":"120","unit":"%"},"textTransform":"none"},"Title Small":{"fontFamily":"fonts/Istok_Web/IstokWeb-Bold.ttf","fontSize":{"value":"16","unit":"px"},"color":"#FFFFFF","letterSpacing":"Auto","lineHeight":{"value":"120","unit":"%"},"textTransform":"none"},"Label Large":{"fontFamily":"fonts/Istok_Web/IstokWeb-Regular.ttf","fontSize":{"value":"18","unit":"px"},"color":"#FFFFFF","letterSpacing":"Auto","lineHeight":{"value":"120","unit":"%"},"textTransform":"none"},"Label Medium":{"fontFamily":"fonts/Istok_Web/IstokWeb-Regular.ttf","fontSize":{"value":"16","unit":"px"},"color":"#FFFFFF","letterSpacing":"Auto","lineHeight":{"value":"120","unit":"%"},"textTransform":"none"},"Label Small":{"fontFamily":"fonts/Istok_Web/IstokWeb-Regular.ttf","fontSize":{"value":"14","unit":"px"},"color":"#FFFFFF","letterSpacing":"Auto","lineHeight":{"value":"120","unit":"%"},"textTransform":"none"},"Body Large":{"fontFamily":"fonts/Istok_Web/IstokWeb-Regular.ttf","fontSize":{"value":"20","unit":"px"},"color":"#FFFFFF","letterSpacing":"Auto","lineHeight":{"value":"150","unit":"%"},"textTransform":"none"},"Body Medium":{"fontFamily":"fonts/Istok_Web/IstokWeb-Regular.ttf","fontSize":{"value":"16","unit":"px"},"color":"#FFFFFF","letterSpacing":"Auto","lineHeight":{"value":"150","unit":"%"},"textTransform":"none"},"Body Small":{"letterSpacing":"Auto","lineHeight":{"value":"150","unit":"%"},"textTransform":"none","fontFamily":"fonts/Istok_Web/IstokWeb-Regular.ttf","fontSize":{"value":"14","unit":"px"},"color":"#FFFFFF"}},"colors":{"Primary":"#5836F5","Primary Subtle":"#C9BFFC","Primary Light":"#F7F5FF","Grey - 900":"#1F1F1F","Grey - 800":"#383838","Grey - 700":"#4C4C4C","Grey - 600":"#757575","Grey - 500":"#A5A5A5","Grey - 400":"#CECECE","Grey - 300":"#E9E9E9","Grey - 200":"#F4F4F4","Grey - 100":"#FBFBFB","Success":"#49AD7F","Notice":"#F2C441","Danger":"#F75A4F","White":"#FFFFFF","Black":"#000000","Hive blue":"#8DBFD4","Hive page grey":"#4B4B4B","Hive header grey":"#383838","Hive purple":"#9747FF","Hive light purple":"#C055C391"}}},"variants":[{"typename":"Text","parameters":{"textStyle":"Body Medium"},"stateParamaters":{},"stateTransitions":{}},{"typename":"net.noodl.controls.button","parameters":{"height":{"value":40,"unit":"px"},"sizeMode":"contentWidth","backgroundColor":"Primary","iconIconSource":{"class":"material-icons","code":"home"},"iconSpacing":{"value":8,"unit":"px"},"borderRadius":{"value":4,"unit":"px"},"textStyle":"Label Medium","paddingTop":{"value":0,"unit":"px"},"paddingLeft":{"value":24,"unit":"px"},"paddingRight":{"value":24,"unit":"px"},"paddingBottom":{"value":0,"unit":"px"},"color":"#FFFFFF","minWidth":{"value":80,"unit":"px"},"useIcon":false,"iconSize":{"value":20,"unit":"px"}},"stateParamaters":{"hover":{"backgroundColor":"Hive purple"},"pressed":{"backgroundColor":"Primary","color":"White"},"disabled":{"backgroundColor":"Grey - 300","color":"Grey - 600"}},"stateTransitions":{},"defaultStateTransitions":{"neutral":{"curve":[0,0,0.58,1],"dur":0,"delay":0},"hover":{"curve":[0,0,0.58,1],"dur":0,"delay":0},"pressed":{"curve":[0,0,0.58,1],"dur":0,"delay":0}}},{"typename":"net.noodl.controls.textinput","parameters":{"useLabel":true,"sizeMode":"explicit","height":{"value":40,"unit":"px"},"textStyle":"Body Medium","borderStyle":"solid","borderRadius":{"value":4,"unit":"px"},"borderWidth":{"value":1,"unit":"px"},"borderColor":"Grey - 700","labeltextStyle":"Label Small","paddingLeft":{"value":12,"unit":"px"},"paddingRight":{"value":8,"unit":"px"},"labelSpacing":{"value":4,"unit":"px"},"placeholder":"Type here","color":"Grey - 900","placeHolderOpacity":0.65,"enabled":true,"blockTouch":false,"useIcon":false,"iconIconSource":{"class":"material-icons","code":"home"},"iconSize":{"value":20,"unit":"px"},"iconSpacing":{"value":4,"unit":"px"},"iconColor":"Grey - 700","labelcolor":"Grey - 700"},"stateParamaters":{"hover":{"labelcolor":"Grey - 700","borderColor":"Grey - 700","borderStyle":"solid","color":"Grey - 900"},"focused":{"borderColor":"Primary","labelcolor":"Primary","borderWidth":{"value":1,"unit":"px"},"boxShadowEnabled":false,"boxShadowColor":"Primary","borderStyle":"solid"},"disabled":{"labelcolor":"Grey - 500","backgroundColor":"Grey - 200","borderWidth":{"value":1,"unit":"px"},"borderColor":"Grey - 500","color":"Grey - 600"}},"stateTransitions":{},"defaultStateTransitions":{"neutral":{"curve":[0,0,0.58,1],"dur":0,"delay":0},"focused":{"curve":[0,0,0.58,1],"dur":0,"delay":0},"hover":{"curve":[0,0,0.58,1],"dur":0,"delay":0},"disabled":{"curve":[0,0,0.58,1],"dur":0,"delay":0}}},{"typename":"net.noodl.controls.options","parameters":{"sizeMode":"explicit","height":{"value":40,"unit":"px"},"borderWidth":{"value":1,"unit":"px"},"borderRadius":{"value":4,"unit":"px"},"borderColor":"Grey - 700","boxShadowColor":"Dark Gray","useIcon":true,"iconIconSource":{"class":"material-icons","code":"expand_more"},"iconPlacement":"right","iconSize":{"value":20,"unit":"px"},"paddingRight":{"value":12,"unit":"px"},"textStyle":"Body Medium","paddingLeft":{"value":12,"unit":"px"},"marginTop":{"value":0,"unit":"px"},"width":{"value":100,"unit":"%"},"iconColor":"Grey - 700","placeholderOpacity":0.65,"placeholder":"Select option","useLabel":true,"labelSpacing":{"value":4,"unit":"px"},"labeltextStyle":"Label Small","labelcolor":"Grey - 700","items":"[\n    {\"Label\":\"Option 1\", \"Value\":\"1\"},\n    {\"Label\":\"Option 2\", \"Value\":\"2\"},\n    {\"Label\":\"Option 3\", \"Value\":\"3\"}\n]"},"stateParamaters":{"hover":{"borderColor":"Grey - 700","borderRadius":{"value":4,"unit":"px"},"iconColor":"Grey - 900","iconSize":{"value":20,"unit":"px"},"iconPlacement":"right","color":"Grey - 900","labelcolor":"Grey - 700"},"focused":{"borderColor":"Primary","boxShadowColor":"Primary","borderRadius":{"value":4,"unit":"px"},"useIcon":true,"iconColor":"Primary","iconIconSource":{"class":"material-icons","code":"keyboard_arrow_up"},"iconPlacement":"right","color":"Grey - 900","labelcolor":"Primary"},"pressed":{"borderRadius":{"value":4,"unit":"px"}},"disabled":{"labelcolor":"Grey - 500","iconColor":"Grey - 500","borderColor":"Grey - 500","color":"Grey - 600","backgroundColor":"Grey - 200"}},"stateTransitions":{},"defaultStateTransitions":{"neutral":{"curve":[0,0,0.58,1],"dur":0,"delay":0},"focused":{"curve":[0,0,0.58,1],"dur":0,"delay":0},"hover":{"curve":[0,0,0.58,1],"dur":0,"delay":0},"pressed":{"curve":[0,0,0.58,1],"dur":0,"delay":0}}},{"typename":"net.noodl.controls.range","parameters":{"thumbColor":"Primary","thumbBorderRadius":{"value":100,"unit":"%"},"trackHeight":{"value":4,"unit":"px"},"trackActiveColor":"Primary","trackColor":"Primary Subtle","width":{"value":100,"unit":"%"},"trackBorderRadius":{"value":100,"unit":"px"},"thumbHeight":{"value":16,"unit":"px"},"thumbWidth":{"value":16,"unit":"px"}},"stateParamaters":{"hover":{"thumbColor":"Hive purple","trackActiveColor":"Hive purple"},"disabled":{"trackActiveColor":"Grey - 500","trackColor":"Grey - 300","thumbColor":"Grey - 500"}},"stateTransitions":{}},{"typename":"net.noodl.controls.checkbox","parameters":{"width":{"value":20,"unit":"px"},"height":{"value":20,"unit":"px"},"useIcon":false,"borderWidth":{"value":1,"unit":"px"},"useLabel":true,"labeltextStyle":"Body Medium","borderRadius":{"value":2,"unit":"px"},"borderColor":"Grey - 700","labelfontSize":{"value":16,"unit":"px"},"labelcolor":"Grey - 900","labelSpacing":{"value":12,"unit":"px"}},"stateParamaters":{"checked":{"useIcon":true,"iconIconSource":{"class":"material-icons","code":"check"},"backgroundColor":"Primary","borderColor":"Primary","iconSize":{"value":16,"unit":"px"}},"disabled":{"opacity":0.5},"hover":{"borderColor":"Grey - 700"},"pressed":{}},"stateTransitions":{},"defaultStateTransitions":{"neutral":{"curve":[0,0,0.58,1],"dur":0,"delay":0},"hover":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"checked":{"curve":[0,0,0.58,1],"dur":0,"delay":0}}},{"typename":"net.noodl.controls.radiobutton","parameters":{"width":{"value":20,"unit":"px"},"height":{"value":20,"unit":"px"},"useLabel":true,"labeltextStyle":"Body Large","borderWidth":{"value":1,"unit":"px"},"value":"0","useIcon":false,"fillColor":"transparent","borderColor":"Grey - 700","labelfontSize":{"value":16,"unit":"px"},"marginBottom":{"value":8,"unit":"px"},"labelcolor":"Grey - 900","labelSpacing":{"value":12,"unit":"px"}},"stateParamaters":{"checked":{"fillColor":"Primary","borderColor":"Primary","borderWidth":{"value":1,"unit":"px"},"backgroundColor":"transparent","width":{"value":20,"unit":"px"},"height":{"value":20,"unit":"px"},"fillSpacing":{"value":2,"unit":"px"}},"hover":{"backgroundColor":"transparent","borderColor":"Grey - 700","width":{"value":20,"unit":"px"},"height":{"value":20,"unit":"px"}},"disabled":{"borderColor":"Grey - 500","labelcolor":"Grey - 500","fillColor":"transparent"}},"stateTransitions":{},"defaultStateTransitions":{"neutral":{"curve":[0,0,0.58,1],"dur":0,"delay":0},"hover":{"curve":[0,0,0.58,1],"dur":0,"delay":0},"checked":{"curve":[0,0,0.58,1],"dur":0,"delay":0}}},{"name":"Standard input","typename":"net.noodl.controls.textinput","parameters":{"useLabel":true,"sizeMode":"contentHeight","height":{"value":40,"unit":"px"},"textStyle":"Body Medium","borderStyle":"solid","borderRadius":{"value":4,"unit":"px"},"borderWidth":{"value":1,"unit":"px"},"borderColor":"Grey - 700","labeltextStyle":"Label Small","paddingLeft":{"value":12,"unit":"px"},"paddingRight":{"value":8,"unit":"px"},"labelSpacing":{"value":4,"unit":"px"},"placeholder":"Type here","color":"Grey - 900","placeHolderOpacity":0.65,"enabled":true,"blockTouch":false,"useIcon":false,"iconIconSource":{"class":"material-icons","code":"home"},"iconSize":{"value":20,"unit":"px"},"iconSpacing":{"value":4,"unit":"px"},"iconColor":"Grey - 700","labelcolor":"Grey - 400","backgroundColor":"White","label":"Email","paddingTop":{"value":8,"unit":"px"},"paddingBottom":{"value":8,"unit":"px"},"type":"email"},"stateParamaters":{"hover":{"labelcolor":"White","borderColor":"Hive purple","borderStyle":"solid","color":"Grey - 900","borderRadius":{"value":8,"unit":"px"}},"focused":{"borderColor":"Primary","labelcolor":"White","borderWidth":{"value":1,"unit":"px"},"boxShadowEnabled":false,"boxShadowColor":"Primary","borderStyle":"solid","borderRadius":{"value":8,"unit":"px"}},"disabled":{"labelcolor":"Grey - 500","backgroundColor":"Grey - 200","borderWidth":{"value":1,"unit":"px"},"borderColor":"Grey - 500","color":"Grey - 600"},"pressed":{"labelcolor":"White","borderColor":"Hive purple","borderRadius":{"value":8,"unit":"px"}}},"stateTransitions":{},"defaultStateTransitions":{"neutral":{"curve":[0,0,0.58,1],"dur":0,"delay":0},"focused":{"curve":[0,0,0.58,1],"dur":0,"delay":0},"hover":{"curve":[0,0,0.58,1],"dur":0,"delay":0},"disabled":{"curve":[0,0,0.58,1],"dur":0,"delay":0}}},{"name":"Standard button","typename":"net.noodl.controls.button","parameters":{"height":{"value":40,"unit":"px"},"sizeMode":"contentWidth","backgroundColor":"Hive light purple","iconIconSource":{"class":"material-icons","code":"home"},"iconSpacing":{"value":8,"unit":"px"},"borderRadius":{"value":4,"unit":"px"},"textStyle":"Label Medium","paddingTop":{"value":0,"unit":"px"},"paddingLeft":{"value":24,"unit":"px"},"paddingRight":{"value":24,"unit":"px"},"paddingBottom":{"value":0,"unit":"px"},"color":"#FFFFFF","minWidth":{"value":80,"unit":"px"},"useIcon":false,"iconSize":{"value":20,"unit":"px"},"alignX":"center","label":"Sign up"},"stateParamaters":{"hover":{"backgroundColor":"#C055C3B2"},"pressed":{"backgroundColor":"Primary","color":"White"},"disabled":{"backgroundColor":"Grey - 300","color":"Grey - 600"}},"stateTransitions":{},"defaultStateTransitions":{"neutral":{"curve":[0,0,0.58,1],"dur":0,"delay":0},"hover":{"curve":[0,0,0.58,1],"dur":0,"delay":0},"pressed":{"curve":[0,0,0.58,1],"dur":0,"delay":0}}},{"name":"Clickable text","typename":"Text","parameters":{"textStyle":"Body Medium","text":"Already have an account? Click here to log in","alignX":"center","sizeMode":"contentHeight","textAlignX":"center","styleCss":"/* background-color: red; */\ncursor: pointer;"},"stateParamaters":{"hover":{"color":"Hive light purple"}},"stateTransitions":{}},{"name":"Tile","typename":"Group","parameters":{"borderRadius":{"value":10,"unit":"px"},"backgroundColor":"Hive header grey","paddingLeft":{"value":20,"unit":"px"},"paddingTop":{"value":20,"unit":"px"},"paddingRight":{"value":20,"unit":"px"},"paddingBottom":{"value":20,"unit":"px"}},"stateParamaters":{},"stateTransitions":{}}]}