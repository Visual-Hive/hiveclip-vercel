[{"name":"/#Directus/Directus - Signup BACKUP","nodes":[{"id":"f17de1e0-1c0f-e392-f212-1c45e69b763a","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"57d25afe-dcdd-63ce-642a-7d170d3017f8","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"8e669da7-2f10-3af0-4767-d66cfbdedbad","type":"JavaScriptFunction","parameters":{"functionScript":"const email = Inputs.email ?? null;\r\nconst password = Inputs.password ?? null;\r\nconst first_name = Inputs.first_name ?? null;\r\nconst last_name = Inputs.last_name ?? null;\r\nconst role = Inputs.role ?? '803edd8b-567d-47f5-9190-241167126ff2';\r\nconst account = Inputs.account ?? null;\r\n\r\nif (!email || !password) return;\r\n\r\nconst client = Inputs.client ?? null;\r\n\r\nconst main = async function () {\r\n    try {\r\n        const user_object = {\r\n            email,\r\n            password,\r\n            first_name,\r\n            last_name,\r\n            role,\r\n            account\r\n        }\r\n        const result = await client.request(Directus.createUser(user_object));\r\n\r\n        Outputs.data = result;\r\n        //console.log({ result });\r\n        Outputs.Success();\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n        Outputs.error = err?.errors.map(i => i.message).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nif (client) {\r\n    main();\r\n}\r\n\r\n"},"ports":[{"name":"in-email","displayName":"email","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-password","displayName":"password","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-first_name","displayName":"first_name","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-last_name","displayName":"last_name","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-role","displayName":"role","plug":"input","type":"*","group":"Inputs","index":8},{"name":"in-account","displayName":"account","plug":"input","type":"*","group":"Inputs","index":9},{"name":"in-client","displayName":"client","plug":"input","type":"*","group":"Inputs","index":10},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":11},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":12},{"name":"out-data","displayName":"data","plug":"output","type":"*","group":"Outputs","index":13},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":14}],"children":[]},{"id":"7af9e771-90a2-b703-b39f-7a7b2f213537","type":"String","parameters":{},"ports":[],"children":[]},{"id":"ccf18104-eb24-a0ad-238c-1fb1563f27d2","type":"String","parameters":{},"ports":[],"children":[]},{"id":"1b1a5c71-9460-165e-2a16-9d668ea87541","type":"String","parameters":{},"ports":[],"children":[]},{"id":"7479a526-9ad3-5c1b-2a41-050ab495f7a8","type":"String","parameters":{},"ports":[],"children":[]},{"id":"33431509-e166-7df1-3fd2-b23105529fdc","type":"/#Directus/Directus Prefab/Components/Utils/Get a SDK client","parameters":{},"ports":[],"children":[]},{"id":"cb6a7c4d-1d7f-4969-35da-9d341087cb7e","type":"States","parameters":{"states":"Standard user,Admin","values":"roleId","value-Standard user-roleId":"b8e8b9f6-16b6-4d01-bf29-24f67f38802c","type-roleId":"string"},"ports":[],"children":[]},{"id":"4e5271b0-b1b6-b0d5-68c7-f0bf1e083893","type":"/#Directus/Directus Prefab/Components/Data/Directus - Create Data","parameters":{"SDK Client to use":"Site SDK Client","collection":"Account","fields":""},"ports":[],"children":[]},{"id":"bae9c472-be6e-dac9-74ae-dd194c32de7a","type":"Expression","parameters":{"expression":"account == \"\""},"ports":[],"children":[]},{"id":"df073e82-a426-0330-f5ef-0058372cc07a","type":"JavaScriptFunction","parameters":{"functionScript":"Outputs.accountData = { \"name\":\"Default account\" }"},"ports":[{"name":"out-accountData","displayName":"accountData","plug":"output","type":"*","group":"Outputs","index":4}],"children":[]}],"connections":[{"sourceId":"f17de1e0-1c0f-e392-f212-1c45e69b763a","sourcePort":"email","targetId":"7af9e771-90a2-b703-b39f-7a7b2f213537","targetPort":"value"},{"sourceId":"f17de1e0-1c0f-e392-f212-1c45e69b763a","sourcePort":"password","targetId":"ccf18104-eb24-a0ad-238c-1fb1563f27d2","targetPort":"value"},{"sourceId":"7af9e771-90a2-b703-b39f-7a7b2f213537","sourcePort":"savedValue","targetId":"8e669da7-2f10-3af0-4767-d66cfbdedbad","targetPort":"in-email"},{"sourceId":"ccf18104-eb24-a0ad-238c-1fb1563f27d2","sourcePort":"savedValue","targetId":"8e669da7-2f10-3af0-4767-d66cfbdedbad","targetPort":"in-password"},{"sourceId":"8e669da7-2f10-3af0-4767-d66cfbdedbad","sourcePort":"out-Failure","targetId":"57d25afe-dcdd-63ce-642a-7d170d3017f8","targetPort":"Failure"},{"sourceId":"8e669da7-2f10-3af0-4767-d66cfbdedbad","sourcePort":"out-error","targetId":"57d25afe-dcdd-63ce-642a-7d170d3017f8","targetPort":"error"},{"sourceId":"f17de1e0-1c0f-e392-f212-1c45e69b763a","sourcePort":"first_name","targetId":"1b1a5c71-9460-165e-2a16-9d668ea87541","targetPort":"value"},{"sourceId":"f17de1e0-1c0f-e392-f212-1c45e69b763a","sourcePort":"last_name","targetId":"7479a526-9ad3-5c1b-2a41-050ab495f7a8","targetPort":"value"},{"sourceId":"1b1a5c71-9460-165e-2a16-9d668ea87541","sourcePort":"savedValue","targetId":"8e669da7-2f10-3af0-4767-d66cfbdedbad","targetPort":"in-first_name"},{"sourceId":"7479a526-9ad3-5c1b-2a41-050ab495f7a8","sourcePort":"savedValue","targetId":"8e669da7-2f10-3af0-4767-d66cfbdedbad","targetPort":"in-last_name"},{"sourceId":"8e669da7-2f10-3af0-4767-d66cfbdedbad","sourcePort":"out-Success","targetId":"57d25afe-dcdd-63ce-642a-7d170d3017f8","targetPort":"Success"},{"sourceId":"f17de1e0-1c0f-e392-f212-1c45e69b763a","sourcePort":"Do","targetId":"33431509-e166-7df1-3fd2-b23105529fdc","targetPort":"Do"},{"sourceId":"33431509-e166-7df1-3fd2-b23105529fdc","sourcePort":"client","targetId":"8e669da7-2f10-3af0-4767-d66cfbdedbad","targetPort":"in-client"},{"sourceId":"f17de1e0-1c0f-e392-f212-1c45e69b763a","sourcePort":"role","targetId":"cb6a7c4d-1d7f-4969-35da-9d341087cb7e","targetPort":"currentState"},{"sourceId":"cb6a7c4d-1d7f-4969-35da-9d341087cb7e","sourcePort":"roleId","targetId":"8e669da7-2f10-3af0-4767-d66cfbdedbad","targetPort":"in-role"},{"sourceId":"f17de1e0-1c0f-e392-f212-1c45e69b763a","sourcePort":"account","targetId":"bae9c472-be6e-dac9-74ae-dd194c32de7a","targetPort":"account"},{"sourceId":"bae9c472-be6e-dac9-74ae-dd194c32de7a","sourcePort":"isTrueEv","targetId":"4e5271b0-b1b6-b0d5-68c7-f0bf1e083893","targetPort":"Do"},{"sourceId":"bae9c472-be6e-dac9-74ae-dd194c32de7a","sourcePort":"isFalseEv","targetId":"8e669da7-2f10-3af0-4767-d66cfbdedbad","targetPort":"run"},{"sourceId":"33431509-e166-7df1-3fd2-b23105529fdc","sourcePort":"Done","targetId":"bae9c472-be6e-dac9-74ae-dd194c32de7a","targetPort":"run"},{"sourceId":"4e5271b0-b1b6-b0d5-68c7-f0bf1e083893","sourcePort":"Success","targetId":"8e669da7-2f10-3af0-4767-d66cfbdedbad","targetPort":"run"},{"sourceId":"4e5271b0-b1b6-b0d5-68c7-f0bf1e083893","sourcePort":"record ID","targetId":"8e669da7-2f10-3af0-4767-d66cfbdedbad","targetPort":"in-account"},{"sourceId":"f17de1e0-1c0f-e392-f212-1c45e69b763a","sourcePort":"account","targetId":"8e669da7-2f10-3af0-4767-d66cfbdedbad","targetPort":"in-account"},{"sourceId":"df073e82-a426-0330-f5ef-0058372cc07a","sourcePort":"out-accountData","targetId":"4e5271b0-b1b6-b0d5-68c7-f0bf1e083893","targetPort":"Data"},{"sourceId":"8e669da7-2f10-3af0-4767-d66cfbdedbad","sourcePort":"out-data","targetId":"57d25afe-dcdd-63ce-642a-7d170d3017f8","targetPort":"data"}],"ports":[{"name":"Success","type":"signal","plug":"output","index":0},{"name":"Do","type":{"name":"signal","allowConnectionsOnly":true},"group":"Actions","plug":"input","index":0},{"name":"Failure","type":"signal","plug":"output","index":1},{"name":"email","type":{"name":"string"},"default":"","group":"Data","plug":"input","index":1},{"name":"error","type":"*","plug":"output","index":2},{"name":"password","type":{"name":"string"},"default":"","group":"Data","plug":"input","index":2},{"name":"data","type":"*","plug":"output","index":3},{"name":"first_name","type":{"name":"string"},"default":"","group":"Data","plug":"input","index":3},{"name":"last_name","type":{"name":"string"},"default":"","group":"Data","plug":"input","index":4},{"name":"role","type":{"name":"enum","enums":["Standard user","Admin"]},"default":"Standard user","group":"Data","plug":"input","index":5},{"name":"account","type":{"name":"*"},"group":"Data","plug":"input","index":6}],"roots":[]},{"name":"/#Directus/Directus Prefab/Components/Admin/Directus - Get Collections","nodes":[{"id":"9d27cd97-e0ad-4a05-1dbf-b65358fed3c7","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"625246c5-b741-0c2a-f766-80b51b910930","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"a8a408c4-7916-a3ec-0c25-ed2165c7b805","type":"String","parameters":{},"ports":[],"children":[]},{"id":"e2708d41-e281-f041-eefc-f9d6e04ec60d","type":"JavaScriptFunction","parameters":{"functionScript":"const what_to_get = Inputs.what_to_get || null;\r\nconst collection = Inputs.collection || null;\r\n\r\nlet operation = \"all\";\r\n\r\nif (what_to_get) {\r\n    switch (what_to_get) {\r\n        case 'All':\r\n            break;\r\n        case 'Single':\r\n            operation = \"single\";\r\n            if (!collection) throw new Error(\"Collection is required!\")\r\n            break;\r\n    }\r\n\r\n    Outputs.operation = operation;\r\n    Outputs.collection = collection;\r\n    Outputs.Done();\r\n}\r\n"},"ports":[{"name":"in-what_to_get","displayName":"what_to_get","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-collection","displayName":"collection","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-operation","displayName":"operation","plug":"output","type":"*","group":"Outputs","index":7},{"name":"out-collection","displayName":"collection","plug":"output","type":"*","group":"Outputs","index":8}],"children":[]},{"id":"89c0636f-f348-1150-e518-517118ac0aa6","type":"States","parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"children":[]},{"id":"4a990abf-6561-8595-3d6a-ccb5b1ca92ea","type":"JavaScriptFunction","parameters":{"functionScript":"const state = Inputs.SDKClient ?? null;\r\n\r\nlet res = true;\r\n\r\nif(state == \"Site SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.SiteClient || null;\r\n    if(!client){\r\n        res = false;\r\n        throw new Error(\"Directus Site Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(state == \"User SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.Client || null;\r\n    if(!client){ \r\n        res = false;\r\n        throw new Error(\"Directus User Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(res){\r\n    Outputs.Done();\r\n}"},"ports":[{"name":"in-SDKClient","displayName":"SDKClient","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[]},{"id":"8b5456c7-7884-7626-b4ba-9844d6481b79","type":"Timer","parameters":{"duration":100},"ports":[],"children":[]},{"id":"e9b0eb05-f35c-f75c-4f29-83f452c9cf15","type":"Timer","parameters":{"duration":100},"ports":[],"children":[]},{"id":"b167fd5c-8c28-451a-cb62-abee975438ba","type":"Javascript2","parameters":{"code":"Script.Inputs = {\r\n    client: \"string\",\r\n    collection: \"string\",\r\n    operation: \"string\"\r\n}\r\n\r\n\r\nScript.Signals.GetData = async function () {\r\n\r\n    const client_selection = Script.Inputs.client || null;\r\n    const sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\n    const collection = Script.Inputs.collection || null;\r\n    const operation = Script.Inputs.operation || null;\r\n\r\n    try {\r\n        if (sdk_client && operation) {\r\n            let result;\r\n            switch (operation) {\r\n                case \"single\":\r\n                    if(!collection) throw new Error(\"Provide valid Collection!\");\r\n                    result = await sdk_client.request(Directus.readCollection(collection));\r\n                    break;\r\n                case \"all\":\r\n                    result = await sdk_client.request(Directus.readCollections());\r\n                    break;\r\n            }\r\n            \r\n            Script.Outputs.result = result;\r\n            if (result) {\r\n                Script.Outputs.Success();\r\n            } else {\r\n                Script.Outputs.Failure();\r\n            }\r\n        } else {\r\n            console.error(err);\r\n\r\n            Script.Outputs.error = \"Invalid configuration!\";\r\n            Script.Outputs.Failure();\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Script.Outputs.error = err?.errors.map(i => i.message).join(\"\\n\") ?? JSON.stringify(err);\r\n        Script.Outputs.Failure();\r\n    }\r\n}\r\n"},"ports":[{"name":"client","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"collection","plug":"input","type":{"name":"string"},"group":"Inputs","index":6},{"name":"operation","plug":"input","type":{"name":"string"},"group":"Inputs","index":7},{"name":"GetData","plug":"input","type":{"name":"signal"},"group":"Inputs","index":8},{"name":"Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":9},{"name":"Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":10},{"name":"result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":11},{"name":"error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":12}],"children":[]},{"id":"7ac016ee-b073-2686-dabe-9b651ea1d913","type":"States","parameters":{"states":"All,Single","useTransitions":false},"ports":[],"children":[]}],"connections":[{"sourceId":"9d27cd97-e0ad-4a05-1dbf-b65358fed3c7","sourcePort":"Collection","targetId":"a8a408c4-7916-a3ec-0c25-ed2165c7b805","targetPort":"value"},{"sourceId":"a8a408c4-7916-a3ec-0c25-ed2165c7b805","sourcePort":"savedValue","targetId":"e2708d41-e281-f041-eefc-f9d6e04ec60d","targetPort":"in-collection"},{"sourceId":"9d27cd97-e0ad-4a05-1dbf-b65358fed3c7","sourcePort":"SDK Client to use","targetId":"89c0636f-f348-1150-e518-517118ac0aa6","targetPort":"currentState"},{"sourceId":"89c0636f-f348-1150-e518-517118ac0aa6","sourcePort":"currentState","targetId":"4a990abf-6561-8595-3d6a-ccb5b1ca92ea","targetPort":"in-SDKClient"},{"sourceId":"4a990abf-6561-8595-3d6a-ccb5b1ca92ea","sourcePort":"out-Done","targetId":"e2708d41-e281-f041-eefc-f9d6e04ec60d","targetPort":"run"},{"sourceId":"e2708d41-e281-f041-eefc-f9d6e04ec60d","sourcePort":"out-Done","targetId":"8b5456c7-7884-7626-b4ba-9844d6481b79","targetPort":"start"},{"sourceId":"9d27cd97-e0ad-4a05-1dbf-b65358fed3c7","sourcePort":"Do","targetId":"e9b0eb05-f35c-f75c-4f29-83f452c9cf15","targetPort":"start"},{"sourceId":"e9b0eb05-f35c-f75c-4f29-83f452c9cf15","sourcePort":"timerFinished","targetId":"4a990abf-6561-8595-3d6a-ccb5b1ca92ea","targetPort":"run"},{"sourceId":"8b5456c7-7884-7626-b4ba-9844d6481b79","sourcePort":"timerFinished","targetId":"b167fd5c-8c28-451a-cb62-abee975438ba","targetPort":"GetData"},{"sourceId":"b167fd5c-8c28-451a-cb62-abee975438ba","sourcePort":"Success","targetId":"625246c5-b741-0c2a-f766-80b51b910930","targetPort":"Success"},{"sourceId":"b167fd5c-8c28-451a-cb62-abee975438ba","sourcePort":"Failure","targetId":"625246c5-b741-0c2a-f766-80b51b910930","targetPort":"Failure"},{"sourceId":"b167fd5c-8c28-451a-cb62-abee975438ba","sourcePort":"result","targetId":"625246c5-b741-0c2a-f766-80b51b910930","targetPort":"result"},{"sourceId":"b167fd5c-8c28-451a-cb62-abee975438ba","sourcePort":"error","targetId":"625246c5-b741-0c2a-f766-80b51b910930","targetPort":"error"},{"sourceId":"e2708d41-e281-f041-eefc-f9d6e04ec60d","sourcePort":"out-collection","targetId":"b167fd5c-8c28-451a-cb62-abee975438ba","targetPort":"collection"},{"sourceId":"89c0636f-f348-1150-e518-517118ac0aa6","sourcePort":"currentState","targetId":"b167fd5c-8c28-451a-cb62-abee975438ba","targetPort":"client"},{"sourceId":"9d27cd97-e0ad-4a05-1dbf-b65358fed3c7","sourcePort":"Collections to get","targetId":"7ac016ee-b073-2686-dabe-9b651ea1d913","targetPort":"currentState"},{"sourceId":"7ac016ee-b073-2686-dabe-9b651ea1d913","sourcePort":"currentState","targetId":"e2708d41-e281-f041-eefc-f9d6e04ec60d","targetPort":"in-what_to_get"},{"sourceId":"e2708d41-e281-f041-eefc-f9d6e04ec60d","sourcePort":"out-operation","targetId":"b167fd5c-8c28-451a-cb62-abee975438ba","targetPort":"operation"}],"ports":[{"name":"Success","type":"signal","plug":"output","index":0},{"name":"Do","type":{"name":"signal","allowConnectionsOnly":true},"plug":"input","index":0},{"name":"Failure","type":"signal","plug":"output","index":1},{"name":"SDK Client to use","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"default":"User SDK Client","group":"Config","plug":"input","index":1},{"name":"result","type":"*","plug":"output","index":2},{"name":"Collections to get","type":{"name":"enum","enums":["All","Single"]},"default":"All","group":"Config","plug":"input","index":2},{"name":"error","type":"*","plug":"output","index":3},{"name":"Collection","type":{"name":"string"},"default":"","group":"Config","plug":"input","index":3}],"roots":[]},{"name":"/#Directus/Directus Prefab/Components/Admin/Directus - Get Fields","nodes":[{"id":"4e559d64-d654-f66c-c2a5-0fd268117d8c","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"c8fda3aa-fead-25a2-0d7d-271096b1c276","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"5fd548c6-10eb-abd1-0acf-d14c99911230","type":"String","parameters":{},"ports":[],"children":[]},{"id":"df68bcd4-db77-6d12-8d63-2c6c5280e55b","type":"JavaScriptFunction","parameters":{"functionScript":"const what_to_get = Inputs.what_to_get || null;\r\nconst collection = Inputs.collection || null;\r\nconst field = Inputs.field || null;\r\n\r\nlet operation = \"all\";\r\nlet collection_out = null;\r\nlet field_out = null;\r\n\r\nif (what_to_get) {\r\n    switch (what_to_get) {\r\n        case 'All':\r\n            operation = \"all\";\r\n            collection_out = null;\r\n            field_out = null;\r\n            break;\r\n        case 'Fields in a Collection':\r\n            operation = \"fields_in_collection\";\r\n            collection_out = collection;\r\n            field_out = null;\r\n            break;\r\n        case 'Single':\r\n            operation = \"single\";\r\n            collection_out = collection;\r\n            field_out = field;\r\n            if (!collection) throw new Error(\"Collection is required!\")\r\n            break;\r\n    }\r\n\r\n    Outputs.operation = operation;\r\n    Outputs.collection = collection_out;\r\n    Outputs.field = field_out;\r\n    Outputs.Done();\r\n}\r\n"},"ports":[{"name":"in-what_to_get","displayName":"what_to_get","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-collection","displayName":"collection","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-field","displayName":"field","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-operation","displayName":"operation","plug":"output","type":"*","group":"Outputs","index":8},{"name":"out-collection","displayName":"collection","plug":"output","type":"*","group":"Outputs","index":9},{"name":"out-field","displayName":"field","plug":"output","type":"*","group":"Outputs","index":10}],"children":[]},{"id":"02c8381c-d2f3-0ee7-9f02-439b1c3eb753","type":"States","parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"children":[]},{"id":"e4c8fa74-afd7-b160-5424-a9ca2ad65a99","type":"JavaScriptFunction","parameters":{"functionScript":"const state = Inputs.SDKClient ?? null;\r\n\r\nlet res = true;\r\n\r\nif(state == \"Site SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.SiteClient || null;\r\n    if(!client){\r\n        res = false;\r\n        throw new Error(\"Directus Site Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(state == \"User SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.Client || null;\r\n    if(!client){ \r\n        res = false;\r\n        throw new Error(\"Directus User Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(res){\r\n    Outputs.Done();\r\n}"},"ports":[{"name":"in-SDKClient","displayName":"SDKClient","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[]},{"id":"e9629800-fb87-b060-ebb7-ccac1a713616","type":"Timer","parameters":{"duration":100},"ports":[],"children":[]},{"id":"f8b295c8-2af4-d330-5b69-3a1eabe32a5b","type":"Timer","parameters":{"duration":100},"ports":[],"children":[]},{"id":"7eefc4e8-db6d-b2f3-ac40-99a5a59b3727","type":"Javascript2","parameters":{"code":"Script.Inputs = {\r\n    client: \"string\",\r\n    collection: \"string\",\r\n    operation: \"string\",\r\n    field: \"string\"\r\n}\r\n\r\n\r\nScript.Signals.GetData = async function () {\r\n\r\n    const client_selection = Script.Inputs.client || null;\r\n    const sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\n    const operation = Script.Inputs.operation || null;\r\n    const collection = Script.Inputs.collection || null;\r\n    const field = Script.Inputs.field || null;\r\n\r\n    try {\r\n        if (sdk_client && operation) {\r\n            let result;\r\n            switch (operation) {\r\n                case \"single\":\r\n                    if(!collection || !field) throw new Error(\"Provide valid Data!\");\r\n                    result = await sdk_client.request(Directus.readField(collection, field));\r\n                    break;\r\n                case \"fields_in_collection\":\r\n                    if(!collection ) throw new Error(\"Provide valid Data!\");\r\n                    result = await sdk_client.request(Directus.readFieldsByCollection(collection));\r\n                    break;\r\n                case \"all\":\r\n                    result = await sdk_client.request(Directus.readFields());\r\n                    break;\r\n            }\r\n            \r\n            Script.Outputs.result = result;\r\n            if (result) {\r\n                Script.Outputs.Success();\r\n            } else {\r\n                Script.Outputs.Failure();\r\n            }\r\n        } else {\r\n            console.error(err);\r\n\r\n            Script.Outputs.error = \"Invalid configuration!\";\r\n            Script.Outputs.Failure();\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Script.Outputs.error = err?.errors.map(i => i.message).join(\"\\n\") ?? JSON.stringify(err);\r\n        Script.Outputs.Failure();\r\n    }\r\n}\r\n"},"ports":[{"name":"client","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"collection","plug":"input","type":{"name":"string"},"group":"Inputs","index":6},{"name":"operation","plug":"input","type":{"name":"string"},"group":"Inputs","index":7},{"name":"field","plug":"input","type":{"name":"string"},"group":"Inputs","index":8},{"name":"GetData","plug":"input","type":{"name":"signal"},"group":"Inputs","index":9},{"name":"Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":10},{"name":"Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":11},{"name":"result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":12},{"name":"error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":13}],"children":[]},{"id":"3bd7fb10-fe45-3aae-8470-15771488069f","type":"States","parameters":{"states":"All,Fields in a Collection,Single","useTransitions":false},"ports":[],"children":[]},{"id":"026ca358-a5e9-7a30-e690-59b4e524eee1","type":"String","parameters":{},"ports":[],"children":[]}],"connections":[{"sourceId":"4e559d64-d654-f66c-c2a5-0fd268117d8c","sourcePort":"Collection","targetId":"5fd548c6-10eb-abd1-0acf-d14c99911230","targetPort":"value"},{"sourceId":"5fd548c6-10eb-abd1-0acf-d14c99911230","sourcePort":"savedValue","targetId":"df68bcd4-db77-6d12-8d63-2c6c5280e55b","targetPort":"in-collection"},{"sourceId":"4e559d64-d654-f66c-c2a5-0fd268117d8c","sourcePort":"SDK Client to use","targetId":"02c8381c-d2f3-0ee7-9f02-439b1c3eb753","targetPort":"currentState"},{"sourceId":"02c8381c-d2f3-0ee7-9f02-439b1c3eb753","sourcePort":"currentState","targetId":"e4c8fa74-afd7-b160-5424-a9ca2ad65a99","targetPort":"in-SDKClient"},{"sourceId":"e4c8fa74-afd7-b160-5424-a9ca2ad65a99","sourcePort":"out-Done","targetId":"df68bcd4-db77-6d12-8d63-2c6c5280e55b","targetPort":"run"},{"sourceId":"df68bcd4-db77-6d12-8d63-2c6c5280e55b","sourcePort":"out-Done","targetId":"e9629800-fb87-b060-ebb7-ccac1a713616","targetPort":"start"},{"sourceId":"4e559d64-d654-f66c-c2a5-0fd268117d8c","sourcePort":"Do","targetId":"f8b295c8-2af4-d330-5b69-3a1eabe32a5b","targetPort":"start"},{"sourceId":"f8b295c8-2af4-d330-5b69-3a1eabe32a5b","sourcePort":"timerFinished","targetId":"e4c8fa74-afd7-b160-5424-a9ca2ad65a99","targetPort":"run"},{"sourceId":"e9629800-fb87-b060-ebb7-ccac1a713616","sourcePort":"timerFinished","targetId":"7eefc4e8-db6d-b2f3-ac40-99a5a59b3727","targetPort":"GetData"},{"sourceId":"7eefc4e8-db6d-b2f3-ac40-99a5a59b3727","sourcePort":"Success","targetId":"c8fda3aa-fead-25a2-0d7d-271096b1c276","targetPort":"Success"},{"sourceId":"7eefc4e8-db6d-b2f3-ac40-99a5a59b3727","sourcePort":"Failure","targetId":"c8fda3aa-fead-25a2-0d7d-271096b1c276","targetPort":"Failure"},{"sourceId":"7eefc4e8-db6d-b2f3-ac40-99a5a59b3727","sourcePort":"result","targetId":"c8fda3aa-fead-25a2-0d7d-271096b1c276","targetPort":"result"},{"sourceId":"7eefc4e8-db6d-b2f3-ac40-99a5a59b3727","sourcePort":"error","targetId":"c8fda3aa-fead-25a2-0d7d-271096b1c276","targetPort":"error"},{"sourceId":"df68bcd4-db77-6d12-8d63-2c6c5280e55b","sourcePort":"out-collection","targetId":"7eefc4e8-db6d-b2f3-ac40-99a5a59b3727","targetPort":"collection"},{"sourceId":"02c8381c-d2f3-0ee7-9f02-439b1c3eb753","sourcePort":"currentState","targetId":"7eefc4e8-db6d-b2f3-ac40-99a5a59b3727","targetPort":"client"},{"sourceId":"4e559d64-d654-f66c-c2a5-0fd268117d8c","sourcePort":"Fields to get","targetId":"3bd7fb10-fe45-3aae-8470-15771488069f","targetPort":"currentState"},{"sourceId":"3bd7fb10-fe45-3aae-8470-15771488069f","sourcePort":"currentState","targetId":"df68bcd4-db77-6d12-8d63-2c6c5280e55b","targetPort":"in-what_to_get"},{"sourceId":"df68bcd4-db77-6d12-8d63-2c6c5280e55b","sourcePort":"out-operation","targetId":"7eefc4e8-db6d-b2f3-ac40-99a5a59b3727","targetPort":"operation"},{"sourceId":"4e559d64-d654-f66c-c2a5-0fd268117d8c","sourcePort":"Field","targetId":"026ca358-a5e9-7a30-e690-59b4e524eee1","targetPort":"value"},{"sourceId":"026ca358-a5e9-7a30-e690-59b4e524eee1","sourcePort":"savedValue","targetId":"df68bcd4-db77-6d12-8d63-2c6c5280e55b","targetPort":"in-field"},{"sourceId":"df68bcd4-db77-6d12-8d63-2c6c5280e55b","sourcePort":"out-field","targetId":"7eefc4e8-db6d-b2f3-ac40-99a5a59b3727","targetPort":"field"}],"ports":[{"name":"Success","type":"signal","plug":"output","index":0},{"name":"Do","type":{"name":"signal","allowConnectionsOnly":true},"plug":"input","index":0},{"name":"Failure","type":"signal","plug":"output","index":1},{"name":"SDK Client to use","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"default":"User SDK Client","group":"Config","plug":"input","index":1},{"name":"result","type":"*","plug":"output","index":2},{"name":"Fields to get","type":{"name":"enum","enums":["All","Fields in a Collection","Single"]},"default":"All","group":"Config","plug":"input","index":2},{"name":"error","type":"*","plug":"output","index":3},{"name":"Collection","type":{"name":"string"},"default":"","group":"Config","plug":"input","index":3},{"name":"Field","type":{"name":"string"},"default":"","group":"Config","plug":"input","index":4}],"roots":[]},{"name":"/#Directus/Directus Prefab/Components/Auth/Directus - Request Password Reset","nodes":[{"id":"8fce7bce-7a94-b681-17ba-fae681341924","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"c0a113f1-b0f0-f5bd-06f5-d9abf9d2c453","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"691cbe6f-c874-db1b-d45d-0dd43551cbc6","type":"JavaScriptFunction","parameters":{"functionScript":"const user_email = Inputs.email ?? null;\r\nconst website_url = Inputs.website_url ?? null;\r\nconst reset_url = Inputs.reset_url ?? (website_url ? website_url + \"/reset-password\" : null);  // Default: If the 'website_url' has been provided, then: \"your-website-url/request-password-reset\", else: 'your directus project's default password reset page'\r\n\r\nif (!user_email) return;\r\n\r\nconst client = Noodl.Objects.DirectusSDK?.Client ?? null;\r\n\r\nif(!client) throw new Error(\"Config Error: No SDK Client found!\");\r\n\r\nconst main = async function () {\r\n    try {\r\n        const config = {\r\n            user_email\r\n        };\r\n        if(reset_url) config.reset_url = reset_url;\r\n\r\n        const result = await client.request( Directus.passwordRequest(Object.values(config).join()) );\r\n\r\n        Outputs.data = result;\r\n        //console.log({ result });\r\n        Outputs.Success();\r\n        \r\n    } catch (err) {\r\n        console.error(err);\r\n        Outputs.error = err?.errors.map(i => i.message ).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nif (client) {\r\n    main();\r\n}"},"ports":[{"name":"in-email","displayName":"email","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-website_url","displayName":"website_url","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-reset_url","displayName":"reset_url","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":8},{"name":"out-data","displayName":"data","plug":"output","type":"*","group":"Outputs","index":9},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":10}],"children":[]},{"id":"f30ba959-db32-12d0-3972-1bb48edf2ed1","type":"String","parameters":{},"ports":[],"children":[]},{"id":"421825a5-1838-5a22-68c5-0464cc53a93b","type":"String","parameters":{},"ports":[],"children":[]},{"id":"c3625480-f2a6-8388-6e0a-e8b165510170","type":"String","parameters":{},"ports":[],"children":[]}],"connections":[{"sourceId":"8fce7bce-7a94-b681-17ba-fae681341924","sourcePort":"email","targetId":"f30ba959-db32-12d0-3972-1bb48edf2ed1","targetPort":"value"},{"sourceId":"f30ba959-db32-12d0-3972-1bb48edf2ed1","sourcePort":"savedValue","targetId":"691cbe6f-c874-db1b-d45d-0dd43551cbc6","targetPort":"in-email"},{"sourceId":"691cbe6f-c874-db1b-d45d-0dd43551cbc6","sourcePort":"out-Failure","targetId":"c0a113f1-b0f0-f5bd-06f5-d9abf9d2c453","targetPort":"Failure"},{"sourceId":"691cbe6f-c874-db1b-d45d-0dd43551cbc6","sourcePort":"out-error","targetId":"c0a113f1-b0f0-f5bd-06f5-d9abf9d2c453","targetPort":"error"},{"sourceId":"691cbe6f-c874-db1b-d45d-0dd43551cbc6","sourcePort":"out-Success","targetId":"c0a113f1-b0f0-f5bd-06f5-d9abf9d2c453","targetPort":"Success"},{"sourceId":"8fce7bce-7a94-b681-17ba-fae681341924","sourcePort":"reset_url","targetId":"421825a5-1838-5a22-68c5-0464cc53a93b","targetPort":"value"},{"sourceId":"421825a5-1838-5a22-68c5-0464cc53a93b","sourcePort":"savedValue","targetId":"691cbe6f-c874-db1b-d45d-0dd43551cbc6","targetPort":"in-reset_url"},{"sourceId":"8fce7bce-7a94-b681-17ba-fae681341924","sourcePort":"website_url","targetId":"c3625480-f2a6-8388-6e0a-e8b165510170","targetPort":"value"},{"sourceId":"c3625480-f2a6-8388-6e0a-e8b165510170","sourcePort":"savedValue","targetId":"691cbe6f-c874-db1b-d45d-0dd43551cbc6","targetPort":"in-website_url"},{"sourceId":"8fce7bce-7a94-b681-17ba-fae681341924","sourcePort":"Do","targetId":"691cbe6f-c874-db1b-d45d-0dd43551cbc6","targetPort":"run"}],"ports":[{"name":"Success","type":"signal","plug":"output","index":0},{"name":"Do","type":{"name":"signal","allowConnectionsOnly":true},"group":"Actions","plug":"input","index":0},{"name":"Failure","type":"signal","plug":"output","index":1},{"name":"reset_url","type":{"name":"string"},"default":"","group":"Config (Provide only one)","plug":"input","index":1},{"name":"error","type":"*","plug":"output","index":2},{"name":"website_url","type":{"name":"string"},"default":"","group":"Config (Provide only one)","plug":"input","index":2},{"name":"email","type":{"name":"string"},"default":"","group":"Data","plug":"input","index":3}],"roots":[]},{"name":"/#Directus/Directus Prefab/Components/Auth/Directus - Reset Password","nodes":[{"id":"a1fd8c72-a2b0-95a1-84f0-95b6a6456be1","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"9b0089ad-e217-7c19-9505-a56affa36f28","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"3926a603-3abf-2b95-e15d-eba4535faefb","type":"JavaScriptFunction","parameters":{"functionScript":"const password = Inputs.password ?? null;\r\nconst reset_token = Inputs.reset_token ?? null;\r\n\r\nif (!password || !reset_token) return;\r\n\r\nconst client = Noodl.Objects.DirectusSDK?.Client ?? null;\r\n\r\nif(!client) throw new Error(\"Config Error: No SDK Client found!\");\r\n\r\nconst main = async function () {\r\n    try {\r\n        const result = await client.request(Directus.passwordReset(reset_token, password));\r\n\r\n        Outputs.data = result;\r\n        //console.log({ result });\r\n        Outputs.Success();\r\n        \r\n    } catch (err) {\r\n        console.error(err);\r\n        Outputs.error = err?.errors.map(i => i.message ).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nif (client) {\r\n    main();\r\n}"},"ports":[{"name":"in-password","displayName":"password","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-reset_token","displayName":"reset_token","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-data","displayName":"data","plug":"output","type":"*","group":"Outputs","index":8},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":9}],"children":[]},{"id":"c65699be-f907-1920-6967-65719e13bd31","type":"String","parameters":{},"ports":[],"children":[]},{"id":"7780d47d-9ed3-4231-4f99-e98e96bbf299","type":"String","parameters":{},"ports":[],"children":[]}],"connections":[{"sourceId":"a1fd8c72-a2b0-95a1-84f0-95b6a6456be1","sourcePort":"password","targetId":"c65699be-f907-1920-6967-65719e13bd31","targetPort":"value"},{"sourceId":"c65699be-f907-1920-6967-65719e13bd31","sourcePort":"savedValue","targetId":"3926a603-3abf-2b95-e15d-eba4535faefb","targetPort":"in-password"},{"sourceId":"3926a603-3abf-2b95-e15d-eba4535faefb","sourcePort":"out-Failure","targetId":"9b0089ad-e217-7c19-9505-a56affa36f28","targetPort":"Failure"},{"sourceId":"3926a603-3abf-2b95-e15d-eba4535faefb","sourcePort":"out-error","targetId":"9b0089ad-e217-7c19-9505-a56affa36f28","targetPort":"error"},{"sourceId":"3926a603-3abf-2b95-e15d-eba4535faefb","sourcePort":"out-Success","targetId":"9b0089ad-e217-7c19-9505-a56affa36f28","targetPort":"Success"},{"sourceId":"a1fd8c72-a2b0-95a1-84f0-95b6a6456be1","sourcePort":"reset_token","targetId":"7780d47d-9ed3-4231-4f99-e98e96bbf299","targetPort":"value"},{"sourceId":"7780d47d-9ed3-4231-4f99-e98e96bbf299","sourcePort":"savedValue","targetId":"3926a603-3abf-2b95-e15d-eba4535faefb","targetPort":"in-reset_token"},{"sourceId":"a1fd8c72-a2b0-95a1-84f0-95b6a6456be1","sourcePort":"Do","targetId":"3926a603-3abf-2b95-e15d-eba4535faefb","targetPort":"run"}],"ports":[{"name":"Success","type":"signal","plug":"output","index":0},{"name":"Do","type":{"name":"signal","allowConnectionsOnly":true},"group":"Actions","plug":"input","index":0},{"name":"Failure","type":"signal","plug":"output","index":1},{"name":"error","type":"*","plug":"output","index":2},{"name":"password","type":{"name":"string"},"default":"","group":"Data","plug":"input","index":2},{"name":"reset_token","type":{"name":"string"},"default":"","group":"Data","plug":"input","index":3}],"roots":[]},{"name":"/#Directus/Directus Prefab/Components/Data/Directus - Delete Data","nodes":[{"id":"044e9bdf-f5b7-2738-9670-9d3dd3f629e2","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"7f5063aa-f902-aa75-9f4f-ef325b82e41b","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"41a5c9bb-3586-f5c3-5197-63772acb7a21","type":"String","parameters":{},"ports":[],"children":[]},{"id":"25723b80-aa11-0d70-7b50-b6a43ef5178d","type":"JavaScriptFunction","parameters":{"functionScript":"const collection = Inputs.collection || null;\r\n\r\nif (typeof (collection) != \"string\" || collection.length <= 0) {\r\n    throw new Error(\"Invalid Collection value provided!\")\r\n} else {\r\n    Outputs.collection = collection;\r\n    Outputs.Done();\r\n}"},"ports":[{"name":"in-collection","displayName":"collection","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-collection","displayName":"collection","plug":"output","type":"*","group":"Outputs","index":6}],"children":[]},{"id":"b5c06875-607e-c9b5-5847-f170fdd88a94","type":"States","parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"children":[]},{"id":"61404f1e-d708-af9a-6ba8-43cfe4055330","type":"Timer","parameters":{"duration":100},"ports":[],"children":[]},{"id":"e5c7f759-1af0-35e3-c3f3-d1471e0e1824","type":"Javascript2","parameters":{"code":"Script.Inputs = {\r\n    client: \"string\",\r\n    collection: \"string\",\r\n    query: \"object\",\r\n    operation: \"string\"\r\n}\r\n\r\n\r\nScript.Signals.DeleteData = async function () {\r\n\r\n    const client_selection = Script.Inputs.client || null;\r\n    const sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\n    const collection = Script.Inputs.collection;\r\n\r\n    const operation = Script.Inputs.operation ?? null;\r\n    const item_id = Script.Inputs.item_id ?? null;\r\n    \r\n    let data = Script.Inputs.data ?? null;\r\n    const query = Script.Inputs.query || {};\r\n\r\n    if(Object.keys(query).length > 0) data = { ...query };\r\n\r\n    try {\r\n        if (sdk_client && collection && operation) {\r\n            let result;\r\n            switch (operation) {\r\n                case \"single\":\r\n                    if(!item_id) throw new Error(\"Provide valid Item ID!\");\r\n                    result = item_id ? await sdk_client.request(Directus.deleteItem(collection, item_id)) : null;\r\n                    break;\r\n                case \"multiple\":\r\n                    result = data ? await sdk_client.request(Directus.deleteItems(collection, data)) : null;\r\n                    break;\r\n                case \"all\":\r\n                    data = {\r\n                        limit : -1\r\n                    }\r\n                    result = await sdk_client.request(Directus.deleteItems(collection, data));\r\n                    break;\r\n            }\r\n            \r\n            Script.Outputs.result = result;\r\n            if (result) {\r\n                Script.Outputs.Success();\r\n            } else {\r\n                Script.Outputs.Failure();\r\n            }\r\n        } else {\r\n            Script.Outputs.error = \"Invalid configuration!\";\r\n            Script.Outputs.Failure();\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Script.Outputs.error = err?.errors.map(i => i.message).join(\"\\n\") ?? JSON.stringify(err);\r\n        Script.Outputs.Failure();\r\n    }\r\n}\r\n"},"ports":[{"name":"client","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"collection","plug":"input","type":{"name":"string"},"group":"Inputs","index":6},{"name":"query","plug":"input","type":{"name":"object"},"group":"Inputs","index":7},{"name":"operation","plug":"input","type":{"name":"string"},"group":"Inputs","index":8},{"name":"DeleteData","plug":"input","type":{"name":"signal"},"group":"Inputs","index":9},{"name":"item_id","displayName":"item_id","plug":"input","type":"*","group":"Inputs","index":10},{"name":"data","displayName":"data","plug":"input","type":"*","group":"Inputs","index":11},{"name":"Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":12},{"name":"Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":13},{"name":"result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":14},{"name":"error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":15}],"children":[]},{"id":"ad19b31b-48b5-8ec5-47f6-70479a279788","type":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for Delete)","parameters":{},"ports":[],"children":[]},{"id":"8b0971ad-38e9-b245-33d7-2159f795d22b","type":"States","parameters":{"states":"Delete Single by ID,Delete Multiple by Filter,Delete All"},"ports":[],"children":[]},{"id":"4806c8df-3c13-a821-45a2-b3cf9df41d68","type":"/#Directus/Directus Prefab/Components/Utils/SDK Client Check","parameters":{},"ports":[],"children":[]}],"connections":[{"sourceId":"044e9bdf-f5b7-2738-9670-9d3dd3f629e2","sourcePort":"collection","targetId":"41a5c9bb-3586-f5c3-5197-63772acb7a21","targetPort":"value"},{"sourceId":"41a5c9bb-3586-f5c3-5197-63772acb7a21","sourcePort":"savedValue","targetId":"25723b80-aa11-0d70-7b50-b6a43ef5178d","targetPort":"in-collection"},{"sourceId":"044e9bdf-f5b7-2738-9670-9d3dd3f629e2","sourcePort":"SDK Client to use","targetId":"b5c06875-607e-c9b5-5847-f170fdd88a94","targetPort":"currentState"},{"sourceId":"25723b80-aa11-0d70-7b50-b6a43ef5178d","sourcePort":"out-Done","targetId":"61404f1e-d708-af9a-6ba8-43cfe4055330","targetPort":"start"},{"sourceId":"e5c7f759-1af0-35e3-c3f3-d1471e0e1824","sourcePort":"Success","targetId":"7f5063aa-f902-aa75-9f4f-ef325b82e41b","targetPort":"Success"},{"sourceId":"e5c7f759-1af0-35e3-c3f3-d1471e0e1824","sourcePort":"Failure","targetId":"7f5063aa-f902-aa75-9f4f-ef325b82e41b","targetPort":"Failure"},{"sourceId":"e5c7f759-1af0-35e3-c3f3-d1471e0e1824","sourcePort":"result","targetId":"7f5063aa-f902-aa75-9f4f-ef325b82e41b","targetPort":"result"},{"sourceId":"e5c7f759-1af0-35e3-c3f3-d1471e0e1824","sourcePort":"error","targetId":"7f5063aa-f902-aa75-9f4f-ef325b82e41b","targetPort":"error"},{"sourceId":"25723b80-aa11-0d70-7b50-b6a43ef5178d","sourcePort":"out-collection","targetId":"e5c7f759-1af0-35e3-c3f3-d1471e0e1824","targetPort":"collection"},{"sourceId":"b5c06875-607e-c9b5-5847-f170fdd88a94","sourcePort":"currentState","targetId":"e5c7f759-1af0-35e3-c3f3-d1471e0e1824","targetPort":"client"},{"sourceId":"044e9bdf-f5b7-2738-9670-9d3dd3f629e2","sourcePort":"sort","targetId":"ad19b31b-48b5-8ec5-47f6-70479a279788","targetPort":"Sort"},{"sourceId":"044e9bdf-f5b7-2738-9670-9d3dd3f629e2","sourcePort":"offset","targetId":"ad19b31b-48b5-8ec5-47f6-70479a279788","targetPort":"Offset"},{"sourceId":"044e9bdf-f5b7-2738-9670-9d3dd3f629e2","sourcePort":"page","targetId":"ad19b31b-48b5-8ec5-47f6-70479a279788","targetPort":"Page"},{"sourceId":"044e9bdf-f5b7-2738-9670-9d3dd3f629e2","sourcePort":"search","targetId":"ad19b31b-48b5-8ec5-47f6-70479a279788","targetPort":"Search"},{"sourceId":"044e9bdf-f5b7-2738-9670-9d3dd3f629e2","sourcePort":"filter","targetId":"ad19b31b-48b5-8ec5-47f6-70479a279788","targetPort":"filter"},{"sourceId":"044e9bdf-f5b7-2738-9670-9d3dd3f629e2","sourcePort":"deep","targetId":"ad19b31b-48b5-8ec5-47f6-70479a279788","targetPort":"deep"},{"sourceId":"044e9bdf-f5b7-2738-9670-9d3dd3f629e2","sourcePort":"limit","targetId":"ad19b31b-48b5-8ec5-47f6-70479a279788","targetPort":"Limit"},{"sourceId":"ad19b31b-48b5-8ec5-47f6-70479a279788","sourcePort":"query","targetId":"e5c7f759-1af0-35e3-c3f3-d1471e0e1824","targetPort":"query"},{"sourceId":"61404f1e-d708-af9a-6ba8-43cfe4055330","sourcePort":"timerFinished","targetId":"e5c7f759-1af0-35e3-c3f3-d1471e0e1824","targetPort":"DeleteData"},{"sourceId":"044e9bdf-f5b7-2738-9670-9d3dd3f629e2","sourcePort":"Delete Type","targetId":"8b0971ad-38e9-b245-33d7-2159f795d22b","targetPort":"currentState"},{"sourceId":"8b0971ad-38e9-b245-33d7-2159f795d22b","sourcePort":"currentState","targetId":"ad19b31b-48b5-8ec5-47f6-70479a279788","targetPort":"Delete Type"},{"sourceId":"ad19b31b-48b5-8ec5-47f6-70479a279788","sourcePort":"itemID","targetId":"e5c7f759-1af0-35e3-c3f3-d1471e0e1824","targetPort":"item_id"},{"sourceId":"044e9bdf-f5b7-2738-9670-9d3dd3f629e2","sourcePort":"data","targetId":"e5c7f759-1af0-35e3-c3f3-d1471e0e1824","targetPort":"data"},{"sourceId":"ad19b31b-48b5-8ec5-47f6-70479a279788","sourcePort":"operation","targetId":"e5c7f759-1af0-35e3-c3f3-d1471e0e1824","targetPort":"operation"},{"sourceId":"044e9bdf-f5b7-2738-9670-9d3dd3f629e2","sourcePort":"Do","targetId":"ad19b31b-48b5-8ec5-47f6-70479a279788","targetPort":"Do"},{"sourceId":"044e9bdf-f5b7-2738-9670-9d3dd3f629e2","sourcePort":"Item ID","targetId":"ad19b31b-48b5-8ec5-47f6-70479a279788","targetPort":"Item ID"},{"sourceId":"044e9bdf-f5b7-2738-9670-9d3dd3f629e2","sourcePort":"Do","targetId":"4806c8df-3c13-a821-45a2-b3cf9df41d68","targetPort":"Do"},{"sourceId":"b5c06875-607e-c9b5-5847-f170fdd88a94","sourcePort":"currentState","targetId":"4806c8df-3c13-a821-45a2-b3cf9df41d68","targetPort":"State"},{"sourceId":"4806c8df-3c13-a821-45a2-b3cf9df41d68","sourcePort":"Success","targetId":"25723b80-aa11-0d70-7b50-b6a43ef5178d","targetPort":"run"}],"ports":[{"name":"Success","type":"signal","plug":"output","index":0},{"name":"Do","type":{"name":"signal","allowConnectionsOnly":true},"group":"Actions","plug":"input","index":0},{"name":"Failure","type":"signal","plug":"output","index":1},{"name":"SDK Client to use","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"default":"User SDK Client","group":"Config","plug":"input","index":1},{"name":"result","type":"*","plug":"output","index":2},{"name":"collection","type":{"name":"string"},"default":"","group":"Config","plug":"input","index":2},{"name":"error","type":"*","plug":"output","index":3},{"name":"Delete Type","type":{"name":"enum","enums":["Delete Single by ID","Delete Multiple by Filter","Delete All"]},"default":"Delete Single by ID","group":"Delete Data","plug":"input","index":3},{"name":"Item ID","type":"*","group":"Delete Data","plug":"input","index":5},{"name":"data","type":"*","group":"Delete Data","plug":"input","index":6},{"name":"limit","type":{"name":"number"},"default":0,"group":"Delete by Query Parameters","plug":"input","index":7},{"name":"sort","type":{"name":"string"},"default":"","group":"Delete by Query Parameters","plug":"input","index":8},{"name":"offset","type":{"name":"number"},"default":0,"group":"Delete by Query Parameters","plug":"input","index":9},{"name":"page","type":{"name":"number"},"default":0,"group":"Delete by Query Parameters","plug":"input","index":10},{"name":"search","type":{"name":"string"},"default":"","group":"Delete by Query Parameters","plug":"input","index":11},{"name":"filter","type":"*","group":"Delete by Query Parameters","plug":"input","index":12},{"name":"deep","type":"*","group":"Delete by Query Parameters","plug":"input","index":13}],"roots":[]},{"name":"/#Directus/Directus Prefab/Components/Files/Directus - Create File Download URL","nodes":[{"id":"bc9d612b-e969-1d85-2626-4d206bb4b2cd","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"8f49c344-d3f3-d07f-c3aa-e5d41b14f518","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"720ea1a5-69f8-167b-b3f4-3ae5b1cfc5e3","type":"JavaScriptFunction","parameters":{"functionScript":"const client_selection = Inputs.client ?? null;\r\nconst sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\nconst file_id = Inputs.file_id || null;\r\n\r\nconst transformation = Inputs.transformation ?? null;\r\nconst query = Inputs.query || {};\r\nconst key = Inputs.key || null;\r\n\r\nconst download_as_user = (client_selection) ? true : false;\r\n\r\nconst main = async function () {\r\n    try {\r\n        const baseURL = sdk_client.url.href || null;\r\n\r\n        if (baseURL && file_id) {\r\n            const fileURL = new URL(baseURL + \"assets/\" + file_id);\r\n            fileURL.searchParams.append(\"download\", \"\");\r\n\r\n            const access_token = await sdk_client.getToken() || null;\r\n            \r\n            if (access_token) {\r\n                fileURL.searchParams.append(\"access_token\", access_token);\r\n            }\r\n\r\n            if (transformation) {\r\n                switch (transformation) {\r\n                    case \"none\":\r\n                        break;\r\n                    case \"preset\":\r\n                        if(!key) throw new Error(\"Provide valid 'key' value for Image Transformation\");\r\n                        fileURL.searchParams.append(\"key\", key);\r\n                        break;\r\n                    case \"custom\":\r\n                        for (const prop in query) {\r\n                            fileURL.searchParams.append(prop, query[prop]);\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n                  \r\n            Outputs.downloadURL = fileURL.href;\r\n            Outputs.Success();\r\n        } else {\r\n            Outputs.downloadURL = null;\r\n            Outputs.Failure();\r\n        }\r\n    } catch (err) {\r\n        console.error(err);\r\n        Outputs.error = err?.errors.map(i => i.message).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nmain();\r\n"},"ports":[{"name":"in-client","displayName":"client","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-file_id","displayName":"file_id","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-transformation","displayName":"transformation","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-query","displayName":"query","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-key","displayName":"key","plug":"input","type":"*","group":"Inputs","index":8},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":9},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":10},{"name":"out-downloadURL","displayName":"downloadURL","plug":"output","type":"*","group":"Outputs","index":11},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":12}],"children":[]},{"id":"87f925bf-02a3-fc4d-02d6-c8b16f8660a7","type":"String","parameters":{},"ports":[],"children":[]},{"id":"6fb670b5-63c0-6a5a-80b2-6fc532f2634f","type":"States","parameters":{"states":"User SDK Client,Public,Site SDK Client","useTransitions":false},"ports":[],"children":[]},{"id":"09133f61-c721-f8aa-6ffa-b5c760ee40ac","type":"JavaScriptFunction","parameters":{"functionScript":"const state = Inputs.SDKClient ?? null;\r\n\r\nlet res = true;\r\n\r\nif(state == \"Site SDK Client\" || state == \"Public\"){\r\n    const client = Noodl.Objects.DirectusSDK.SiteClient || null;\r\n    if(!client){\r\n        res = false;\r\n        throw new Error(\"Directus Site Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(state == \"User SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.Client || null;\r\n    if(!client){ \r\n        res = false;\r\n        throw new Error(\"Directus User Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(res){\r\n    Outputs.Done();\r\n}"},"ports":[{"name":"in-SDKClient","displayName":"SDKClient","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[]},{"id":"595e2762-ac93-930a-35f9-dd11f29ea430","type":"Timer","parameters":{"duration":100},"ports":[],"children":[]},{"id":"4dd3cd25-ec24-5c9d-374d-61c827684cd1","type":"Timer","parameters":{"duration":100},"ports":[],"children":[]},{"id":"aff22d83-6969-6378-2fca-561aef4785d4","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"44155159-6828-e752-4f51-2ee0b677ead6","type":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for File Download)","parameters":{},"ports":[],"children":[]},{"id":"29c0b735-9bf8-0564-6775-723133fc9605","type":"States","parameters":{"useTransitions":false,"states":"None,Preset,Custom"},"ports":[],"children":[]},{"id":"fda7ea14-25f0-f84c-74f1-09c8987065d0","type":"JavaScriptFunction","parameters":{"functionScript":"const file_id = Inputs.file_id ?? null;\r\n\r\nconst transformation_raw = Inputs.transformation_raw ?? \"none\";\r\nconst key = Inputs.key ?? null;\r\n\r\nlet transformation = \"none\";\r\n\r\nif (file_id) {\r\n\r\n    switch (transformation_raw) {\r\n        case \"None\":\r\n            transformation = \"none\";\r\n            break;\r\n        case \"Preset\":\r\n            if (!key) throw new Error(\"Provide a valid key value\");\r\n            transformation = \"preset\";\r\n            break;\r\n        case \"Custom\":\r\n            transformation = \"custom\";\r\n            break;\r\n\r\n    }\r\n\r\n    Outputs.transformation = transformation;\r\n    Outputs.Done();\r\n}"},"ports":[{"name":"in-file_id","displayName":"file_id","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-transformation_raw","displayName":"transformation_raw","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-key","displayName":"key","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-transformation","displayName":"transformation","plug":"output","type":"*","group":"Outputs","index":8}],"children":[]},{"id":"155718e9-ad73-a965-c5d0-0c1110a3efe7","type":"String","parameters":{},"ports":[],"children":[]}],"connections":[{"sourceId":"bc9d612b-e969-1d85-2626-4d206bb4b2cd","sourcePort":"file id","targetId":"87f925bf-02a3-fc4d-02d6-c8b16f8660a7","targetPort":"value"},{"sourceId":"720ea1a5-69f8-167b-b3f4-3ae5b1cfc5e3","sourcePort":"out-Success","targetId":"8f49c344-d3f3-d07f-c3aa-e5d41b14f518","targetPort":"Success"},{"sourceId":"720ea1a5-69f8-167b-b3f4-3ae5b1cfc5e3","sourcePort":"out-Failure","targetId":"8f49c344-d3f3-d07f-c3aa-e5d41b14f518","targetPort":"Failure"},{"sourceId":"720ea1a5-69f8-167b-b3f4-3ae5b1cfc5e3","sourcePort":"out-error","targetId":"8f49c344-d3f3-d07f-c3aa-e5d41b14f518","targetPort":"error"},{"sourceId":"720ea1a5-69f8-167b-b3f4-3ae5b1cfc5e3","sourcePort":"out-downloadURL","targetId":"8f49c344-d3f3-d07f-c3aa-e5d41b14f518","targetPort":"downloadURL"},{"sourceId":"6fb670b5-63c0-6a5a-80b2-6fc532f2634f","sourcePort":"currentState","targetId":"09133f61-c721-f8aa-6ffa-b5c760ee40ac","targetPort":"in-SDKClient"},{"sourceId":"4dd3cd25-ec24-5c9d-374d-61c827684cd1","sourcePort":"timerFinished","targetId":"09133f61-c721-f8aa-6ffa-b5c760ee40ac","targetPort":"run"},{"sourceId":"09133f61-c721-f8aa-6ffa-b5c760ee40ac","sourcePort":"out-Done","targetId":"595e2762-ac93-930a-35f9-dd11f29ea430","targetPort":"start"},{"sourceId":"bc9d612b-e969-1d85-2626-4d206bb4b2cd","sourcePort":"Do","targetId":"4dd3cd25-ec24-5c9d-374d-61c827684cd1","targetPort":"start"},{"sourceId":"bc9d612b-e969-1d85-2626-4d206bb4b2cd","sourcePort":"SDK Client to use","targetId":"6fb670b5-63c0-6a5a-80b2-6fc532f2634f","targetPort":"currentState"},{"sourceId":"6fb670b5-63c0-6a5a-80b2-6fc532f2634f","sourcePort":"currentState","targetId":"720ea1a5-69f8-167b-b3f4-3ae5b1cfc5e3","targetPort":"in-client"},{"sourceId":"aff22d83-6969-6378-2fca-561aef4785d4","sourcePort":"Transformation Type","targetId":"29c0b735-9bf8-0564-6775-723133fc9605","targetPort":"currentState"},{"sourceId":"aff22d83-6969-6378-2fca-561aef4785d4","sourcePort":"fit","targetId":"44155159-6828-e752-4f51-2ee0b677ead6","targetPort":"fit"},{"sourceId":"aff22d83-6969-6378-2fca-561aef4785d4","sourcePort":"width","targetId":"44155159-6828-e752-4f51-2ee0b677ead6","targetPort":"width"},{"sourceId":"aff22d83-6969-6378-2fca-561aef4785d4","sourcePort":"height","targetId":"44155159-6828-e752-4f51-2ee0b677ead6","targetPort":"height"},{"sourceId":"aff22d83-6969-6378-2fca-561aef4785d4","sourcePort":"quality","targetId":"44155159-6828-e752-4f51-2ee0b677ead6","targetPort":"quality"},{"sourceId":"aff22d83-6969-6378-2fca-561aef4785d4","sourcePort":"withoutEnlargement","targetId":"44155159-6828-e752-4f51-2ee0b677ead6","targetPort":"withoutEnlargement"},{"sourceId":"aff22d83-6969-6378-2fca-561aef4785d4","sourcePort":"format","targetId":"44155159-6828-e752-4f51-2ee0b677ead6","targetPort":"format"},{"sourceId":"29c0b735-9bf8-0564-6775-723133fc9605","sourcePort":"currentState","targetId":"fda7ea14-25f0-f84c-74f1-09c8987065d0","targetPort":"in-transformation_raw"},{"sourceId":"595e2762-ac93-930a-35f9-dd11f29ea430","sourcePort":"timerFinished","targetId":"44155159-6828-e752-4f51-2ee0b677ead6","targetPort":"Set"},{"sourceId":"fda7ea14-25f0-f84c-74f1-09c8987065d0","sourcePort":"out-Done","targetId":"720ea1a5-69f8-167b-b3f4-3ae5b1cfc5e3","targetPort":"run"},{"sourceId":"44155159-6828-e752-4f51-2ee0b677ead6","sourcePort":"Done","targetId":"fda7ea14-25f0-f84c-74f1-09c8987065d0","targetPort":"run"},{"sourceId":"87f925bf-02a3-fc4d-02d6-c8b16f8660a7","sourcePort":"savedValue","targetId":"fda7ea14-25f0-f84c-74f1-09c8987065d0","targetPort":"in-file_id"},{"sourceId":"fda7ea14-25f0-f84c-74f1-09c8987065d0","sourcePort":"out-transformation","targetId":"720ea1a5-69f8-167b-b3f4-3ae5b1cfc5e3","targetPort":"in-transformation"},{"sourceId":"87f925bf-02a3-fc4d-02d6-c8b16f8660a7","sourcePort":"savedValue","targetId":"720ea1a5-69f8-167b-b3f4-3ae5b1cfc5e3","targetPort":"in-file_id"},{"sourceId":"44155159-6828-e752-4f51-2ee0b677ead6","sourcePort":"query","targetId":"720ea1a5-69f8-167b-b3f4-3ae5b1cfc5e3","targetPort":"in-query"},{"sourceId":"aff22d83-6969-6378-2fca-561aef4785d4","sourcePort":"key","targetId":"155718e9-ad73-a965-c5d0-0c1110a3efe7","targetPort":"value"},{"sourceId":"155718e9-ad73-a965-c5d0-0c1110a3efe7","sourcePort":"savedValue","targetId":"fda7ea14-25f0-f84c-74f1-09c8987065d0","targetPort":"in-key"},{"sourceId":"155718e9-ad73-a965-c5d0-0c1110a3efe7","sourcePort":"savedValue","targetId":"720ea1a5-69f8-167b-b3f4-3ae5b1cfc5e3","targetPort":"in-key"}],"ports":[{"name":"Success","type":"signal","plug":"output","index":0},{"name":"Do","type":{"name":"signal","allowConnectionsOnly":true},"plug":"input","index":0},{"name":"Failure","type":"signal","plug":"output","index":1},{"name":"SDK Client to use","type":{"name":"enum","enums":["User SDK Client","Public","Site SDK Client"]},"default":"User SDK Client","group":"States","plug":"input","index":1},{"name":"downloadURL","type":"*","plug":"output","index":2},{"name":"file id","type":{"name":"string"},"default":"","group":"Data","plug":"input","index":2},{"name":"Transformation Type","type":{"name":"enum","enums":["None","Preset","Custom"]},"default":"None","group":"Config","plug":"input","index":2},{"name":"error","type":"*","plug":"output","index":3},{"name":"key","type":{"name":"string"},"default":"","group":"Preset Transformations","plug":"input","index":4},{"name":"fit","type":{"name":"string"},"default":"","group":"Custom Transformations","plug":"input","index":5},{"name":"width","type":{"name":"number"},"default":0,"group":"Custom Transformations","plug":"input","index":6},{"name":"height","type":{"name":"number"},"default":0,"group":"Custom Transformations","plug":"input","index":7},{"name":"quality","type":{"name":"number"},"default":100,"group":"Custom Transformations","plug":"input","index":8},{"name":"withoutEnlargement","type":{"name":"boolean"},"default":false,"group":"Custom Transformations","plug":"input","index":9},{"name":"format","type":{"name":"string"},"default":"","group":"Custom Transformations","plug":"input","index":10}],"roots":[]},{"name":"/#Directus/Directus Prefab/Components/Files/Directus - Download File","nodes":[{"id":"84a150c3-bda0-de2d-c9e3-c66ffaca1c7e","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"dddeb29b-c00a-dee2-1f2a-cf94cb8ebba4","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"1083e48f-4e71-cc19-37ee-71f6216bed52","type":"States","parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"children":[]},{"id":"aafa601e-47e2-e1da-e682-b2319e76d675","type":"JavaScriptFunction","parameters":{"functionScript":"const state = Inputs.SDKClient ?? null;\r\n\r\nlet res = true;\r\n\r\nif(state == \"Site SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.SiteClient || null;\r\n    if(!client){\r\n        res = false;\r\n        throw new Error(\"Directus Site Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(state == \"User SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.Client || null;\r\n    if(!client){ \r\n        res = false;\r\n        throw new Error(\"Directus User Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(res){\r\n    Outputs.Done();\r\n}"},"ports":[{"name":"in-SDKClient","displayName":"SDKClient","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[]},{"id":"29fa8410-4168-6ad1-6cb9-be3f0f0994d2","type":"Timer","parameters":{"duration":100},"ports":[],"children":[]},{"id":"ddf2318e-13f6-e522-c0ac-77cc24b1d963","type":"Timer","parameters":{"duration":100},"ports":[],"children":[]},{"id":"b376d61c-69a6-cb06-d035-e715de596096","type":"Javascript2","parameters":{"code":"Script.Inputs = {\r\n    client: \"string\",\r\n    fileID: \"string\",\r\n    fileObj: \"object\",\r\n    query: \"object\",\r\n    transformation: \"string\",\r\n    key: \"string\"\r\n}\r\n\r\n\r\nScript.Signals.GetData = async function () {\r\n\r\n    const client_selection = Script.Inputs.client || null;\r\n    const sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\n    const fileID = Script.Inputs.fileID ?? null;\r\n    const fileObj = Script.Inputs.fileObj ?? null;\r\n\r\n    const fileName = ( fileObj?.title ? fileObj.title + fileObj.filename_download.split('.').at(-1) : filename_download ) ?? null;\r\n\r\n    const transformation = Script.Inputs.transformation ?? null;\r\n\r\n    const query = Script.Inputs.query || {};\r\n\r\n    try {\r\n        if (sdk_client && fileID && fileName && transformation) {\r\n            let result;\r\n\r\n            switch (transformation) {\r\n                case \"none\":\r\n                    result = await sdk_client.request(Directus.readAssetRaw(fileID));\r\n                    break;\r\n                case \"key\":\r\n                    result = await sdk_client.request(Directus.readAssetRaw(fileID, { key }));\r\n                    break;\r\n                case \"custom\":\r\n                    result = await sdk_client.request(Directus.readAssetRaw(fileID, query));\r\n                    break;\r\n            }\r\n\r\n            const file_output = new File([result], fileName, {type: result.type});\r\n\r\n            if (result) {\r\n                Script.Outputs.result = file_output;\r\n                Script.Outputs.Success();\r\n            } else {\r\n                Script.Outputs.result = null;\r\n                Script.Outputs.Failure();\r\n            }\r\n        } else {\r\n            console.error(err);\r\n\r\n            Script.Outputs.error = \"Invalid configuration!\";\r\n            Script.Outputs.Failure();\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Script.Outputs.error = err?.errors.map(i => i.message).join(\"\\n\") ?? JSON.stringify(err);\r\n        Script.Outputs.Failure();\r\n    }\r\n}\r\n"},"ports":[{"name":"client","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"fileID","plug":"input","type":{"name":"string"},"group":"Inputs","index":6},{"name":"fileObj","plug":"input","type":{"name":"object"},"group":"Inputs","index":7},{"name":"query","plug":"input","type":{"name":"object"},"group":"Inputs","index":8},{"name":"transformation","plug":"input","type":{"name":"string"},"group":"Inputs","index":9},{"name":"key","plug":"input","type":{"name":"string"},"group":"Inputs","index":10},{"name":"GetData","plug":"input","type":{"name":"signal"},"group":"Inputs","index":11},{"name":"Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":12},{"name":"Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":13},{"name":"result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":14},{"name":"error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":15}],"children":[]},{"id":"7b262452-bc7e-6acb-0224-d93a7549fd12","type":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for File Download)","parameters":{},"ports":[],"children":[]},{"id":"77b90c87-c66f-6434-b948-f8edde2dfec1","type":"States","parameters":{"useTransitions":false,"states":"None,Preset,Custom"},"ports":[],"children":[]},{"id":"14560ca5-6671-23a3-9774-1ef07c5443c0","type":"JavaScriptFunction","parameters":{"functionScript":"const file_id = Inputs.file_id ?? null;\r\n\r\nconst transformation_raw = Inputs.transformation_raw ?? \"none\";\r\nconst key = Inputs.key ?? null;\r\n\r\nlet transformation = null;\r\n\r\nif(!file_id) throw new Error(\"Provide a valid File ID\");\r\n\r\nswitch (transformation_raw){\r\n    case \"None\":\r\n        transformation = \"none\";\r\n        break;\r\n    case \"Preset\":\r\n        if(!key) throw new Error(\"Provide a valid key value\");\r\n        transformation = \"preset\";\r\n        break;\r\n    case \"Custom\":\r\n        transformation = \"custom\";\r\n        break;\r\n}\r\n\r\nOutputs.transformation = transformation;\r\nOutputs.Done();"},"ports":[{"name":"in-file_id","displayName":"file_id","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-transformation_raw","displayName":"transformation_raw","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-key","displayName":"key","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-transformation","displayName":"transformation","plug":"output","type":"*","group":"Outputs","index":8}],"children":[]},{"id":"e4c42196-0cfc-0c9c-1044-51ffa627c563","type":"/#Directus/Directus Prefab/Components/Files/Directus - Get Files","parameters":{},"ports":[],"children":[]}],"connections":[{"sourceId":"84a150c3-bda0-de2d-c9e3-c66ffaca1c7e","sourcePort":"SDK Client to use","targetId":"1083e48f-4e71-cc19-37ee-71f6216bed52","targetPort":"currentState"},{"sourceId":"1083e48f-4e71-cc19-37ee-71f6216bed52","sourcePort":"currentState","targetId":"aafa601e-47e2-e1da-e682-b2319e76d675","targetPort":"in-SDKClient"},{"sourceId":"84a150c3-bda0-de2d-c9e3-c66ffaca1c7e","sourcePort":"Do","targetId":"ddf2318e-13f6-e522-c0ac-77cc24b1d963","targetPort":"start"},{"sourceId":"ddf2318e-13f6-e522-c0ac-77cc24b1d963","sourcePort":"timerFinished","targetId":"aafa601e-47e2-e1da-e682-b2319e76d675","targetPort":"run"},{"sourceId":"b376d61c-69a6-cb06-d035-e715de596096","sourcePort":"Success","targetId":"dddeb29b-c00a-dee2-1f2a-cf94cb8ebba4","targetPort":"Success"},{"sourceId":"b376d61c-69a6-cb06-d035-e715de596096","sourcePort":"Failure","targetId":"dddeb29b-c00a-dee2-1f2a-cf94cb8ebba4","targetPort":"Failure"},{"sourceId":"b376d61c-69a6-cb06-d035-e715de596096","sourcePort":"result","targetId":"dddeb29b-c00a-dee2-1f2a-cf94cb8ebba4","targetPort":"result"},{"sourceId":"b376d61c-69a6-cb06-d035-e715de596096","sourcePort":"error","targetId":"dddeb29b-c00a-dee2-1f2a-cf94cb8ebba4","targetPort":"error"},{"sourceId":"1083e48f-4e71-cc19-37ee-71f6216bed52","sourcePort":"currentState","targetId":"b376d61c-69a6-cb06-d035-e715de596096","targetPort":"client"},{"sourceId":"aafa601e-47e2-e1da-e682-b2319e76d675","sourcePort":"out-Done","targetId":"29fa8410-4168-6ad1-6cb9-be3f0f0994d2","targetPort":"start"},{"sourceId":"7b262452-bc7e-6acb-0224-d93a7549fd12","sourcePort":"query","targetId":"b376d61c-69a6-cb06-d035-e715de596096","targetPort":"query"},{"sourceId":"84a150c3-bda0-de2d-c9e3-c66ffaca1c7e","sourcePort":"Do","targetId":"7b262452-bc7e-6acb-0224-d93a7549fd12","targetPort":"Set"},{"sourceId":"84a150c3-bda0-de2d-c9e3-c66ffaca1c7e","sourcePort":"Transformation Type","targetId":"77b90c87-c66f-6434-b948-f8edde2dfec1","targetPort":"currentState"},{"sourceId":"84a150c3-bda0-de2d-c9e3-c66ffaca1c7e","sourcePort":"key","targetId":"14560ca5-6671-23a3-9774-1ef07c5443c0","targetPort":"in-key"},{"sourceId":"84a150c3-bda0-de2d-c9e3-c66ffaca1c7e","sourcePort":"File ID","targetId":"14560ca5-6671-23a3-9774-1ef07c5443c0","targetPort":"in-file_id"},{"sourceId":"84a150c3-bda0-de2d-c9e3-c66ffaca1c7e","sourcePort":"key","targetId":"b376d61c-69a6-cb06-d035-e715de596096","targetPort":"key"},{"sourceId":"14560ca5-6671-23a3-9774-1ef07c5443c0","sourcePort":"out-transformation","targetId":"b376d61c-69a6-cb06-d035-e715de596096","targetPort":"transformation"},{"sourceId":"14560ca5-6671-23a3-9774-1ef07c5443c0","sourcePort":"out-Done","targetId":"b376d61c-69a6-cb06-d035-e715de596096","targetPort":"GetData"},{"sourceId":"84a150c3-bda0-de2d-c9e3-c66ffaca1c7e","sourcePort":"fit","targetId":"7b262452-bc7e-6acb-0224-d93a7549fd12","targetPort":"fit"},{"sourceId":"84a150c3-bda0-de2d-c9e3-c66ffaca1c7e","sourcePort":"width","targetId":"7b262452-bc7e-6acb-0224-d93a7549fd12","targetPort":"width"},{"sourceId":"84a150c3-bda0-de2d-c9e3-c66ffaca1c7e","sourcePort":"height","targetId":"7b262452-bc7e-6acb-0224-d93a7549fd12","targetPort":"height"},{"sourceId":"84a150c3-bda0-de2d-c9e3-c66ffaca1c7e","sourcePort":"quality","targetId":"7b262452-bc7e-6acb-0224-d93a7549fd12","targetPort":"quality"},{"sourceId":"84a150c3-bda0-de2d-c9e3-c66ffaca1c7e","sourcePort":"withoutEnlargement","targetId":"7b262452-bc7e-6acb-0224-d93a7549fd12","targetPort":"withoutEnlargement"},{"sourceId":"84a150c3-bda0-de2d-c9e3-c66ffaca1c7e","sourcePort":"format","targetId":"7b262452-bc7e-6acb-0224-d93a7549fd12","targetPort":"format"},{"sourceId":"84a150c3-bda0-de2d-c9e3-c66ffaca1c7e","sourcePort":"File ID","targetId":"b376d61c-69a6-cb06-d035-e715de596096","targetPort":"fileID"},{"sourceId":"77b90c87-c66f-6434-b948-f8edde2dfec1","sourcePort":"currentState","targetId":"14560ca5-6671-23a3-9774-1ef07c5443c0","targetPort":"in-transformation_raw"},{"sourceId":"84a150c3-bda0-de2d-c9e3-c66ffaca1c7e","sourcePort":"File ID","targetId":"e4c42196-0cfc-0c9c-1044-51ffa627c563","targetPort":"File ID"},{"sourceId":"29fa8410-4168-6ad1-6cb9-be3f0f0994d2","sourcePort":"timerFinished","targetId":"e4c42196-0cfc-0c9c-1044-51ffa627c563","targetPort":"Do"},{"sourceId":"e4c42196-0cfc-0c9c-1044-51ffa627c563","sourcePort":"Success","targetId":"14560ca5-6671-23a3-9774-1ef07c5443c0","targetPort":"run"},{"sourceId":"e4c42196-0cfc-0c9c-1044-51ffa627c563","sourcePort":"Failure","targetId":"dddeb29b-c00a-dee2-1f2a-cf94cb8ebba4","targetPort":"Failure"},{"sourceId":"e4c42196-0cfc-0c9c-1044-51ffa627c563","sourcePort":"error","targetId":"dddeb29b-c00a-dee2-1f2a-cf94cb8ebba4","targetPort":"error"},{"sourceId":"e4c42196-0cfc-0c9c-1044-51ffa627c563","sourcePort":"result","targetId":"b376d61c-69a6-cb06-d035-e715de596096","targetPort":"fileObj"},{"sourceId":"1083e48f-4e71-cc19-37ee-71f6216bed52","sourcePort":"currentState","targetId":"e4c42196-0cfc-0c9c-1044-51ffa627c563","targetPort":"SDK Client to use"}],"ports":[{"name":"Success","type":"signal","plug":"output","index":0},{"name":"Do","type":{"name":"signal","allowConnectionsOnly":true},"plug":"input","index":0},{"name":"Failure","type":{"name":"signal"},"plug":"output","index":1},{"name":"SDK Client to use","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"default":"User SDK Client","group":"Config","plug":"input","index":1},{"name":"result","type":"*","plug":"output","index":2},{"name":"Transformation Type","type":{"name":"enum","enums":["None","Preset","Custom"]},"default":"None","group":"Config","plug":"input","index":2},{"name":"error","type":{"name":"*"},"plug":"output","index":3},{"name":"File ID","type":{"name":"string"},"group":"Config","plug":"input","index":3},{"name":"key","type":{"name":"string"},"group":"Preset Transformations","plug":"input","index":4},{"name":"fit","type":{"name":"string"},"default":"","group":"Custom Transformations","plug":"input","index":5},{"name":"width","type":{"name":"number"},"default":0,"group":"Custom Transformations","plug":"input","index":6},{"name":"height","type":{"name":"number"},"default":0,"group":"Custom Transformations","plug":"input","index":7},{"name":"quality","type":{"name":"number"},"default":100,"group":"Custom Transformations","plug":"input","index":8},{"name":"withoutEnlargement","type":{"name":"boolean"},"default":false,"group":"Custom Transformations","plug":"input","index":9},{"name":"format","type":{"name":"string"},"default":"","group":"Custom Transformations","plug":"input","index":10}],"roots":[]},{"name":"/#Directus/Directus Prefab/Components/Files/Directus - Get Files","nodes":[{"id":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"845ac7cd-67f9-9121-eadf-ca1b44e7a049","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"d910da8e-0a7e-ab2a-abc9-310ff2002376","type":"States","parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"children":[]},{"id":"435ce239-3e9b-160e-7ae4-f04aae2fe021","type":"JavaScriptFunction","parameters":{"functionScript":"const state = Inputs.SDKClient ?? null;\r\n\r\nlet res = true;\r\n\r\nif(state == \"Site SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.SiteClient || null;\r\n    if(!client){\r\n        res = false;\r\n        throw new Error(\"Directus Site Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(state == \"User SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.Client || null;\r\n    if(!client){ \r\n        res = false;\r\n        throw new Error(\"Directus User Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(res){\r\n    Outputs.Done();\r\n}"},"ports":[{"name":"in-SDKClient","displayName":"SDKClient","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[]},{"id":"62f17a4f-a926-408e-9f88-41c6d2779613","type":"Timer","parameters":{"duration":100},"ports":[],"children":[]},{"id":"e369d045-35cc-dc10-a583-d906077ef8d7","type":"Timer","parameters":{"duration":100},"ports":[],"children":[]},{"id":"14d9023a-068f-e08a-addf-397476888e21","type":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for Read)","parameters":{},"ports":[],"children":[]},{"id":"b8a5eb17-23e1-21de-ec37-61ddbd4e2a76","type":"Javascript2","parameters":{"code":"Script.Inputs = {\r\n    client: \"string\",\r\n    operation: \"string\",\r\n    itemID: \"string\",\r\n    query: \"object\"\r\n}\r\n\r\n\r\nScript.Signals.GetData = async function () {\r\n\r\n    const client_selection = Script.Inputs.client || null;\r\n    const sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\n    const operation = Script.Inputs.operation;\r\n    const itemID = Script.Inputs.itemID;\r\n\r\n    const query = Script.Inputs.query || {};\r\n\r\n    try {\r\n        if (sdk_client && operation) {\r\n            let result;\r\n            switch (operation) {\r\n                case \"single\":\r\n                    if(!itemID) throw new Error(\"Provide valid ID!\");\r\n                    result = await sdk_client.request(Directus.readFile(itemID, query));\r\n                    break;\r\n                case \"multiple\":\r\n                    result = await sdk_client.request(Directus.readFiles(query));\r\n                    break;\r\n                case \"all\":\r\n                    query.limit = -1;\r\n                    result = await sdk_client.request(Directus.readFiles(query));\r\n                    break;\r\n            }\r\n            \r\n            Script.Outputs.result = result;\r\n            if (result) {\r\n                Script.Outputs.Success();\r\n            } else {\r\n                Script.Outputs.Failure();\r\n            }\r\n        } else {\r\n            console.error(err);\r\n\r\n            Script.Outputs.error = \"Invalid configuration!\";\r\n            Script.Outputs.Failure();\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Script.Outputs.error = err?.errors.map(i => i.message).join(\"\\n\") ?? JSON.stringify(err);\r\n        Script.Outputs.Failure();\r\n    }\r\n}\r\n"},"ports":[{"name":"client","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"operation","plug":"input","type":{"name":"string"},"group":"Inputs","index":6},{"name":"itemID","plug":"input","type":{"name":"string"},"group":"Inputs","index":7},{"name":"query","plug":"input","type":{"name":"object"},"group":"Inputs","index":8},{"name":"GetData","plug":"input","type":{"name":"signal"},"group":"Inputs","index":9},{"name":"Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":10},{"name":"Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":11},{"name":"result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":12},{"name":"error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":13}],"children":[]},{"id":"f794b3b2-8a50-f848-9b3c-99bbf4ba6934","type":"States","parameters":{"states":"Get Single by ID,Get Multiple by Filter,Get All"},"ports":[],"children":[]}],"connections":[{"sourceId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","sourcePort":"SDK Client to use","targetId":"d910da8e-0a7e-ab2a-abc9-310ff2002376","targetPort":"currentState"},{"sourceId":"d910da8e-0a7e-ab2a-abc9-310ff2002376","sourcePort":"currentState","targetId":"435ce239-3e9b-160e-7ae4-f04aae2fe021","targetPort":"in-SDKClient"},{"sourceId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","sourcePort":"Do","targetId":"e369d045-35cc-dc10-a583-d906077ef8d7","targetPort":"start"},{"sourceId":"e369d045-35cc-dc10-a583-d906077ef8d7","sourcePort":"timerFinished","targetId":"435ce239-3e9b-160e-7ae4-f04aae2fe021","targetPort":"run"},{"sourceId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","sourcePort":"Do","targetId":"14d9023a-068f-e08a-addf-397476888e21","targetPort":"Set"},{"sourceId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","sourcePort":"aggregate","targetId":"14d9023a-068f-e08a-addf-397476888e21","targetPort":"aggregate"},{"sourceId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","sourcePort":"groupBy","targetId":"14d9023a-068f-e08a-addf-397476888e21","targetPort":"groupBy"},{"sourceId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","sourcePort":"filter","targetId":"14d9023a-068f-e08a-addf-397476888e21","targetPort":"filter"},{"sourceId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","sourcePort":"deep","targetId":"14d9023a-068f-e08a-addf-397476888e21","targetPort":"deep"},{"sourceId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","sourcePort":"alias","targetId":"14d9023a-068f-e08a-addf-397476888e21","targetPort":"alias"},{"sourceId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","sourcePort":"File ID","targetId":"14d9023a-068f-e08a-addf-397476888e21","targetPort":"Item ID"},{"sourceId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","sourcePort":"limit","targetId":"14d9023a-068f-e08a-addf-397476888e21","targetPort":"Limit"},{"sourceId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","sourcePort":"Get all fields","targetId":"14d9023a-068f-e08a-addf-397476888e21","targetPort":"Get all fields"},{"sourceId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","sourcePort":"fields","targetId":"14d9023a-068f-e08a-addf-397476888e21","targetPort":"Fields"},{"sourceId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","sourcePort":"sort","targetId":"14d9023a-068f-e08a-addf-397476888e21","targetPort":"Sort"},{"sourceId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","sourcePort":"offset","targetId":"14d9023a-068f-e08a-addf-397476888e21","targetPort":"Offset"},{"sourceId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","sourcePort":"page","targetId":"14d9023a-068f-e08a-addf-397476888e21","targetPort":"Page"},{"sourceId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","sourcePort":"search","targetId":"14d9023a-068f-e08a-addf-397476888e21","targetPort":"Search"},{"sourceId":"14d9023a-068f-e08a-addf-397476888e21","sourcePort":"query","targetId":"b8a5eb17-23e1-21de-ec37-61ddbd4e2a76","targetPort":"query"},{"sourceId":"14d9023a-068f-e08a-addf-397476888e21","sourcePort":"operation","targetId":"b8a5eb17-23e1-21de-ec37-61ddbd4e2a76","targetPort":"operation"},{"sourceId":"14d9023a-068f-e08a-addf-397476888e21","sourcePort":"itemID","targetId":"b8a5eb17-23e1-21de-ec37-61ddbd4e2a76","targetPort":"itemID"},{"sourceId":"62f17a4f-a926-408e-9f88-41c6d2779613","sourcePort":"timerFinished","targetId":"b8a5eb17-23e1-21de-ec37-61ddbd4e2a76","targetPort":"GetData"},{"sourceId":"b8a5eb17-23e1-21de-ec37-61ddbd4e2a76","sourcePort":"Success","targetId":"845ac7cd-67f9-9121-eadf-ca1b44e7a049","targetPort":"Success"},{"sourceId":"b8a5eb17-23e1-21de-ec37-61ddbd4e2a76","sourcePort":"Failure","targetId":"845ac7cd-67f9-9121-eadf-ca1b44e7a049","targetPort":"Failure"},{"sourceId":"b8a5eb17-23e1-21de-ec37-61ddbd4e2a76","sourcePort":"result","targetId":"845ac7cd-67f9-9121-eadf-ca1b44e7a049","targetPort":"result"},{"sourceId":"b8a5eb17-23e1-21de-ec37-61ddbd4e2a76","sourcePort":"error","targetId":"845ac7cd-67f9-9121-eadf-ca1b44e7a049","targetPort":"error"},{"sourceId":"d910da8e-0a7e-ab2a-abc9-310ff2002376","sourcePort":"currentState","targetId":"b8a5eb17-23e1-21de-ec37-61ddbd4e2a76","targetPort":"client"},{"sourceId":"cb83d7c3-bfb4-2d47-7d8a-2e584e79b0c9","sourcePort":"File Get type","targetId":"f794b3b2-8a50-f848-9b3c-99bbf4ba6934","targetPort":"currentState"},{"sourceId":"f794b3b2-8a50-f848-9b3c-99bbf4ba6934","sourcePort":"currentState","targetId":"14d9023a-068f-e08a-addf-397476888e21","targetPort":"Get Type"},{"sourceId":"435ce239-3e9b-160e-7ae4-f04aae2fe021","sourcePort":"out-Done","targetId":"62f17a4f-a926-408e-9f88-41c6d2779613","targetPort":"start"}],"ports":[{"name":"Success","type":"signal","plug":"output","index":0},{"name":"Do","type":{"name":"signal","allowConnectionsOnly":true},"plug":"input","index":0},{"name":"Failure","type":"signal","plug":"output","index":1},{"name":"SDK Client to use","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"default":"User SDK Client","group":"Config","plug":"input","index":1},{"name":"result","type":"*","plug":"output","index":2},{"name":"error","type":"*","plug":"output","index":3},{"name":"File Get type","type":{"name":"enum","enums":["Get Single by ID","Get Multiple by Filter","Get All"]},"default":"Get Single by ID","group":"What to Get","plug":"input","index":3},{"name":"File ID","type":"*","group":"What to Get","plug":"input","index":4},{"name":"limit","type":{"name":"number"},"default":50,"group":"Query Parameters","plug":"input","index":5},{"name":"Get all fields","type":{"name":"boolean"},"default":true,"group":"Query Parameters","plug":"input","index":6},{"name":"fields","type":{"name":"string"},"default":"","group":"Query Parameters","plug":"input","index":7},{"name":"sort","type":{"name":"string"},"default":"","group":"Query Parameters","plug":"input","index":8},{"name":"offset","type":{"name":"number"},"default":0,"group":"Query Parameters","plug":"input","index":9},{"name":"page","type":{"name":"number"},"default":0,"group":"Query Parameters","plug":"input","index":10},{"name":"search","type":{"name":"string"},"default":"","group":"Query Parameters","plug":"input","index":11},{"name":"aggregate","type":"*","group":"Query Parameters","plug":"input","index":12},{"name":"groupBy","type":"*","group":"Query Parameters","plug":"input","index":13},{"name":"filter","type":"*","group":"Query Parameters","plug":"input","index":14},{"name":"deep","type":"*","group":"Query Parameters","plug":"input","index":15},{"name":"alias","type":"*","group":"Query Parameters","plug":"input","index":16}],"roots":[]},{"name":"/#Directus/Directus Prefab/Components/Files/Directus - Get Folders","nodes":[{"id":"609089a9-e875-2ba1-f061-ab6b39972934","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"797699a6-0562-d23e-49a1-38f1fffe0566","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"debfd0df-eaa2-f48e-ff89-6c86a242b4e3","type":"States","parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"children":[]},{"id":"170cdc6b-e532-c26e-5d30-dfd2098d1ffc","type":"JavaScriptFunction","parameters":{"functionScript":"const state = Inputs.SDKClient ?? null;\r\n\r\nlet res = true;\r\n\r\nif(state == \"Site SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.SiteClient || null;\r\n    if(!client){\r\n        res = false;\r\n        throw new Error(\"Directus Site Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(state == \"User SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.Client || null;\r\n    if(!client){ \r\n        res = false;\r\n        throw new Error(\"Directus User Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(res){\r\n    Outputs.Done();\r\n}"},"ports":[{"name":"in-SDKClient","displayName":"SDKClient","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[]},{"id":"608e7f0d-444e-a51f-fad4-a0afe1cab980","type":"Timer","parameters":{"duration":100},"ports":[],"children":[]},{"id":"9f7cb40d-6fea-1a5f-9c15-5faf3d3ea606","type":"Timer","parameters":{"duration":100},"ports":[],"children":[]},{"id":"7f865936-72e3-ae2a-0e15-44270f7c043e","type":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for Read)","parameters":{},"ports":[],"children":[]},{"id":"3c3f0088-7e01-2599-4fc9-f79172d57149","type":"Javascript2","parameters":{"code":"Script.Inputs = {\r\n    client: \"string\",\r\n    operation: \"string\",\r\n    itemID: \"string\",\r\n    query: \"object\"\r\n}\r\n\r\n\r\nScript.Signals.GetData = async function () {\r\n\r\n    const client_selection = Script.Inputs.client || null;\r\n    const sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\n    const operation = Script.Inputs.operation;\r\n    const itemID = Script.Inputs.itemID;\r\n\r\n    const query = Script.Inputs.query || {};\r\n\r\n    try {\r\n        if (sdk_client && operation) {\r\n            let result;\r\n            switch (operation) {\r\n                case \"single\":\r\n                    if(!itemID) throw new Error(\"Provide valid ID!\");\r\n                    result = await sdk_client.request(Directus.readFolder(itemID, query));\r\n                    break;\r\n                case \"multiple\":\r\n                    result = await sdk_client.request(Directus.readFolders(query));\r\n                    break;\r\n                case \"all\":\r\n                    query.limit = -1;\r\n                    result = await sdk_client.request(Directus.readFolders(query));\r\n                    break;\r\n            }\r\n            \r\n            Script.Outputs.result = result;\r\n            if (result) {\r\n                Script.Outputs.Success();\r\n            } else {\r\n                Script.Outputs.Failure();\r\n            }\r\n        } else {\r\n            console.error(err);\r\n\r\n            Script.Outputs.error = \"Invalid configuration!\";\r\n            Script.Outputs.Failure();\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Script.Outputs.error = err?.errors.map(i => i.message).join(\"\\n\") ?? JSON.stringify(err);\r\n        Script.Outputs.Failure();\r\n    }\r\n}\r\n"},"ports":[{"name":"client","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"operation","plug":"input","type":{"name":"string"},"group":"Inputs","index":6},{"name":"itemID","plug":"input","type":{"name":"string"},"group":"Inputs","index":7},{"name":"query","plug":"input","type":{"name":"object"},"group":"Inputs","index":8},{"name":"GetData","plug":"input","type":{"name":"signal"},"group":"Inputs","index":9},{"name":"Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":10},{"name":"Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":11},{"name":"result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":12},{"name":"error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":13}],"children":[]},{"id":"771771af-9f91-3c5f-c756-35b99e0da636","type":"States","parameters":{"states":"Get Single by ID,Get Multiple by Filter,Get All"},"ports":[],"children":[]}],"connections":[{"sourceId":"609089a9-e875-2ba1-f061-ab6b39972934","sourcePort":"SDK Client to use","targetId":"debfd0df-eaa2-f48e-ff89-6c86a242b4e3","targetPort":"currentState"},{"sourceId":"debfd0df-eaa2-f48e-ff89-6c86a242b4e3","sourcePort":"currentState","targetId":"170cdc6b-e532-c26e-5d30-dfd2098d1ffc","targetPort":"in-SDKClient"},{"sourceId":"609089a9-e875-2ba1-f061-ab6b39972934","sourcePort":"Do","targetId":"9f7cb40d-6fea-1a5f-9c15-5faf3d3ea606","targetPort":"start"},{"sourceId":"9f7cb40d-6fea-1a5f-9c15-5faf3d3ea606","sourcePort":"timerFinished","targetId":"170cdc6b-e532-c26e-5d30-dfd2098d1ffc","targetPort":"run"},{"sourceId":"609089a9-e875-2ba1-f061-ab6b39972934","sourcePort":"Do","targetId":"7f865936-72e3-ae2a-0e15-44270f7c043e","targetPort":"Set"},{"sourceId":"609089a9-e875-2ba1-f061-ab6b39972934","sourcePort":"aggregate","targetId":"7f865936-72e3-ae2a-0e15-44270f7c043e","targetPort":"aggregate"},{"sourceId":"609089a9-e875-2ba1-f061-ab6b39972934","sourcePort":"groupBy","targetId":"7f865936-72e3-ae2a-0e15-44270f7c043e","targetPort":"groupBy"},{"sourceId":"609089a9-e875-2ba1-f061-ab6b39972934","sourcePort":"filter","targetId":"7f865936-72e3-ae2a-0e15-44270f7c043e","targetPort":"filter"},{"sourceId":"609089a9-e875-2ba1-f061-ab6b39972934","sourcePort":"deep","targetId":"7f865936-72e3-ae2a-0e15-44270f7c043e","targetPort":"deep"},{"sourceId":"609089a9-e875-2ba1-f061-ab6b39972934","sourcePort":"alias","targetId":"7f865936-72e3-ae2a-0e15-44270f7c043e","targetPort":"alias"},{"sourceId":"609089a9-e875-2ba1-f061-ab6b39972934","sourcePort":"Folder ID","targetId":"7f865936-72e3-ae2a-0e15-44270f7c043e","targetPort":"Item ID"},{"sourceId":"609089a9-e875-2ba1-f061-ab6b39972934","sourcePort":"limit","targetId":"7f865936-72e3-ae2a-0e15-44270f7c043e","targetPort":"Limit"},{"sourceId":"609089a9-e875-2ba1-f061-ab6b39972934","sourcePort":"Get all fields","targetId":"7f865936-72e3-ae2a-0e15-44270f7c043e","targetPort":"Get all fields"},{"sourceId":"609089a9-e875-2ba1-f061-ab6b39972934","sourcePort":"fields","targetId":"7f865936-72e3-ae2a-0e15-44270f7c043e","targetPort":"Fields"},{"sourceId":"609089a9-e875-2ba1-f061-ab6b39972934","sourcePort":"sort","targetId":"7f865936-72e3-ae2a-0e15-44270f7c043e","targetPort":"Sort"},{"sourceId":"609089a9-e875-2ba1-f061-ab6b39972934","sourcePort":"offset","targetId":"7f865936-72e3-ae2a-0e15-44270f7c043e","targetPort":"Offset"},{"sourceId":"609089a9-e875-2ba1-f061-ab6b39972934","sourcePort":"page","targetId":"7f865936-72e3-ae2a-0e15-44270f7c043e","targetPort":"Page"},{"sourceId":"609089a9-e875-2ba1-f061-ab6b39972934","sourcePort":"search","targetId":"7f865936-72e3-ae2a-0e15-44270f7c043e","targetPort":"Search"},{"sourceId":"7f865936-72e3-ae2a-0e15-44270f7c043e","sourcePort":"query","targetId":"3c3f0088-7e01-2599-4fc9-f79172d57149","targetPort":"query"},{"sourceId":"7f865936-72e3-ae2a-0e15-44270f7c043e","sourcePort":"operation","targetId":"3c3f0088-7e01-2599-4fc9-f79172d57149","targetPort":"operation"},{"sourceId":"7f865936-72e3-ae2a-0e15-44270f7c043e","sourcePort":"itemID","targetId":"3c3f0088-7e01-2599-4fc9-f79172d57149","targetPort":"itemID"},{"sourceId":"608e7f0d-444e-a51f-fad4-a0afe1cab980","sourcePort":"timerFinished","targetId":"3c3f0088-7e01-2599-4fc9-f79172d57149","targetPort":"GetData"},{"sourceId":"3c3f0088-7e01-2599-4fc9-f79172d57149","sourcePort":"Success","targetId":"797699a6-0562-d23e-49a1-38f1fffe0566","targetPort":"Success"},{"sourceId":"3c3f0088-7e01-2599-4fc9-f79172d57149","sourcePort":"Failure","targetId":"797699a6-0562-d23e-49a1-38f1fffe0566","targetPort":"Failure"},{"sourceId":"3c3f0088-7e01-2599-4fc9-f79172d57149","sourcePort":"result","targetId":"797699a6-0562-d23e-49a1-38f1fffe0566","targetPort":"result"},{"sourceId":"3c3f0088-7e01-2599-4fc9-f79172d57149","sourcePort":"error","targetId":"797699a6-0562-d23e-49a1-38f1fffe0566","targetPort":"error"},{"sourceId":"debfd0df-eaa2-f48e-ff89-6c86a242b4e3","sourcePort":"currentState","targetId":"3c3f0088-7e01-2599-4fc9-f79172d57149","targetPort":"client"},{"sourceId":"609089a9-e875-2ba1-f061-ab6b39972934","sourcePort":"Folder Get type","targetId":"771771af-9f91-3c5f-c756-35b99e0da636","targetPort":"currentState"},{"sourceId":"771771af-9f91-3c5f-c756-35b99e0da636","sourcePort":"currentState","targetId":"7f865936-72e3-ae2a-0e15-44270f7c043e","targetPort":"Get Type"},{"sourceId":"170cdc6b-e532-c26e-5d30-dfd2098d1ffc","sourcePort":"out-Done","targetId":"608e7f0d-444e-a51f-fad4-a0afe1cab980","targetPort":"start"}],"ports":[{"name":"Success","type":"signal","plug":"output","index":0},{"name":"Do","type":{"name":"signal","allowConnectionsOnly":true},"plug":"input","index":0},{"name":"Failure","type":"signal","plug":"output","index":1},{"name":"SDK Client to use","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"default":"User SDK Client","group":"Config","plug":"input","index":1},{"name":"result","type":"*","plug":"output","index":2},{"name":"error","type":"*","plug":"output","index":3},{"name":"Folder Get type","type":{"name":"enum","enums":["Get Single by ID","Get Multiple by Filter","Get All"]},"default":"Get Single by ID","group":"What to Get","plug":"input","index":3},{"name":"Folder ID","type":"*","group":"What to Get","plug":"input","index":4},{"name":"limit","type":{"name":"number"},"default":50,"group":"Query Parameters","plug":"input","index":5},{"name":"Get all fields","type":{"name":"boolean"},"default":true,"group":"Query Parameters","plug":"input","index":6},{"name":"fields","type":{"name":"string"},"default":"","group":"Query Parameters","plug":"input","index":7},{"name":"sort","type":{"name":"string"},"default":"","group":"Query Parameters","plug":"input","index":8},{"name":"offset","type":{"name":"number"},"default":0,"group":"Query Parameters","plug":"input","index":9},{"name":"page","type":{"name":"number"},"default":0,"group":"Query Parameters","plug":"input","index":10},{"name":"search","type":{"name":"string"},"default":"","group":"Query Parameters","plug":"input","index":11},{"name":"aggregate","type":"*","group":"Query Parameters","plug":"input","index":12},{"name":"groupBy","type":"*","group":"Query Parameters","plug":"input","index":13},{"name":"filter","type":"*","group":"Query Parameters","plug":"input","index":14},{"name":"deep","type":"*","group":"Query Parameters","plug":"input","index":15},{"name":"alias","type":"*","group":"Query Parameters","plug":"input","index":16}],"roots":[]},{"name":"/#Directus/Directus Prefab/Components/Files/Directus - Import File","nodes":[{"id":"2bb09a52-fcee-5f5b-ec32-d0d72b15967d","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"9006fbf2-68d2-29d4-61bf-93b1484c4dfd","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"4c4a79a8-ef55-32da-c3ef-afd7b711f278","type":"JavaScriptFunction","parameters":{"functionScript":"const file_url = Inputs.file_url;\r\nconst file_object = Inputs.file_object || {};\r\n\r\nif (!file_url) return;\r\n\r\nconst client_selection = Inputs.client || null;\r\nconst sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\nconst main = async function () {\r\n    try {\r\n        const result = await sdk_client.request(Directus.importFile(file_url, file_object));\r\n\r\n        Outputs.result = result;\r\n        Outputs.Success();\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n        Outputs.error = err?.errors.map(i => i.message).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nmain();\r\n"},"ports":[{"name":"in-file_url","displayName":"file_url","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-file_object","displayName":"file_object","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-client","displayName":"client","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":8},{"name":"out-result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":9},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":10}],"children":[]},{"id":"8e058105-13f4-aaa8-909e-1656cc2bb15c","type":"States","parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"children":[]},{"id":"067376fc-2f76-4658-78d8-82f6c96aec2b","type":"JavaScriptFunction","parameters":{"functionScript":"const state = Inputs.SDKClient ?? null;\r\n\r\nlet res = true;\r\n\r\nif(state == \"Site SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.SiteClient || null;\r\n    if(!client){\r\n        res = false;\r\n        throw new Error(\"Directus Site Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(state == \"User SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.Client || null;\r\n    if(!client){ \r\n        res = false;\r\n        throw new Error(\"Directus User Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(res){\r\n    Outputs.Done();\r\n}"},"ports":[{"name":"in-SDKClient","displayName":"SDKClient","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[]},{"id":"d8b7a169-132a-248e-ae13-a59ec6333c33","type":"Timer","parameters":{"duration":100},"ports":[],"children":[]},{"id":"c7cdbca2-72d4-c677-04bd-a742391b2f94","type":"Timer","parameters":{"duration":100},"ports":[],"children":[]}],"connections":[{"sourceId":"4c4a79a8-ef55-32da-c3ef-afd7b711f278","sourcePort":"out-Failure","targetId":"9006fbf2-68d2-29d4-61bf-93b1484c4dfd","targetPort":"Failure"},{"sourceId":"4c4a79a8-ef55-32da-c3ef-afd7b711f278","sourcePort":"out-error","targetId":"9006fbf2-68d2-29d4-61bf-93b1484c4dfd","targetPort":"error"},{"sourceId":"4c4a79a8-ef55-32da-c3ef-afd7b711f278","sourcePort":"out-Success","targetId":"9006fbf2-68d2-29d4-61bf-93b1484c4dfd","targetPort":"Success"},{"sourceId":"2bb09a52-fcee-5f5b-ec32-d0d72b15967d","sourcePort":"file object","targetId":"4c4a79a8-ef55-32da-c3ef-afd7b711f278","targetPort":"in-file_object"},{"sourceId":"8e058105-13f4-aaa8-909e-1656cc2bb15c","sourcePort":"currentState","targetId":"067376fc-2f76-4658-78d8-82f6c96aec2b","targetPort":"in-SDKClient"},{"sourceId":"c7cdbca2-72d4-c677-04bd-a742391b2f94","sourcePort":"timerFinished","targetId":"067376fc-2f76-4658-78d8-82f6c96aec2b","targetPort":"run"},{"sourceId":"067376fc-2f76-4658-78d8-82f6c96aec2b","sourcePort":"out-Done","targetId":"d8b7a169-132a-248e-ae13-a59ec6333c33","targetPort":"start"},{"sourceId":"2bb09a52-fcee-5f5b-ec32-d0d72b15967d","sourcePort":"Do","targetId":"c7cdbca2-72d4-c677-04bd-a742391b2f94","targetPort":"start"},{"sourceId":"2bb09a52-fcee-5f5b-ec32-d0d72b15967d","sourcePort":"SDK Client to use","targetId":"8e058105-13f4-aaa8-909e-1656cc2bb15c","targetPort":"currentState"},{"sourceId":"d8b7a169-132a-248e-ae13-a59ec6333c33","sourcePort":"timerFinished","targetId":"4c4a79a8-ef55-32da-c3ef-afd7b711f278","targetPort":"run"},{"sourceId":"8e058105-13f4-aaa8-909e-1656cc2bb15c","sourcePort":"currentState","targetId":"4c4a79a8-ef55-32da-c3ef-afd7b711f278","targetPort":"in-client"},{"sourceId":"4c4a79a8-ef55-32da-c3ef-afd7b711f278","sourcePort":"out-result","targetId":"9006fbf2-68d2-29d4-61bf-93b1484c4dfd","targetPort":"result"},{"sourceId":"2bb09a52-fcee-5f5b-ec32-d0d72b15967d","sourcePort":"file url","targetId":"4c4a79a8-ef55-32da-c3ef-afd7b711f278","targetPort":"in-file_url"}],"ports":[{"name":"Success","type":"signal","plug":"output","index":0},{"name":"Do","type":{"name":"signal","allowConnectionsOnly":true},"plug":"input","index":0},{"name":"Failure","type":"signal","plug":"output","index":1},{"name":"SDK Client to use","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"default":"User SDK Client","group":"States","plug":"input","index":1},{"name":"error","type":"*","plug":"output","index":2},{"name":"file url","type":"*","group":"Data","plug":"input","index":2},{"name":"result","type":"*","plug":"output","index":3},{"name":"file object","type":"*","group":"Data","plug":"input","index":3}],"roots":[]},{"name":"/#Directus/Directus Prefab/Components/Files/Directus - Upload File","nodes":[{"id":"d97214cb-b1a9-c731-ba35-e8dcd2c74e3a","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"34a1a8cc-0585-b445-e915-376f2715f857","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"f5c25aa6-a4b8-e707-414a-9457c8fec1b7","type":"JavaScriptFunction","parameters":{"functionScript":"const raw_file = Inputs.raw_file;\r\nconst file_object = Inputs.file_object || {};\r\n\r\nif (!raw_file) return;\r\n\r\nconst client_selection = Inputs.client || null;\r\nconst sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\nconst main = async function () {\r\n    try {\r\n        const formData = new FormData();\r\n\r\n        if (Object.keys(file_object).length > 0) {\r\n            for (const key in file_object) {\r\n                formData.append(key, file_object[key]);\r\n            }\r\n        }\r\n        formData.append('file', raw_file);\r\n\r\n        const result = await sdk_client.request(Directus.uploadFiles(formData));\r\n\r\n        Outputs.result = result;\r\n        Outputs.Success();\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n        Outputs.error = err?.errors.map(i => i.message).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nmain();\r\n"},"ports":[{"name":"in-raw_file","displayName":"raw_file","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-file_object","displayName":"file_object","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-client","displayName":"client","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":8},{"name":"out-result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":9},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":10}],"children":[]},{"id":"efb864b1-e889-1c02-ed0f-1c30ffd6426b","type":"States","parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"children":[]},{"id":"68225952-4b88-9d5e-fc53-67de664f8fca","type":"JavaScriptFunction","parameters":{"functionScript":"const state = Inputs.SDKClient ?? null;\r\n\r\nlet res = true;\r\n\r\nif(state == \"Site SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.SiteClient || null;\r\n    if(!client){\r\n        res = false;\r\n        throw new Error(\"Directus Site Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(state == \"User SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.Client || null;\r\n    if(!client){ \r\n        res = false;\r\n        throw new Error(\"Directus User Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(res){\r\n    Outputs.Done();\r\n}"},"ports":[{"name":"in-SDKClient","displayName":"SDKClient","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[]},{"id":"9f6df6bd-7b87-da40-e8a8-c35a28b6aac8","type":"Timer","parameters":{"duration":100},"ports":[],"children":[]},{"id":"5f5ef257-9c73-eda0-a41e-89a606d7c105","type":"Timer","parameters":{"duration":100},"ports":[],"children":[]}],"connections":[{"sourceId":"f5c25aa6-a4b8-e707-414a-9457c8fec1b7","sourcePort":"out-Failure","targetId":"34a1a8cc-0585-b445-e915-376f2715f857","targetPort":"Failure"},{"sourceId":"f5c25aa6-a4b8-e707-414a-9457c8fec1b7","sourcePort":"out-error","targetId":"34a1a8cc-0585-b445-e915-376f2715f857","targetPort":"error"},{"sourceId":"f5c25aa6-a4b8-e707-414a-9457c8fec1b7","sourcePort":"out-Success","targetId":"34a1a8cc-0585-b445-e915-376f2715f857","targetPort":"Success"},{"sourceId":"d97214cb-b1a9-c731-ba35-e8dcd2c74e3a","sourcePort":"file","targetId":"f5c25aa6-a4b8-e707-414a-9457c8fec1b7","targetPort":"in-raw_file"},{"sourceId":"d97214cb-b1a9-c731-ba35-e8dcd2c74e3a","sourcePort":"file object","targetId":"f5c25aa6-a4b8-e707-414a-9457c8fec1b7","targetPort":"in-file_object"},{"sourceId":"efb864b1-e889-1c02-ed0f-1c30ffd6426b","sourcePort":"currentState","targetId":"68225952-4b88-9d5e-fc53-67de664f8fca","targetPort":"in-SDKClient"},{"sourceId":"5f5ef257-9c73-eda0-a41e-89a606d7c105","sourcePort":"timerFinished","targetId":"68225952-4b88-9d5e-fc53-67de664f8fca","targetPort":"run"},{"sourceId":"68225952-4b88-9d5e-fc53-67de664f8fca","sourcePort":"out-Done","targetId":"9f6df6bd-7b87-da40-e8a8-c35a28b6aac8","targetPort":"start"},{"sourceId":"d97214cb-b1a9-c731-ba35-e8dcd2c74e3a","sourcePort":"Do","targetId":"5f5ef257-9c73-eda0-a41e-89a606d7c105","targetPort":"start"},{"sourceId":"d97214cb-b1a9-c731-ba35-e8dcd2c74e3a","sourcePort":"SDK Client to use","targetId":"efb864b1-e889-1c02-ed0f-1c30ffd6426b","targetPort":"currentState"},{"sourceId":"9f6df6bd-7b87-da40-e8a8-c35a28b6aac8","sourcePort":"timerFinished","targetId":"f5c25aa6-a4b8-e707-414a-9457c8fec1b7","targetPort":"run"},{"sourceId":"efb864b1-e889-1c02-ed0f-1c30ffd6426b","sourcePort":"currentState","targetId":"f5c25aa6-a4b8-e707-414a-9457c8fec1b7","targetPort":"in-client"},{"sourceId":"f5c25aa6-a4b8-e707-414a-9457c8fec1b7","sourcePort":"out-result","targetId":"34a1a8cc-0585-b445-e915-376f2715f857","targetPort":"result"}],"ports":[{"name":"Success","type":"signal","plug":"output","index":0},{"name":"Do","type":{"name":"signal","allowConnectionsOnly":true},"plug":"input","index":0},{"name":"Failure","type":"signal","plug":"output","index":1},{"name":"SDK Client to use","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"default":"User SDK Client","group":"States","plug":"input","index":1},{"name":"error","type":"*","plug":"output","index":2},{"name":"file","type":"*","group":"Data","plug":"input","index":2},{"name":"result","type":"*","plug":"output","index":3},{"name":"file object","type":"*","group":"Data","plug":"input","index":3}],"roots":[]},{"name":"/#Directus/Directus Prefab/Components/Flows/Directus - List Flows","nodes":[{"id":"cab154f5-f7aa-00aa-2e19-fcc498476141","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"8653ad13-f94e-8354-8159-a0dd40c08b06","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"03143d1d-c2e8-2d2a-9184-f2f8bb4d7f25","type":"States","parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"children":[]},{"id":"b491d597-a65f-4d0a-675e-1963e63d4815","type":"JavaScriptFunction","parameters":{"functionScript":"const state = Inputs.SDKClient ?? null;\r\n\r\nlet res = true;\r\n\r\nif(state == \"Site SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.SiteClient || null;\r\n    if(!client){\r\n        res = false;\r\n        throw new Error(\"Directus Site Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(state == \"User SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.Client || null;\r\n    if(!client){ \r\n        res = false;\r\n        throw new Error(\"Directus User Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(res){\r\n    Outputs.Done();\r\n}"},"ports":[{"name":"in-SDKClient","displayName":"SDKClient","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[]},{"id":"bf4e7c61-5c17-fdde-5d17-89f404c52a4e","type":"Timer","parameters":{"duration":100},"ports":[],"children":[]},{"id":"2bdc9289-e387-122c-659e-2197b66775b5","type":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for Read)","parameters":{},"ports":[],"children":[]},{"id":"62031ff9-d118-de90-3d75-e894326a1cfe","type":"Javascript2","parameters":{"code":"Script.Inputs = {\r\n    client: \"string\",\r\n    operation: \"string\",\r\n    flowID: \"string\",\r\n}\r\n\r\n\r\nScript.Signals.GetData = async function () {\r\n\r\n    const client_selection = Script.Inputs.client || null;\r\n    const sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\n    const operation = Script.Inputs.operation;\r\n    const flowID = Script.Inputs.flowID;\r\n    \r\n    const query = Script.Inputs.query || {};\r\n\r\n    try {\r\n        if (sdk_client && operation) {\r\n            let result;\r\n            switch (operation) {\r\n                case \"single\":\r\n                    result = await sdk_client.request(Directus.readFlow( flowID, query));\r\n                    break;\r\n                case \"multiple\":\r\n                    result = await sdk_client.request(Directus.readFlows( query));\r\n                    break;\r\n                case \"all\":\r\n                    query.limit = -1;\r\n                    result = await sdk_client.request(Directus.readFlows( query));\r\n                    break;\r\n            }\r\n            \r\n            Script.Outputs.result = result;\r\n            if (result) {\r\n                Script.Outputs.Success();\r\n            } else {\r\n                Script.Outputs.Failure();\r\n            }\r\n        } else {\r\n            console.error(err);\r\n\r\n            Script.Outputs.error = \"Invalid configuration!\";\r\n            Script.Outputs.Failure();\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Script.Outputs.error = err?.errors.map(i => i.message).join(\"\\n\") ?? JSON.stringify(err);\r\n        Script.Outputs.Failure();\r\n    }\r\n}\r\n"},"ports":[{"name":"client","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"operation","plug":"input","type":{"name":"string"},"group":"Inputs","index":6},{"name":"flowID","plug":"input","type":{"name":"string"},"group":"Inputs","index":7},{"name":"GetData","plug":"input","type":{"name":"signal"},"group":"Inputs","index":8},{"name":"query","displayName":"query","plug":"input","type":"*","group":"Inputs","index":9},{"name":"Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":10},{"name":"Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":11},{"name":"result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":12},{"name":"error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":13}],"children":[]},{"id":"b623091f-e6b5-428a-f7df-c1325f2f3a4b","type":"Timer","parameters":{"duration":100},"ports":[],"children":[]},{"id":"34fdb742-9f24-ef97-55fa-d922de267ef1","type":"States","parameters":{"states":"Get Single by ID,Get Multiple by Filter,Get All","useTransitions":false},"ports":[],"children":[]},{"id":"36f9614a-c3f2-028f-e1fa-f3e16f64ccdc","type":"String","parameters":{},"ports":[],"children":[]}],"connections":[{"sourceId":"cab154f5-f7aa-00aa-2e19-fcc498476141","sourcePort":"SDK Client to use","targetId":"03143d1d-c2e8-2d2a-9184-f2f8bb4d7f25","targetPort":"currentState"},{"sourceId":"03143d1d-c2e8-2d2a-9184-f2f8bb4d7f25","sourcePort":"currentState","targetId":"b491d597-a65f-4d0a-675e-1963e63d4815","targetPort":"in-SDKClient"},{"sourceId":"cab154f5-f7aa-00aa-2e19-fcc498476141","sourcePort":"Do","targetId":"bf4e7c61-5c17-fdde-5d17-89f404c52a4e","targetPort":"start"},{"sourceId":"bf4e7c61-5c17-fdde-5d17-89f404c52a4e","sourcePort":"timerFinished","targetId":"b491d597-a65f-4d0a-675e-1963e63d4815","targetPort":"run"},{"sourceId":"cab154f5-f7aa-00aa-2e19-fcc498476141","sourcePort":"search","targetId":"2bdc9289-e387-122c-659e-2197b66775b5","targetPort":"Search"},{"sourceId":"cab154f5-f7aa-00aa-2e19-fcc498476141","sourcePort":"filter","targetId":"2bdc9289-e387-122c-659e-2197b66775b5","targetPort":"filter"},{"sourceId":"cab154f5-f7aa-00aa-2e19-fcc498476141","sourcePort":"aggregate","targetId":"2bdc9289-e387-122c-659e-2197b66775b5","targetPort":"aggregate"},{"sourceId":"cab154f5-f7aa-00aa-2e19-fcc498476141","sourcePort":"alias","targetId":"2bdc9289-e387-122c-659e-2197b66775b5","targetPort":"alias"},{"sourceId":"cab154f5-f7aa-00aa-2e19-fcc498476141","sourcePort":"deep","targetId":"2bdc9289-e387-122c-659e-2197b66775b5","targetPort":"deep"},{"sourceId":"cab154f5-f7aa-00aa-2e19-fcc498476141","sourcePort":"groupBy","targetId":"2bdc9289-e387-122c-659e-2197b66775b5","targetPort":"groupBy"},{"sourceId":"cab154f5-f7aa-00aa-2e19-fcc498476141","sourcePort":"page","targetId":"2bdc9289-e387-122c-659e-2197b66775b5","targetPort":"Page"},{"sourceId":"cab154f5-f7aa-00aa-2e19-fcc498476141","sourcePort":"offset","targetId":"2bdc9289-e387-122c-659e-2197b66775b5","targetPort":"Offset"},{"sourceId":"cab154f5-f7aa-00aa-2e19-fcc498476141","sourcePort":"sort","targetId":"2bdc9289-e387-122c-659e-2197b66775b5","targetPort":"Sort"},{"sourceId":"cab154f5-f7aa-00aa-2e19-fcc498476141","sourcePort":"fields","targetId":"2bdc9289-e387-122c-659e-2197b66775b5","targetPort":"Fields"},{"sourceId":"cab154f5-f7aa-00aa-2e19-fcc498476141","sourcePort":"Get all fields","targetId":"2bdc9289-e387-122c-659e-2197b66775b5","targetPort":"Get all fields"},{"sourceId":"cab154f5-f7aa-00aa-2e19-fcc498476141","sourcePort":"limit","targetId":"2bdc9289-e387-122c-659e-2197b66775b5","targetPort":"Limit"},{"sourceId":"2bdc9289-e387-122c-659e-2197b66775b5","sourcePort":"query","targetId":"62031ff9-d118-de90-3d75-e894326a1cfe","targetPort":"query"},{"sourceId":"2bdc9289-e387-122c-659e-2197b66775b5","sourcePort":"operation","targetId":"62031ff9-d118-de90-3d75-e894326a1cfe","targetPort":"operation"},{"sourceId":"03143d1d-c2e8-2d2a-9184-f2f8bb4d7f25","sourcePort":"currentState","targetId":"62031ff9-d118-de90-3d75-e894326a1cfe","targetPort":"client"},{"sourceId":"62031ff9-d118-de90-3d75-e894326a1cfe","sourcePort":"result","targetId":"8653ad13-f94e-8354-8159-a0dd40c08b06","targetPort":"result"},{"sourceId":"62031ff9-d118-de90-3d75-e894326a1cfe","sourcePort":"error","targetId":"8653ad13-f94e-8354-8159-a0dd40c08b06","targetPort":"error"},{"sourceId":"62031ff9-d118-de90-3d75-e894326a1cfe","sourcePort":"Success","targetId":"8653ad13-f94e-8354-8159-a0dd40c08b06","targetPort":"Success"},{"sourceId":"62031ff9-d118-de90-3d75-e894326a1cfe","sourcePort":"Failure","targetId":"8653ad13-f94e-8354-8159-a0dd40c08b06","targetPort":"Failure"},{"sourceId":"b623091f-e6b5-428a-f7df-c1325f2f3a4b","sourcePort":"timerFinished","targetId":"62031ff9-d118-de90-3d75-e894326a1cfe","targetPort":"GetData"},{"sourceId":"cab154f5-f7aa-00aa-2e19-fcc498476141","sourcePort":"Do","targetId":"2bdc9289-e387-122c-659e-2197b66775b5","targetPort":"Set"},{"sourceId":"2bdc9289-e387-122c-659e-2197b66775b5","sourcePort":"itemID","targetId":"62031ff9-d118-de90-3d75-e894326a1cfe","targetPort":"flowID"},{"sourceId":"b491d597-a65f-4d0a-675e-1963e63d4815","sourcePort":"out-Done","targetId":"b623091f-e6b5-428a-f7df-c1325f2f3a4b","targetPort":"start"},{"sourceId":"cab154f5-f7aa-00aa-2e19-fcc498476141","sourcePort":"Flow Get Type","targetId":"34fdb742-9f24-ef97-55fa-d922de267ef1","targetPort":"currentState"},{"sourceId":"34fdb742-9f24-ef97-55fa-d922de267ef1","sourcePort":"currentState","targetId":"2bdc9289-e387-122c-659e-2197b66775b5","targetPort":"Get Type"},{"sourceId":"cab154f5-f7aa-00aa-2e19-fcc498476141","sourcePort":"flow ID","targetId":"36f9614a-c3f2-028f-e1fa-f3e16f64ccdc","targetPort":"value"},{"sourceId":"36f9614a-c3f2-028f-e1fa-f3e16f64ccdc","sourcePort":"savedValue","targetId":"2bdc9289-e387-122c-659e-2197b66775b5","targetPort":"Item ID"}],"ports":[{"name":"Success","type":"signal","plug":"output","index":0},{"name":"Do","type":{"name":"signal","allowConnectionsOnly":true},"plug":"input","index":0},{"name":"Failure","type":"signal","plug":"output","index":1},{"name":"SDK Client to use","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"default":"User SDK Client","group":"Config","plug":"input","index":1},{"name":"result","type":"*","plug":"output","index":2},{"name":"Flow Get Type","type":{"name":"enum","enums":["Get Single by ID","Get Multiple by Filter","Get All"]},"default":"Get Single by ID","group":"What to Get","plug":"input","index":2},{"name":"error","type":"*","plug":"output","index":3},{"name":"flow ID","type":{"name":"string"},"default":"","group":"What to Get","plug":"input","index":3},{"name":"limit","type":{"name":"number"},"default":50,"group":"Query Parameters","plug":"input","index":4},{"name":"Get all fields","type":{"name":"boolean"},"default":true,"group":"Query Parameters","plug":"input","index":5},{"name":"fields","type":{"name":"string"},"default":"","group":"Query Parameters","plug":"input","index":6},{"name":"sort","type":{"name":"string"},"default":"","group":"Query Parameters","plug":"input","index":7},{"name":"offset","type":{"name":"number"},"default":0,"group":"Query Parameters","plug":"input","index":8},{"name":"page","type":{"name":"number"},"default":0,"group":"Query Parameters","plug":"input","index":9},{"name":"search","type":{"name":"string"},"default":"","group":"Query Parameters","plug":"input","index":10},{"name":"aggregate","type":"*","group":"Query Parameters","plug":"input","index":11},{"name":"groupBy","type":"*","group":"Query Parameters","plug":"input","index":12},{"name":"filter","type":"*","group":"Query Parameters","plug":"input","index":13},{"name":"deep","type":"*","group":"Query Parameters","plug":"input","index":14},{"name":"alias","type":"*","group":"Query Parameters","plug":"input","index":15}],"roots":[]},{"name":"/#Directus/Directus Prefab/Components/Flows/Directus - Run Flow","nodes":[{"id":"eb83831b-ced6-c902-e4df-9a7d439ea95f","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"cc8b60fc-6ad2-c1c7-3fae-b6fa253b0ed1","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"e9ee80c0-08f3-e914-dbcd-7455daa0a19d","type":"States","parameters":{"states":"User SDK Client,Site SDK Client","useTransitions":false},"ports":[],"children":[]},{"id":"6939a870-57ef-7326-0c78-96334afb675c","type":"JavaScriptFunction","parameters":{"functionScript":"const state = Inputs.SDKClient ?? null;\r\n\r\nlet res = true;\r\n\r\nif(state == \"Site SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.SiteClient || null;\r\n    if(!client){\r\n        res = false;\r\n        throw new Error(\"Directus Site Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(state == \"User SDK Client\"){\r\n    const client = Noodl.Objects.DirectusSDK.Client || null;\r\n    if(!client){ \r\n        res = false;\r\n        throw new Error(\"Directus User Client has not yet been set up!\");\r\n    }\r\n}\r\n\r\nif(res){\r\n    Outputs.Done();\r\n}"},"ports":[{"name":"in-SDKClient","displayName":"SDKClient","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[]},{"id":"59e2c0fc-3ca2-2bc9-0fc5-34e4e4fef6f4","type":"Timer","parameters":{"duration":100},"ports":[],"children":[]},{"id":"cef63688-0b1d-3a68-f679-ca09396db2cf","type":"Javascript2","parameters":{"code":"Script.Inputs = {\r\n    client: \"string\",\r\n    flowID: \"string\",\r\n    trigger_type: \"string\"\r\n}\r\n\r\n\r\nScript.Signals.RunFlow = async function () {\r\n\r\n    const client_selection = Script.Inputs.client || null;\r\n    const sdk_client = (client_selection == \"User SDK Client\") ? Noodl.Objects.DirectusSDK.Client : Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\n    const trigger_type = Script.Inputs.trigger_type ?? null;\r\n    const flowID = Script.Inputs.flowID ?? null;\r\n\r\n    const query_params = Script.Inputs.query_params ?? {};\r\n    const payload_data = Script.Inputs.payload_data ?? {};\r\n\r\n    try {\r\n        if (sdk_client && trigger_type && flowID) {\r\n            let result;\r\n\r\n            if (trigger_type == \"GET\") {\r\n                result = await sdk_client.request(Directus.triggerFlow('GET', flowID, query_params ));\r\n            }\r\n            \r\n            if (trigger_type == \"POST\") {\r\n                result = await sdk_client.request(Directus.triggerFlow('POST', flowID, payload_data));\r\n            }\r\n\r\n            Script.Outputs.result = result;\r\n            if (result) {\r\n                Script.Outputs.Success();\r\n            } else {\r\n                Script.Outputs.Failure();\r\n            }\r\n        } else {\r\n            console.error(err);\r\n\r\n            Script.Outputs.error = \"Invalid configuration!\";\r\n            Script.Outputs.Failure();\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Script.Outputs.error = err?.errors.map(i => i.message).join(\"\\n\") ?? JSON.stringify(err);\r\n        Script.Outputs.Failure();\r\n    }\r\n}\r\n"},"ports":[{"name":"client","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"flowID","plug":"input","type":{"name":"string"},"group":"Inputs","index":6},{"name":"trigger_type","plug":"input","type":{"name":"string"},"group":"Inputs","index":7},{"name":"RunFlow","plug":"input","type":{"name":"signal"},"group":"Inputs","index":8},{"name":"query_params","displayName":"query_params","plug":"input","type":"*","group":"Inputs","index":9},{"name":"payload_data","displayName":"payload_data","plug":"input","type":"*","group":"Inputs","index":10},{"name":"Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":11},{"name":"Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":12},{"name":"result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":13},{"name":"error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":14}],"children":[]},{"id":"f648059a-85b6-edb9-9ae1-e3fe90ce412d","type":"Timer","parameters":{"duration":100},"ports":[],"children":[]},{"id":"da585b01-629c-2fbf-8798-70dcffdd2324","type":"States","parameters":{"states":"GET,POST","useTransitions":false,"currentState":"POST"},"ports":[],"children":[]}],"connections":[{"sourceId":"eb83831b-ced6-c902-e4df-9a7d439ea95f","sourcePort":"SDK Client to use","targetId":"e9ee80c0-08f3-e914-dbcd-7455daa0a19d","targetPort":"currentState"},{"sourceId":"e9ee80c0-08f3-e914-dbcd-7455daa0a19d","sourcePort":"currentState","targetId":"6939a870-57ef-7326-0c78-96334afb675c","targetPort":"in-SDKClient"},{"sourceId":"eb83831b-ced6-c902-e4df-9a7d439ea95f","sourcePort":"Do","targetId":"59e2c0fc-3ca2-2bc9-0fc5-34e4e4fef6f4","targetPort":"start"},{"sourceId":"59e2c0fc-3ca2-2bc9-0fc5-34e4e4fef6f4","sourcePort":"timerFinished","targetId":"6939a870-57ef-7326-0c78-96334afb675c","targetPort":"run"},{"sourceId":"e9ee80c0-08f3-e914-dbcd-7455daa0a19d","sourcePort":"currentState","targetId":"cef63688-0b1d-3a68-f679-ca09396db2cf","targetPort":"client"},{"sourceId":"cef63688-0b1d-3a68-f679-ca09396db2cf","sourcePort":"result","targetId":"cc8b60fc-6ad2-c1c7-3fae-b6fa253b0ed1","targetPort":"result"},{"sourceId":"cef63688-0b1d-3a68-f679-ca09396db2cf","sourcePort":"error","targetId":"cc8b60fc-6ad2-c1c7-3fae-b6fa253b0ed1","targetPort":"error"},{"sourceId":"cef63688-0b1d-3a68-f679-ca09396db2cf","sourcePort":"Success","targetId":"cc8b60fc-6ad2-c1c7-3fae-b6fa253b0ed1","targetPort":"Success"},{"sourceId":"cef63688-0b1d-3a68-f679-ca09396db2cf","sourcePort":"Failure","targetId":"cc8b60fc-6ad2-c1c7-3fae-b6fa253b0ed1","targetPort":"Failure"},{"sourceId":"6939a870-57ef-7326-0c78-96334afb675c","sourcePort":"out-Done","targetId":"f648059a-85b6-edb9-9ae1-e3fe90ce412d","targetPort":"start"},{"sourceId":"eb83831b-ced6-c902-e4df-9a7d439ea95f","sourcePort":"Trigger type","targetId":"da585b01-629c-2fbf-8798-70dcffdd2324","targetPort":"currentState"},{"sourceId":"eb83831b-ced6-c902-e4df-9a7d439ea95f","sourcePort":"flow ID","targetId":"cef63688-0b1d-3a68-f679-ca09396db2cf","targetPort":"flowID"},{"sourceId":"f648059a-85b6-edb9-9ae1-e3fe90ce412d","sourcePort":"timerFinished","targetId":"cef63688-0b1d-3a68-f679-ca09396db2cf","targetPort":"RunFlow"},{"sourceId":"da585b01-629c-2fbf-8798-70dcffdd2324","sourcePort":"currentState","targetId":"cef63688-0b1d-3a68-f679-ca09396db2cf","targetPort":"trigger_type"},{"sourceId":"eb83831b-ced6-c902-e4df-9a7d439ea95f","sourcePort":"payload_data","targetId":"cef63688-0b1d-3a68-f679-ca09396db2cf","targetPort":"payload_data"},{"sourceId":"eb83831b-ced6-c902-e4df-9a7d439ea95f","sourcePort":"query_params","targetId":"cef63688-0b1d-3a68-f679-ca09396db2cf","targetPort":"query_params"}],"ports":[{"name":"Success","type":"signal","plug":"output","index":0},{"name":"Do","type":{"name":"signal","allowConnectionsOnly":true},"plug":"input","index":0},{"name":"Failure","type":"signal","plug":"output","index":1},{"name":"SDK Client to use","type":{"name":"enum","enums":["User SDK Client","Site SDK Client"]},"default":"User SDK Client","group":"Config","plug":"input","index":1},{"name":"result","type":"*","plug":"output","index":2},{"name":"Trigger type","type":{"name":"enum","enums":["GET","POST"]},"default":"POST","group":"Config","plug":"input","index":2},{"name":"error","type":"*","plug":"output","index":3},{"name":"flow ID","type":{"name":"string"},"group":"Config","plug":"input","index":3},{"name":"payload_data","type":"*","group":"POST trigger","plug":"input","index":4},{"name":"query_params","type":"*","group":"GET trigger","plug":"input","index":6}],"roots":[]},{"name":"/#Directus/Directus Prefab/Components/Other/Directus - Ping Server","nodes":[{"id":"8987a1f4-9f2a-8ee0-1cb3-6cb9e8b5c928","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"a90fcb22-78ae-7ae3-18e9-844a8dd88cc9","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"363e930d-4bd6-53ac-9bbc-15e4aef32079","type":"JavaScriptFunction","parameters":{"functionScript":"const client = Noodl.Objects.DirectusSDK.Client ?? Noodl.Objects.DirectusSDK.SiteClient;\r\n\r\nconst main = async function () {\r\n    try {\r\n        if (client) {\r\n            const result = await client.request(Directus.serverPing());\r\n\r\n            if (result == \"pong\") {\r\n                Outputs.Success();\r\n            } else {\r\n                Outputs.error = \"Unable to reach server!\"\r\n                Outputs.Failure();\r\n            }\r\n        } else {\r\n            throw new Error(\"Invalid Intitialization!\");\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Outputs.error = err?.errors.map(i => i.message).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nmain();\r\n"},"ports":[{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":4},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":6}],"children":[]}],"connections":[{"sourceId":"8987a1f4-9f2a-8ee0-1cb3-6cb9e8b5c928","sourcePort":"Do","targetId":"363e930d-4bd6-53ac-9bbc-15e4aef32079","targetPort":"run"},{"sourceId":"363e930d-4bd6-53ac-9bbc-15e4aef32079","sourcePort":"out-Success","targetId":"a90fcb22-78ae-7ae3-18e9-844a8dd88cc9","targetPort":"Success"},{"sourceId":"363e930d-4bd6-53ac-9bbc-15e4aef32079","sourcePort":"out-Failure","targetId":"a90fcb22-78ae-7ae3-18e9-844a8dd88cc9","targetPort":"Failure"},{"sourceId":"363e930d-4bd6-53ac-9bbc-15e4aef32079","sourcePort":"out-error","targetId":"a90fcb22-78ae-7ae3-18e9-844a8dd88cc9","targetPort":"error"}],"ports":[{"name":"Success","type":"signal","plug":"output","index":0},{"name":"Do","type":{"name":"signal","allowConnectionsOnly":true},"group":"Actions","plug":"input","index":0},{"name":"Failure","type":"signal","plug":"output","index":1},{"name":"error","type":"*","plug":"output","index":2}],"roots":[]},{"name":"/#Directus/Directus Prefab/Components/Other/Directus - Server info","nodes":[{"id":"0d5626d3-0db6-98ee-d28d-50a1634c11c6","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"142eda76-fa70-4ae8-b36c-1e4f5765b805","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"7c59f4e0-7322-f3d4-15f1-5630e6accc4a","type":"JavaScriptFunction","parameters":{"functionScript":"const client = Inputs.client || null;\r\n\r\nconst main = async function () {\r\n    try {\r\n        if (client) {\r\n            const result = await client.request(Directus.serverInfo());\r\n\r\n            if (result) {\r\n                Outputs.Success();\r\n            } else {\r\n                Outputs.error = \"Unable to reach server!\"\r\n                Outputs.Failure();\r\n            }\r\n        } else {\r\n            throw new Error(\"Invalid Intitialization!\");\r\n        }\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n\r\n        Outputs.error = err?.errors.map(i => i.message).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nmain();\r\n"},"ports":[{"name":"in-client","displayName":"client","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":7}],"children":[]},{"id":"35f61c71-2b41-97c4-2993-2895795308f6","type":"/#Directus/Directus Prefab/Components/Utils/Get a SDK client","parameters":{},"ports":[],"children":[]}],"connections":[{"sourceId":"7c59f4e0-7322-f3d4-15f1-5630e6accc4a","sourcePort":"out-Success","targetId":"142eda76-fa70-4ae8-b36c-1e4f5765b805","targetPort":"Success"},{"sourceId":"7c59f4e0-7322-f3d4-15f1-5630e6accc4a","sourcePort":"out-Failure","targetId":"142eda76-fa70-4ae8-b36c-1e4f5765b805","targetPort":"Failure"},{"sourceId":"7c59f4e0-7322-f3d4-15f1-5630e6accc4a","sourcePort":"out-error","targetId":"142eda76-fa70-4ae8-b36c-1e4f5765b805","targetPort":"error"},{"sourceId":"0d5626d3-0db6-98ee-d28d-50a1634c11c6","sourcePort":"Do","targetId":"35f61c71-2b41-97c4-2993-2895795308f6","targetPort":"Do"},{"sourceId":"35f61c71-2b41-97c4-2993-2895795308f6","sourcePort":"Done","targetId":"7c59f4e0-7322-f3d4-15f1-5630e6accc4a","targetPort":"run"},{"sourceId":"35f61c71-2b41-97c4-2993-2895795308f6","sourcePort":"client","targetId":"7c59f4e0-7322-f3d4-15f1-5630e6accc4a","targetPort":"in-client"}],"ports":[{"name":"Success","type":"signal","plug":"output","index":0},{"name":"Do","type":{"name":"signal","allowConnectionsOnly":true},"group":"Actions","plug":"input","index":0},{"name":"Failure","type":"signal","plug":"output","index":1},{"name":"error","type":"*","plug":"output","index":2}],"roots":[]},{"name":"/#Directus/Directus Prefab/Components/User/Directus - Update Current User","nodes":[{"id":"2734f108-cb0e-f7b6-4c54-1b0206d0e3f1","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"4fe18522-a84c-f25b-59cb-ddfde177d1e9","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"181a8562-707d-2ba5-e503-f9b2bacba1eb","type":"JavaScriptFunction","parameters":{"functionScript":"const client = Noodl.Objects.DirectusSDK.Client ?? null;\r\n\r\nconst data = Inputs.data || {};\r\n\r\nconst main = async function () {\r\n    try {\r\n        const result = await client.request(Directus.updateMe(data));\r\n\r\n        Noodl.Objects[\"Current User\"] = result;\r\n\r\n        if(result?.avatar){\r\n            const token = await client.getToken();\r\n            Noodl.Objects[\"Current User\"].avatar = Noodl.Objects.DirectusSDK.Client.url.origin + \"/assets/\" + result.avatar + \"?access_token=\" + token ?? null;\r\n        }\r\n\r\n        Outputs.Success();\r\n        \r\n    } catch (err) {\r\n        console.error(err);\r\n        \r\n        Noodl.Objects[\"Current User\"].authenticated = false;\r\n\r\n        Outputs.error = err?.errors.map(i => i.message ).join(\"\\n\");\r\n        Outputs.Failure();\r\n    }\r\n}\r\n\r\nmain();\r\n"},"ports":[{"name":"in-data","displayName":"data","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":7}],"children":[]},{"id":"084c4b02-6b63-4052-65f4-c7fa9b813fef","type":"Event Sender","parameters":{"channelName":"User-Updated"},"ports":[],"children":[]},{"id":"e5c4a34a-ed83-a564-37e4-971e0f5f330e","type":"/#Directus/Directus Prefab/Components/User/Directus - Get Current User","parameters":{},"ports":[],"children":[]}],"connections":[{"sourceId":"2734f108-cb0e-f7b6-4c54-1b0206d0e3f1","sourcePort":"Do","targetId":"181a8562-707d-2ba5-e503-f9b2bacba1eb","targetPort":"run"},{"sourceId":"181a8562-707d-2ba5-e503-f9b2bacba1eb","sourcePort":"out-Success","targetId":"4fe18522-a84c-f25b-59cb-ddfde177d1e9","targetPort":"Success"},{"sourceId":"181a8562-707d-2ba5-e503-f9b2bacba1eb","sourcePort":"out-error","targetId":"4fe18522-a84c-f25b-59cb-ddfde177d1e9","targetPort":"error"},{"sourceId":"2734f108-cb0e-f7b6-4c54-1b0206d0e3f1","sourcePort":"data","targetId":"181a8562-707d-2ba5-e503-f9b2bacba1eb","targetPort":"in-data"},{"sourceId":"181a8562-707d-2ba5-e503-f9b2bacba1eb","sourcePort":"out-Success","targetId":"084c4b02-6b63-4052-65f4-c7fa9b813fef","targetPort":"sendEvent"},{"sourceId":"181a8562-707d-2ba5-e503-f9b2bacba1eb","sourcePort":"out-Failure","targetId":"e5c4a34a-ed83-a564-37e4-971e0f5f330e","targetPort":"Do"},{"sourceId":"e5c4a34a-ed83-a564-37e4-971e0f5f330e","sourcePort":"Success","targetId":"4fe18522-a84c-f25b-59cb-ddfde177d1e9","targetPort":"Failure"},{"sourceId":"e5c4a34a-ed83-a564-37e4-971e0f5f330e","sourcePort":"Failure","targetId":"4fe18522-a84c-f25b-59cb-ddfde177d1e9","targetPort":"Failure"}],"ports":[{"name":"Success","type":"signal","plug":"output","index":0},{"name":"Do","type":{"name":"signal","allowConnectionsOnly":true},"group":"Actions","plug":"input","index":0},{"name":"Failure","type":{"name":"signal"},"plug":"output","index":1},{"name":"data","type":"*","group":"Inputs","plug":"input","index":1},{"name":"error","type":"*","plug":"output","index":2}],"roots":[]},{"name":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for Delete)","nodes":[{"id":"1ff0eb74-c95b-2922-6b58-b4246b885ed4","type":"String","parameters":{},"ports":[],"children":[]},{"id":"7924b8b3-a28d-9051-959f-88cf02f26fd3","type":"JavaScriptFunction","parameters":{"functionScript":"const filter = Inputs.filter || null;\r\nconst deep = Inputs.deep || null;\r\n\r\nif (filter) {\r\n    if (typeof (filter == \"object\")) {\r\n        Outputs.filter = filter;\r\n    } else {\r\n        throw new Error(\"Data provided for 'filter' needs to be of 'Object' type!\")\r\n    }\r\n}\r\n\r\nif (deep) {\r\n    if (typeof (deep == \"object\")) {\r\n        Outputs.deep = deep;\r\n    } else {\r\n        throw new Error(\"Data provided for 'deep' needs to be of 'Object' type!\")\r\n    }\r\n}"},"ports":[{"name":"in-filter","displayName":"filter","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-deep","displayName":"deep","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-filter","displayName":"filter","plug":"output","type":"*","group":"Outputs","index":6},{"name":"out-deep","displayName":"deep","plug":"output","type":"*","group":"Outputs","index":7}],"children":[]},{"id":"1bbe9a69-a2cf-662e-5ee0-57b9b53bb677","type":"Number","parameters":{},"ports":[],"children":[]},{"id":"bc953da2-7b37-087c-0997-8a335bb76632","type":"Number","parameters":{},"ports":[],"children":[]},{"id":"90b8202e-4476-68f4-3d62-ebef564fd973","type":"String","parameters":{},"ports":[],"children":[]},{"id":"51d37d30-2d0b-b591-c6fc-2417613379d0","type":"Number","parameters":{},"ports":[],"children":[]},{"id":"5aa967ad-ce34-fad6-5b79-d78346387e91","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"b6b8931e-9754-caaa-9c80-66e10377a3dd","type":"JavaScriptFunction","parameters":{"functionScript":"const limit = Inputs.limit;\r\nconst fields = Inputs.fields;\r\nconst filter = Inputs.filter ?? null;\r\nconst search = Inputs.search ?? null;\r\nconst sort = Inputs.sort ?? null;\r\nconst offset = Inputs.offset ?? null;\r\nconst page = Inputs.page ?? null;\r\nconst deep = Inputs.deep ?? null;\r\n\r\nconst query = {};\r\n\r\nif (limit) query.limit = limit;\r\nif (filter) query.filter = filter;\r\nif (search) query.search = search;\r\nif (fields) query.fields = fields;\r\nif (sort) query.sort = sort;\r\nif (offset) query.offset = offset;\r\nif (page) query.page = page;\r\nif (deep) query.deep = deep;\r\n\r\nOutputs.query = query;"},"ports":[{"name":"in-limit","displayName":"limit","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-fields","displayName":"fields","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-filter","displayName":"filter","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-search","displayName":"search","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-sort","displayName":"sort","plug":"input","type":"*","group":"Inputs","index":8},{"name":"in-offset","displayName":"offset","plug":"input","type":"*","group":"Inputs","index":9},{"name":"in-page","displayName":"page","plug":"input","type":"*","group":"Inputs","index":10},{"name":"in-deep","displayName":"deep","plug":"input","type":"*","group":"Inputs","index":11},{"name":"out-query","displayName":"query","plug":"output","type":"*","group":"Outputs","index":12}],"children":[]},{"id":"80deaf97-3a9d-0c13-c4f1-1d339285bfc8","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"97f2d474-5ae3-925e-3003-ffb1a03efc76","type":"JavaScriptFunction","parameters":{"functionScript":"const value = Inputs.value ?? null;\r\nif(value && value > 0) Outputs.result = value\r\nelse Outputs.result = null;"},"ports":[{"name":"in-value","displayName":"value","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":5}],"children":[]},{"id":"d66e25e8-fa9a-afcb-f8fc-d6327b7dbc1f","type":"JavaScriptFunction","parameters":{"functionScript":"const value = Inputs.value ?? null;\r\nif(value && value > 0) Outputs.result = value\r\nelse Outputs.result = null;"},"ports":[{"name":"in-value","displayName":"value","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-result","displayName":"result","plug":"output","type":"*","group":"Outputs","index":5}],"children":[]},{"id":"de4e326b-6ab3-665c-98a1-ac57416cbbe6","type":"JavaScriptFunction","parameters":{"functionScript":"const delete_type = Inputs.delete_type ?? null;\r\nconst item_id = Inputs.item_id ?? null;\r\nconst item_ids = Inputs.item_id_array ?? null;\r\nconst limit_raw = Inputs.limit_raw ?? null;\r\n\r\nlet operation = null;\r\nlet limit = null;\r\nlet itemID = null;\r\nlet itemIDArray = [];\r\n\r\n///////////////////////////////////\r\n\r\nif (delete_type) {\r\n    if (delete_type == \"Delete Single by ID\") {\r\n        if (item_id) {\r\n            operation = \"single\";\r\n            itemID = item_id;\r\n        } else {\r\n            throw new Error(\"Provide valid Item ID\");\r\n        }\r\n    } else if (delete_type == \"Delete Multiple by Filter\") {\r\n\r\n        if(limit_raw){\r\n            if(limit_raw <= 0){\r\n                limit = 1\r\n            } else {\r\n                limit = limit_raw;\r\n            }\r\n        }\r\n        operation = \"multiple\";\r\n\r\n    } else if (delete_type == \"Delete All\") {\r\n\r\n        limit = -1;\r\n        operation = \"all\";\r\n\r\n    } else {\r\n        operation = null;\r\n    }\r\n    \r\n    Outputs.operation = operation;\r\n    Outputs.itemID = itemID;\r\n    Outputs.limit = limit;\r\n    Outputs.Done();\r\n}\r\n"},"ports":[{"name":"in-delete_type","displayName":"delete_type","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-item_id","displayName":"item_id","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-item_id_array","displayName":"item_id_array","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-limit_raw","displayName":"limit_raw","plug":"input","type":"*","group":"Inputs","index":7},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":8},{"name":"out-operation","displayName":"operation","plug":"output","type":"*","group":"Outputs","index":9},{"name":"out-itemID","displayName":"itemID","plug":"output","type":"*","group":"Outputs","index":10},{"name":"out-limit","displayName":"limit","plug":"output","type":"*","group":"Outputs","index":11}],"children":[]}],"connections":[{"sourceId":"5aa967ad-ce34-fad6-5b79-d78346387e91","sourcePort":"Search","targetId":"1ff0eb74-c95b-2922-6b58-b4246b885ed4","targetPort":"value"},{"sourceId":"5aa967ad-ce34-fad6-5b79-d78346387e91","sourcePort":"filter","targetId":"7924b8b3-a28d-9051-959f-88cf02f26fd3","targetPort":"in-filter"},{"sourceId":"5aa967ad-ce34-fad6-5b79-d78346387e91","sourcePort":"deep","targetId":"7924b8b3-a28d-9051-959f-88cf02f26fd3","targetPort":"in-deep"},{"sourceId":"5aa967ad-ce34-fad6-5b79-d78346387e91","sourcePort":"Page","targetId":"1bbe9a69-a2cf-662e-5ee0-57b9b53bb677","targetPort":"value"},{"sourceId":"5aa967ad-ce34-fad6-5b79-d78346387e91","sourcePort":"Offset","targetId":"bc953da2-7b37-087c-0997-8a335bb76632","targetPort":"value"},{"sourceId":"5aa967ad-ce34-fad6-5b79-d78346387e91","sourcePort":"Sort","targetId":"90b8202e-4476-68f4-3d62-ebef564fd973","targetPort":"value"},{"sourceId":"5aa967ad-ce34-fad6-5b79-d78346387e91","sourcePort":"Limit","targetId":"51d37d30-2d0b-b591-c6fc-2417613379d0","targetPort":"value"},{"sourceId":"7924b8b3-a28d-9051-959f-88cf02f26fd3","sourcePort":"out-filter","targetId":"b6b8931e-9754-caaa-9c80-66e10377a3dd","targetPort":"in-filter"},{"sourceId":"7924b8b3-a28d-9051-959f-88cf02f26fd3","sourcePort":"out-deep","targetId":"b6b8931e-9754-caaa-9c80-66e10377a3dd","targetPort":"in-deep"},{"sourceId":"90b8202e-4476-68f4-3d62-ebef564fd973","sourcePort":"savedValue","targetId":"b6b8931e-9754-caaa-9c80-66e10377a3dd","targetPort":"in-sort"},{"sourceId":"1ff0eb74-c95b-2922-6b58-b4246b885ed4","sourcePort":"savedValue","targetId":"b6b8931e-9754-caaa-9c80-66e10377a3dd","targetPort":"in-search"},{"sourceId":"b6b8931e-9754-caaa-9c80-66e10377a3dd","sourcePort":"out-query","targetId":"80deaf97-3a9d-0c13-c4f1-1d339285bfc8","targetPort":"query"},{"sourceId":"bc953da2-7b37-087c-0997-8a335bb76632","sourcePort":"savedValue","targetId":"d66e25e8-fa9a-afcb-f8fc-d6327b7dbc1f","targetPort":"in-value"},{"sourceId":"d66e25e8-fa9a-afcb-f8fc-d6327b7dbc1f","sourcePort":"out-result","targetId":"b6b8931e-9754-caaa-9c80-66e10377a3dd","targetPort":"in-offset"},{"sourceId":"1bbe9a69-a2cf-662e-5ee0-57b9b53bb677","sourcePort":"savedValue","targetId":"97f2d474-5ae3-925e-3003-ffb1a03efc76","targetPort":"in-value"},{"sourceId":"97f2d474-5ae3-925e-3003-ffb1a03efc76","sourcePort":"out-result","targetId":"b6b8931e-9754-caaa-9c80-66e10377a3dd","targetPort":"in-page"},{"sourceId":"51d37d30-2d0b-b591-c6fc-2417613379d0","sourcePort":"savedValue","targetId":"de4e326b-6ab3-665c-98a1-ac57416cbbe6","targetPort":"in-limit_raw"},{"sourceId":"5aa967ad-ce34-fad6-5b79-d78346387e91","sourcePort":"Item ID","targetId":"de4e326b-6ab3-665c-98a1-ac57416cbbe6","targetPort":"in-item_id"},{"sourceId":"5aa967ad-ce34-fad6-5b79-d78346387e91","sourcePort":"Delete Type","targetId":"de4e326b-6ab3-665c-98a1-ac57416cbbe6","targetPort":"in-delete_type"},{"sourceId":"de4e326b-6ab3-665c-98a1-ac57416cbbe6","sourcePort":"out-operation","targetId":"80deaf97-3a9d-0c13-c4f1-1d339285bfc8","targetPort":"operation"},{"sourceId":"de4e326b-6ab3-665c-98a1-ac57416cbbe6","sourcePort":"out-limit","targetId":"b6b8931e-9754-caaa-9c80-66e10377a3dd","targetPort":"in-limit"},{"sourceId":"5aa967ad-ce34-fad6-5b79-d78346387e91","sourcePort":"Item IDs Array","targetId":"de4e326b-6ab3-665c-98a1-ac57416cbbe6","targetPort":"in-item_id_array"},{"sourceId":"de4e326b-6ab3-665c-98a1-ac57416cbbe6","sourcePort":"out-itemID","targetId":"80deaf97-3a9d-0c13-c4f1-1d339285bfc8","targetPort":"itemID"},{"sourceId":"5aa967ad-ce34-fad6-5b79-d78346387e91","sourcePort":"Do","targetId":"de4e326b-6ab3-665c-98a1-ac57416cbbe6","targetPort":"run"}],"ports":[{"name":"Do","type":{"name":"signal","allowConnectionsOnly":true},"group":"Actions","plug":"input","index":0},{"name":"query","type":"*","plug":"output","index":1},{"name":"Delete Type","type":"*","group":"Inputs","plug":"input","index":1},{"name":"operation","type":"*","plug":"output","index":2},{"name":"Item ID","type":"*","group":"Inputs","plug":"input","index":2},{"name":"itemID","type":"*","plug":"output","index":3},{"name":"Item IDs Array","type":"*","group":"Inputs","plug":"input","index":3},{"name":"Limit","type":{"name":"number"},"default":0,"plug":"input","index":4},{"name":"Get all fields","type":"*","plug":"input","index":5},{"name":"Fields","type":"*","plug":"input","index":6},{"name":"Sort","type":{"name":"string"},"default":"","plug":"input","index":7},{"name":"Offset","type":{"name":"number"},"default":0,"plug":"input","index":8},{"name":"Page","type":{"name":"number"},"default":0,"plug":"input","index":9},{"name":"Search","type":{"name":"string"},"default":"","plug":"input","index":10},{"name":"filter","type":"*","group":"Inputs","plug":"input","index":13},{"name":"deep","type":"*","group":"Inputs","plug":"input","index":14}],"roots":[]},{"name":"/#Directus/Directus Prefab/Components/Utils - Query Parameters/Directus - Query parameters (for File Download)","nodes":[{"id":"f0a45137-48ee-74b0-5a7d-40b465a5f285","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"bbbbc9f4-3932-8faa-654d-0d70ce9b31e4","type":"JavaScriptFunction","parameters":{"functionScript":"const fit = Inputs.fit || null;\r\nconst width = Inputs.width || null;\r\nconst height = Inputs.height || null;\r\nconst quality = Inputs.quality || null;\r\nconst withoutEnlargement = Inputs.withoutEnlargement ?? null;\r\nconst format = Inputs.format || null;\r\n\r\nconst query = {};\r\n\r\nif (fit) query.fit = fit;\r\nif (width) query.width = width;\r\nif (height) query.height = height;\r\nif (quality) query.quality = quality;\r\nif (withoutEnlargement) query.withoutEnlargement = withoutEnlargement;\r\nif (format) query.format = format;\r\n\r\nOutputs.query = query;\r\nOutputs.Done();"},"ports":[{"name":"in-fit","displayName":"fit","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-width","displayName":"width","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-height","displayName":"height","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-quality","displayName":"quality","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-withoutEnlargement","displayName":"withoutEnlargement","plug":"input","type":"*","group":"Inputs","index":8},{"name":"in-format","displayName":"format","plug":"input","type":"*","group":"Inputs","index":9},{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":10},{"name":"out-query","displayName":"query","plug":"output","type":"*","group":"Outputs","index":11}],"children":[]},{"id":"38a78e08-181b-f88c-98dd-57c3a370638c","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"a3ffa967-4aff-424c-a7ca-12e22c979525","type":"String","parameters":{},"ports":[],"children":[]},{"id":"6c241f6c-2231-11cc-ef5d-bd241404db67","type":"Number","parameters":{},"ports":[],"children":[]},{"id":"20e03020-5b5a-ec2a-52eb-f525223f0c29","type":"Number","parameters":{"value":100},"ports":[],"children":[]},{"id":"05abfa78-3343-2dd8-c986-7a8f04bfc901","type":"Number","parameters":{},"ports":[],"children":[]},{"id":"4fccceef-53fd-3c43-5ef7-b0910d6c1b97","type":"String","parameters":{},"ports":[],"children":[]},{"id":"c3b82e76-0166-5d0f-96a6-046c908ac766","type":"Boolean","parameters":{},"ports":[],"children":[]}],"connections":[{"sourceId":"bbbbc9f4-3932-8faa-654d-0d70ce9b31e4","sourcePort":"out-query","targetId":"38a78e08-181b-f88c-98dd-57c3a370638c","targetPort":"query"},{"sourceId":"f0a45137-48ee-74b0-5a7d-40b465a5f285","sourcePort":"fit","targetId":"a3ffa967-4aff-424c-a7ca-12e22c979525","targetPort":"value"},{"sourceId":"f0a45137-48ee-74b0-5a7d-40b465a5f285","sourcePort":"width","targetId":"6c241f6c-2231-11cc-ef5d-bd241404db67","targetPort":"value"},{"sourceId":"f0a45137-48ee-74b0-5a7d-40b465a5f285","sourcePort":"height","targetId":"05abfa78-3343-2dd8-c986-7a8f04bfc901","targetPort":"value"},{"sourceId":"f0a45137-48ee-74b0-5a7d-40b465a5f285","sourcePort":"quality","targetId":"20e03020-5b5a-ec2a-52eb-f525223f0c29","targetPort":"value"},{"sourceId":"f0a45137-48ee-74b0-5a7d-40b465a5f285","sourcePort":"withoutEnlargement","targetId":"c3b82e76-0166-5d0f-96a6-046c908ac766","targetPort":"value"},{"sourceId":"f0a45137-48ee-74b0-5a7d-40b465a5f285","sourcePort":"format","targetId":"4fccceef-53fd-3c43-5ef7-b0910d6c1b97","targetPort":"value"},{"sourceId":"a3ffa967-4aff-424c-a7ca-12e22c979525","sourcePort":"savedValue","targetId":"bbbbc9f4-3932-8faa-654d-0d70ce9b31e4","targetPort":"in-fit"},{"sourceId":"6c241f6c-2231-11cc-ef5d-bd241404db67","sourcePort":"savedValue","targetId":"bbbbc9f4-3932-8faa-654d-0d70ce9b31e4","targetPort":"in-width"},{"sourceId":"05abfa78-3343-2dd8-c986-7a8f04bfc901","sourcePort":"savedValue","targetId":"bbbbc9f4-3932-8faa-654d-0d70ce9b31e4","targetPort":"in-height"},{"sourceId":"20e03020-5b5a-ec2a-52eb-f525223f0c29","sourcePort":"savedValue","targetId":"bbbbc9f4-3932-8faa-654d-0d70ce9b31e4","targetPort":"in-quality"},{"sourceId":"c3b82e76-0166-5d0f-96a6-046c908ac766","sourcePort":"savedValue","targetId":"bbbbc9f4-3932-8faa-654d-0d70ce9b31e4","targetPort":"in-withoutEnlargement"},{"sourceId":"4fccceef-53fd-3c43-5ef7-b0910d6c1b97","sourcePort":"savedValue","targetId":"bbbbc9f4-3932-8faa-654d-0d70ce9b31e4","targetPort":"in-format"},{"sourceId":"f0a45137-48ee-74b0-5a7d-40b465a5f285","sourcePort":"Set","targetId":"bbbbc9f4-3932-8faa-654d-0d70ce9b31e4","targetPort":"run"},{"sourceId":"bbbbc9f4-3932-8faa-654d-0d70ce9b31e4","sourcePort":"out-Done","targetId":"38a78e08-181b-f88c-98dd-57c3a370638c","targetPort":"Done"}],"ports":[{"name":"Set","type":{"name":"signal","allowConnectionsOnly":true},"group":"Actions","plug":"input","index":0},{"name":"query","type":"*","plug":"output","index":1},{"name":"operation","type":"*","plug":"output","index":2},{"name":"itemID","type":"*","plug":"output","index":3},{"name":"Done","type":"signal","plug":"output","index":4},{"name":"fit","type":{"name":"string"},"default":"","plug":"input","index":19},{"name":"width","type":{"name":"number"},"default":0,"plug":"input","index":20},{"name":"height","type":{"name":"number"},"default":0,"plug":"input","index":21},{"name":"quality","type":{"name":"number"},"default":100,"plug":"input","index":22},{"name":"withoutEnlargement","type":{"name":"boolean"},"default":false,"plug":"input","index":23},{"name":"format","type":{"name":"string"},"default":"","plug":"input","index":24}],"roots":[]},{"name":"/#Directus/Directus Prefab/Initial Set Up/Set up Directus - Option 2 (manual)","nodes":[{"id":"d240ea85-1db3-75f9-85fa-dce3e1999ec6","type":"/#Directus/Directus Prefab/Components/Config/Directus - Initialize User Client","parameters":{"Enable Cross-Domain cookies":true},"ports":[],"children":[]},{"id":"8baf7c6d-d1ee-3a7d-75b1-79cbbc9b01b3","type":"/#Directus/Directus Prefab/Components/Config/Directus - Initialize Site Client","parameters":{"Enable Cross-Domain cookies":true},"ports":[],"children":[]},{"id":"77673996-ab87-f1fb-3ef3-17de625a907b","type":"/#Directus/Directus Prefab/Components/Auth/Directus - Refresh Token","parameters":{},"ports":[],"children":[]},{"id":"02de4319-10a4-7199-3a81-aa36ba18a73c","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"582a4887-8f8b-b350-6eec-4fa3cd167cca","type":"String","parameters":{},"ports":[],"children":[]},{"id":"c7b9fcc4-b7b9-f877-d085-1e0184fe879f","type":"String","parameters":{},"ports":[],"children":[]},{"id":"161de246-2139-5122-2131-cd54d30ea6f6","type":"Boolean","parameters":{},"ports":[],"children":[]},{"id":"c77a3f74-0341-c4d3-9315-32f404927251","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"e123ff9a-2716-e9b3-72fd-f5e9083bebb9","type":"Switch","parameters":{},"ports":[],"children":[]},{"id":"42ef8d6f-096a-e9ec-038e-52f978f6ca6a","type":"Switch","parameters":{},"ports":[],"children":[]},{"id":"8bbeca60-2b6e-90c4-8c33-7838faf2c251","type":"Or","parameters":{},"ports":[],"children":[]}],"connections":[{"sourceId":"d240ea85-1db3-75f9-85fa-dce3e1999ec6","sourcePort":"Success","targetId":"77673996-ab87-f1fb-3ef3-17de625a907b","targetPort":"Do"},{"sourceId":"02de4319-10a4-7199-3a81-aa36ba18a73c","sourcePort":"Do","targetId":"582a4887-8f8b-b350-6eec-4fa3cd167cca","targetPort":"saveValue"},{"sourceId":"02de4319-10a4-7199-3a81-aa36ba18a73c","sourcePort":"Do","targetId":"c7b9fcc4-b7b9-f877-d085-1e0184fe879f","targetPort":"saveValue"},{"sourceId":"582a4887-8f8b-b350-6eec-4fa3cd167cca","sourcePort":"stored","targetId":"d240ea85-1db3-75f9-85fa-dce3e1999ec6","targetPort":"Do"},{"sourceId":"582a4887-8f8b-b350-6eec-4fa3cd167cca","sourcePort":"savedValue","targetId":"d240ea85-1db3-75f9-85fa-dce3e1999ec6","targetPort":"directusURL"},{"sourceId":"c7b9fcc4-b7b9-f877-d085-1e0184fe879f","sourcePort":"stored","targetId":"8baf7c6d-d1ee-3a7d-75b1-79cbbc9b01b3","targetPort":"Do"},{"sourceId":"c7b9fcc4-b7b9-f877-d085-1e0184fe879f","sourcePort":"savedValue","targetId":"8baf7c6d-d1ee-3a7d-75b1-79cbbc9b01b3","targetPort":"static_token"},{"sourceId":"582a4887-8f8b-b350-6eec-4fa3cd167cca","sourcePort":"savedValue","targetId":"8baf7c6d-d1ee-3a7d-75b1-79cbbc9b01b3","targetPort":"directusURL"},{"sourceId":"161de246-2139-5122-2131-cd54d30ea6f6","sourcePort":"savedValue","targetId":"8baf7c6d-d1ee-3a7d-75b1-79cbbc9b01b3","targetPort":"Enable Cross-Domain cookies"},{"sourceId":"02de4319-10a4-7199-3a81-aa36ba18a73c","sourcePort":"Do","targetId":"161de246-2139-5122-2131-cd54d30ea6f6","targetPort":"saveValue"},{"sourceId":"e123ff9a-2716-e9b3-72fd-f5e9083bebb9","sourcePort":"state","targetId":"8bbeca60-2b6e-90c4-8c33-7838faf2c251","targetPort":"input 0"},{"sourceId":"42ef8d6f-096a-e9ec-038e-52f978f6ca6a","sourcePort":"state","targetId":"8bbeca60-2b6e-90c4-8c33-7838faf2c251","targetPort":"input 1"},{"sourceId":"8bbeca60-2b6e-90c4-8c33-7838faf2c251","sourcePort":"result","targetId":"c77a3f74-0341-c4d3-9315-32f404927251","targetPort":"Mounted"},{"sourceId":"d240ea85-1db3-75f9-85fa-dce3e1999ec6","sourcePort":"Success","targetId":"e123ff9a-2716-e9b3-72fd-f5e9083bebb9","targetPort":"on"},{"sourceId":"8baf7c6d-d1ee-3a7d-75b1-79cbbc9b01b3","sourcePort":"Success","targetId":"42ef8d6f-096a-e9ec-038e-52f978f6ca6a","targetPort":"on"}],"ports":[{"name":"Mounted","type":"boolean","plug":"output","index":0},{"name":"Do","type":{"name":"signal","allowConnectionsOnly":true},"plug":"input","index":0}],"roots":[]},{"name":"/#Pages/connect/Login form","nodes":[{"id":"79e9245d-bc26-b8f0-ed9d-64345ed3af04","type":"Group","parameters":{"sizeMode":"contentHeight","alignY":"center","alignX":"center","rowGap":{"value":20,"unit":"px"},"width":{"value":300,"unit":"px"}},"ports":[],"children":[{"id":"60ac7040-16c7-62ef-79a8-a523cd32e411","type":"net.noodl.controls.textinput","variant":"Standard input","parameters":{},"stateParameters":{},"stateTransitions":{},"defaultStateTransitions":{},"ports":[],"children":[]},{"id":"55ed451b-80f5-a155-ff63-95e1a1919b37","type":"net.noodl.controls.textinput","variant":"Standard input","parameters":{"backgroundColor":"White","label":"Password","useLabel":true,"labelcolor":"White","textStyle":"Body Medium","paddingTop":{"value":8,"unit":"px"},"paddingBottom":{"value":8,"unit":"px"},"sizeMode":"contentHeight","paddingLeft":{"value":12,"unit":"px"},"type":"password"},"ports":[],"children":[]},{"id":"0e9a8db9-d311-b2be-3db9-e8500e757a78","type":"net.noodl.controls.button","parameters":{"alignX":"center","backgroundColor":"Hive purple","label":"Log in"},"ports":[],"children":[]},{"id":"0fca7948-e4a1-34c5-ff79-fe40dd8f4680","type":"Text","variant":"Clickable text","parameters":{"text":"Don't have an account? Click here to sign up","alignX":"center","sizeMode":"contentHeight","textAlignX":"center","styleCss":"/* background-color: red; */\ncursor: pointer;"},"ports":[],"children":[]}]},{"id":"f9b33e8e-cc2b-bc47-338b-32ee2412822b","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"14b4b90e-c7a5-73d2-82cf-1caf288798f0","type":"Component Outputs","parameters":{},"ports":[],"children":[]}],"connections":[{"sourceId":"f9b33e8e-cc2b-bc47-338b-32ee2412822b","sourcePort":"mounted","targetId":"79e9245d-bc26-b8f0-ed9d-64345ed3af04","targetPort":"mounted"},{"sourceId":"0fca7948-e4a1-34c5-ff79-fe40dd8f4680","sourcePort":"onClick","targetId":"14b4b90e-c7a5-73d2-82cf-1caf288798f0","targetPort":"Switch to signup"}],"ports":[{"name":"Switch to signup","type":"signal","plug":"output","index":1},{"name":"mounted","type":"boolean","default":true,"group":"General","plug":"input","index":1}],"roots":["79e9245d-bc26-b8f0-ed9d-64345ed3af04"]},{"name":"/#Pages/project/font style icon","nodes":[{"id":"036f86a0-357b-91a4-0903-e7030c04884e","type":"Group","parameters":{"width":{"value":40,"unit":"px"},"height":{"value":40,"unit":"px"},"backgroundColor":"Hive header grey","alignItems":"center","justifyContent":"center","borderRadius":{"value":8,"unit":"px"}},"ports":[],"children":[{"id":"074b737f-d16f-117e-6143-73dda9bf8d8c","type":"net.noodl.visual.icon","parameters":{"iconIconSource":{"class":"material-icons","code":"format_bold","codeAsClass":false},"iconSize":{"value":24,"unit":"px"}},"ports":[],"children":[]}]},{"id":"348295a9-08bf-15ea-a098-f09d59210954","type":"/Global logical components/Generate Google icon object","parameters":{},"ports":[],"children":[]},{"id":"3028d0d7-8336-295e-0e39-145848bf423a","type":"Component Inputs","parameters":{},"ports":[],"children":[]}],"connections":[{"sourceId":"348295a9-08bf-15ea-a098-f09d59210954","sourcePort":"iconObject","targetId":"074b737f-d16f-117e-6143-73dda9bf8d8c","targetPort":"iconIconSource"},{"sourceId":"3028d0d7-8336-295e-0e39-145848bf423a","sourcePort":"icon","targetId":"348295a9-08bf-15ea-a098-f09d59210954","targetPort":"iconName"}],"ports":[{"name":"icon","type":"string","group":"Inputs","plug":"input","index":1}],"roots":["036f86a0-357b-91a4-0903-e7030c04884e"]},{"name":"/#Pages/project/paragraph item/sentence item","nodes":[{"id":"0e29af49-bcae-0877-e3cd-8df5e75439bd","type":"Group","parameters":{"paddingLeft":{"value":10,"unit":"px"},"paddingRight":{"value":10,"unit":"px"},"paddingTop":{"value":5,"unit":"px"},"paddingBottom":{"value":5,"unit":"px"},"alignX":"left"},"ports":[],"children":[{"id":"fcc822f8-90a9-4578-0921-922e0d98120e","type":"net.noodl.visual.columns","parameters":{"layoutString":"1 1 1 1 1 1 1 1 1 1 1 1","marginY":{"value":0,"unit":"px"},"marginX":{"value":0,"unit":"px"},"minWidth":{"value":0,"unit":"px"}},"ports":[],"children":[{"id":"d3874f27-c2da-0a1f-e31e-30caa4fe4f6b","type":"For Each","parameters":{"template":"/#Pages/project/paragraph item/sentence item/word item"},"ports":[],"children":[]}]}]},{"id":"38a3601f-324f-a321-689c-0cd1030de383","type":"Model2","parameters":{"idSource":"foreach","properties":"text,start,end"},"ports":[],"children":[]}],"connections":[],"ports":[],"roots":["0e29af49-bcae-0877-e3cd-8df5e75439bd"]},{"name":"/#Pages/videos/New video container","nodes":[{"id":"6d4fc198-c022-a3a5-3570-7fb6839c6e4e","type":"Group","parameters":{"sizeMode":"contentSize"},"ports":[],"children":[{"id":"4d9698a2-38d8-b8ef-7cae-b3719f97761a","type":"Group","parameters":{"flexDirection":"column"},"ports":[],"children":[]},{"id":"98e8b643-aab0-1733-dac7-337534877132","type":"/Global visual components/File picker","parameters":{"align y":"center","align x":"left"},"ports":[],"children":[]},{"id":"ee37e8de-25ed-09b8-6d35-0dea12e77824","type":"net.noodl.controls.button","parameters":{"label":"Next"},"ports":[],"children":[]}]},{"id":"51219d71-15f8-5e73-cb22-c118d1769eb9","type":"/#Directus/Directus Prefab/Components/Data/Directus - Create Data","parameters":{"collection":"Video","SDK Client to use":"User SDK Client"},"ports":[],"children":[]},{"id":"3ca16357-d814-0bc9-262c-0efdf91056a6","type":"/#Directus/Directus Prefab/Components/Data/Directus - Create Data","parameters":{"collection":"Project","SDK Client to use":"User SDK Client"},"ports":[],"children":[]},{"id":"fe933154-bb1e-dba8-c226-e46a7bcdf331","type":"JavaScriptFunction","parameters":{"functionScript":"// Define the inputs\nconst mainVideoId = Inputs.mainVideoId || null;\nconst introId = Inputs.introId || null;\nconst outroId = Inputs.outroId || null;\nconst projectTitle = Inputs.projectTitle || \"Default\";\nconst projectBrief = Inputs.projectBrief || \"Default\";\nconst projectDeadline = Inputs.deadline || null;\nconst projectClient = Inputs.projectClient || null;\n\n// Initialize an empty array\nlet clips = []\nlet videos = [];\n\n// Check if the inputs are valid and if they are, add them to the array\nif (mainVideoId) videos.push({ \"Video_id\": mainVideoId });\nif (introId) videos.push({ \"id\": introId });\nif (outroId) videos.push({ \"id\": outroId });\n\nconst projectData = {\n  title: projectTitle,\n  brief: projectBrief,\n  deadline: projectDeadline,\n  client: projectClient,\n  hasVideos: videos,\n  hasClips: clips,\n  sharedAccounts: [ { \"Account_id\": Inputs.accountId } ]\n}\n\nOutputs.projectData = projectData;\nOutputs.Success();\n"},"ports":[{"name":"in-mainVideoId","displayName":"mainVideoId","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-introId","displayName":"introId","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-outroId","displayName":"outroId","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-projectTitle","displayName":"projectTitle","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-projectBrief","displayName":"projectBrief","plug":"input","type":"*","group":"Inputs","index":8},{"name":"in-deadline","displayName":"deadline","plug":"input","type":"*","group":"Inputs","index":9},{"name":"in-projectClient","displayName":"projectClient","plug":"input","type":"*","group":"Inputs","index":10},{"name":"in-accountId","displayName":"accountId","plug":"input","type":"*","group":"Inputs","index":11},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":12},{"name":"out-projectData","displayName":"projectData","plug":"output","type":"*","group":"Outputs","index":13}],"children":[]},{"id":"87a5d42b-92f0-cc37-42b5-ff30cdff903a","type":"Expression","parameters":{"expression":"mainId != \"\""},"ports":[],"children":[]},{"id":"86e30623-63e4-4030-0e22-3352ba4b1833","type":"RouterNavigate","parameters":{"router":"Main","target":"/#Pages/project"},"ports":[],"children":[]},{"id":"f6f3c904-1b4f-d42d-de1b-2b1e8a65a88e","type":"JavaScriptFunction","parameters":{"functionScript":"function getVideoDuration(videoBlob) {\n  return new Promise((resolve, reject) => {\n    const url = URL.createObjectURL(videoBlob);\n    const video = document.createElement('video');\n\n    video.src = url;\n    video.addEventListener('loadedmetadata', () => {\n      resolve(video.duration);\n      URL.revokeObjectURL(url);\n    });\n\n    video.onerror = () => {\n      reject('Failed to load video metadata.');\n    };\n  });\n}\n\nconst videoBlob = Inputs.videoBlob;\n\nif (!videoBlob) return;\n\ngetVideoDuration(videoBlob).then(duration => {\n  Outputs.duration = duration;\n  Outputs.Success();\n}).catch(console.error);\n"},"ports":[{"name":"in-videoBlob","displayName":"videoBlob","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-duration","displayName":"duration","plug":"output","type":"*","group":"Outputs","index":6}],"children":[]},{"id":"10867600-d16c-f3f0-2ab2-43086d69525b","type":"JavaScriptFunction","parameters":{"functionScript":"const videoObject = Inputs.videoObject;\n\nif (!videoObject) return;\n\nOutputs.videoObject = {\n    ...videoObject,\n    type: \"main\",\n    length: Math.floor(Inputs.length),\n//    sharedAccounts: [ { \"Account_id\": { \"id\": Inputs.accountId } } ]\n    sharedAccounts: [ { \"Account_id\": Inputs.accountId }\n    ]\n}\nOutputs.Success();"},"ports":[{"name":"in-videoObject","displayName":"videoObject","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-length","displayName":"length","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-accountId","displayName":"accountId","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-videoObject","displayName":"videoObject","plug":"output","type":"*","group":"Outputs","index":8}],"children":[]},{"id":"5a40b166-3008-81d2-7c8b-b7f3a6abc8ff","type":"Model2","parameters":{"modelId":"Current User","properties":"account"},"ports":[],"children":[]},{"id":"d384396c-abdc-463f-a376-91abaf329cae","type":"Send Message","parameters":{},"ports":[],"children":[]},{"id":"d268fd30-08d5-3629-8b7a-399e0c9da364","type":"JavaScriptFunction","parameters":{"functionScript":"const endpoint = Inputs.Endpoint || '';\nif (!endpoint) throw new Error('Invalid endpoint');\n\nconst apiKey = Inputs.ApiKey || '';\nif (!apiKey) throw new Error('Invalid API key');\n\nconst payload = {\n  data1: Inputs.Data1 || '',\n  data2: Inputs.Data2 || '',\n  data3: Inputs.Data3 || '',\n  // Add more data inputs as needed\n};\n\nconst url = `${endpoint}?apikey=${apiKey}`;\n\ntry {\n  const response = await fetch(url, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(payload),\n  });\n\n  if (!response.ok) throw new Error('Response not OK');\n\n  const data = await response.json();\n  Outputs.Response = data;\n  Outputs.Success();\n} catch (error) {\n  Outputs.error = error;\n  Outputs.Failure();\n}\n"},"ports":[{"name":"in-Endpoint","displayName":"Endpoint","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-ApiKey","displayName":"ApiKey","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-Data1","displayName":"Data1","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-Data2","displayName":"Data2","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-Data3","displayName":"Data3","plug":"input","type":"*","group":"Inputs","index":8},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":9},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":10},{"name":"out-Response","displayName":"Response","plug":"output","type":"*","group":"Outputs","index":11},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":12}],"children":[]},{"id":"77d8f471-e915-91b4-8f57-8c4a09d1ebe0","type":"Component Outputs","parameters":{},"ports":[],"children":[]}],"connections":[{"sourceId":"51219d71-15f8-5e73-cb22-c118d1769eb9","sourcePort":"record ID","targetId":"fe933154-bb1e-dba8-c226-e46a7bcdf331","targetPort":"in-mainVideoId"},{"sourceId":"fe933154-bb1e-dba8-c226-e46a7bcdf331","sourcePort":"out-projectData","targetId":"3ca16357-d814-0bc9-262c-0efdf91056a6","targetPort":"Data"},{"sourceId":"ee37e8de-25ed-09b8-6d35-0dea12e77824","sourcePort":"onClick","targetId":"3ca16357-d814-0bc9-262c-0efdf91056a6","targetPort":"Do"},{"sourceId":"51219d71-15f8-5e73-cb22-c118d1769eb9","sourcePort":"record ID","targetId":"87a5d42b-92f0-cc37-42b5-ff30cdff903a","targetPort":"mainId"},{"sourceId":"87a5d42b-92f0-cc37-42b5-ff30cdff903a","sourcePort":"result","targetId":"ee37e8de-25ed-09b8-6d35-0dea12e77824","targetPort":"enabled"},{"sourceId":"3ca16357-d814-0bc9-262c-0efdf91056a6","sourcePort":"record ID","targetId":"86e30623-63e4-4030-0e22-3352ba4b1833","targetPort":"pm-project"},{"sourceId":"3ca16357-d814-0bc9-262c-0efdf91056a6","sourcePort":"Success","targetId":"86e30623-63e4-4030-0e22-3352ba4b1833","targetPort":"navigate"},{"sourceId":"98e8b643-aab0-1733-dac7-337534877132","sourcePort":"localBlob","targetId":"f6f3c904-1b4f-d42d-de1b-2b1e8a65a88e","targetPort":"in-videoBlob"},{"sourceId":"98e8b643-aab0-1733-dac7-337534877132","sourcePort":"fileData","targetId":"10867600-d16c-f3f0-2ab2-43086d69525b","targetPort":"in-videoObject"},{"sourceId":"f6f3c904-1b4f-d42d-de1b-2b1e8a65a88e","sourcePort":"out-duration","targetId":"10867600-d16c-f3f0-2ab2-43086d69525b","targetPort":"in-length"},{"sourceId":"10867600-d16c-f3f0-2ab2-43086d69525b","sourcePort":"out-videoObject","targetId":"51219d71-15f8-5e73-cb22-c118d1769eb9","targetPort":"Data"},{"sourceId":"98e8b643-aab0-1733-dac7-337534877132","sourcePort":"Success","targetId":"f6f3c904-1b4f-d42d-de1b-2b1e8a65a88e","targetPort":"run"},{"sourceId":"f6f3c904-1b4f-d42d-de1b-2b1e8a65a88e","sourcePort":"out-Success","targetId":"10867600-d16c-f3f0-2ab2-43086d69525b","targetPort":"run"},{"sourceId":"10867600-d16c-f3f0-2ab2-43086d69525b","sourcePort":"out-Success","targetId":"51219d71-15f8-5e73-cb22-c118d1769eb9","targetPort":"Do"},{"sourceId":"5a40b166-3008-81d2-7c8b-b7f3a6abc8ff","sourcePort":"prop-account","targetId":"10867600-d16c-f3f0-2ab2-43086d69525b","targetPort":"in-accountId"},{"sourceId":"5a40b166-3008-81d2-7c8b-b7f3a6abc8ff","sourcePort":"prop-account","targetId":"fe933154-bb1e-dba8-c226-e46a7bcdf331","targetPort":"in-accountId"},{"sourceId":"51219d71-15f8-5e73-cb22-c118d1769eb9","sourcePort":"record ID","targetId":"d384396c-abdc-463f-a376-91abaf329cae","targetPort":"topic"},{"sourceId":"51219d71-15f8-5e73-cb22-c118d1769eb9","sourcePort":"Success","targetId":"d384396c-abdc-463f-a376-91abaf329cae","targetPort":"Send"},{"sourceId":"51219d71-15f8-5e73-cb22-c118d1769eb9","sourcePort":"Success","targetId":"d268fd30-08d5-3629-8b7a-399e0c9da364","targetPort":"run"}],"ports":[],"roots":["6d4fc198-c022-a3a5-3570-7fb6839c6e4e"]},{"name":"/#Pages/videos/Popup new video","nodes":[{"id":"f54507de-9789-0e16-6141-07ec54ef7d1a","type":"/Global visual components/Popup template","parameters":{"popup title":"Upload video","max width":{"value":400,"unit":"px"}},"ports":[],"children":[{"id":"e9c68c47-97a1-cf3d-d60b-b2603f56cbcd","type":"/Global visual components/File picker","parameters":{"align y":"center","align x":"center"},"ports":[],"children":[]}]},{"id":"b54a0371-df6c-bfc8-bd67-b4f9d3a0f980","type":"NavigationClosePopup","parameters":{},"ports":[],"children":[]},{"id":"5013add9-858a-2081-c42c-dc5d7436131b","type":"/#Directus/Directus Prefab/Components/Data/Directus - Create Data","parameters":{"collection":"Video","SDK Client to use":"User SDK Client"},"ports":[],"children":[]},{"id":"d13c45e6-10e6-a1a0-055f-2899d4858181","type":"/#Directus/Directus Prefab/Components/Data/Directus - Create Data","parameters":{"collection":"Project","SDK Client to use":"User SDK Client"},"ports":[],"children":[]},{"id":"d3057152-45f2-c923-dafd-d0abb804e95a","type":"JavaScriptFunction","parameters":{"functionScript":"// Define the inputs\nconst mainVideoId = Inputs.mainVideoId || null;\nconst introId = Inputs.introId || null;\nconst outroId = Inputs.outroId || null;\nconst projectTitle = Inputs.projectTitle || \"Default\";\nconst projectBrief = Inputs.projectBrief || \"Default\";\nconst projectDeadline = Inputs.deadline || null;\nconst projectClient = Inputs.projectClient || null;\n\n// Initialize an empty array\nlet clips = []\nlet videos = [];\n\n// Check if the inputs are valid and if they are, add them to the array\nif (mainVideoId) videos.push({ \"Video_id\": mainVideoId });\nif (introId) videos.push({ \"id\": introId });\nif (outroId) videos.push({ \"id\": outroId });\n\nconst projectData = {\n  title: projectTitle,\n  brief: projectBrief,\n  deadline: projectDeadline,\n  client: projectClient,\n  hasVideos: videos,\n  hasClips: clips,\n  sharedAccounts: [ { \"Account_id\": Inputs.accountId } ]\n}\n\nOutputs.projectData = projectData;\nOutputs.Success();\n"},"ports":[{"name":"in-mainVideoId","displayName":"mainVideoId","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-introId","displayName":"introId","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-outroId","displayName":"outroId","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-projectTitle","displayName":"projectTitle","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-projectBrief","displayName":"projectBrief","plug":"input","type":"*","group":"Inputs","index":8},{"name":"in-deadline","displayName":"deadline","plug":"input","type":"*","group":"Inputs","index":9},{"name":"in-projectClient","displayName":"projectClient","plug":"input","type":"*","group":"Inputs","index":10},{"name":"in-accountId","displayName":"accountId","plug":"input","type":"*","group":"Inputs","index":11},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":12},{"name":"out-projectData","displayName":"projectData","plug":"output","type":"*","group":"Outputs","index":13}],"children":[]},{"id":"bb5191d6-4c1c-b3c7-b294-408a5d32330c","type":"Expression","parameters":{"expression":"mainId != \"\""},"ports":[],"children":[]},{"id":"f6330609-5321-ca6e-a436-d41199b3acde","type":"RouterNavigate","parameters":{"router":"Main","target":"/#Pages/project"},"ports":[],"children":[]},{"id":"7ddcc7f1-3e09-96dd-9504-661a98972dff","type":"JavaScriptFunction","parameters":{"functionScript":"function getVideoDuration(videoBlob) {\n  return new Promise((resolve, reject) => {\n    const url = URL.createObjectURL(videoBlob);\n    const video = document.createElement('video');\n\n    video.src = url;\n    video.addEventListener('loadedmetadata', () => {\n      resolve(video.duration);\n      URL.revokeObjectURL(url);\n    });\n\n    video.onerror = () => {\n      reject('Failed to load video metadata.');\n    };\n  });\n}\n\nconst videoBlob = Inputs.videoBlob;\n\nif (!videoBlob) return;\n\ngetVideoDuration(videoBlob).then(duration => {\n  Outputs.duration = duration;\n  Outputs.Success();\n}).catch(console.error);\n"},"ports":[{"name":"in-videoBlob","displayName":"videoBlob","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-duration","displayName":"duration","plug":"output","type":"*","group":"Outputs","index":6}],"children":[]},{"id":"8620355e-6cf6-7766-8ee3-ab16466db3be","type":"JavaScriptFunction","parameters":{"functionScript":"const videoObject = Inputs.videoObject;\n\nif (!videoObject) return;\n\nOutputs.videoObject = {\n    ...videoObject,\n    type: \"main\",\n    length: Math.floor(Inputs.length),\n//    sharedAccounts: [ { \"Account_id\": { \"id\": Inputs.accountId } } ]\n    sharedAccounts: [ { \"Account_id\": Inputs.accountId }\n    ]\n}\nOutputs.Success();"},"ports":[{"name":"in-videoObject","displayName":"videoObject","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-length","displayName":"length","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-accountId","displayName":"accountId","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-videoObject","displayName":"videoObject","plug":"output","type":"*","group":"Outputs","index":8}],"children":[]},{"id":"80f87f4d-c42c-9a8b-7c72-3aa0e83d7ac6","type":"Model2","parameters":{"modelId":"Current User","properties":"account"},"ports":[],"children":[]},{"id":"f834d60f-c7f6-8791-c86e-8410d1381e2d","type":"Send Message","parameters":{},"ports":[],"children":[]},{"id":"956dbe13-65c5-2022-2dc3-1b87a9dfb4a2","type":"JavaScriptFunction","parameters":{"functionScript":"const endpoint = Inputs.Endpoint || '';\nif (!endpoint) throw new Error('Invalid endpoint');\n\nconst apiKey = Inputs.ApiKey || '';\nif (!apiKey) throw new Error('Invalid API key');\n\nconst payload = {\n  data1: Inputs.Data1 || '',\n  data2: Inputs.Data2 || '',\n  data3: Inputs.Data3 || '',\n  // Add more data inputs as needed\n};\n\nconst url = `${endpoint}?apikey=${apiKey}`;\n\ntry {\n  const response = await fetch(url, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(payload),\n  });\n\n  if (!response.ok) throw new Error('Response not OK');\n\n  const data = await response.json();\n  Outputs.Response = data;\n  Outputs.Success();\n} catch (error) {\n  Outputs.error = error;\n  Outputs.Failure();\n}\n"},"ports":[{"name":"in-Endpoint","displayName":"Endpoint","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-ApiKey","displayName":"ApiKey","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-Data1","displayName":"Data1","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-Data2","displayName":"Data2","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-Data3","displayName":"Data3","plug":"input","type":"*","group":"Inputs","index":8},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":9},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":10},{"name":"out-Response","displayName":"Response","plug":"output","type":"*","group":"Outputs","index":11},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":12}],"children":[]},{"id":"78ef2bd8-465b-8789-09cd-c53005c26176","type":"Component Outputs","parameters":{},"ports":[],"children":[]}],"connections":[{"sourceId":"f54507de-9789-0e16-6141-07ec54ef7d1a","sourcePort":"close icon clicked","targetId":"b54a0371-df6c-bfc8-bd67-b4f9d3a0f980","targetPort":"close"},{"sourceId":"5013add9-858a-2081-c42c-dc5d7436131b","sourcePort":"record ID","targetId":"d3057152-45f2-c923-dafd-d0abb804e95a","targetPort":"in-mainVideoId"},{"sourceId":"d3057152-45f2-c923-dafd-d0abb804e95a","sourcePort":"out-projectData","targetId":"d13c45e6-10e6-a1a0-055f-2899d4858181","targetPort":"Data"},{"sourceId":"5013add9-858a-2081-c42c-dc5d7436131b","sourcePort":"record ID","targetId":"bb5191d6-4c1c-b3c7-b294-408a5d32330c","targetPort":"mainId"},{"sourceId":"d13c45e6-10e6-a1a0-055f-2899d4858181","sourcePort":"record ID","targetId":"f6330609-5321-ca6e-a436-d41199b3acde","targetPort":"pm-project"},{"sourceId":"d13c45e6-10e6-a1a0-055f-2899d4858181","sourcePort":"Success","targetId":"f6330609-5321-ca6e-a436-d41199b3acde","targetPort":"navigate"},{"sourceId":"e9c68c47-97a1-cf3d-d60b-b2603f56cbcd","sourcePort":"localBlob","targetId":"7ddcc7f1-3e09-96dd-9504-661a98972dff","targetPort":"in-videoBlob"},{"sourceId":"e9c68c47-97a1-cf3d-d60b-b2603f56cbcd","sourcePort":"fileData","targetId":"8620355e-6cf6-7766-8ee3-ab16466db3be","targetPort":"in-videoObject"},{"sourceId":"7ddcc7f1-3e09-96dd-9504-661a98972dff","sourcePort":"out-duration","targetId":"8620355e-6cf6-7766-8ee3-ab16466db3be","targetPort":"in-length"},{"sourceId":"8620355e-6cf6-7766-8ee3-ab16466db3be","sourcePort":"out-videoObject","targetId":"5013add9-858a-2081-c42c-dc5d7436131b","targetPort":"Data"},{"sourceId":"e9c68c47-97a1-cf3d-d60b-b2603f56cbcd","sourcePort":"Success","targetId":"7ddcc7f1-3e09-96dd-9504-661a98972dff","targetPort":"run"},{"sourceId":"7ddcc7f1-3e09-96dd-9504-661a98972dff","sourcePort":"out-Success","targetId":"8620355e-6cf6-7766-8ee3-ab16466db3be","targetPort":"run"},{"sourceId":"8620355e-6cf6-7766-8ee3-ab16466db3be","sourcePort":"out-Success","targetId":"5013add9-858a-2081-c42c-dc5d7436131b","targetPort":"Do"},{"sourceId":"80f87f4d-c42c-9a8b-7c72-3aa0e83d7ac6","sourcePort":"prop-account","targetId":"8620355e-6cf6-7766-8ee3-ab16466db3be","targetPort":"in-accountId"},{"sourceId":"80f87f4d-c42c-9a8b-7c72-3aa0e83d7ac6","sourcePort":"prop-account","targetId":"d3057152-45f2-c923-dafd-d0abb804e95a","targetPort":"in-accountId"},{"sourceId":"5013add9-858a-2081-c42c-dc5d7436131b","sourcePort":"record ID","targetId":"f834d60f-c7f6-8791-c86e-8410d1381e2d","targetPort":"topic"},{"sourceId":"5013add9-858a-2081-c42c-dc5d7436131b","sourcePort":"Success","targetId":"f834d60f-c7f6-8791-c86e-8410d1381e2d","targetPort":"Send"},{"sourceId":"5013add9-858a-2081-c42c-dc5d7436131b","sourcePort":"Success","targetId":"956dbe13-65c5-2022-2dc3-1b87a9dfb4a2","targetPort":"run"}],"ports":[],"roots":["f54507de-9789-0e16-6141-07ec54ef7d1a"]},{"name":"/Global logical components/Append value to object","nodes":[{"id":"ac97dbe7-a621-0efa-7389-f02d214e79e5","type":"JavaScriptFunction","parameters":{"functionScript":"const inputObject = Inputs.InputObject || {};\nconst value = Inputs.value || '';\nconst property = Inputs.property;\n\n// Append 'type' field to the input object\ninputObject[property] = value;\n\n// Output the new object\nOutputs.OutputObject = inputObject;\nOutputs.Success();\n","scriptInputs":[{"id":"gwi3","label":"value"},{"id":"q8m4","label":"property"}],"intype-value":"string","intype-property":"string"},"ports":[{"name":"intype-value","displayName":"Type","editorName":"value | Type","plug":"input","type":{"name":"enum","enums":[{"value":"string","label":"String"},{"value":"boolean","label":"Boolean"},{"value":"number","label":"Number"},{"value":"object","label":"Object"},{"value":"date","label":"Date"},{"value":"array","label":"Array"},{"value":"color","label":"Color"}],"allowEditOnly":true},"default":"string","parent":"scriptInputs","parentItemId":"gwi3","index":4},{"name":"in-value","displayName":"value","plug":"input","type":"string","group":"Inputs","index":5},{"name":"intype-property","displayName":"Type","editorName":"property | Type","plug":"input","type":{"name":"enum","enums":[{"value":"string","label":"String"},{"value":"boolean","label":"Boolean"},{"value":"number","label":"Number"},{"value":"object","label":"Object"},{"value":"date","label":"Date"},{"value":"array","label":"Array"},{"value":"color","label":"Color"}],"allowEditOnly":true},"default":"string","parent":"scriptInputs","parentItemId":"q8m4","index":6},{"name":"in-property","displayName":"property","plug":"input","type":"string","group":"Inputs","index":7},{"name":"in-InputObject","displayName":"InputObject","plug":"input","type":"*","group":"Inputs","index":8},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":9},{"name":"out-OutputObject","displayName":"OutputObject","plug":"output","type":"*","group":"Outputs","index":10}],"children":[]},{"id":"d4100c1f-ed2f-a0c8-f2a4-157bdd3a16e9","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"55812d3f-3786-5104-7bec-289ca7307536","type":"Component Outputs","parameters":{},"ports":[],"children":[]}],"connections":[{"sourceId":"d4100c1f-ed2f-a0c8-f2a4-157bdd3a16e9","sourcePort":"object","targetId":"ac97dbe7-a621-0efa-7389-f02d214e79e5","targetPort":"in-InputObject"},{"sourceId":"d4100c1f-ed2f-a0c8-f2a4-157bdd3a16e9","sourcePort":"property","targetId":"ac97dbe7-a621-0efa-7389-f02d214e79e5","targetPort":"in-property"},{"sourceId":"d4100c1f-ed2f-a0c8-f2a4-157bdd3a16e9","sourcePort":"value","targetId":"ac97dbe7-a621-0efa-7389-f02d214e79e5","targetPort":"in-value"},{"sourceId":"ac97dbe7-a621-0efa-7389-f02d214e79e5","sourcePort":"out-OutputObject","targetId":"55812d3f-3786-5104-7bec-289ca7307536","targetPort":"newObject"},{"sourceId":"d4100c1f-ed2f-a0c8-f2a4-157bdd3a16e9","sourcePort":"Do","targetId":"ac97dbe7-a621-0efa-7389-f02d214e79e5","targetPort":"run"},{"sourceId":"ac97dbe7-a621-0efa-7389-f02d214e79e5","sourcePort":"out-Success","targetId":"55812d3f-3786-5104-7bec-289ca7307536","targetPort":"Success"}],"ports":[{"name":"newObject","type":"*","plug":"output","index":1},{"name":"object","type":"*","group":"Inputs","plug":"input","index":1},{"name":"Success","type":"signal","plug":"output","index":2},{"name":"property","type":"string","group":"Inputs","plug":"input","index":2},{"name":"value","type":"string","group":"Inputs","plug":"input","index":3},{"name":"Do","type":{"name":"signal","allowConnectionsOnly":true},"group":"Actions","plug":"input","index":4}],"roots":[]},{"name":"/Loading Spinner","nodes":[{"id":"a8059560-2324-5e3d-7a7b-33f8d7651218","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"f0828ae2-8b1b-1c80-23ce-d694e84ec047","type":"NavigationShowPopup","parameters":{"target":"/Loading Spinner/Loader Component"},"ports":[],"children":[]},{"id":"bb6ce493-a9a1-2cb6-be97-6c8e84a121a0","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"fcb7744a-9f8a-5556-2814-4b440e418e14","type":"JavaScriptFunction","parameters":{"functionScript":"// Decrease loading spinner running counter\nNoodl.Variables.NumLoadingSpinnerRunning--\n\n// When we reach zero, hide the loading spinner\nif(Noodl.Variables.NumLoadingSpinnerRunning < 1)\n    Noodl.Events.emit(\"Hide loader\");"},"ports":[],"children":[]},{"id":"a0cf88b9-65a2-1c31-0142-791517d23d83","type":"JavaScriptFunction","parameters":{"functionScript":"// If we have multiple show signals sent, only update the\n// running count\nif(Noodl.Variables.NumLoadingSpinnerRunning > 0)\n    Noodl.Variables.NumLoadingSpinnerRunning++\nelse {\n    // If this is the first show signal, show the popup\n    Noodl.Variables.NumLoadingSpinnerRunning = 1\n    Outputs.ShowPopup()\n}"},"ports":[{"name":"out-ShowPopup","displayName":"ShowPopup","plug":"output","type":"signal","group":"Outputs","index":4}],"children":[]}],"connections":[{"sourceId":"f0828ae2-8b1b-1c80-23ce-d694e84ec047","sourcePort":"Closed","targetId":"bb6ce493-a9a1-2cb6-be97-6c8e84a121a0","targetPort":"Done"},{"sourceId":"a8059560-2324-5e3d-7a7b-33f8d7651218","sourcePort":"Hide","targetId":"fcb7744a-9f8a-5556-2814-4b440e418e14","targetPort":"run"},{"sourceId":"a8059560-2324-5e3d-7a7b-33f8d7651218","sourcePort":"Show","targetId":"a0cf88b9-65a2-1c31-0142-791517d23d83","targetPort":"run"},{"sourceId":"a0cf88b9-65a2-1c31-0142-791517d23d83","sourcePort":"out-ShowPopup","targetId":"f0828ae2-8b1b-1c80-23ce-d694e84ec047","targetPort":"show"}],"ports":[{"name":"Done","type":"signal","plug":"output","index":1},{"name":"Show","type":{"name":"signal","allowConnectionsOnly":true},"group":"Actions","plug":"input","index":1},{"name":"Hide","type":{"name":"signal","allowConnectionsOnly":true},"group":"Actions","plug":"input","index":2}],"roots":[]},{"name":"/Loading Spinner/Loader Component","nodes":[{"id":"c1100352-5f22-587e-8078-674c66d571ff","type":"Group","parameters":{"position":"absolute","width":{"value":100,"unit":"vw"},"height":{"value":100,"unit":"vh"},"backgroundColor":"#FFFFFF7F"},"ports":[],"children":[{"id":"ba51f314-c48b-ea92-4f84-1f6c80481315","type":"Image","parameters":{"src":"Rolling-1s-200px.svg","sizeMode":"explicit","position":"absolute","alignX":"center","alignY":"center","width":{"value":100,"unit":"px"},"height":{"value":100,"unit":"px"}},"ports":[],"children":[]}]},{"id":"ad29c5ef-060e-1ab6-db85-4e8cd7e96042","type":"NavigationClosePopup","parameters":{},"ports":[],"children":[]},{"id":"021df3bc-8985-a870-b5da-3d1353398310","type":"JavaScriptFunction","parameters":{"functionScript":"Noodl.Events.on(\"Hide loader\", function () {\n    Outputs.hide();\n});"},"ports":[{"name":"out-hide","displayName":"hide","plug":"output","type":"signal","group":"Outputs","index":4}],"children":[]},{"id":"38ede379-fe78-a83b-859e-b4eccb215349","type":"States","parameters":{"states":"Show,Hide","currentState":"Hide","values":"opacity","value-Show-opacity":1,"value-Hide-opacity":0},"ports":[],"children":[]}],"connections":[{"sourceId":"c1100352-5f22-587e-8078-674c66d571ff","sourcePort":"didMount","targetId":"38ede379-fe78-a83b-859e-b4eccb215349","targetPort":"to-Show"},{"sourceId":"021df3bc-8985-a870-b5da-3d1353398310","sourcePort":"out-hide","targetId":"38ede379-fe78-a83b-859e-b4eccb215349","targetPort":"to-Hide"},{"sourceId":"38ede379-fe78-a83b-859e-b4eccb215349","sourcePort":"reached-Hide","targetId":"ad29c5ef-060e-1ab6-db85-4e8cd7e96042","targetPort":"close"},{"sourceId":"38ede379-fe78-a83b-859e-b4eccb215349","sourcePort":"opacity","targetId":"c1100352-5f22-587e-8078-674c66d571ff","targetPort":"opacity"}],"ports":[],"roots":["c1100352-5f22-587e-8078-674c66d571ff"]},{"name":"/Show Toast/Error","nodes":[{"id":"9f1adbd6-2de4-6876-df61-c68958a914f5","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"fe90b7e2-a336-51c7-f9d8-eab086d2fa1e","type":"Group","parameters":{"sizeMode":"contentWidth","backgroundColor":"White","alignX":"center","alignY":"top","boxShadowEnabled":true,"borderRadius":{"value":4,"unit":"px"},"boxShadowBlurRadius":{"value":4,"unit":"px"},"boxShadowSpreadRadius":{"value":0,"unit":"px"},"boxShadowOffsetY":{"value":2,"unit":"px"},"maxWidth":{"value":380,"unit":"px"},"boxShadowColor":"#00000033","borderWidth":{"value":1,"unit":"px"},"borderColor":"Danger","flexDirection":"row","alignItems":"center","height":{"value":56,"unit":"px"},"borderStyle":"solid","paddingRight":{"value":16,"unit":"px"}},"ports":[],"children":[{"id":"546180d6-130a-5dea-e85e-7aea6d4eb582","type":"Group","parameters":{"width":{"value":56,"unit":"px"},"height":{"value":56,"unit":"px"},"backgroundColor":"#F75A4F3F","alignItems":"center","justifyContent":"center"},"ports":[],"children":[{"id":"c1efaf92-a6b6-24a3-c33f-00136a62efda","type":"net.noodl.visual.icon","parameters":{"iconIconSource":{"class":"material-icons","code":"error"},"iconSize":{"value":24,"unit":"px"},"iconColor":"Danger"},"ports":[],"children":[]}]},{"id":"59f52c0d-0e1f-03e9-5493-00e35b815d76","type":"Text","parameters":{"text":"Some message","color":"Grey - 900","textStyle":"Label Large","marginLeft":{"value":16,"unit":"px"}},"ports":[],"children":[]}]}],"connections":[{"sourceId":"9f1adbd6-2de4-6876-df61-c68958a914f5","sourcePort":"Message","targetId":"59f52c0d-0e1f-03e9-5493-00e35b815d76","targetPort":"text"}],"ports":[{"name":"Message","type":{"name":"string","multiline":true},"default":"Some message","group":"Text","plug":"input","index":1},{"name":"Mounted","type":"*","plug":"input","index":2}],"roots":["fe90b7e2-a336-51c7-f9d8-eab086d2fa1e"]},{"name":"/Show Toast/Normal","nodes":[{"id":"6526d39d-c7ad-1d5d-b080-b65e807268b3","type":"Group","parameters":{"sizeMode":"contentWidth","backgroundColor":"White","alignX":"center","alignY":"top","boxShadowEnabled":true,"borderRadius":{"value":4,"unit":"px"},"boxShadowBlurRadius":{"value":4,"unit":"px"},"boxShadowSpreadRadius":{"value":0,"unit":"px"},"boxShadowOffsetY":{"value":2,"unit":"px"},"maxWidth":{"value":380,"unit":"px"},"boxShadowColor":"#00000026","borderStyle":"solid","borderWidth":{"value":1,"unit":"px"},"borderColor":"Grey - 500","paddingLeft":{"value":24,"unit":"px"},"paddingRight":{"value":24,"unit":"px"},"height":{"value":56,"unit":"px"},"justifyContent":"center"},"ports":[],"children":[{"id":"9f876913-2117-8e25-f754-a3819ba3f30d","type":"Text","parameters":{"text":"Some message","color":"Grey - 900","textStyle":"Label Medium"},"ports":[],"children":[]}]},{"id":"cafa463d-2da7-73eb-41e9-1244a0bc69d3","type":"Component Inputs","parameters":{},"ports":[],"children":[]}],"connections":[{"sourceId":"cafa463d-2da7-73eb-41e9-1244a0bc69d3","sourcePort":"Message","targetId":"9f876913-2117-8e25-f754-a3819ba3f30d","targetPort":"text"}],"ports":[{"name":"Message","type":{"name":"string","multiline":true},"default":"Some message","group":"Text","plug":"input","index":1},{"name":"Mounted","type":"*","plug":"input","index":2}],"roots":["6526d39d-c7ad-1d5d-b080-b65e807268b3"]},{"name":"/Show Toast/Success","nodes":[{"id":"061a6d75-f19c-3c4c-fc32-7bf3ec96718b","type":"Group","parameters":{"sizeMode":"contentWidth","backgroundColor":"White","alignX":"center","alignY":"top","boxShadowEnabled":true,"borderRadius":{"value":4,"unit":"px"},"boxShadowBlurRadius":{"value":4,"unit":"px"},"boxShadowSpreadRadius":{"value":0,"unit":"px"},"boxShadowOffsetY":{"value":2,"unit":"px"},"maxWidth":{"value":380,"unit":"px"},"boxShadowColor":"#00000019","borderWidth":{"value":1,"unit":"px"},"borderColor":"Success","flexDirection":"row","alignItems":"center","height":{"value":56,"unit":"px"},"borderStyle":"solid","paddingRight":{"value":16,"unit":"px"}},"ports":[],"children":[{"id":"3d7c2111-8e09-9eec-29f1-7f8d82873c60","type":"Group","parameters":{"width":{"value":56,"unit":"px"},"height":{"value":56,"unit":"px"},"backgroundColor":"#49AD7F3F","alignItems":"center","justifyContent":"center"},"ports":[],"children":[{"id":"8f2f3718-da44-7aaa-4549-763d08c7c7db","type":"net.noodl.visual.icon","parameters":{"iconIconSource":{"class":"material-icons","code":"check_circle"},"iconSize":{"value":24,"unit":"px"},"iconColor":"Success"},"ports":[],"children":[]}]},{"id":"08c55f80-6c37-4b1c-5176-d75a1ba1e62e","type":"Text","parameters":{"text":"Some message","color":"Grey - 900","textStyle":"Label Large","marginLeft":{"value":16,"unit":"px"}},"ports":[],"children":[]}]},{"id":"11b96af8-f4ab-ba4d-95d8-8ca17e425569","type":"Component Inputs","parameters":{},"ports":[],"children":[]}],"connections":[{"sourceId":"11b96af8-f4ab-ba4d-95d8-8ca17e425569","sourcePort":"Message","targetId":"08c55f80-6c37-4b1c-5176-d75a1ba1e62e","targetPort":"text"}],"ports":[{"name":"Message","type":{"name":"string","multiline":true},"default":"Some message","group":"Text","plug":"input","index":1},{"name":"Mounted","type":"*","plug":"input","index":2}],"roots":["061a6d75-f19c-3c4c-fc32-7bf3ec96718b"]},{"name":"/Show Toast/Warning","nodes":[{"id":"8f56b260-a51e-c11d-a2b5-3ed3b0461ff7","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"20a46ab6-fb14-aa64-33d6-4bf096db3e81","type":"Group","parameters":{"sizeMode":"contentWidth","backgroundColor":"White","alignX":"center","alignY":"top","boxShadowEnabled":true,"borderRadius":{"value":4,"unit":"px"},"boxShadowBlurRadius":{"value":4,"unit":"px"},"boxShadowSpreadRadius":{"value":0,"unit":"px"},"boxShadowOffsetY":{"value":2,"unit":"px"},"maxWidth":{"value":380,"unit":"px"},"boxShadowColor":"#00000033","borderWidth":{"value":1,"unit":"px"},"borderColor":"Notice","flexDirection":"row","alignItems":"center","height":{"value":56,"unit":"px"},"borderStyle":"solid","paddingRight":{"value":16,"unit":"px"}},"ports":[],"children":[{"id":"f8d8c0aa-6831-b1d5-5c11-bd371863cfde","type":"Group","parameters":{"width":{"value":56,"unit":"px"},"height":{"value":56,"unit":"px"},"backgroundColor":"#F2C4413F","alignItems":"center","justifyContent":"center"},"ports":[],"children":[{"id":"40ae3ecd-b047-34cc-2c46-3a81dba213ee","type":"net.noodl.visual.icon","parameters":{"iconIconSource":{"class":"material-icons","code":"warning"},"iconSize":{"value":24,"unit":"px"},"iconColor":"Notice"},"ports":[],"children":[]}]},{"id":"76f6b8b1-7043-4e72-98c9-d6905f4d8bc3","type":"Text","parameters":{"text":"Some message","color":"Grey - 900","textStyle":"Label Large","marginLeft":{"value":16,"unit":"px"}},"ports":[],"children":[]}]}],"connections":[{"sourceId":"8f56b260-a51e-c11d-a2b5-3ed3b0461ff7","sourcePort":"Message","targetId":"76f6b8b1-7043-4e72-98c9-d6905f4d8bc3","targetPort":"text"}],"ports":[{"name":"Message","type":{"name":"string","multiline":true},"default":"Some message","group":"Text","plug":"input","index":1},{"name":"Mounted","type":"*","plug":"input","index":2}],"roots":["20a46ab6-fb14-aa64-33d6-4bf096db3e81"]}]